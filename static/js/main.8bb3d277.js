!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/GDL003-lab-notes/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){n(62),e.exports=n(35)},function(e,t,n){"use strict";function r(e){function t(e){var t=c[e];a(t,"delete"),delete c[e]}function n(e){if(e=e||h,!s.contains(c,e))throw l.create("no-app",{appName:e});return c[e]}function r(t,n){if(void 0===n&&(n={}),"object"!=typeof n||null===n){var r=n;n={name:r}}var i=n;void 0===i.name&&(i.name=h);var o=i.name;if("string"!=typeof o||!o)throw l.create("bad-app-name",{appName:String(o)});if(s.contains(c,o))throw l.create("duplicate-app",{appName:o});var u=new e(t,i,g);return c[o]=u,a(u,"create"),u}function i(){return Object.keys(c).map(function(e){return c[e]})}function o(t,r,o,a,u){function c(e){if(void 0===e&&(e=n()),"function"!=typeof e[t])throw l.create("invalid-app-argument",{appName:t});return e[t]()}return void 0===u&&(u=!1),f[t]?(m.debug("There were multiple attempts to register service "+t+"."),g[t]):(f[t]=r,a&&(d[t]=a,i().forEach(function(e){a("create",e)})),void 0!==o&&s.deepExtend(c,o),g[t]=c,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,u?e:[])},c)}function a(e,t){for(var n=0,r=Object.keys(f);n<r.length;n++){var i=r[n],o=u(e,i);if(null===o)return;d[o]&&d[o](t,e)}}function u(e,t){if("serverAuth"===t)return null;var n=t;return n}var c={},f={},d={},g={__esModule:!0,initializeApp:r,app:n,apps:null,SDK_VERSION:p,INTERNAL:{registerService:o,removeApp:t,factories:f,useAsService:u}};return g.default=g,Object.defineProperty(g,"apps",{get:i}),n.App=e,g}function i(){function e(e){s.deepExtend(t,e)}var t=r(d);return t.INTERNAL=a.__assign({},t.INTERNAL,{createFirebaseNamespace:i,extendNamespace:e,createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),t}Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(3),s=n(4),u=n(6),c=(o={},o["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",o["bad-app-name"]="Illegal App name: '{$appName}",o["duplicate-app"]="Firebase App named '{$appName}' already exists",o["app-deleted"]="Firebase App named '{$appName}' already deleted",o["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",o),l=new s.ErrorFactory("app","Firebase",c),h="[DEFAULT]",f=[],d=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){f.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){f=f.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(e.services_[i]);o<a.length;o++){var s=a[o];t.push(e.services_[i][s])}return Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=h),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==h?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=h),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;s.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(f.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),f=[])},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p="6.4.1",m=new u.Logger("@firebase/app");if(s.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=i(),v=y.initializeApp;y.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),v.apply(void 0,e)};var b=y;t.default=b,t.firebase=b},function(e,t,n){"use strict";e.exports=n(63)},function(e,t,n){var r,i;(function(n){var o,a,s,u,c,l,h,f,d,p,m,g,y,v,b,w,_,E,S,T;!function(o){function a(e,t){return e!==s&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}var s="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:{};r=[t],i=function(e){o(a(s,a(e)))}.apply(t,r),!(void 0!==i&&(e.exports=i))}(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};o=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},u=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){return function(n,r){t(n,r,e)}},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},f=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},d=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},p=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},m=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},g=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e},y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},v=function(e){return this instanceof v?(this.v=e,this):new v(e)},b=function(e,t,n){function r(e){l[e]&&(c[e]=function(t){return new Promise(function(n,r){h.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{o(l[e](t))}catch(e){u(h[0][3],e)}}function o(e){e.value instanceof v?Promise.resolve(e.value.v).then(a,s):u(h[0][2],e)}function a(e){i("next",e)}function s(e){i("throw",e)}function u(e,t){e(t),h.shift(),h.length&&i(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(e,t||[]),h=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c},w=function(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:v(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},_=function(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(i,o){r=e[t](r),n(i,o,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof p?p(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)},E=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},T=function(e){return e&&e.__esModule?e:{default:e}},e("__extends",o),e("__assign",a),e("__rest",s),e("__decorate",u),e("__param",c),e("__metadata",l),e("__awaiter",h),e("__generator",f),e("__exportStar",d),e("__values",p),e("__read",m),e("__spread",g),e("__spreadArrays",y),e("__await",v),e("__asyncGenerator",b),e("__asyncDelegator",w),e("__asyncValues",_),e("__makeTemplateObject",E),e("__importStar",S),e("__importDefault",T)})}).call(t,function(){return this}())},function(e,t,n){(function(e){"use strict";function r(e){return i(void 0,e)}function i(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=i(e[r],t[r]));return e}function o(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function a(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(o())}function s(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function u(){return"object"==typeof self&&self.self===self}function c(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function l(){return A.NODE_CLIENT===!0||A.NODE_ADMIN===!0}function h(e,t){return e.replace(V,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}function f(e){return JSON.parse(e)}function d(e){return JSON.stringify(e)}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function g(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function y(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function v(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n(a,s)}return t.length?"&"+t.join("&"):""}function b(e){var t={},n=e.replace(/^\?/,"").split("&");return n.forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t}function w(e,t){var n=new H(e,t);return n.subscribe.bind(n)}function _(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function E(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}function S(){}function T(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function C(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(T(e,t,r)+"must be a valid firebase namespace.")}function I(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(T(e,t,r)+"must be a valid function.")}function k(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(T(e,t,r)+"must be a valid context object.")}Object.defineProperty(t,"__esModule",{value:!0});var N=n(3),A={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},D=function(e,t){if(!e)throw x(t)},x=function(e){return new Error("Firebase Database ("+A.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},R=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},P=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=e[n++],a=e[n++],s=e[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{var o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):P(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i;var u=i<e.length,c=u?n[e.charAt(i)]:64;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!==c){var d=s<<4&240|c>>2;if(r.push(d),64!==h){var p=c<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},M=function(e){var t=R(e);return O.encodeByteArray(t,!0)},L=function(e){try{return O.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},F=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}(),U="FirebaseError",B=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=U,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,q.prototype.create),i}return N.__extends(t,e),t}(Error),q=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?h(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new B(i,s),c=0,l=Object.keys(r);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in u&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),u[f]=r[f])}return u},e}(),V=/\{\$([^}]+)}/g,j=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=f(L(o[0])||""),n=f(L(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},W=function(e){var t=j(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},K=function(e){var t=j(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},Q=function(e){var t=j(e),n=t.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},G=function(e){var t=j(e).claims;return"object"==typeof t&&t.admin===!0},z=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);var i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),H=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=E(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}(),Y=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){var o=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},X=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,D(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},J=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};t.CONSTANTS=A,t.Deferred=F,t.ErrorFactory=q,t.FirebaseError=B,t.Sha1=z,t.assert=D,t.assertionError=x,t.async=_,t.base64=O,t.base64Decode=L,t.base64Encode=M,t.contains=p,t.createSubscribe=w,t.decode=j,t.deepCopy=r,t.deepExtend=i,t.errorPrefix=T,t.getUA=o,t.isAdmin=G,t.isBrowser=u,t.isEmpty=g,t.isMobileCordova=a,t.isNode=s,t.isNodeSdk=l,t.isReactNative=c,t.isValidFormat=Q,t.isValidTimestamp=W,t.issuedAtTime=K,t.jsonEval=f,t.map=y,t.querystring=v,t.querystringDecode=b,t.safeGet=m,t.stringLength=J,t.stringToByteArray=X,t.stringify=d,t.validateArgCount=Y,t.validateCallback=I,t.validateContextObject=k,t.validateNamespace=C}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(n(1));e.exports=i},function(e,t){"use strict";function n(e){r.forEach(function(t){t.logLevel=e})}Object.defineProperty(t,"__esModule",{value:!0});var r=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(t.LogLevel||(t.LogLevel={}));var i=t.LogLevel.INFO,o=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(n<e.logLevel)){var o=(new Date).toISOString();switch(n){case t.LogLevel.DEBUG:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case t.LogLevel.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case t.LogLevel.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case t.LogLevel.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case t.LogLevel.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+n+")")}}},a=function(){function e(e){this.name=e,this._logLevel=i,this._logHandler=o,r.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in t.LogLevel))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logHandler.apply(this,[this,t.LogLevel.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logHandler.apply(this,[this,t.LogLevel.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logHandler.apply(this,[this,t.LogLevel.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logHandler.apply(this,[this,t.LogLevel.WARN].concat(e))},e.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logHandler.apply(this,[this,t.LogLevel.ERROR].concat(e))},e}();t.Logger=a,t.setLogLevel=n},function(e,t,n){"use strict";function r(e,t){if(!i){if(e)return;var n="Warning: "+t;"undefined"!=typeof console&&console.warn(n);try{throw Error(n)}catch(e){}}}var i=!0;e.exports=r},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,s,u=n(e),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)o.call(r,l)&&(u[l]=r[l]);if(i){s=i(r);for(var h=0;h<s.length;h++)a.call(r,s[h])&&(u[s[h]]=r[s[h]])}}return u}},function(e,t,n){e.exports=n(51)()},function(e,t,n){"use strict";function r(e,t){if(!e)throw i?new Error(o):new Error(o+": "+(t||""))}var i=!0,o="Invariant failed";e.exports=r},function(e,t,n){(function(e){(function(){function t(e,t){if(t){var n=ac;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&oc(n,e,{configurable:!0,writable:!0,value:t})}}function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function o(e){return"string"==typeof e}function a(e){return"boolean"==typeof e}function s(){}function u(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function c(e){return null===e}function l(e){return"array"==u(e)}function h(e){var t=u(e);return"array"==t||"object"==t&&"number"==typeof e.length}function f(e){return"function"==u(e)}function d(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function p(e,t,n){return e.call.apply(e.bind,arguments)}function m(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function g(e,t,n){return g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:m,g.apply(null,arguments)}function y(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function v(e,t){function n(){}n.prototype=t.prototype,e.mb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ad=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function b(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function w(e){if(Error.captureStackTrace)Error.captureStackTrace(this,w);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function _(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");w.call(this,n+e[r])}function E(e,t){throw new _("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function S(e,t){
this.c=e,this.f=t,this.b=0,this.a=null}function T(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function C(){this.b=this.a=null}function I(){var e=Kc,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function k(){this.next=this.b=this.a=null}function N(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||uc,r.Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(d(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;E("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function A(e,t){for(var n=o(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}function D(e){e:{for(var t=hi,n=e.length,r=o(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:o(e)?e.charAt(t):e[t]}function x(e,t){return 0<=mc(e,t)}function R(e,t){t=mc(e,t);var n;return(n=0<=t)&&Array.prototype.splice.call(e,t,1),n}function P(e,t){var n=0;A(e,function(r,i){t.call(void 0,r,i,e)&&1==Array.prototype.splice.call(e,i,1).length&&n++})}function O(e){return Array.prototype.concat.apply([],arguments)}function M(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function L(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function F(e){for(var t in e)return!1;return!0}function U(e){var t,n={};for(t in e)n[t]=e[t];return n}function B(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<bc.length;o++)n=bc[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function q(e,t){this.a=e===_c&&t||"",this.b=wc}function V(e){return e instanceof q&&e.constructor===q&&e.b===wc?e.a:(E("expected object of type Const, got '"+e+"'"),"type_error:Const")}function j(){this.a="",this.b=Cc}function W(e){return e instanceof j&&e.constructor===j&&e.b===Cc?e.a:(E("expected object of type TrustedResourceUrl, got '"+e+"' of type "+u(e)),"type_error:TrustedResourceUrl")}function K(e,t){var n=V(e);if(!Tc.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(Sc,function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return e=t[r],e instanceof q?V(e):encodeURIComponent(String(e))}),Q(e)}function Q(e){var t=new j;return t.a=e,t}function G(e,t){return-1!=e.indexOf(t)}function z(e,t){return e<t?-1:e>t?1:0}function H(){this.a="",this.b=Mc}function Y(e){return e instanceof H&&e.constructor===H&&e.b===Mc?e.a:(E("expected object of type SafeUrl, got '"+e+"' of type "+u(e)),"type_error:SafeUrl")}function X(e){return e instanceof H?e:(e="object"==typeof e&&e.na?e.ma():String(e),Oc.test(e)||(e="about:invalid#zClosurez"),J(e))}function J(e){var t=new H;return t.a=e,t}function $(e){return G(Lc,e)}function Z(){this.a="",this.b=Bc}function ee(e){return e instanceof Z&&e.constructor===Z&&e.b===Bc?e.a:(E("expected object of type SafeHtml, got '"+e+"' of type "+u(e)),"type_error:SafeHtml")}function te(e){var t=new Z;return t.a=e,t}function ne(e){var t=Q(V(Ec));N(e,"HTMLIFrameElement"),e.src=W(t).toString()}function re(e,t){N(e,"HTMLScriptElement"),e.src=W(t),null===lc&&(t=uc.document,lc=(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&cc.test(t)?t:""),t=lc,t&&e.setAttribute("nonce",t)}function ie(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function oe(e){return Pc.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(kc,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(Nc,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(Ac,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(Dc,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(xc,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(Rc,"&#0;"))),e}function ae(e){uc.setTimeout(function(){throw e},0)}function se(){var e=uc.MessageChannel;if("undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!$("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",ne(e),document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.write(ee(qc)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=g(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!=typeof e&&!$("Trident")&&!$("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.ub;n.ub=null,e()}},function(e){r.next={ub:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){uc.setTimeout(e,0)}}function ue(e,t){jc||ce(),Wc||(jc(),Wc=!0),Kc.add(e,t)}function ce(){if(uc.Promise&&uc.Promise.resolve){var e=uc.Promise.resolve(void 0);jc=function(){e.then(le)}}else jc=function(){var e=le;!f(uc.setImmediate)||uc.Window&&uc.Window.prototype&&!$("Edge")&&uc.Window.prototype.setImmediate==uc.setImmediate?(Vc||(Vc=se()),Vc(e)):uc.setImmediate(e)}}function le(){for(var e;e=I();){try{e.a.call(e.b)}catch(e){ae(e)}T(pc,e)}Wc=!1}function he(e,t){if(this.a=Qc,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=s)try{var n=this;e.call(t,function(e){Ee(n,Gc,e)},function(e){if(!(e instanceof De))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}Ee(n,zc,e)})}catch(e){Ee(this,zc,e)}}function fe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function de(e,t,n){var r=Hc.get();return r.g=e,r.b=t,r.f=n,r}function pe(e){if(e instanceof he)return e;var t=new he(s);return Ee(t,Gc,e),t}function me(e){return new he(function(t,n){n(e)})}function ge(e,t,n){Se(e,t,n,null)||ue(y(t,e))}function ye(e){return new he(function(t,n){var r=e.length,i=[];if(r)for(var o,a=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},u=0;u<e.length;u++)o=e[u],ge(o,y(a,u),s);else t(i)})}function ve(e){return new he(function(t){var n=e.length,r=[];if(n)for(var i,o=function(e,i,o){n--,r[e]=i?{Cb:!0,value:o}:{Cb:!1,reason:o},0==n&&t(r)},a=0;a<e.length;a++)i=e[a],ge(i,y(o,a,!0),y(o,a,!1));else t(r)})}function be(e,t){if(e.a==Qc)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Qc&&1==r?be(n,t):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Ie(n),ke(n,i,zc,t)))}e.c=null}else Ee(e,zc,t)}function we(e,t){e.b||e.a!=Gc&&e.a!=zc||Ce(e),e.f?e.f.next=t:e.b=t,e.f=t}function _e(e,t,n,r){var i=de(null,null,null);return i.a=new he(function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof De?o(t):e(i)}catch(e){o(e)}}:o}),i.a.c=e,we(e,i),i.a}function Ee(e,t,n){e.a==Qc&&(e===n&&(t=zc,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Se(n,e.Jc,e.Kc,e)||(e.i=n,e.a=t,e.c=null,Ce(e),t!=zc||n instanceof De||Ae(e,n)))}function Se(e,t,n,r){if(e instanceof he)return we(e,de(t||s,n||null,r)),!0;if(b(e))return e.then(t,n,r),!0;if(d(e))try{var i=e.then;if(f(i))return Te(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function Te(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(e){o(e)}}function Ce(e){e.h||(e.h=!0,ue(e.Ub,e))}function Ie(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ke(e,t,n,r){if(n==zc&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ne(t,n,r);else try{t.c?t.g.call(t.f):Ne(t,n,r)}catch(e){Yc.call(null,e)}T(Hc,t)}function Ne(e,t,n){t==Gc?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function Ae(e,t){e.g=!0,ue(function(){e.g&&Yc.call(null,t)})}function De(e){w.call(this,e)}function xe(){0!=Xc&&(Jc[this[hc]||(this[hc]=++fc)]=this),this.qa=this.qa,this.ia=this.ia}function Re(e){if(!e.qa&&(e.qa=!0,e.va(),0!=Xc)){var t=e[hc]||(e[hc]=++fc);if(0!=Xc&&e.ia&&0<e.ia.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Jc[t]}}function Pe(e){return Pe[" "](e),e}function Oe(e,t){var n=cl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function Me(){var e=uc.document;return e?e.documentMode:void 0}function Le(e){return Oe(e,function(){for(var t=0,n=Ic(String($c)).split("."),r=Ic(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=z(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||z(0==a[2].length,0==s[2].length)||z(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function Fe(e,t){this.type=e,this.b=this.target=t,this.Ib=!0}function Ue(e,t){if(Fe.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(rl){e:{try{Pe(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=o(e.pointerType)?e.pointerType:pl[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}function Be(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.La=i,this.key=++gl,this.oa=this.Ga=!1}function qe(e){e.oa=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function Ve(e){this.src=e,this.a={},this.b=0}function je(e,t){var n=t.type;n in e.a&&R(e.a[n],t)&&(qe(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function We(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.oa&&o.listener==t&&o.capture==!!n&&o.La==r)return i}return-1}function Ke(e,t,n,r,i){if(r&&r.once)ze(e,t,n,r,i);else if(l(t))for(var o=0;o<t.length;o++)Ke(e,t[o],n,r,i);else n=tt(n),e&&e[ml]?rt(e,t,n,d(r)?!!r.capture:!!r,i):Qe(e,t,n,!1,r,i)}function Qe(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=et(e);if(s||(e[yl]=s=new Ve(e)),n=s.add(t,n,r,a,o),!n.proxy){if(r=Ge(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dl||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Xe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}bl++}}function Ge(){var e=Ze,t=hl?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function ze(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)ze(e,t[o],n,r,i);else n=tt(n),e&&e[ml]?it(e,t,n,d(r)?!!r.capture:!!r,i):Qe(e,t,n,!0,r,i)}function He(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)He(e,t[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=tt(n),e&&e[ml]?(e=e.m,t=String(t).toString(),t in e.a&&(o=e.a[t],n=We(o,n,r,i),-1<n&&(qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=et(e))&&(t=e.a[t.toString()],e=-1,t&&(e=We(t,n,r,i)),(n=-1<e?t[e]:null)&&Ye(n))}function Ye(e){if("number"!=typeof e&&e&&!e.oa){var t=e.src;if(t&&t[ml])je(t.m,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Xe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),bl--,(n=et(t))?(je(n,e),0==n.b&&(n.src=null,t[yl]=null)):qe(e)}}}function Xe(e){return e in vl?vl[e]:vl[e]="on"+e}function Je(e,t,n,r){var i=!0;if((e=et(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.oa&&(o=$e(o,r),i=i&&!1!==o)}return i}function $e(e,t){var n=e.listener,r=e.La||e.src;return e.Ga&&Ye(e),n.call(r,t)}function Ze(e,t){if(e.oa)return!0;if(!hl){if(!t)e:{t=["window","event"];for(var n=uc,r=0;r<t.length;r++)if(n=n[t[r]],null==n){t=null;break e}t=n}if(r=t,t=new Ue(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Je(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Je(r[i],e,!1,t),n=n&&o}return n}return $e(e,new Ue(t,this))}function et(e){return e=e[yl],e instanceof Ve?e:null}function tt(e){return f(e)?e:(e[wl]||(e[wl]=function(t){return e.handleEvent(t)}),e[wl])}function nt(){xe.call(this),this.m=new Ve(this),this.Nb=this,this.Ua=null}function rt(e,t,n,r,i){e.m.add(String(t),n,!1,r,i)}function it(e,t,n,r,i){e.m.add(String(t),n,!0,r,i)}function ot(e,t,n,r){if(t=e.m.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ga&&je(e.m,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ib}function at(e,t,n){if(f(e))n&&(e=g(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=g(e.handleEvent,e)}return 2147483647<Number(t)?-1:uc.setTimeout(e,t||0)}function st(e){var t=null;return new he(function(n,r){t=at(function(){n(void 0)},e),-1==t&&r(Error("Failed to schedule timer."))}).s(function(e){throw uc.clearTimeout(t),e})}function ut(e){if(e.S&&"function"==typeof e.S)return e.S();if(o(e))return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function ct(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(h(e)||o(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(var r in e)t[n++]=r;return t}}function lt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||o(e))gc(e,t,void 0);else for(var n=ct(e),r=ut(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}function ht(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ht)for(n=e.U(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ft(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];dt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],dt(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function mt(e,t){this.b=this.i=this.f="",this.m=null,this.g=this.c="",this.h=!1;var n;e instanceof mt?(this.h=void 0!==t?t:e.h,gt(this,e.f),this.i=e.i,this.b=e.b,yt(this,e.m),this.c=e.c,vt(this,Rt(e.a)),this.g=e.g):e&&(n=String(e).match(_l))?(this.h=!!t,gt(this,n[1]||"",!0),this.i=St(n[2]||""),this.b=St(n[3]||"",!0),yt(this,n[4]),this.c=St(n[5]||"",!0),vt(this,n[6]||"",!0),this.g=St(n[7]||"")):(this.h=!!t,this.a=new It(null,this.h))}function gt(e,t,n){e.f=n?St(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function vt(e,t,n){t instanceof It?(e.a=t,Ot(e.a,e.h)):(n||(t=Tt(t,Cl)),e.a=new It(t,e.h))}function bt(e,t,n){e.a.set(t,n)}function wt(e,t){return e.a.get(t)}function _t(e){return e instanceof mt?new mt(e):new mt(e,void 0)}function Et(e,t){var n=new mt(null,void 0);return gt(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Tt(e,t,n){return o(e)?(e=encodeURI(e).replace(t,Ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ct(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function It(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function kt(e){e.a||(e.a=new ht,e.b=0,e.c&&pt(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Nt(e){var t=ct(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new It(null,void 0);e=ut(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];l(o)?xt(n,i,o):n.add(i,o)}return n}function At(e,t){kt(e),t=Pt(e,t),dt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,dt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&ft(e)))}function Dt(e,t){return kt(e),t=Pt(e,t),dt(e.a.b,t)}function xt(e,t,n){At(e,t),0<n.length&&(e.c=null,e.a.set(Pt(e,t),M(n)),e.b+=n.length)}function Rt(e){var t=new It;return t.c=e.c,e.a&&(t.a=new ht(e.a),t.b=e.b),t}function Pt(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Ot(e,t){t&&!e.f&&(kt(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(At(this,t),xt(this,n,e))},e)),e.f=t}function Mt(e){var t=document;return o(e)?t.getElementById(e):e}function Lt(e,t){L(t,function(t,n){t&&"object"==typeof t&&t.na&&(t=t.ma()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Nl.hasOwnProperty(n)?e.setAttribute(Nl[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}function Ft(e,t,n){var r=arguments,i=document,a=String(r[0]),s=r[1];if(!kl&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',oe(s.name),'"'),s.type){a.push(' type="',oe(s.type),'"');var u={};B(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=i.createElement(a),s&&(o(s)?a.className=s:l(s)?a.className=s.join(" "):Lt(a,s)),2<r.length&&Ut(i,a,r),a}function Ut(e,t,n){function r(n){n&&t.appendChild(o(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i];!h(a)||d(a)&&0<a.nodeType?r(a):gc(Bt(a)?M(a):a,r)}}function Bt(e){if(e&&"number"==typeof e.length){if(d(e))return"function"==typeof e.item||"string"==typeof e.item;if(f(e))return"function"==typeof e.item}return!1}function qt(e){var t=[];return jt(new Vt,e,t),t.join("")}function Vt(){}function jt(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(l(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),jt(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{"),i="";for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o=t[r],"function"!=typeof o&&(n.push(i),Wt(r,n),n.push(":"),jt(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Wt(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}function Wt(e,t){t.push('"',e.replace(Dl,function(e){var t=Al[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Al[e]=t),t}),'"')}function Kt(){var e=ln();return el&&!!ul&&11==ul||/Edge\/\d+/.test(e)}function Qt(){return uc.window&&uc.window.location.href||self&&self.location&&self.location.href||""}function Gt(e,t){t=t||uc.window;var n="about:blank";e&&(n=Y(X(e)).toString()),t.location.href=n}function zt(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<zt(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function Ht(){var e=ln();return e=un(e)!=Ol?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null,!(e&&30>e)&&(!el||!ul||9<ul)}function Yt(e){return e=(e||ln()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Xt(e){e=e||uc.window;try{e.close()}catch(e){}}function Jt(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ln().toLowerCase(),r&&(t.target=r,G(n,"crios/")&&(t.target="_blank")),un(ln())==Pl&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof H?n:X("undefined"!=typeof n.href?n.href:String(n)),n=e.target||n.target,i=[];for(a in e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if(($("iPhone")&&!$("iPod")&&!$("iPad")||$("iPad")||$("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),N(a,"HTMLAnchorElement"),t instanceof H||t instanceof H||(t="object"==typeof t&&t.na?t.ma():String(t),Oc.test(t)||(t="about:invalid#zClosurez"),t=J(t)),a.href=Y(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=Y(t).toString(),a&&(nl&&G(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=te('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+oe(e)+'">'),a.document.write(ee(e)),a.document.close())):(a=r.open(Y(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}function $t(e){return new he(function(t){function n(){st(2e3).then(function(){return e&&!e.closed?n():void t()})}return n()})}function Zt(){var e=null;return new he(function(t){"complete"==uc.document.readyState?t():(e=function(){t()},ze(window,"load",e))}).s(function(t){throw He(window,"load",e),t})}function en(){return tn(void 0)?Zt().then(function(){return new he(function(e,t){var n=uc.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):me(Error("Cordova must run in an Android or iOS file scheme."))}function tn(e){return e=e||ln(),!("file:"!==mn()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function nn(){var e=uc.window;try{return!(!e||e==e.top)}catch(e){return!1}}function rn(){return"undefined"!=typeof uc.WorkerGlobalScope&&"function"==typeof uc.importScripts}function on(){return ic.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ic.INTERNAL.hasOwnProperty("node")?"Node":rn()?"Worker":"Browser"}function an(){var e=on();return"ReactNative"===e||"Node"===e}function sn(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function un(e){var t=e.toLowerCase();return G(t,"opera/")||G(t,"opr/")||G(t,"opios/")?"Opera":G(t,"iemobile")?"IEMobile":G(t,"msie")||G(t,"trident/")?"IE":G(t,"edge/")?"Edge":G(t,"firefox/")?Pl:G(t,"silk/")?"Silk":G(t,"blackberry")?"Blackberry":G(t,"webos")?"Webos":!G(t,"safari/")||G(t,"chrome/")||G(t,"crios/")||G(t,"android")?!G(t,"chrome/")&&!G(t,"crios/")||G(t,"edge/")?G(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Ol:"Safari"}function cn(e,t){t=t||[];var n,r=[],i={};for(n in Ml)i[Ml[n]]=!0;for(n=0;n<t.length;n++)"undefined"!=typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),t=r,t.length||(t=["FirebaseCore-web"]),r=on(),"Browser"===r?(i=ln(),r=un(i)):"Worker"===r&&(i=ln(),r=un(i)+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function ln(){return uc.navigator&&uc.navigator.userAgent||""}function hn(e,t){e=e.split("."),t=t||uc;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function fn(){try{var e=uc.localStorage,t=wn();if(e)return e.setItem(t,"1"),e.removeItem(t),!Kt()||!!uc.indexedDB}catch(e){return rn()&&!!uc.indexedDB}return!1}function dn(){return(pn()||"chrome-extension:"===mn()||tn())&&!an()&&fn()&&!rn()}function pn(){return"http:"===mn()||"https:"===mn()}function mn(){return uc.location&&uc.location.protocol||null}function gn(e){return e=e||ln(),!Yt(e)&&un(e)!=Pl}function yn(e){return"undefined"==typeof e?null:qt(e)}function vn(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function bn(e){if(null!==e)return JSON.parse(e)}function wn(e){return e?e:Math.floor(1e9*Math.random()).toString()}function _n(e){return e=e||ln(),"Safari"!=un(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function En(){var e=uc.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Sn(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=ln(),t=on(),this.b=Yt(e)||"ReactNative"===t}function Tn(){var e=uc.document;return!e||"undefined"==typeof e.visibilityState||"visible"==e.visibilityState}function Cn(){var e=uc.document,t=null;return Tn()||!e?pe():new he(function(n){t=function(){Tn()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).s(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})}function In(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function kn(){return!(!hn("fireauth.oauthhelper",uc)&&!hn("fireauth.iframe",uc))}function Nn(){var e=uc.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function An(){var e=uc.navigator;return e&&e.serviceWorker?pe().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):pe(null)}function Dn(e){Fl[e]||(Fl[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}function xn(e,t,n){Ll?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Rn(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&xn(e,n,t[n])}function Pn(e){var t={};return Rn(t,e),t}function On(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Mn(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Ln(e){var t=e;if("object"==typeof e&&null!=e){t="length"in e?[]:{};for(var n in e)xn(t,n,Ln(e[n]))}return t}function Fn(e){var t={},n=e[ql],r=e[Vl];if(e=e[jl],!e||e!=Bl&&!n)throw Error("Invalid provider user info!");t[Kl]=r||null,t[Wl]=n||null,xn(this,Gl,e),xn(this,Ql,Ln(t))}function Un(e,t){this.code=zl+e,this.message=t||Hl[e]||""}function Bn(e){var t=e&&e.code;return t?new Un(t.substring(zl.length),e.message):null}function qn(e){var t=e[Zl];if("undefined"==typeof t)throw new Un("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Un("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Yl];if(n&&"object"==typeof n){t=n[nh];var r=n[eh];if(n=n[th],"string"==typeof t&&t.length){if(this.a=t,"undefined"!=typeof r&&"boolean"!=typeof r)throw new Un("argument-error",eh+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!=typeof n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Un("argument-error",th+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!=typeof t)throw new Un("argument-error",nh+" property must be a non empty string when specified.");if("undefined"!=typeof r||"undefined"!=typeof n)throw new Un("missing-android-pkg-name")}}else if("undefined"!=typeof n)throw new Un("argument-error",Yl+" property must be a non null object when specified.");if(this.f=null,(t=e[$l])&&"object"==typeof t){if(t=t[rh],"string"==typeof t&&t.length)this.f=t;else if("undefined"!=typeof t)throw new Un("argument-error",rh+" property must be a non empty string when specified.")}else if("undefined"!=typeof t)throw new Un("argument-error",$l+" property must be a non null object when specified.");if(t=e[Jl],"undefined"!=typeof t&&"boolean"!=typeof t)throw new Un("argument-error",Jl+" property must be a boolean when specified.");if(this.c=!!t,e=e[Xl],"undefined"!=typeof e&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Un("argument-error",Xl+" property must be a non empty string when specified.");this.i=e||null}function Vn(e){var t={};t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i;for(var n in t)null===t[n]&&delete t[n];return t}function jn(e){return yc(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")}function Wn(e){var t="";return Kn(e,function(e){t+=String.fromCharCode(e)}),t}function Kn(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=oh[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}Qn();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}function Qn(){if(!ih){ih={},oh={};for(var e=0;65>e;e++)ih[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),oh[ih[e]]=e,62<=e&&(oh["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}function Gn(e){this.c=e.sub,dc(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function zn(e){return(e=Hn(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Gn(e):null}function Hn(e){if(!e)return null;if(e=e.split("."),3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(Wn(e))}catch(e){}return null}function Yn(e){for(var t in sh)if(sh[t].id===e)return e=sh[t],{firebaseEndpoint:e.Za,secureTokenEndpoint:e.fb};return null}function Xn(e){for(var t in lh)if(lh[t].Na==e)return lh[t];return null}function Jn(e){var t={};t["facebook.com"]=er,t["google.com"]=nr,t["github.com"]=tr,t["twitter.com"]=rr;var n=e&&e[fh];try{if(n)return t[n]?new t[n](e):new Zn(e);if("undefined"!=typeof e[hh])return new $n(e)}catch(e){}return null}function $n(e){var t=e[fh];if(!t&&e[hh]){var n=zn(e[hh]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!=typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),xn(this,"providerId",t),xn(this,"isNewUser",n)}function Zn(e){$n.call(this,e),e=bn(e.rawUserInfo||"{}"),xn(this,"profile",Ln(e||{}))}function er(e){if(Zn.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function tr(e){if(Zn.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");xn(this,"username",this.profile&&this.profile.login||null)}function nr(e){if(Zn.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function rr(e){if(Zn.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");xn(this,"username",e.screenName||null)}function ir(e){this.a=_t(e)}function or(e){var t=_t(e),n=wt(t,"link"),r=wt(_t(n),"link");
return t=wt(t,"deep_link_id"),wt(_t(t),"link")||t||r||n||e}function ar(){}function sr(e,t){return e.then(function(e){if(e[Dh]){var n=zn(e[Dh]);if(!n||t!=n.c)throw new Un("user-mismatch");return e}throw new Un("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==zl+"user-not-found"?new Un("user-mismatch"):e})}function ur(e,t){if(!t)throw new Un("internal-error","failed to construct a credential");this.a=t,xn(this,"providerId",e),xn(this,"signInMethod",e)}function cr(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function lr(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new ur(e.providerId,e.pendingToken)}catch(e){}return null}function hr(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&xn(this,"idToken",t.idToken),t.accessToken&&xn(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&xn(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Un("internal-error","failed to construct a credential");xn(this,"accessToken",t.oauthToken),xn(this,"secret",t.oauthTokenSecret)}xn(this,"providerId",e),xn(this,"signInMethod",n)}function fr(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Nt(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function dr(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new hr(e.providerId,t,e.signInMethod)}catch(e){}}return null}function pr(e,t){this.Ac=t||[],Rn(this,{providerId:e,isOAuthProvider:!0}),this.vb={},this.$a=(Xn(e)||{}).Ma||null,this.Ya=null}function mr(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Un("argument-error",'SAML provider IDs must be prefixed with "saml."');pr.call(this,e,[])}function gr(e){pr.call(this,e,ch),this.a=[]}function yr(){gr.call(this,"facebook.com")}function vr(e){if(!e)throw new Un("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return d(e)&&(t=e.accessToken),(new yr).credential({accessToken:t})}function br(){gr.call(this,"github.com")}function wr(e){if(!e)throw new Un("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return d(e)&&(t=e.accessToken),(new br).credential({accessToken:t})}function _r(){gr.call(this,"google.com"),this.ua("profile")}function Er(e,t){var n=e;return d(e)&&(n=e.idToken,t=e.accessToken),(new _r).credential({idToken:n,accessToken:t})}function Sr(){pr.call(this,"twitter.com",uh)}function Tr(e,t){var n=e;if(d(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Un("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new hr("twitter.com",n,"twitter.com")}function Cr(e,t,n){this.a=e,this.c=t,xn(this,"providerId","password"),xn(this,"signInMethod",n===kr.EMAIL_LINK_SIGN_IN_METHOD?kr.EMAIL_LINK_SIGN_IN_METHOD:kr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ir(e){return e&&e.email&&e.password?new Cr(e.email,e.password,e.signInMethod):null}function kr(){Rn(this,{providerId:"password",isOAuthProvider:!1})}function Nr(e,t){if(t=Ar(t),!t)throw new Un("argument-error","Invalid email link!");return new Cr(e,t,kr.EMAIL_LINK_SIGN_IN_METHOD)}function Ar(e){e=or(e),e=new ir(e);var t=wt(e.a,"oobCode")||null;return"signIn"===(wt(e.a,"mode")||null)&&t?t:null}function Dr(e){if(!(e.Sa&&e.Ra||e.Da&&e.$))throw new Un("internal-error");this.a=e,xn(this,"providerId","phone"),xn(this,"signInMethod","phone")}function xr(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return gc(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new Dr(t)}return null}function Rr(e){return e.a.Da&&e.a.$?{temporaryProof:e.a.Da,phoneNumber:e.a.$}:{sessionInfo:e.a.Sa,code:e.a.Ra}}function Pr(e){try{this.a=e||ic.auth()}catch(e){throw new Un("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Rn(this,{providerId:"phone",isOAuthProvider:!1})}function Or(e,t){if(!e)throw new Un("missing-verification-id");if(!t)throw new Un("missing-verification-code");return new Dr({Sa:e,Ra:t})}function Mr(e){if(e.temporaryProof&&e.phoneNumber)return new Dr({Da:e.temporaryProof,$:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Er(o,n);case"facebook.com":return vr(n);case"github.com":return wr(n);case"twitter.com":return Tr(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new ur(t,a):new hr(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new gr(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function Lr(e){if(!e.isOAuthProvider)throw new Un("invalid-oauth-provider")}function Fr(e,t,n,r,i,o){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.h=o||null,this.a=i||null,!this.g&&!this.a)throw new Un("invalid-auth-event");if(this.g&&this.a)throw new Un("invalid-auth-event");if(this.g&&!this.f)throw new Un("invalid-auth-event")}function Ur(e){return e=e||{},e.type?new Fr(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Bn(e.error),e.postBody):null}function Br(){this.b=null,this.a=[]}function qr(e){var t=dh;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},e=hn("universalLinks.subscribe",uc),"function"==typeof e&&e(null,t.b))}function Vr(e){var t="unauthorized-domain",n=void 0,r=_t(e);e=r.b,r=r.f,"chrome-extension"==r?n=ie("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=ie("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Un.call(this,t,n)}function jr(e,t,n){Un.call(this,e,n),e=t||{},e.wb&&xn(this,"email",e.wb),e.$&&xn(this,"phoneNumber",e.$),e.credential&&xn(this,"credential",e.credential)}function Wr(e){if(e.code){var t=e.code||"";0==t.indexOf(zl)&&(t=t.substring(zl.length));var n={credential:Mr(e)};if(e.email)n.wb=e.email;else if(e.phoneNumber)n.$=e.phoneNumber;else if(!n.credential)return new Un(t,e.message||void 0);return new jr(t,n,e.message)}return null}function Kr(){}function Qr(e){return e.c||(e.c=e.b())}function Gr(){}function zr(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Hr(){}function Yr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=g(this.ac,this),this.a.onerror=g(this.Eb,this),this.a.onprogress=g(this.bc,this),this.a.ontimeout=g(this.fc,this)}function Xr(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Jr(e,t,n){this.reset(e,t,n,void 0,void 0)}function $r(e){this.f=e,this.b=this.c=this.a=null}function Zr(e,t){this.name=e,this.value=t}function ei(e){return e.c?e.c:e.a?ei(e.a):(E("Root logger has no level set."),null)}function ti(e){_h||(_h=new $r(""),wh[""]=_h,_h.c=vh);var t;if(!(t=wh[e])){t=new $r(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=ti(e.substr(0,n)),n.b||(n.b={}),n.b[r]=t,t.a=n,wh[e]=t}return t}function ni(e,t){e&&e.log(bh,t,void 0)}function ri(e){this.f=e}function ii(e){nt.call(this),this.u=e,this.readyState=Eh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.o="GET",this.g="",this.a=!1,this.h=ti("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}function oi(e){e.c.read().then(e.$b.bind(e)).catch(e.Ka.bind(e))}function ai(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,si(e)}function si(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ui(e){nt.call(this),this.headers=new ht,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=Sh,this.v=this.O=!1}function ci(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.B?e.B.a():ph.a(),e.w=Qr(e.B?e.B:ph),e.a.onreadystatechange=g(e.Hb,e);try{ni(e.b,wi(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return ni(e.b,wi(e,"Error opening Xhr: "+t.message)),void fi(e,t)}t=r||"";var o=new ht(e.headers);i&&lt(i,function(e,t){o.set(t,e)}),i=D(o.U()),r=uc.FormData&&t instanceof uc.FormData,!x(Ch,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{gi(e),0<e.g&&(e.v=li(e.a),ni(e.b,wi(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=g(e.Ea,e)):e.u=at(e.Ea,e.g,e)),ni(e.b,wi(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ni(e.b,wi(e,"Send error: "+t.message)),fi(e,t)}}function li(e){return el&&Le(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}function hi(e){return"content-type"==e.toLowerCase()}function fi(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,di(e),mi(e)}function di(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function pi(e){if(e.c&&"undefined"!=typeof sc)if(e.w[1]&&4==yi(e)&&2==vi(e))ni(e.b,wi(e,"Local request error detected and ignored"));else if(e.i&&4==yi(e))at(e.Hb,0,e);else if(e.dispatchEvent("readystatechange"),4==yi(e)){ni(e.b,wi(e,"Request complete")),e.c=!1;try{var t=vi(e);e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=0===t){var o=String(e.l).match(_l)[1]||null;if(!o&&uc.self&&uc.self.location){var a=uc.self.location.protocol;o=a.substr(0,a.length-1)}i=!Th.test(o?o.toLowerCase():"")}r=i}if(r)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<yi(e)?e.a.statusText:""}catch(t){ni(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+vi(e)+"]",di(e)}}finally{mi(e)}}}function mi(e,t){if(e.a){gi(e);var n=e.a,r=e.w[0]?s:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(gh,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function gi(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(uc.clearTimeout(e.u),e.u=null)}function yi(e){return e.a?e.a.readyState:0}function vi(e){try{return 2<yi(e)?e.a.status:-1}catch(e){return-1}}function bi(e){try{return e.a?e.a.responseText:""}catch(t){return ni(e.b,"Can not get responseText: "+t.message),""}}function wi(e,t){return t+" ["+e.N+" "+e.l+" "+vi(e)+"]"}function _i(e){var t=Pi;this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.m=0}function Ei(e,t,n){e.a=!0,e.c=n,e.f=!t,ki(e)}function Si(e){if(e.a){if(!e.l)throw new Ni(e);e.l=!1}}function Ti(e,t){Ci(e,null,t,void 0)}function Ci(e,t,n,r){e.g.push([t,n,r]),e.a&&ki(e)}function Ii(e){return vc(e.g,function(e){return f(e[1])})}function ki(e){if(e.h&&e.a&&Ii(e)){var t=e.h,n=Ih[t];n&&(uc.clearTimeout(n.a),delete Ih[t]),e.h=0}e.b&&(e.b.m--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.u,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(b(t)||"function"==typeof uc.Promise&&t instanceof uc.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,Ii(e)||(n=!0)}}e.c=t,r&&(s=g(e.o,e,!0),r=g(e.o,e,!1),t instanceof _i?(Ci(t,s,r),t.w=!0):t.then(s,r)),n&&(t=new Di(t),Ih[t.a]=t,e.h=t.a)}function Ni(){w.call(this)}function Ai(){w.call(this)}function Di(e){this.a=uc.setTimeout(g(this.c,this),0),this.b=e}function xi(e){var t={},n=t.document||document,r=W(e).toString(),i=document.createElement("SCRIPT"),o={Jb:i,Ea:void 0},a=new _i(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Oi(i,!0);var e=new Mi(Nh,"Timeout reached for loading script "+r);Si(a),Ei(a,!1,e)},u),o.Ea=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Oi(i,t.bd||!1,s),Si(a),Ei(a,!0,null))},i.onerror=function(){Oi(i,!0,s);var e=new Mi(kh,"Error while loading script "+r);Si(a),Ei(a,!1,e)},o=t.attributes||{},B(o,{type:"text/javascript",charset:"UTF-8"}),Lt(i,o),re(i,e),Ri(n).appendChild(i),a}function Ri(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function Pi(){if(this&&this.Jb){var e=this.Jb;e&&"SCRIPT"==e.tagName&&Oi(e,!0,this.Ea)}}function Oi(e,t,n){null!=n&&uc.clearTimeout(n),e.onload=s,e.onerror=s,e.onreadystatechange=s,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}function Mi(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),w.call(this,n),this.code=e}function Li(e){this.f=e}function Fi(e,t,n){if(this.b=e,e=t||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||xh,this.f=U(e.secureTokenHeaders||Rh),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||Ph,this.a=U(e.firebaseHeaders||Oh),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==on(),n=uc.XMLHttpRequest||n&&ic.INTERNAL.node&&ic.INTERNAL.node.XMLHttpRequest,!n&&!rn())throw new Un("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,rn()?this.c=new ri(self):an()?this.c=new Li(n):this.c=new Hr}function Ui(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Bi(e,t){t?(e.a["X-Client-Version"]=t,e.f["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.f["X-Client-Version"])}function qi(e,t,n,r,i,o,a){Ht()||rn()?e=g(e.o,e):(Ah||(Ah=new he(function(e,t){Vi(e,t)})),e=g(e.l,e)),e(t,n,r,i,o,a)}function Vi(e,t){if(((window.gapi||{}).client||{}).request)e();else{uc[Lh]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};var n=K(Mh,{onload:Lh});Ti(xi(n),function(){t(Error("CORS_UNSUPPORTED"))})}}function ji(e,t){return new he(function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?qi(e,e.i+"?key="+encodeURIComponent(e.b),function(e){e?e.error?r(so(e)):e.access_token&&e.refresh_token?n(e):r(new Un("internal-error")):r(new Un("network-request-failed"))},"POST",Nt(t).toString(),e.f,e.m.get()):r(new Un("internal-error"))})}function Wi(e,t,n,r,i,o){var a=_t(e.g+t);bt(a,"key",e.b),o&&bt(a,"cb",dc().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&bt(a,u,r[u]);return new he(function(t,o){qi(e,a.toString(),function(e){e?e.error?o(so(e,i||{})):t(e):o(new Un("network-request-failed"))},n,s?void 0:qt(vn(r)),e.a,e.h.get())})}function Ki(e){if(e=e.email,!o(e)||!Rl.test(e))throw new Un("invalid-email")}function Qi(e){"email"in e&&Ki(e)}function Gi(e,t){return oo(e,Vh,{identifier:t,continueUri:pn()?Qt():"http://localhost"}).then(function(e){return e.signinMethods||[]})}function zi(e){return oo(e,Xh,{}).then(function(e){return e.authorizedDomains||[]})}function Hi(e){if(!e[Dh])throw new Un("internal-error")}function Yi(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Un("internal-error")}else{if(!e.sessionInfo)throw new Un("missing-verification-id");if(!e.code)throw new Un("missing-verification-code")}}function Xi(e,t){return oo(e,Zh,t)}function Ji(e,t,n){return oo(e,Wh,{idToken:t,deleteProvider:n})}function $i(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Un("internal-error")}function Zi(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(e=new It(e.postBody),Dt(e,"nonce")&&(t.nonce=e.get("nonce")))),t}function eo(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Wr(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Wr(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Wr(e)):e.errorMessage&&(t=ao(e.errorMessage)),t)throw t;if(!e[Dh])throw new Un("internal-error")}function to(e,t){return t.returnIdpCredential=!0,oo(e,rf,t)}function no(e,t){return t.returnIdpCredential=!0,oo(e,af,t)}function ro(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,oo(e,of,t)}function io(e){if(!e.oobCode)throw new Un("invalid-action-code")}function oo(e,t,n){if(!Mn(n,t.T))return me(new Un("internal-error"));var r,i=t.Gb||"POST";return pe(n).then(t.D).then(function(){return t.R&&(n.returnSecureToken=!0),Wi(e,t.endpoint,i,n,t.Tb,t.sb||!1)}).then(function(e){return r=e,t.Oa?t.Oa(n,r):r}).then(t.J).then(function(){if(!t.da)return r;if(!(t.da in r))throw new Un("internal-error");return r[t.da]})}function ao(e){return so({error:{errors:[{message:e}],code:400,message:e}})}function so(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Un(r[n]):null)return n;n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},B(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0;for(var i in r)if(0===n.indexOf(i))return new Un(r[i],t);return!t&&e&&(t=yn(e)),new Un("internal-error",t)}function uo(e){this.b=e,this.a=null,this.bb=co(this)}function co(e){return fo().then(function(){return new he(function(t,n){hn("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:hn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},pf.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}function lo(e,t){return e.bb.then(function(){return new he(function(n){e.a.send(t.type,t,n,hn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function ho(e,t){e.bb.then(function(){e.a.register("authEvent",t,hn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function fo(){return mf?mf:mf=new he(function(e,t){function n(){En(),hn("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){En(),t(Error("Network Error"))},timeout:df.get()})}if(hn("gapi.iframes.Iframe"))e();else if(hn("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();uc[r]=function(){hn("gapi.load")?n():t(Error("Network Error"))},r=K(ff,{onload:r}),pe(xi(r)).s(function(){t(Error("Network Error"))})}}).s(function(e){throw mf=null,e})}function po(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Et(this.i,"/__/auth/iframe"),bt(this.a,"apiKey",this.g),bt(this.a,"appName",this.h),this.b=null,this.c=[]}function mo(e,t,n,r,i){this.o=e,this.l=t,this.c=n,this.m=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function go(e){try{return ic.app(e).auth().ya()}catch(e){return[]}}function yo(e,t,n,r,i){this.l=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.m=this.a=null}function vo(e){var t=Qt();return zi(e).then(function(e){e:{var n=_t(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=_t(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:xl.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Vr(Qt())})}function bo(e){return e.m?e.m:(e.m=Zt().then(function(){if(!e.u){var t=e.c,n=e.h,r=go(e.b),i=new po(e.l,e.f,e.b);i.f=t,i.b=n,i.c=M(r||[]),e.u=i.toString()}e.i=new uo(e.u),Eo(e)}),e.m)}function wo(e){return e.o||(e.v=e.c?cn(e.c,go(e.b)):null,e.o=new Fi(e.f,Yn(e.h),e.v)),e.o}function _o(e,t,n,r,i,o,a,s,u,c){return e=new mo(e,t,n,r,i),e.i=o,e.g=a,e.h=s,e.b=U(u||null),e.f=c,e.toString()}function Eo(e){if(!e.i)throw Error("IfcHandler must be initialized!");ho(e.i,function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Ur(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return n={},n.status=r?"ACK":"ERROR",pe(n)}return n.status="ERROR",pe(n)})}function So(e){var t={type:"webStorageSupport"};return bo(e).then(function(){return lo(e.i,t)}).then(function(e){if(e&&e.length&&"undefined"!=typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})}function To(e){if(this.a=e||ic.INTERNAL.reactNative&&ic.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Un("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Co(e){this.b=e,this.a={},this.f=g(this.c,this)}function Io(){var e=rn()?self:null;if(gc(gf,function(n){n.b==e&&(t=n)}),!t){var t=new Co(e);gf.push(t)}return t}function ko(e,t,n){F(e.a)&&e.b.addEventListener("message",e.f),"undefined"==typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function No(e){this.a=e}function Ao(e){this.c=e,this.b=!1,this.a=[]}function Do(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return me(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new he(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!=typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(t){return xo(e,c),t}).s(function(t){throw xo(e,c),t})}function xo(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),P(e.a,function(e){return e==t})}}function Ro(){if(!Lo())throw new Un("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=uc.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.i=null,this.u=!1,this.h=null;var e=this;rn()&&self?(this.m=Io(),ko(this.m,"keyChanged",function(t,n){return Vo(e).then(function(t){return 0<t.length&&gc(e.a,function(e){e(t)}),{keyProcessed:x(t,n.key)}})}),ko(this.m,"ping",function(){return pe(["keyChanged"])})):An().then(function(t){(e.h=t)&&(e.g=new Ao(new No(t)),Do(e.g,"ping",null,!0).then(function(t){t[0].fulfilled&&x(t[0].value,"keyChanged")&&(e.u=!0)}).s(function(){}))})}function Po(e){return new he(function(t,n){var r=e.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}})}function Oo(e){return new he(function(t,n){var r=e.l.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?t(r):Po(e).then(function(){return Oo(e)}).then(function(e){t(e)}).s(function(e){n(e)})}})}function Mo(e){return e.o||(e.o=Oo(e)),e.o}function Lo(){try{return!!uc.indexedDB}catch(e){return!1}}function Fo(e){return e.objectStore("firebaseLocalStorage")}function Uo(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Bo(e){return new he(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function qo(e,t){return e.g&&e.h&&Nn()===e.h?Do(e.g,"keyChanged",{key:t},e.u).then(function(){}).s(function(){}):pe()}function Vo(e){return Mo(e).then(function(e){var t=Fo(Uo(e,!1));return t.getAll?Bo(t.getAll()):new he(function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=zt(e.c,n),e.c=n}return r})}function jo(e){function t(){e.f=setTimeout(function(){e.i=Vo(e).then(function(t){0<t.length&&gc(e.a,function(e){e(t)})}).then(function(){t()}).s(function(e){"STOP_EVENT"!=e.message&&t()})},800)}Wo(e),t()}function Wo(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Ko(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=pe().then(function(){if(Lo()){var e=wn(),r="__sak"+e;return yf||(yf=new Ro),n=yf,n.set(r,e).then(function(){return n.get(r)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.Y(function(e){gc(t.a,function(t){t(e)})}),e})}function Qo(){this.a={},this.type="inMemory"}function Go(){if(!Ho()){if("Node"==on())throw new Un("internal-error","The LocalStorage compatibility library was not found.");throw new Un("web-storage-unsupported")}this.a=zo()||ic.INTERNAL.node.localStorage,this.type="localStorage"}function zo(){try{var e=uc.localStorage,t=wn();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Ho(){var e="Node"==on();if(e=zo()||e&&ic.INTERNAL.node&&ic.INTERNAL.node.localStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function Yo(){this.type="nullStorage"}function Xo(){if(!$o()){if("Node"==on())throw new Un("internal-error","The SessionStorage compatibility library was not found.");throw new Un("web-storage-unsupported")}this.a=Jo()||ic.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Jo(){try{var e=uc.sessionStorage,t=wn();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function $o(){var e="Node"==on();if(e=Jo()||e&&ic.INTERNAL.node&&ic.INTERNAL.node.sessionStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function Zo(){var e={};e.Browser=wf,e.Node=_f,e.ReactNative=Ef,e.Worker=Sf,this.a=e[on()]}function ea(e){var t=new Un("invalid-persistence-type"),n=new Un("unsupported-persistence-type");e:{for(r in Tf)if(Tf[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(on()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!fn()&&"none"!==e)throw n}}function ta(){var e=!(_n(ln())||!nn()),t=gn(),n=fn();this.o=e,this.h=t,this.m=n,this.a={},vf||(vf=new Zo),e=vf;try{this.g=!Kt()&&kn()||!uc.indexedDB?new e.a.C:new Ko(rn()?new Qo:new e.a.C)}catch(e){this.g=new Qo,this.h=!0}try{this.i=new e.a.Qa}catch(e){this.i=new Qo}this.l=new Qo,this.f=g(this.Lb,this),this.b={}}function na(){return bf||(bf=new ta),bf}function ra(e,t){switch(t){case"session":return e.i;case"none":return e.l;default:return e.g}}function ia(e,t){return"firebase:"+e.name+(t?":"+t:"")}function oa(e,t,n){var r=ia(t,n),i=ra(e,t.C);return e.get(t,n).then(function(o){var a=null;try{a=bn(uc.localStorage.getItem(r))}catch(e){}return a&&!o?(uc.localStorage.removeItem(r),e.set(t,a,n)):void(a&&o&&"localStorage"!=i.type&&uc.localStorage.removeItem(r))})}function aa(e,t,n){return n=ia(t,n),"local"==t.C&&(e.b[n]=null),ra(e,t.C).P(n)}function sa(e){ua(e),e.c=setInterval(function(){for(var t in e.a){var n=uc.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Ue({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Lb(n))}},1e3)}function ua(e){e.c&&(clearInterval(e.c),e.c=null)}function ca(e){this.a=e,this.b=na()}function la(e){return e.b.get(If,e.a).then(function(e){return Ur(e)})}function ha(){this.a=na()}function fa(){this.b=-1}function da(e,t){this.b=kf,this.f=uc.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.m=uc.Int32Array?new Int32Array(64):Array(64),void 0!==Cf||(Cf=uc.Int32Array?new Int32Array(Rf):Rf),this.reset()}function pa(e){for(var t=e.f,n=e.m,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|Cf[t])|0,a=o+(a+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,
e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function ma(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(o(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(pa(e),i=0);else{if(!h(t))throw Error("message must be string or array");for(;r<n;){var a=t[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[i++]=a,i==e.b&&(pa(e),i=0)}}e.c=i,e.g+=n}function ga(){da.call(this,8,Pf)}function ya(e,t,n,r,i){this.l=e,this.i=t,this.m=n,this.o=r||null,this.u=i||null,this.h=t+":"+n,this.v=new ha,this.g=new ca(this.h),this.f=null,this.b=[],this.a=this.c=null}function va(e){return new Un("invalid-cordova-configuration",e)}function ba(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function wa(e){var t=new ga;ma(t,e),e=[];var n=8*t.g;56>t.c?ma(t,xf,56-t.c):ma(t,xf,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(pa(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return jn(e)}function _a(e,t,n,r){var i=ba(),o=new Fr(t,r,null,i,new Un("no-auth-event")),a=hn("BuildInfo.packageName",uc);if("string"!=typeof a)throw new Un("invalid-cordova-configuration");var s=hn("BuildInfo.displayName",uc),u={};if(ln().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!ln().toLowerCase().match(/android/))return me(new Un("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=wa(i),u.sessionId=i;var c=_o(e.l,e.i,e.m,t,n,null,r,e.o,u,e.u);return e.fa().then(function(){var t=e.h;return e.v.a.set(If,o.A(),t)}).then(function(){var t=hn("cordova.plugins.browsertab.isAvailable",uc);if("function"!=typeof t)throw new Un("invalid-cordova-configuration");var n=null;t(function(t){if(t){if(n=hn("cordova.plugins.browsertab.openUrl",uc),"function"!=typeof n)throw new Un("invalid-cordova-configuration");n(c)}else{if(n=hn("cordova.InAppBrowser.open",uc),"function"!=typeof n)throw new Un("invalid-cordova-configuration");t=ln(),e.a=n(c,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function Ea(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Sa(e){return e.f||(e.f=e.fa().then(function(){return new he(function(t){function n(r){return t(r),e.Ja(n),!1}e.wa(n),Ca(e)})})),e.f}function Ta(e){var t=null;return la(e.g).then(function(n){return t=n,n=e.g,aa(n.b,If,n.a)}).then(function(){return t})}function Ca(e){function t(t){r=!0,i&&i.cancel(),Ta(e).then(function(r){var i=n;if(r&&t&&t.url){var o=null;i=or(t.url),-1!=i.indexOf("/__/auth/callback")&&(o=_t(i),o=bn(wt(o,"firebaseError")||null),o=(o="object"==typeof o?Bn(o):null)?new Fr(r.c,r.b,null,null,o):new Fr(r.c,r.b,i,r.f)),i=o||n}Ea(e,i)})}var n=new Fr("unknown",null,null,null,new Un("no-auth-event")),r=!1,i=st(500).then(function(){return Ta(e).then(function(){r||Ea(e,n)})}),o=uc.handleOpenURL;uc.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(hn("BuildInfo.packageName",uc).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(e){console.error(e)}},dh||(dh=new Br),qr(t)}function Ia(e){this.a=e,this.b=na()}function ka(e){return e.b.set(Of,"pending",e.a)}function Na(e){return aa(e.b,Of,e.a)}function Aa(e){return e.b.get(Of,e.a).then(function(e){return"pending"==e})}function Da(e,t,n){this.i={},this.v=0,this.B=e,this.l=t,this.o=n,this.h=[],this.f=!1,this.m=g(this.u,this),this.b=new Va,this.w=new Ya,this.g=new Ia(this.l+":"+this.o),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=xa(this.B,this.l,this.o,ah)}function xa(e,t,n,r){var i=ic.SDK_VERSION||null;return tn()?new ya(e,t,n,i,r):new yo(e,t,n,i,r)}function Ra(e){e.f||(e.f=!0,e.a.wa(e.m));var t=e.a;return e.a.fa().s(function(n){throw e.a==t&&e.reset(),n})}function Pa(e){e.a.Kb()&&Ra(e).s(function(t){var n=new Fr("unknown",null,null,null,new Un("operation-not-supported-in-this-environment"));Fa(t)&&e.u(n)}),e.a.Fb()||ja(e.b)}function Oa(e,t){x(e.h,t)||e.h.push(t),e.f||Aa(e.g).then(function(t){t?Na(e.g).then(function(){Ra(e).s(function(t){var n=new Fr("unknown",null,null,null,new Un("operation-not-supported-in-this-environment"));Fa(t)&&e.u(n)})}):Pa(e)}).s(function(){Pa(e)})}function Ma(e,t){P(e.h,function(e){return e==t})}function La(e,t,n,r,i,o){return e.a.zb(t,n,r,function(){e.f||(e.f=!0,e.a.wa(e.m))},function(){e.reset()},i,o)}function Fa(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Ua(e,t,n,r){var i;return ka(e.g).then(function(){return e.a.Ab(t,n,r).s(function(t){if(Fa(t))throw new Un("operation-not-supported-in-this-environment");return i=t,Na(e.g).then(function(){throw i})}).then(function(){return e.a.Mb()?new he(function(){}):Na(e.g).then(function(){return e.la()}).then(function(){}).s(function(){})})})}function Ba(e,t,n,r,i){return e.a.Bb(r,function(e){t.ga(n,null,e,i)},Mf.get())}function qa(e,t,n){var r=t+":"+n;return Ff[r]||(Ff[r]=new Da(e,t,n)),Ff[r]}function Va(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function ja(e){e.g||(e.g=!0,za(e,!1,null,null))}function Wa(e){e.g&&!e.i&&za(e,!1,null,null)}function Ka(e,t,n){n=n.xa(t.c,t.b);var r=t.g,i=t.f,o=t.h,a=!!t.c.match(/Redirect$/);n(r,i,o).then(function(t){za(e,a,t,null)}).s(function(t){za(e,a,null,t)})}function Qa(e,t){if(e.b=function(){return me(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function Ga(e,t){if(e.b=function(){return pe(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function za(e,t,n,r){t?r?Qa(e,r):Ga(e,n):Ga(e,{user:null}),e.f=[],e.c=[]}function Ha(e){var t=new Un("timeout");e.a&&e.a.cancel(),e.a=st(Lf.get()).then(function(){e.b||(e.g=!0,za(e,!0,null,t))})}function Ya(){}function Xa(e,t){var n=e.b,r=e.c;t.xa(r,n)(e.g,e.f,e.h).then(function(e){t.ga(r,e,null,n)}).s(function(e){t.ga(r,null,e,n)})}function Ja(){this.qb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.qb},set:function(e){this.qb=e},enumerable:!1})}function $a(e,t){this.a=t,xn(this,"verificationId",e)}function Za(e,t,n,r){return new Pr(e).Ta(t,n).then(function(e){return new $a(e,r)})}function es(e){var t=Hn(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Un("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Rn(this,{token:e,expirationTime:In(1e3*t.exp),authTime:In(1e3*t.auth_time),issuedAtTime:In(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function ts(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ns(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function rs(e,t){e.stop(),e.b=st(ns(e,t)).then(function(){return Cn()}).then(function(){return e.h()}).then(function(){rs(e,!0)}).s(function(t){e.i(t)&&rs(e,!1)})}function is(e){this.f=e,this.b=this.a=null,this.c=0}function os(e,t){var n=t[Dh],r=t.refreshToken;t=ss(t.expiresIn),e.b=n,e.c=t,e.a=r}function as(e,t){e.b=t.b,e.a=t.a,e.c=t.c}function ss(e){return dc()+1e3*parseInt(e,10)}function us(e,t){return ji(e.f,t).then(function(t){return e.b=t.access_token,e.c=ss(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}function cs(e,t){this.a=e||null,this.b=t||null,Rn(this,{lastSignInTime:In(t||null),creationTime:In(e||null)})}function ls(e){return new cs(e.a,e.b)}function hs(e,t,n,r,i,o){Rn(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function fs(e,t){Fe.call(this,e);for(var n in t)this[n]=t[n]}function ds(e,t,n){this.G=[],this.l=e.apiKey,this.o=e.appName,this.u=e.authDomain||null,e=ic.SDK_VERSION?cn(ic.SDK_VERSION):null,this.a=new Fi(this.l,Yn(ah),e),this.c=new is(this.a),_s(this,t[Dh]),os(this.c,t),xn(this,"refreshToken",this.c.a),Cs(this,n||{}),nt.call(this),this.I=!1,this.u&&dn()&&(this.i=qa(this.u,this.l,this.o)),this.N=[],this.h=null,this.w=vs(this),this.V=g(this.Fa,this);var r=this;this.ja=null,this.ta=function(e){r.pa(e.g)},this.X=null,this.O=[],this.sa=function(e){ms(r,e.c)},this.W=null}function ps(e,t){e.X&&He(e.X,"languageCodeChanged",e.ta),(e.X=t)&&Ke(t,"languageCodeChanged",e.ta)}function ms(e,t){e.O=t,Bi(e.a,ic.SDK_VERSION?cn(ic.SDK_VERSION,e.O):null)}function gs(e,t){e.W&&He(e.W,"frameworkChanged",e.sa),(e.W=t)&&Ke(t,"frameworkChanged",e.sa)}function ys(e){try{return ic.app(e.o).auth()}catch(t){throw new Un("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.o+"'!")}}function vs(e){return new ts(function(){return e.F(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.c.c-dc()-3e5;return 0<t?t:0})}function bs(e){e.B||e.w.b||(e.w.start(),He(e,"tokenChanged",e.V),Ke(e,"tokenChanged",e.V))}function ws(e){He(e,"tokenChanged",e.V),e.w.stop()}function _s(e,t){e.ra=t,xn(e,"_lat",t)}function Es(e,t){P(e.N,function(e){return e==t})}function Ss(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return ve(t).then(function(){return e})}function Ts(e){e.i&&!e.I&&(e.I=!0,Oa(e.i,e))}function Cs(e,t){Rn(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new cs(t.createdAt,t.lastLoginAt),providerData:[]})}function Is(){}function ks(e){return pe().then(function(){if(e.B)throw new Un("app-deleted")})}function Ns(e){return yc(e.providerData,function(e){return e.providerId})}function As(e,t){t&&(Ds(e,t.providerId),e.providerData.push(t))}function Ds(e,t){P(e.providerData,function(e){return e.providerId==t})}function xs(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&xn(e,t,n)}function Rs(e,t){e!=t&&(Rn(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?xn(e,"metadata",ls(t.metadata)):xn(e,"metadata",new cs),gc(t.providerData,function(t){As(e,t)}),as(e.c,t.c),xn(e,"refreshToken",e.c.a))}function Ps(e){return e.F().then(function(t){var n=e.isAnonymous;return Ms(e,t).then(function(){return n||xs(e,"isAnonymous",!1),t})})}function Os(e,t){t[Dh]&&e.ra!=t[Dh]&&(os(e.c,t),e.dispatchEvent(new fs("tokenChanged")),_s(e,t[Dh]),xs(e,"refreshToken",e.c.a))}function Ms(e,t){return oo(e.a,Gh,{idToken:t}).then(g(e.uc,e))}function Ls(e){return(e=e.providerUserInfo)&&e.length?yc(e,function(e){return new hs(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}function Fs(e,t){return Ps(e).then(function(){if(x(Ns(e),t))return Ss(e).then(function(){throw new Un("provider-already-linked")})})}function Us(e,t,n){var r=Mr(t);return t=Jn(t),Pn({user:e,credential:r,additionalUserInfo:t,operationType:n})}function Bs(e,t){return Os(e,t),e.reload().then(function(){return e})}function qs(e,t,n,r,i){if(!dn())return me(new Un("operation-not-supported-in-this-environment"));if(e.h&&!i)return me(e.h);var o=Xn(n.providerId),a=wn(e.uid+":::"),s=null;(!gn()||nn())&&e.u&&n.isOAuthProvider&&(s=_o(e.u,e.l,e.o,t,n,null,a,ic.SDK_VERSION||null));var u=Jt(s,o&&o.Ba,o&&o.Aa);return r=r().then(function(){if(js(e),!i)return e.F().then(function(){})}).then(function(){return La(e.i,u,t,n,a,!!s)}).then(function(){return new he(function(n,r){e.ga(t,null,new Un("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=a,e.b=Ba(e.i,e,t,u,a)})}).then(function(e){return u&&Xt(u),e?Pn(e):null}).s(function(e){throw u&&Xt(u),e}),Ws(e,r,i)}function Vs(e,t,n,r,i){if(!dn())return me(new Un("operation-not-supported-in-this-environment"));if(e.h&&!i)return me(e.h);var o=null,a=wn(e.uid+":::");return r=r().then(function(){if(js(e),!i)return e.F().then(function(){})}).then(function(){return e.aa=a,Ss(e)}).then(function(t){return e.ba&&(t=e.ba,t=t.b.set(Uf,e.A(),t.a)),t}).then(function(){return Ua(e.i,t,n,a)}).s(function(t){if(o=t,e.ba)return Ys(e.ba);throw o}).then(function(){if(o)throw o}),Ws(e,r,i)}function js(e){if(!e.i||!e.I){if(e.i&&!e.I)throw new Un("internal-error");throw new Un("auth-domain-config-required")}}function Ws(e,t,n){var r=Ks(e,t,n);return e.G.push(r),r.ha(function(){R(e.G,r)}),r}function Ks(e,t,n){return e.h&&!n?(t.cancel(),me(e.h)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new fs("userInvalidated")),e.h=t),t})}function Qs(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Dh]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-dc())/1e3;var r=new ds(t,n,e);return e.providerData&&gc(e.providerData,function(e){e&&As(r,Pn(e))}),e.redirectEventId&&(r.aa=e.redirectEventId),r}function Gs(e,t,n,r){var i=new ds(e,t);return n&&(i.ba=n),r&&ms(i,r),i.reload().then(function(){return i})}function zs(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.u,appName:e.o};var i=e.c,o={};return o[Dh]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-dc())/1e3,t=new ds(t,o),n&&(t.ba=n),r&&ms(t,r),Rs(t,e),t}function Hs(e){this.a=e,this.b=na()}function Ys(e){return aa(e.b,Uf,e.a)}function Xs(e,t){return e.b.get(Uf,e.a).then(function(e){return e&&t&&(e.authDomain=t),Qs(e||{})})}function Js(e){this.a=e,this.b=na(),this.c=null,this.f=Zs(this),this.b.addListener(eu("local"),this.a,g(this.g,this))}function $s(e,t){var n,r=[];for(n in Tf)Tf[n]!==t&&r.push(aa(e.b,eu(Tf[n]),e.a));return r.push(aa(e.b,Bf,e.a)),ye(r)}function Zs(e){var t=eu("local"),n=eu("session"),r=eu("none");return oa(e.b,t,e.a).then(function(){return e.b.get(n,e.a)}).then(function(i){return i?n:e.b.get(r,e.a).then(function(n){return n?r:e.b.get(t,e.a).then(function(n){return n?t:e.b.get(Bf,e.a).then(function(e){return e?eu(e):t})})})}).then(function(t){return e.c=t,$s(e,t.C)}).s(function(){e.c||(e.c=t)})}function eu(e){return{name:"authUser",C:e}}function tu(e){return ou(e,function(){return e.b.set(Bf,e.c.C,e.a)})}function nu(e,t){return ou(e,function(){return e.b.set(e.c,t.A(),e.a)})}function ru(e){return ou(e,function(){return aa(e.b,e.c,e.a)})}function iu(e,t){return ou(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),Qs(e||{})})})}function ou(e,t){return e.f=e.f.then(t,t),e.f}function au(e){if(this.l=!1,xn(this,"settings",new Ja),xn(this,"app",e),!bu(this).options||!bu(this).options.apiKey)throw new Un("invalid-api-key");e=ic.SDK_VERSION?cn(ic.SDK_VERSION):null,this.c=new Fi(bu(this).options&&bu(this).options.apiKey,Yn(ah),e),this.N=[],this.o=[],this.I=[],this.Pb=ic.INTERNAL.createSubscribe(g(this.ic,this)),this.O=void 0,this.Qb=ic.INTERNAL.createSubscribe(g(this.jc,this)),pu(this,null),this.h=new Js(bu(this).options.apiKey+":"+bu(this).name),this.w=new Hs(bu(this).options.apiKey+":"+bu(this).name),this.V=Tu(this,gu(this)),this.i=Tu(this,yu(this)),this.X=!1,this.ja=g(this.Ic,this),this.Fa=g(this.Z,this),this.ra=g(this.Xb,this),this.sa=g(this.gc,this),this.ta=g(this.hc,this),this.a=null,hu(this),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.qc,this),this.u=0,nt.call(this),cu(this),this.G=[]}function su(e){Fe.call(this,"languageCodeChanged"),this.g=e}function uu(e){Fe.call(this,"frameworkChanged"),this.c=e}function cu(e){Object.defineProperty(e,"lc",{get:function(){return this.ea()},set:function(e){this.pa(e)},enumerable:!1}),e.W=null}function lu(e){return e.Ob||me(new Un("auth-domain-config-required"))}function hu(e){var t=bu(e).options.authDomain,n=bu(e).options.apiKey;t&&dn()&&(e.Ob=e.V.then(function(){if(!e.l){if(e.a=qa(t,n,bu(e).name),Oa(e.a,e),wu(e)&&Ts(wu(e)),e.B){Ts(e.B);var r=e.B;r.pa(e.ea()),ps(r,e),r=e.B,ms(r,e.G),gs(r,e),e.B=null}return e.a}}))}function fu(e){if(!dn())return me(new Un("operation-not-supported-in-this-environment"));var t=lu(e).then(function(){return e.a.la()}).then(function(e){return e?Pn(e):null});return Tu(e,t)}function du(e,t){var n={};return n.apiKey=bu(e).options.apiKey,n.authDomain=bu(e).options.authDomain,n.appName=bu(e).name,e.V.then(function(){return Gs(n,t,e.w,e.ya())}).then(function(t){return wu(e)&&t.uid==wu(e).uid?(Rs(wu(e),t),e.Z(t)):(pu(e,t),Ts(t),e.Z(t))}).then(function(){Eu(e)})}function pu(e,t){wu(e)&&(Es(wu(e),e.Fa),He(wu(e),"tokenChanged",e.ra),He(wu(e),"userDeleted",e.sa),He(wu(e),"userInvalidated",e.ta),ws(wu(e))),t&&(t.N.push(e.Fa),Ke(t,"tokenChanged",e.ra),Ke(t,"userDeleted",e.sa),Ke(t,"userInvalidated",e.ta),0<e.u&&bs(t)),xn(e,"currentUser",t),t&&(t.pa(e.ea()),ps(t,e),ms(t,e.G),gs(t,e))}function mu(e){var t=Xs(e.w,bu(e).options.authDomain).then(function(t){return(e.B=t)&&(t.ba=e.w),Ys(e.w)});return Tu(e,t)}function gu(e){var t=bu(e).options.authDomain,n=mu(e).then(function(){return iu(e.h,t)}).then(function(t){return t?(t.ba=e.w,e.B&&(e.B.aa||null)==(t.aa||null)?t:t.reload().then(function(){return nu(e.h,t).then(function(){return t})}).s(function(n){return"auth/network-request-failed"==n.code?t:ru(e.h)})):null}).then(function(t){pu(e,t||null)});return Tu(e,n)}function yu(e){return e.V.then(function(){return fu(e)}).s(function(){}).then(function(){if(!e.l)return e.ja()}).s(function(){}).then(function(){if(!e.l){e.X=!0;var t=e.h;t.b.addListener(eu("local"),t.a,e.ja)}})}function vu(e,t){var n=null,r=null;return Tu(e,t.then(function(t){return n=Mr(t),r=Jn(t),du(e,t)}).then(function(){return Pn({user:wu(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function bu(e){return e.app}function wu(e){return e.currentUser}function _u(e){return wu(e)&&wu(e)._lat||null}function Eu(e){if(e.X){for(var t=0;t<e.o.length;t++)e.o[t]&&e.o[t](_u(e));if(e.O!==e.getUid()&&e.I.length)for(e.O=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](_u(e))}}function Su(e,t){e.I.push(t),Tu(e,e.i.then(function(){!e.l&&x(e.I,t)&&e.O!==e.getUid()&&(e.O=e.getUid(),t(_u(e)))}))}function Tu(e,t){return e.N.push(t),t.ha(function(){R(e.N,t)}),t}function Cu(){}function Iu(){this.a={},this.b=1e12}function ku(e,t){return(t=Nu(t))?e.a[t]||null:null}function Nu(e){return(e="undefined"==typeof e?1e12:e)?e.toString():null}function Au(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Mt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ke(this.f,"click",this.i)}function Du(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function xu(){}function Ru(){this.b=uc.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function Pu(e,t,n,r,i,o,a){if(xn(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.l=t,this.g=null,a?(Vf||(Vf=new xu),a=Vf):(Kf||(Kf=new Ru),a=Kf),this.o=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[zf])throw new Un("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hf],!uc.document)throw new Un("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Mt(t)||!this.i&&Mt(t).hasChildNodes())throw new Un("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Fi(e,o||null,i||null),this.v=r||function(){return null};var s=this;this.m=[];var u=this.a[Qf];this.a[Qf]=function(e){if(Ou(s,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=hn(u,uc);"function"==typeof t&&t(e)}};var c=this.a[Gf];this.a[Gf]=function(){if(Ou(s,null),"function"==typeof c)c();else if("string"==typeof c){var e=hn(c,uc);"function"==typeof e&&e()}}}function Ou(e,t){for(var n=0;n<e.m.length;n++)try{e.m[n](t)}catch(e){}}function Mu(e,t){P(e.m,function(e){return e==t})}function Lu(e,t){return e.h.push(t),t.ha(function(){R(e.h,t)}),t}function Fu(e){if(e.B)throw new Un("internal-error","RecaptchaVerifier instance has been destroyed.")}function Uu(e,t,n){var r=!1;try{this.b=n||ic.app()}catch(e){throw new Un("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Un("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().ya()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=ic.SDK_VERSION?cn(ic.SDK_VERSION,o):null,Pu.call(this,n,e,t,function(){try{var e=i.b.auth().ea()}catch(t){e=null}return e},o,Yn(ah),r)}function Bu(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Un("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Yf.length)throw new Un("internal-error","Argument validator received an unsupported number of arguments.");n=Yf[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new Un("argument-error",e+" failed: "+r)}function qu(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:o}}function Vu(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:a}}function ju(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:d}}function Wu(e,t){return{name:e||"",K:"a function",optional:!!t,M:f}}function Ku(e,t){return{name:e||"",K:"null",optional:!!t,M:c}}function Qu(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function Gu(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof au)}}}function zu(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof ic.app.App)}}}function Hu(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function Yu(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function Xu(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&o(e.type)&&f(e.verify))}}}function Ju(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function $u(e,t){for(var n in t){var r=t[n].name;e[r]=tc(r,e[n],t[n].j)}}function Zu(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:y(function(e){return this[e]},n),set:y(function(e,t,n,r){Bu(e,[n],[r],!0),this[t]=r},r,n,t[n].rb),enumerable:!0})}}function ec(e,t,n,r){e[t]=tc(t,n,r)}function tc(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Bu(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=nc(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}function nc(e){return e=e.split("."),e[e.length-1]}var rc,ic=n(1).default,oc="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},ac="undefined"!=typeof window&&window===this?this:"undefined"!=typeof e&&null!=e?e:this;t("Promise",function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var o=ac.setTimeout;n.prototype.c=function(e){o(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c(function(){throw e})},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.o),reject:e(this.g)}},t.prototype.o=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.u(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.l(e):this.h(e)}},t.prototype.l=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.m()},t.prototype.m=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.u=function(e){var t=this.f();e.Ha(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Ha(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ha=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var o=i(e),a=o.next();!a.done;a=o.next())r(a.value).Ha(t,n)})},t.all=function(e){var n=i(e),o=n.next();return o.done?r([]):new t(function(e,t){function i(t){return function(n){a[t]=n,s--,0==s&&e(a)}}var a=[],s=0;do a.push(void 0),s++,r(o.value).Ha(i(a.length-1),t),o=n.next();while(!o.done)})},t});var sc=sc||{},uc=this||self,cc=/^[\w+\/_-]+[=]{0,2}$/,lc=null,hc="closure_uid_"+(1e9*Math.random()>>>0),fc=0,dc=Date.now||function(){return+new Date};v(w,Error),w.prototype.name="CustomError",v(_,w),_.prototype.name="AssertionError",S.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var pc=new S(function(){return new k},function(e){e.reset()});C.prototype.add=function(e,t){var n=pc.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},k.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},k.prototype.reset=function(){this.next=this.b=this.a=null};var mc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(o(e))return o(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},gc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=o(e)?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)},yc=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=o(e)?e.split(""):e,a=0;a<n;a++)a in i&&(r[a]=t.call(void 0,i[a],a,e));return r},vc=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=o(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1},bc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");q.prototype.na=!0,q.prototype.ma=function(){return this.a},q.prototype.toString=function(){return"Const{"+this.a+"}"};var wc={},_c={},Ec=new q(_c,"");j.prototype.na=!0,j.prototype.ma=function(){return this.a.toString()},j.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Sc=/%{(\w+)}/g,Tc=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,Cc={},Ic=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},kc=/&/g,Nc=/</g,Ac=/>/g,Dc=/"/g,xc=/'/g,Rc=/\x00/g,Pc=/[\x00&<>"']/;H.prototype.na=!0,H.prototype.ma=function(){return this.a.toString()},H.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Oc=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,Mc={};J("about:blank");var Lc;e:{var Fc=uc.navigator;if(Fc){var Uc=Fc.userAgent;if(Uc){Lc=Uc;break e}}Lc=""}Z.prototype.na=!0,Z.prototype.ma=function(){return this.a.toString()},Z.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bc={};te("<!DOCTYPE html>");var qc=te("");te("<br>");var Vc,jc,Wc=!1,Kc=new C,Qc=0,Gc=2,zc=3;fe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Hc=new S(function(){return new fe},function(e){e.reset()});he.prototype.then=function(e,t,n){return _e(this,f(e)?e:null,f(t)?t:null,n)},he.prototype.$goog_Thenable=!0,rc=he.prototype,rc.ha=function(e,t){return e=de(e,e,t),e.c=!0,we(this,e),this},rc.s=function(e,t){return _e(this,null,e,t)},rc.cancel=function(e){this.a==Qc&&ue(function(){var t=new De(e);be(this,t)},this)},rc.Jc=function(e){this.a=Qc,Ee(this,Gc,e)},rc.Kc=function(e){this.a=Qc,Ee(this,zc,e)},rc.Ub=function(){for(var e;e=Ie(this);)ke(this,e,this.a,this.i);this.h=!1};var Yc=ae;v(De,w),De.prototype.name="cancel";var Xc=0,Jc={};xe.prototype.qa=!1,xe.prototype.va=function(){if(this.ia)for(;this.ia.length;)this.ia.shift()()},Pe[" "]=s;var $c,Zc=$("Opera"),el=$("Trident")||$("MSIE"),tl=$("Edge"),nl=tl||el,rl=$("Gecko")&&!(G(Lc.toLowerCase(),"webkit")&&!$("Edge"))&&!($("Trident")||$("MSIE"))&&!$("Edge"),il=G(Lc.toLowerCase(),"webkit")&&!$("Edge");e:{var ol="",al=function(){var e=Lc;return rl?/rv:([^\);]+)(\)|;)/.exec(e):tl?/Edge\/([\d\.]+)/.exec(e):el?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):il?/WebKit\/(\S+)/.exec(e):Zc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(al&&(ol=al?al[1]:""),el){var sl=Me();if(null!=sl&&sl>parseFloat(ol)){$c=String(sl);break e}}$c=ol}var ul,cl={};ul=uc.document&&el?Me():void 0;var ll=Object.freeze||function(e){return e},hl=!el||9<=Number(ul),fl=el&&!Le("9"),dl=function(){if(!uc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{uc.addEventListener("test",s,t),uc.removeEventListener("test",s,t)}catch(e){}return e}();Fe.prototype.preventDefault=function(){this.Ib=!1},v(Ue,Fe);var pl=ll({2:"touch",3:"pen",4:"mouse"});Ue.prototype.preventDefault=function(){Ue.mb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,fl)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},Ue.prototype.f=function(){return this.a};var ml="closure_listenable_"+(1e6*Math.random()|0),gl=0;Ve.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.b++);var a=We(e,t,r,i);return-1<a?(t=e[a],n||(t.Ga=!1)):(t=new Be(t,this.src,o,!!r,i),t.Ga=n,e.push(t)),t};var yl="closure_lm_"+(1e6*Math.random()|0),vl={},bl=0,wl="__closure_events_fn_"+(1e9*Math.random()>>>0);v(nt,xe),nt.prototype[ml]=!0,nt.prototype.addEventListener=function(e,t,n,r){Ke(this,e,t,n,r)},nt.prototype.removeEventListener=function(e,t,n,r){He(this,e,t,n,r)},nt.prototype.dispatchEvent=function(e){var t,n=this.Ua;if(n)for(t=[];n;n=n.Ua)t.push(n);n=this.Nb;var r=e.type||e;if(o(e))e=new Fe(e,n);else if(e instanceof Fe)e.target=e.target||n;else{var i=e;e=new Fe(r,n),B(e,i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var s=e.b=t[a];i=ot(s,r,!0,e)&&i}if(s=e.b=n,i=ot(s,r,!0,e)&&i,i=ot(s,r,!1,e)&&i,t)for(a=0;a<t.length;a++)s=e.b=t[a],i=ot(s,r,!1,e)&&i;return i},nt.prototype.va=function(){if(nt.mb.va.call(this),this.m){var e,t=this.m,n=0;for(e in t.a){for(var r=t.a[e],i=0;i<r.length;i++)++n,qe(r[i]);delete t.a[e],
t.b--}}this.Ua=null},rc=ht.prototype,rc.S=function(){ft(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},rc.U=function(){return ft(this),this.a.concat()},rc.clear=function(){this.b={},this.c=this.a.length=0},rc.get=function(e,t){return dt(this.b,e)?this.b[e]:t},rc.set=function(e,t){dt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},rc.forEach=function(e,t){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var _l=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;mt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Tt(t,El,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(Tt(t,El,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Tt(n,"/"==n.charAt(0)?Tl:Sl,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Tt(n,Il)),e.join("")},mt.prototype.resolve=function(e){var t=new mt(this),n=!!e.f;n?gt(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.m;var r=e.c;if(n)yt(t,e.m);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(G(i,"./")||G(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?vt(t,Rt(e.a)):n=!!e.g,n&&(t.g=e.g),t};var El=/[#\/\?@]/g,Sl=/[#\?:]/g,Tl=/[#\?]/g,Cl=/[#\?@]/g,Il=/#/g;rc=It.prototype,rc.add=function(e,t){kt(this),this.c=null,e=Pt(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},rc.clear=function(){this.a=this.c=null,this.b=0},rc.forEach=function(e,t){kt(this),this.a.forEach(function(n,r){gc(n,function(n){e.call(t,n,r,this)},this)},this)},rc.U=function(){kt(this);for(var e=this.a.S(),t=this.a.U(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},rc.S=function(e){kt(this);var t=[];if(o(e))Dt(this,e)&&(t=O(t,this.a.get(Pt(this,e))));else{e=this.a.S();for(var n=0;n<e.length;n++)t=O(t,e[n])}return t},rc.set=function(e,t){return kt(this),this.c=null,e=Pt(this,e),Dt(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},rc.get=function(e,t){return e?(e=this.S(e),0<e.length?String(e[0]):t):t},rc.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.U(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var kl=!el||9<=Number(ul),Nl={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Al={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Dl=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,xl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rl=/^[^@]+@[^@]+$/,Pl="Firefox",Ol="Chrome",Ml={Qc:"FirebaseCore-web",Sc:"FirebaseUI-web"};Sn.prototype.get=function(){var e=uc.navigator;return(e&&"boolean"==typeof e.onLine&&(pn()||"chrome-extension:"===mn()||"undefined"!=typeof e.connection)?e.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ll,Fl={};try{var Ul={};Object.defineProperty(Ul,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ul,"abcd",{configurable:!0,enumerable:!0,value:2}),Ll=2==Ul.abcd}catch(e){Ll=!1}var Bl="EMAIL_SIGNIN",ql="email",Vl="newEmail",jl="requestType",Wl="email",Kl="fromEmail",Ql="data",Gl="operation";v(Un,Error),Un.prototype.A=function(){return{code:this.code,message:this.message}},Un.prototype.toJSON=function(){return this.A()};var zl="auth/",Hl={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Yl="android",Xl="dynamicLinkDomain",Jl="handleCodeInApp",$l="iOS",Zl="url",eh="installApp",th="minimumVersion",nh="packageName",rh="bundleId",ih=null,oh=null;Gn.prototype.f=function(){return this.b};var ah,sh={Wc:{Za:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://securetoken.googleapis.com/v1/token",id:"p"},Yc:{Za:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",fb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Zc:{Za:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",fb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};ah=Yn("__EID__")?"__EID__":void 0;var uh="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ch=["client_id","response_type","scope","redirect_uri","state"],lh={Rc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",eb:ch},Tc:{Ma:null,Ba:500,Aa:620,Na:"github.com",eb:ch},Uc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",eb:ch},$c:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",eb:uh}},hh="idToken",fh="providerId";v(Zn,$n),v(er,Zn),v(tr,Zn),v(nr,Zn),v(rr,Zn),ur.prototype.ka=function(e){return to(e,cr(this))},ur.prototype.b=function(e,t){var n=cr(this);return n.idToken=t,no(e,n)},ur.prototype.f=function(e,t){return sr(ro(e,cr(this)),t)},ur.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},hr.prototype.ka=function(e){return to(e,fr(this))},hr.prototype.b=function(e,t){var n=fr(this);return n.idToken=t,no(e,n)},hr.prototype.f=function(e,t){var n=fr(this);return sr(ro(e,n),t)},hr.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},pr.prototype.Ca=function(e){return this.vb=U(e),this},v(mr,pr),v(gr,pr),gr.prototype.ua=function(e){return x(this.a,e)||this.a.push(e),this},gr.prototype.Db=function(){return M(this.a)},gr.prototype.credential=function(e,t){var n;if(n=d(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null},!n.idToken&&!n.accessToken)throw new Un("argument-error","credential failed: must provide the ID token and/or the access token.");return new hr(this.providerId,n,this.providerId)},v(yr,gr),xn(yr,"PROVIDER_ID","facebook.com"),xn(yr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),v(br,gr),xn(br,"PROVIDER_ID","github.com"),xn(br,"GITHUB_SIGN_IN_METHOD","github.com"),v(_r,gr),xn(_r,"PROVIDER_ID","google.com"),xn(_r,"GOOGLE_SIGN_IN_METHOD","google.com"),v(Sr,pr),xn(Sr,"PROVIDER_ID","twitter.com"),xn(Sr,"TWITTER_SIGN_IN_METHOD","twitter.com"),Cr.prototype.ka=function(e){return this.signInMethod==kr.EMAIL_LINK_SIGN_IN_METHOD?oo(e,Kh,{email:this.a,oobCode:this.c}):oo(e,uf,{email:this.a,password:this.c})},Cr.prototype.b=function(e,t){return this.signInMethod==kr.EMAIL_LINK_SIGN_IN_METHOD?oo(e,Qh,{idToken:t,email:this.a,oobCode:this.c}):oo(e,tf,{idToken:t,email:this.a,password:this.c})},Cr.prototype.f=function(e,t){return sr(this.ka(e),t)},Cr.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Rn(kr,{PROVIDER_ID:"password"}),Rn(kr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Rn(kr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Dr.prototype.ka=function(e){return e.Ta(Rr(this))},Dr.prototype.b=function(e,t){var n=Rr(this);return n.idToken=t,oo(e,lf,n)},Dr.prototype.f=function(e,t){var n=Rr(this);return n.operation="REAUTH",e=oo(e,hf,n),sr(e,t)},Dr.prototype.A=function(){var e={providerId:"phone"};return this.a.Sa&&(e.verificationId=this.a.Sa),this.a.Ra&&(e.verificationCode=this.a.Ra),this.a.Da&&(e.temporaryProof=this.a.Da),this.a.$&&(e.phoneNumber=this.a.$),e},Pr.prototype.Ta=function(e,t){var n=this.a.c;return pe(t.verify()).then(function(r){if(!o(r))throw new Un("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return Xi(n,{phoneNumber:e,recaptchaToken:r}).then(function(e){return"function"==typeof t.reset&&t.reset(),e},function(e){throw"function"==typeof t.reset&&t.reset(),e});default:throw new Un("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Rn(Pr,{PROVIDER_ID:"phone"}),Rn(Pr,{PHONE_SIGN_IN_METHOD:"phone"}),Fr.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.i&&e.push(this.i),e.join("-")},Fr.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.A()}};var dh=null;v(Vr,Un),v(jr,Un),jr.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.A();return t&&B(e,t),e},jr.prototype.toJSON=function(){return this.A()},Kr.prototype.c=null;var ph;v(Gr,Kr),Gr.prototype.a=function(){var e=zr(this);return e?new ActiveXObject(e):new XMLHttpRequest},Gr.prototype.b=function(){var e={};return zr(this)&&(e[0]=!0,e[1]=!0),e},ph=new Gr,v(Hr,Kr),Hr.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Yr;throw Error("Unsupported browser")},Hr.prototype.b=function(){return{}},rc=Yr.prototype,rc.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},rc.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},rc.abort=function(){this.a.abort()},rc.setRequestHeader=function(){},rc.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},rc.ac=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xr(this,4)},rc.Eb=function(){this.status=500,this.response=this.responseText="",Xr(this,4)},rc.fc=function(){this.Eb()},rc.bc=function(){this.status=200,Xr(this,1)},rc.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Jr.prototype.a=null;var mh=0;Jr.prototype.reset=function(e,t,n,r,i){"number"==typeof i||mh++,r||dc(),delete this.a},Zr.prototype.toString=function(){return this.name};var gh=new Zr("SEVERE",1e3),yh=new Zr("WARNING",900),vh=new Zr("CONFIG",700),bh=new Zr("FINE",500);$r.prototype.log=function(e,t,n){if(e.value>=ei(this).value)for(f(t)&&(t=t()),e=new Jr(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var wh={},_h=null;v(ri,Kr),ri.prototype.a=function(){return new ii(this.f)},ri.prototype.b=function(e){return function(){return e}}({}),v(ii,nt);var Eh=0;rc=ii.prototype,rc.open=function(e,t){if(this.readyState!=Eh)throw this.abort(),Error("Error reopening a connection");this.o=e,this.g=t,this.readyState=1,si(this)},rc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.o,credentials:void 0,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.g,t)).then(this.ec.bind(this),this.Ka.bind(this))},rc.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ai(this,!1)),this.readyState=Eh},rc.ec=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,si(this)),this.a&&(this.readyState=3,si(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.cc.bind(this),this.Ka.bind(this)):"undefined"!=typeof uc.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,oi(this)):e.text().then(this.dc.bind(this),this.Ka.bind(this)))))},rc.$b=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ai(this,!0):si(this),3==this.readyState&&oi(this)}},rc.dc=function(e){this.a&&(this.response=this.responseText=e,ai(this,!0))},rc.cc=function(e){this.a&&(this.response=e,ai(this,!0))},rc.Ka=function(e){var t=this.h;t&&t.log(yh,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&ai(this,!0)},rc.setRequestHeader=function(e,t){this.i.append(e,t)},rc.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(yh,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},rc.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(yh,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},v(ui,nt);var Sh="";ui.prototype.b=ti("goog.net.XhrIo");var Th=/^https?$/i,Ch=["POST","PUT"];rc=ui.prototype,rc.Ea=function(){"undefined"!=typeof sc&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ni(this.b,wi(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},rc.abort=function(){this.a&&this.c&&(ni(this.b,wi(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),mi(this))},rc.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),mi(this,!0)),ui.mb.va.call(this)},rc.Hb=function(){this.qa||(this.I||this.i||this.f?pi(this):this.tc())},rc.tc=function(){pi(this)},rc.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case Sh:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(gh,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return ni(this.b,"Can not get response: "+e.message),null}},_i.prototype.cancel=function(e){if(this.a)this.c instanceof _i&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.m--,0>=t.m&&t.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(e=new Ai(this),Si(this),Ei(this,!1,e))}},_i.prototype.o=function(e,t){this.i=!1,Ei(this,e,t)},_i.prototype.then=function(e,t,n){var r,i,o=new he(function(e,t){r=e,i=t});return Ci(this,r,function(e){e instanceof Ai?o.cancel():i(e)}),o.then(e,t,n)},_i.prototype.$goog_Thenable=!0,v(Ni,w),Ni.prototype.message="Deferred has already fired",Ni.prototype.name="AlreadyCalledError",v(Ai,w),Ai.prototype.message="Deferred was canceled",Ai.prototype.name="CanceledError",Di.prototype.c=function(){throw delete Ih[this.a],this.b};var Ih={},kh=0,Nh=1;v(Mi,w),v(Li,Kr),Li.prototype.a=function(){return new this.f},Li.prototype.b=function(){return{}};var Ah,Dh="idToken",xh=new Sn(3e4,6e4),Rh={"Content-Type":"application/x-www-form-urlencoded"},Ph=new Sn(3e4,6e4),Oh={"Content-Type":"application/json"};Fi.prototype.o=function(e,t,n,r,i,o){if(rn()&&("undefined"==typeof uc.fetch||"undefined"==typeof uc.Headers||"undefined"==typeof uc.Request))throw new Un("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ui(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}rt(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(bi(this))||null}catch(t){e=null}t&&t(e)}),it(a,"ready",function(){s&&clearTimeout(s),Re(this)}),it(a,"timeout",function(){s&&clearTimeout(s),Re(this),t&&t(null)}),ci(a,e,n,r,i)};var Mh=new q(_c,"https://apis.google.com/js/client.js?onload=%{onload}"),Lh="__fcb"+Math.floor(1e6*Math.random()).toString();Fi.prototype.l=function(e,t,n,r,i){var o=this;Ah.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).s(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},Fi.prototype.kb=function(){return oo(this,nf,{})},Fi.prototype.nb=function(e,t){return oo(this,ef,{idToken:e,email:t})},Fi.prototype.ob=function(e,t){return oo(this,tf,{idToken:e,password:t})};var Fh={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};rc=Fi.prototype,rc.pb=function(e,t){var n={idToken:e},r=[];return L(Fh,function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),oo(this,ef,n)},rc.hb=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},B(e,t),oo(this,Yh,e)},rc.ib=function(e,t){return e={requestType:"EMAIL_SIGNIN",email:e},B(e,t),oo(this,zh,e)},rc.gb=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},B(e,t),oo(this,Hh,e)},rc.Ta=function(e){return oo(this,cf,e)},rc.Xa=function(e,t){return oo(this,$h,{oobCode:e,newPassword:t})},rc.Ia=function(e){return oo(this,Bh,{oobCode:e})},rc.Va=function(e){return oo(this,Uh,{oobCode:e})};var Uh={endpoint:"setAccountInfo",D:io,da:"email"},Bh={endpoint:"resetPassword",D:io,J:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Un("internal-error")}},qh={endpoint:"signupNewUser",D:function(e){if(Ki(e),!e.password)throw new Un("weak-password")},J:Hi,R:!0},Vh={endpoint:"createAuthUri"},jh={endpoint:"deleteAccount",T:["idToken"]},Wh={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],D:function(e){if(!l(e.deleteProvider))throw new Un("internal-error")}},Kh={endpoint:"emailLinkSignin",T:["email","oobCode"],D:Ki,J:Hi,R:!0},Qh={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],D:Ki,J:Hi,R:!0},Gh={endpoint:"getAccountInfo"},zh={endpoint:"getOobConfirmationCode",T:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Un("internal-error");Ki(e)},da:"email"},Hh={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Un("internal-error")},da:"email"},Yh={endpoint:"getOobConfirmationCode",T:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Un("internal-error");Ki(e)},da:"email"},Xh={sb:!0,endpoint:"getProjectConfig",Gb:"GET"},Jh={sb:!0,endpoint:"getRecaptchaParam",Gb:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new Un("internal-error")}},$h={endpoint:"resetPassword",D:io,da:"email"},Zh={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},ef={endpoint:"setAccountInfo",T:["idToken"],D:Qi,R:!0},tf={endpoint:"setAccountInfo",T:["idToken"],D:function(e){if(Qi(e),!e.password)throw new Un("weak-password")},J:Hi,R:!0},nf={endpoint:"signupNewUser",J:Hi,R:!0},rf={endpoint:"verifyAssertion",D:$i,Oa:Zi,J:eo,R:!0},of={endpoint:"verifyAssertion",D:$i,Oa:Zi,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Un("user-not-found");if(e.errorMessage)throw ao(e.errorMessage);if(!e[Dh])throw new Un("internal-error")},R:!0},af={endpoint:"verifyAssertion",D:function(e){if($i(e),!e.idToken)throw new Un("internal-error")},Oa:Zi,J:eo,R:!0},sf={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Un("invalid-custom-token")},J:Hi,R:!0},uf={endpoint:"verifyPassword",D:function(e){if(Ki(e),!e.password)throw new Un("wrong-password")},J:Hi,R:!0},cf={endpoint:"verifyPhoneNumber",D:Yi,J:Hi},lf={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Un("internal-error");Yi(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Wr(e);Hi(e)}},hf={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Yi,J:Hi},ff=new q(_c,"https://apis.google.com/js/api.js?onload=%{onload}"),df=new Sn(3e4,6e4),pf=new Sn(5e3,15e3),mf=null;po.prototype.toString=function(){return this.f?bt(this.a,"v",this.f):At(this.a.a,"v"),this.b?bt(this.a,"eid",this.b):At(this.a.a,"eid"),this.c.length?bt(this.a,"fw",this.c.join(",")):At(this.a.a,"fw"),this.a.toString()},mo.prototype.toString=function(){var e=Et(this.o,"/__/auth/handler");if(bt(e,"apiKey",this.l),bt(e,"appName",this.c),bt(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=ic.app(this.c).auth().ea()}catch(e){n=null}t.Ya=n,bt(e,"providerId",this.a.providerId),t=this.a,n=vn(t.vb);for(var r in n)n[r]=n[r].toString();r=t.Ac,n=U(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.$a&&t.Ya&&!n[t.$a]&&(n[t.$a]=t.Ya),F(n)||bt(e,"customParameters",yn(n))}if("function"==typeof this.a.Db&&(t=this.a.Db(),t.length&&bt(e,"scopes",t.join(","))),this.i?bt(e,"redirectUrl",this.i):At(e.a,"redirectUrl"),this.g?bt(e,"eventId",this.g):At(e.a,"eventId"),this.h?bt(e,"v",this.h):At(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!wt(e,a)&&bt(e,a,this.b[a]);return this.f?bt(e,"eid",this.f):At(e.a,"eid"),a=go(this.c),a.length&&bt(e,"fw",a.join(",")),e.toString()},rc=yo.prototype,rc.Bb=function(e,t,n){var r=new Un("popup-closed-by-user"),i=new Un("web-storage-unsupported"),o=this,a=!1;return this.fa().then(function(){So(o).then(function(n){n||(e&&Xt(e),t(i),a=!0)})}).s(function(){}).then(function(){if(!a)return $t(e)}).then(function(){if(!a)return st(n).then(function(){t(r)})})},rc.Kb=function(){var e=ln();return!gn(e)&&!_n(e)},rc.Fb=function(){return!1},rc.zb=function(e,t,n,r,i,o,a){if(!e)return me(new Un("popup-blocked"));if(a&&!gn())return this.fa().s(function(t){Xt(e),i(t)}),r(),pe();this.a||(this.a=vo(wo(this)));var s=this;return this.a.then(function(){var t=s.fa().s(function(t){throw Xt(e),i(t),t});return r(),t}).then(function(){if(Lr(n),!a){var r=_o(s.l,s.f,s.b,t,n,null,o,s.c,void 0,s.h);Gt(r,e)}}).s(function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e})},rc.Ab=function(e,t,n){this.a||(this.a=vo(wo(this)));var r=this;return this.a.then(function(){Lr(t);var i=_o(r.l,r.f,r.b,e,t,Qt(),n,r.c,void 0,r.h);Gt(i)}).s(function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e})},rc.fa=function(){var e=this;return bo(this).then(function(){return e.i.bb}).s(function(){throw e.a=null,new Un("network-request-failed")})},rc.Mb=function(){return!0},rc.wa=function(e){this.g.push(e)},rc.Ja=function(e){P(this.g,function(t){return t==e})},rc=To.prototype,rc.get=function(e){return pe(this.a.getItem(e)).then(function(e){return e&&bn(e)})},rc.set=function(e,t){return pe(this.a.setItem(e,yn(t)))},rc.P=function(e){return pe(this.a.removeItem(e))},rc.Y=function(){},rc.ca=function(){};var gf=[];Co.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];gc(r,function(t){i.push(pe().then(function(){return t(e.origin,e.data.data)}))}),ve(i).then(function(r){var i=[];gc(r,function(e){i.push({fulfilled:e.Cb,value:e.value,reason:e.reason?e.reason.message:void 0})}),gc(i,function(e){for(var t in e)"undefined"==typeof e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})})}},No.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Ao.prototype.close=function(){for(;0<this.a.length;)xo(this,this.a[0]);this.b=!0};var yf;rc=Ro.prototype,
rc.set=function(e,t){var n,r=!1,i=this;return Mo(this).then(function(t){return n=t,t=Fo(Uo(n,!0)),Bo(t.get(e))}).then(function(o){var a=Fo(Uo(n,!0));return o?(o.value=t,Bo(a.put(o))):(i.b++,r=!0,o={},o.fbase_key=e,o.value=t,Bo(a.add(o)))}).then(function(){return i.c[e]=t,qo(i,e)}).ha(function(){r&&i.b--})},rc.get=function(e){return Mo(this).then(function(t){return Bo(Fo(Uo(t,!1)).get(e))}).then(function(e){return e&&e.value})},rc.P=function(e){var t=!1,n=this;return Mo(this).then(function(r){return t=!0,n.b++,Bo(Fo(Uo(r,!0)).delete(e))}).then(function(){return delete n.c[e],qo(n,e)}).ha(function(){t&&n.b--})},rc.Y=function(e){0==this.a.length&&jo(this),this.a.push(e)},rc.ca=function(e){P(this.a,function(t){return t==e}),0==this.a.length&&Wo(this)},rc=Ko.prototype,rc.get=function(e){return this.b.then(function(t){return t.get(e)})},rc.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},rc.P=function(e){return this.b.then(function(t){return t.P(e)})},rc.Y=function(e){this.a.push(e)},rc.ca=function(e){P(this.a,function(t){return t==e})},rc=Qo.prototype,rc.get=function(e){return pe(this.a[e])},rc.set=function(e,t){return this.a[e]=t,pe()},rc.P=function(e){return delete this.a[e],pe()},rc.Y=function(){},rc.ca=function(){},rc=Go.prototype,rc.get=function(e){var t=this;return pe().then(function(){var n=t.a.getItem(e);return bn(n)})},rc.set=function(e,t){var n=this;return pe().then(function(){var r=yn(t);null===r?n.P(e):n.a.setItem(e,r)})},rc.P=function(e){var t=this;return pe().then(function(){t.a.removeItem(e)})},rc.Y=function(e){uc.window&&Ke(uc.window,"storage",e)},rc.ca=function(e){uc.window&&He(uc.window,"storage",e)},rc=Yo.prototype,rc.get=function(){return pe(null)},rc.set=function(){return pe()},rc.P=function(){return pe()},rc.Y=function(){},rc.ca=function(){},rc=Xo.prototype,rc.get=function(e){var t=this;return pe().then(function(){var n=t.a.getItem(e);return bn(n)})},rc.set=function(e,t){var n=this;return pe().then(function(){var r=yn(t);null===r?n.P(e):n.a.setItem(e,r)})},rc.P=function(e){var t=this;return pe().then(function(){t.a.removeItem(e)})},rc.Y=function(){},rc.ca=function(){};var vf,bf,wf={C:Go,Qa:Xo},_f={C:Go,Qa:Xo},Ef={C:To,Qa:Yo},Sf={C:Go,Qa:Yo},Tf={Vc:"local",NONE:"none",Xc:"session"};rc=ta.prototype,rc.get=function(e,t){return ra(this,e.C).get(ia(e,t))},rc.set=function(e,t,n){var r=ia(e,n),i=this,o=ra(this,e.C);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.C&&(i.b[r]=t)})},rc.addListener=function(e,t,n){e=ia(e,t),this.m&&(this.b[e]=uc.localStorage.getItem(e)),F(this.a)&&(ra(this,"local").Y(this.f),this.h||(Kt()||!kn())&&uc.indexedDB||!this.m||sa(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},rc.removeListener=function(e,t,n){e=ia(e,t),this.a[e]&&(P(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),F(this.a)&&(ra(this,"local").ca(this.f),ua(this))},rc.Lb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"==typeof r&&(r=null);var i=uc.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Wa(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!=typeof e.a.a?ra(this,"local").ca(this.f):ua(this),this.o)if(n=uc.localStorage.getItem(t),r=e.a.newValue,r!==n)null!==r?uc.localStorage.setItem(t,r):uc.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"==typeof e.a.a)return;var o=this;n=function(){"undefined"==typeof e.a.a&&o.b[t]===uc.localStorage.getItem(t)||(o.b[t]=uc.localStorage.getItem(t),o.Wa(t))},el&&ul&&10==ul&&uc.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else gc(e,g(this.Wa,this))},rc.Wa=function(e){this.a[e]&&gc(this.a[e],function(e){e()})};var Cf,If={name:"authEvent",C:"local"};v(da,fa);for(var kf=64,Nf=kf-1,Af=[],Df=0;Df<Nf;Df++)Af[Df]=0;var xf=O(128,Af);da.prototype.reset=function(){this.g=this.c=0,this.a=uc.Int32Array?new Int32Array(this.h):M(this.h)};var Rf=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];v(ga,da);var Pf=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];rc=ya.prototype,rc.fa=function(){return this.za?this.za:this.za=en().then(function(){if("function"!=typeof hn("universalLinks.subscribe",uc))throw va("cordova-universal-links-plugin-fix is not installed");if("undefined"==typeof hn("BuildInfo.packageName",uc))throw va("cordova-plugin-buildinfo is not installed");if("function"!=typeof hn("cordova.plugins.browsertab.openUrl",uc))throw va("cordova-plugin-browsertab is not installed");if("function"!=typeof hn("cordova.InAppBrowser.open",uc))throw va("cordova-plugin-inappbrowser is not installed")},function(){throw new Un("cordova-not-ready")})},rc.Bb=function(e,t){return t(new Un("operation-not-supported-in-this-environment")),pe()},rc.zb=function(){return me(new Un("operation-not-supported-in-this-environment"))},rc.Mb=function(){return!1},rc.Kb=function(){return!0},rc.Fb=function(){return!0},rc.Ab=function(e,t,n){if(this.c)return me(new Un("redirect-operation-pending"));var r=this,i=uc.document,o=null,a=null,s=null,u=null;return this.c=pe().then(function(){return Lr(t),Sa(r)}).then(function(){return _a(r,e,t,n)}).then(function(){return new he(function(e,t){a=function(){var t=hn("cordova.plugins.browsertab.close",uc);return e(),"function"==typeof t&&t(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(a),s=function(){o||(o=st(2e3).then(function(){t(new Un("redirect-cancelled-by-user"))}))},u=function(){Tn()&&s()},i.addEventListener("resume",s,!1),ln().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(e){return Ta(r).then(function(){throw e})})}).ha(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.Ja(a),r.c=null})},rc.wa=function(e){this.b.push(e),Sa(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Fr("unknown",null,null,null,new Un("no-auth-event")),e(t))})},rc.Ja=function(e){P(this.b,function(t){return t==e})};var Of={name:"pendingRedirect",C:"session"};Da.prototype.reset=function(){this.f=!1,this.a.Ja(this.m),this.a=xa(this.B,this.l,this.o),this.i={}},Da.prototype.u=function(e){if(!e)throw new Un("invalid-auth-event");if(6e5<=dc()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.tb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=dc())),t=!0;break}}return ja(this.b),t};var Mf=new Sn(2e3,1e4),Lf=new Sn(3e4,6e4);Da.prototype.la=function(){return this.b.la()};var Ff={};Va.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Va.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(za(this,!0,null,e.a),pe()):t.xa(n,r)?Ka(this,e,t):me(new Un("invalid-auth-event")):(za(this,!1,null,null),pe())}else me(new Un("invalid-auth-event"))},Va.prototype.la=function(){var e=this;return new he(function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),Ha(e))})},Ya.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ga(e.c,null,e.a,e.b),pe()):t.xa(n,r)?Xa(e,t):me(new Un("invalid-auth-event"))}else me(new Un("invalid-auth-event"))},$a.prototype.confirm=function(e){return e=Or(this.verificationId,e),this.a(e)},ts.prototype.start=function(){this.a=this.c,rs(this,!0)},ts.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},is.prototype.A=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},is.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?me(new Un("user-token-expired")):e||!this.b||dc()>this.c-3e4?this.a?us(this,{grant_type:"refresh_token",refresh_token:this.a}):pe(null):pe({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},cs.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},v(fs,Fe),v(ds,nt),ds.prototype.pa=function(e){this.ja=e,Ui(this.a,e)},ds.prototype.ea=function(){return this.ja},ds.prototype.ya=function(){return M(this.O)},ds.prototype.Fa=function(){this.w.b&&(this.w.stop(),this.w.start())},xn(ds.prototype,"providerId","firebase"),rc=ds.prototype,rc.reload=function(){var e=this;return Ws(this,ks(this).then(function(){return Ps(e).then(function(){return Ss(e)}).then(Is)}))},rc.Zb=function(e){return this.F(e).then(function(e){return new es(e)})},rc.F=function(e){var t=this;return Ws(this,ks(this).then(function(){return t.c.getToken(e)}).then(function(e){if(!e)throw new Un("internal-error");return e.accessToken!=t.ra&&(_s(t,e.accessToken),t.dispatchEvent(new fs("tokenChanged"))),xs(t,"refreshToken",e.refreshToken),e.accessToken}))},rc.uc=function(e){if(e=e.users,!e||!e.length)throw new Un("internal-error");e=e[0],Cs(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=Ls(e),n=0;n<t.length;n++)As(this,t[n]);xs(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},rc.vc=function(e){return Dn("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.cb(e)},rc.cb=function(e){var t=this,n=null;return Ws(this,e.f(this.a,this.uid).then(function(e){return Os(t,e),n=Us(t,e,"reauthenticate"),t.h=null,t.reload()}).then(function(){return n}),!0)},rc.mc=function(e){return Dn("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.ab(e)},rc.ab=function(e){var t=this,n=null;return Ws(this,Fs(this,e.providerId).then(function(){return t.F()}).then(function(n){return e.b(t.a,n)}).then(function(e){return n=Us(t,e,"link"),Bs(t,e)}).then(function(){return n}))},rc.nc=function(e,t){var n=this;return Ws(this,Fs(this,"phone").then(function(){return Za(ys(n),e,t,g(n.ab,n))}))},rc.wc=function(e,t){var n=this;return Ws(this,pe().then(function(){return Za(ys(n),e,t,g(n.cb,n))}),!0)},rc.nb=function(e){var t=this;return Ws(this,this.F().then(function(n){return t.a.nb(n,e)}).then(function(e){return Os(t,e),t.reload()}))},rc.Nc=function(e){var t=this;return Ws(this,this.F().then(function(n){return e.b(t.a,n)}).then(function(e){return Os(t,e),t.reload()}))},rc.ob=function(e){var t=this;return Ws(this,this.F().then(function(n){return t.a.ob(n,e)}).then(function(e){return Os(t,e),t.reload()}))},rc.pb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return ks(this);var t=this;return Ws(this,this.F().then(function(n){return t.a.pb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return Os(t,e),xs(t,"displayName",e.displayName||null),xs(t,"photoURL",e.photoUrl||null),gc(t.providerData,function(e){"password"===e.providerId&&(xn(e,"displayName",t.displayName),xn(e,"photoURL",t.photoURL))}),Ss(t)}).then(Is))},rc.Lc=function(e){var t=this;return Ws(this,Ps(this).then(function(n){return x(Ns(t),e)?Ji(t.a,n,[e]).then(function(e){var n={};return gc(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),gc(Ns(t),function(e){n[e]||Ds(t,e)}),n[Pr.PROVIDER_ID]||xn(t,"phoneNumber",null),Ss(t)}):Ss(t).then(function(){throw new Un("no-such-provider")})}))},rc.delete=function(){var e=this;return Ws(this,this.F().then(function(t){return oo(e.a,jh,{idToken:t})}).then(function(){e.dispatchEvent(new fs("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");ps(e,null),gs(e,null),e.G=[],e.B=!0,ws(e),xn(e,"refreshToken",null),e.i&&Ma(e.i,e)})},rc.tb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.aa||null)==t||"reauthViaRedirect"==e&&(this.aa||null)==t)},rc.ga=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},rc.xa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?g(this.xb,this):"reauthViaPopup"==e&&t==(this.g||null)?g(this.yb,this):"linkViaRedirect"==e&&(this.aa||null)==t?g(this.xb,this):"reauthViaRedirect"==e&&(this.aa||null)==t?g(this.yb,this):null},rc.oc=function(e){var t=this;return qs(this,"linkViaPopup",e,function(){return Fs(t,e.providerId).then(function(){return Ss(t)})},!1)},rc.xc=function(e){return qs(this,"reauthViaPopup",e,function(){return pe()},!0)},rc.pc=function(e){var t=this;return Vs(this,"linkViaRedirect",e,function(){return Fs(t,e.providerId)},!1)},rc.yc=function(e){return Vs(this,"reauthViaRedirect",e,function(){return pe()},!0)},rc.xb=function(e,t,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null,o=this.F().then(function(i){return no(r.a,{requestUri:e,postBody:n,sessionId:t,idToken:i})}).then(function(e){return i=Us(r,e,"link"),Bs(r,e)}).then(function(){return i});return Ws(this,o)},rc.yb=function(e,t,n){var r=this;this.b&&(this.b.cancel(),this.b=null);var i=null,o=pe().then(function(){return sr(ro(r.a,{requestUri:e,sessionId:t,postBody:n}),r.uid)}).then(function(e){return i=Us(r,e,"reauthenticate"),Os(r,e),r.h=null,r.reload()}).then(function(){return i});return Ws(this,o,!0)},rc.gb=function(e){var t=this,n=null;return Ws(this,this.F().then(function(t){return n=t,"undefined"==typeof e||F(e)?{}:Vn(new qn(e))}).then(function(e){return t.a.gb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},rc.toJSON=function(){return this.A()},rc.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.o,authDomain:this.u,stsTokenManager:this.c.A(),redirectEventId:this.aa||null};return this.metadata&&B(e,this.metadata.A()),gc(this.providerData,function(t){e.providerData.push(On(t))}),e};var Uf={name:"redirectUser",C:"session"};Js.prototype.g=function(){var e=this,t=eu("local");ou(this,function(){return pe().then(function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null}).then(function(n){if(n)return $s(e,"local").then(function(){e.c=t})})})};var Bf={name:"persistence",C:"session"};Js.prototype.jb=function(e){var t=null,n=this;return ea(e),ou(this,function(){return e!=n.c.C?n.b.get(n.c,n.a).then(function(r){return t=r,$s(n,e)}).then(function(){if(n.c=eu(e),t)return n.b.set(n.c,t,n.a)}):pe()})},v(au,nt),v(su,Fe),v(uu,Fe),rc=au.prototype,rc.jb=function(e){return e=this.h.jb(e),Tu(this,e)},rc.pa=function(e){this.W===e||this.l||(this.W=e,Ui(this.c,this.W),this.dispatchEvent(new su(this.ea())))},rc.ea=function(){return this.W},rc.Oc=function(){var e=uc.navigator;this.pa(e?e.languages&&e.languages[0]||e.language||e.userLanguage||null:null)},rc.qc=function(e){this.G.push(e),Bi(this.c,ic.SDK_VERSION?cn(ic.SDK_VERSION,this.G):null),this.dispatchEvent(new uu(this.G))},rc.ya=function(){return M(this.G)},rc.toJSON=function(){return{apiKey:bu(this).options.apiKey,authDomain:bu(this).options.authDomain,appName:bu(this).name,currentUser:wu(this)&&wu(this).A()}},rc.tb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},rc.ga=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},rc.xa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?g(this.Wb,this):null},rc.Wb=function(e,t,n){var r=this;e={requestUri:e,postBody:n,sessionId:t},this.b&&(this.b.cancel(),this.b=null);var i=null,o=null,a=to(r.c,e).then(function(e){return i=Mr(e),o=Jn(e),e});return e=r.V.then(function(){return a}).then(function(e){return du(r,e)}).then(function(){return Pn({user:wu(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}),Tu(this,e)},rc.Gc=function(e){if(!dn())return me(new Un("operation-not-supported-in-this-environment"));var t=this,n=Xn(e.providerId),r=wn(),i=null;(!gn()||nn())&&bu(this).options.authDomain&&e.isOAuthProvider&&(i=_o(bu(this).options.authDomain,bu(this).options.apiKey,bu(this).name,"signInViaPopup",e,null,r,ic.SDK_VERSION||null));var o=Jt(i,n&&n.Ba,n&&n.Aa);return n=lu(this).then(function(t){return La(t,o,"signInViaPopup",e,r,!!i)}).then(function(){return new he(function(e,n){t.ga("signInViaPopup",null,new Un("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.b=Ba(t.a,t,"signInViaPopup",o,r)})}).then(function(e){return o&&Xt(o),e?Pn(e):null}).s(function(e){throw o&&Xt(o),e}),Tu(this,n)},rc.Hc=function(e){if(!dn())return me(new Un("operation-not-supported-in-this-environment"));var t=this,n=lu(this).then(function(){return tu(t.h)}).then(function(){return Ua(t.a,"signInViaRedirect",e)});return Tu(this,n)},rc.la=function(){var e=this;return fu(this).then(function(t){return e.a&&Wa(e.a.b),t}).s(function(t){throw e.a&&Wa(e.a.b),t})},rc.Mc=function(e){if(!e)return me(new Un("null-user"));var t=this,n={};n.apiKey=bu(this).options.apiKey,n.authDomain=bu(this).options.authDomain,n.appName=bu(this).name;var r=zs(e,n,t.w,t.ya());return Tu(this,this.i.then(function(){if(bu(t).options.apiKey!=e.l)return r.reload()}).then(function(){return wu(t)&&e.uid==wu(t).uid?(Rs(wu(t),e),t.Z(e)):(pu(t,r),Ts(r),t.Z(r))}).then(function(){Eu(t)}))},rc.lb=function(){var e=this,t=this.i.then(function(){return e.a&&Wa(e.a.b),wu(e)?(pu(e,null),ru(e.h).then(function(){Eu(e)})):pe()});return Tu(this,t)},rc.Ic=function(){var e=this;return iu(this.h,bu(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=wu(e)&&t){n=wu(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Rs(wu(e),t),wu(e).F();(wu(e)||t)&&(pu(e,t),t&&(Ts(t),t.ba=e.w),e.a&&Oa(e.a,e),Eu(e))}})},rc.Z=function(e){return nu(this.h,e)},rc.Xb=function(){Eu(this),this.Z(wu(this))},rc.gc=function(){this.lb()},rc.hc=function(){this.lb()},rc.ic=function(e){var t=this;this.addAuthTokenListener(function(){e.next(wu(t))})},rc.jc=function(e){var t=this;Su(this,function(){e.next(wu(t))})},rc.sc=function(e,t,n){var r=this;return this.X&&Promise.resolve().then(function(){f(e)?e(wu(r)):f(e.next)&&e.next(wu(r))}),this.Pb(e,t,n)},rc.rc=function(e,t,n){var r=this;return this.X&&Promise.resolve().then(function(){r.O=r.getUid(),f(e)?e(wu(r)):f(e.next)&&e.next(wu(r))}),this.Qb(e,t,n)},rc.Yb=function(e){var t=this,n=this.i.then(function(){return wu(t)?wu(t).F(e).then(function(e){return{accessToken:e}}):null});return Tu(this,n)},rc.Cc=function(e){var t=this;return this.i.then(function(){return vu(t,oo(t.c,sf,{token:e}))}).then(function(e){var n=e.user;return xs(n,"isAnonymous",!1),t.Z(n),e})},rc.Dc=function(e,t){var n=this;return this.i.then(function(){return vu(n,oo(n.c,uf,{email:e,password:t}))})},rc.Sb=function(e,t){var n=this;return this.i.then(function(){return vu(n,oo(n.c,qh,{email:e,password:t}))})},rc.Pa=function(e){var t=this;return this.i.then(function(){return vu(t,e.ka(t.c))})},rc.Bc=function(e){return Dn("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Pa(e)},rc.kb=function(){var e=this;return this.i.then(function(){var t=wu(e);if(t&&t.isAnonymous){var n=Pn({providerId:null,isNewUser:!1});return Pn({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vu(e,e.c.kb()).then(function(t){var n=t.user;return xs(n,"isAnonymous",!0),e.Z(n),t})})},rc.getUid=function(){return wu(this)&&wu(this).uid||null},rc.Rb=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&wu(this)&&bs(wu(this))},rc.zc=function(e){var t=this;gc(this.o,function(n){n==e&&t.u--}),0>this.u&&(this.u=0),0==this.u&&wu(this)&&ws(wu(this)),this.removeAuthTokenListener(e)},rc.addAuthTokenListener=function(e){var t=this;this.o.push(e),Tu(this,this.i.then(function(){t.l||x(t.o,e)&&e(_u(t))}))},rc.removeAuthTokenListener=function(e){P(this.o,function(t){return t==e})},rc.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h,e.b.removeListener(eu("local"),e.a,this.ja)),this.a&&(Ma(this.a,this),Wa(this.a.b)),Promise.resolve()},rc.Vb=function(e){return Tu(this,Gi(this.c,e))},rc.kc=function(e){return!!Ar(e)},rc.ib=function(e,t){var n=this;return Tu(this,pe().then(function(){var e=new qn(t);if(!e.c)throw new Un("argument-error",Jl+" must be true when sending sign in link to email");return Vn(e)}).then(function(t){return n.c.ib(e,t)}).then(function(){}))},rc.Pc=function(e){return this.Ia(e).then(function(e){return e.data.email})},rc.Xa=function(e,t){return Tu(this,this.c.Xa(e,t).then(function(){}))},rc.Ia=function(e){return Tu(this,this.c.Ia(e).then(function(e){return new Fn(e)}))},rc.Va=function(e){return Tu(this,this.c.Va(e).then(function(){}))},rc.hb=function(e,t){var n=this;return Tu(this,pe().then(function(){return"undefined"==typeof t||F(t)?{}:Vn(new qn(t))}).then(function(t){return n.c.hb(e,t)}).then(function(){}))},rc.Fc=function(e,t){return Tu(this,Za(this,e,t,g(this.Pa,this)))},rc.Ec=function(e,t){var n=this;return Tu(this,pe().then(function(){var r=Nr(e,t||Qt());return n.Pa(r)}))},Cu.prototype.render=function(){},Cu.prototype.reset=function(){},Cu.prototype.getResponse=function(){},Cu.prototype.execute=function(){};var qf=null;Iu.prototype.render=function(e,t){return this.a[this.b.toString()]=new Au(e,t),this.b++},Iu.prototype.reset=function(e){var t=ku(this,e);e=Nu(e),t&&e&&(t.delete(),delete this.a[e])},Iu.prototype.getResponse=function(e){return(e=ku(this,e))?e.getResponse():null},Iu.prototype.execute=function(e){(e=ku(this,e))&&e.execute()},Au.prototype.getResponse=function(){return Du(this),this.b},Au.prototype.execute=function(){Du(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=sn();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()},6e4)},500))},Au.prototype.delete=function(){Du(this),this.g=!0,clearTimeout(this.a),this.a=null,He(this.f,"click",this.i)},xu.prototype.g=function(){return qf||(qf=new Iu),pe(qf)},xu.prototype.c=function(){};var Vf=null,jf=new q(_c,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Wf=new Sn(3e4,6e4);Ru.prototype.g=function(e){var t=this;return new he(function(n,r){var i=setTimeout(function(){r(new Un("network-request-failed"))},Wf.get());if(!uc.grecaptcha||e!==t.f&&!t.b){uc[t.a]=function(){if(uc.grecaptcha){t.f=e;var o=uc.grecaptcha.render;uc.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(uc.grecaptcha)}else clearTimeout(i),r(new Un("internal-error"));delete uc[t.a]};var o=K(jf,{onload:t.a,hl:e||""});pe(xi(o)).s(function(){clearTimeout(i),r(new Un("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(i),n(uc.grecaptcha)})},Ru.prototype.c=function(){this.b--};var Kf=null,Qf="callback",Gf="expired-callback",zf="sitekey",Hf="size";rc=Pu.prototype,rc.za=function(){var e=this;return this.f?this.f:this.f=Lu(this,pe().then(function(){if(pn()&&!rn())return Zt();throw new Un("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.o.g(e.v())}).then(function(t){return e.g=t,oo(e.u,Jh,{})}).then(function(t){e.a[zf]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},rc.render=function(){Fu(this);var e=this;return Lu(this,this.za().then(function(){if(null===e.c){var t=e.l;if(!e.i){var n=Mt(t);t=Ft("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},rc.verify=function(){Fu(this);var e=this;return Lu(this,this.render().then(function(t){return new he(function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(Mu(e,i),n(t))};e.m.push(i),e.i&&e.g.execute(e.c)}})}))},rc.reset=function(){Fu(this),null!==this.c&&this.g.reset(this.c)},rc.clear=function(){Fu(this),this.B=!0,this.o.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Mt(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}},v(Uu,Pu);var Yf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");$u(au.prototype,{Va:{name:"applyActionCode",j:[qu("code")]},Ia:{name:"checkActionCode",j:[qu("code")]},Xa:{name:"confirmPasswordReset",j:[qu("code"),qu("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",j:[qu("email"),qu("password")]},Vb:{name:"fetchSignInMethodsForEmail",j:[qu("email")]},la:{name:"getRedirectResult",j:[]},kc:{name:"isSignInWithEmailLink",j:[qu("emailLink")]},rc:{name:"onAuthStateChanged",j:[Ju(ju(),Wu(),"nextOrObserver"),Wu("opt_error",!0),Wu("opt_completed",!0)]},sc:{name:"onIdTokenChanged",j:[Ju(ju(),Wu(),"nextOrObserver"),Wu("opt_error",!0),Wu("opt_completed",!0)]},hb:{name:"sendPasswordResetEmail",j:[qu("email"),Ju(ju("opt_actionCodeSettings",!0),Ku(null,!0),"opt_actionCodeSettings",!0)]},ib:{name:"sendSignInLinkToEmail",j:[qu("email"),ju("actionCodeSettings")]},jb:{name:"setPersistence",j:[qu("persistence")]},Bc:{name:"signInAndRetrieveDataWithCredential",j:[Hu()]},kb:{name:"signInAnonymously",j:[]},Pa:{name:"signInWithCredential",j:[Hu()]},Cc:{name:"signInWithCustomToken",j:[qu("token")]},Dc:{name:"signInWithEmailAndPassword",j:[qu("email"),qu("password")]},Ec:{name:"signInWithEmailLink",j:[qu("email"),qu("emailLink",!0)]},Fc:{name:"signInWithPhoneNumber",j:[qu("phoneNumber"),Xu()]},Gc:{name:"signInWithPopup",j:[Yu()]},Hc:{name:"signInWithRedirect",j:[Yu()]},Mc:{name:"updateCurrentUser",j:[Ju(function(e){return{name:"user",K:"an instance of Firebase User",optional:!!e,M:function(e){return!!(e&&e instanceof ds)}}}(),Ku(),"user")]},lb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[qu(null,!0)]},Oc:{name:"useDeviceLanguage",j:[]},Pc:{name:"verifyPasswordResetCode",j:[qu("code")]}}),Zu(au.prototype,{lc:{name:"languageCode",rb:Ju(qu(),Ku(),"languageCode")}}),au.Persistence=Tf,au.Persistence.LOCAL="local",au.Persistence.SESSION="session",au.Persistence.NONE="none",$u(ds.prototype,{delete:{name:"delete",j:[]},Zb:{name:"getIdTokenResult",j:[Vu("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Vu("opt_forceRefresh",!0)]},mc:{name:"linkAndRetrieveDataWithCredential",j:[Hu()]},ab:{name:"linkWithCredential",j:[Hu()]},nc:{name:"linkWithPhoneNumber",j:[qu("phoneNumber"),Xu()]},oc:{name:"linkWithPopup",j:[Yu()]},pc:{name:"linkWithRedirect",j:[Yu()]},vc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Hu()]},cb:{name:"reauthenticateWithCredential",j:[Hu()]},wc:{name:"reauthenticateWithPhoneNumber",j:[qu("phoneNumber"),Xu()]},xc:{name:"reauthenticateWithPopup",j:[Yu()]},yc:{name:"reauthenticateWithRedirect",j:[Yu()]},reload:{name:"reload",j:[]},gb:{name:"sendEmailVerification",j:[Ju(ju("opt_actionCodeSettings",!0),Ku(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[qu(null,!0)]},Lc:{name:"unlink",j:[qu("provider")]},nb:{name:"updateEmail",j:[qu("email")]},ob:{name:"updatePassword",j:[qu("password")]},Nc:{name:"updatePhoneNumber",j:[Hu("phone")]},pb:{name:"updateProfile",j:[ju("profile")]}}),$u(Iu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$u(Cu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$u(he.prototype,{ha:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Zu(Ja.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",rb:Vu("appVerificationDisabledForTesting")}}),$u($a.prototype,{confirm:{name:"confirm",j:[qu("verificationCode")]}}),ec(ar,"fromJSON",function(e){e=o(e)?JSON.parse(e):e;for(var t,n=[dr,Ir,xr,lr],r=0;r<n.length;r++)if(t=n[r](e))return t;return null},[Ju(qu(),ju(),"json")]),ec(kr,"credential",function(e,t){return new Cr(e,t)},[qu("email"),qu("password")]),$u(Cr.prototype,{A:{name:"toJSON",j:[qu(null,!0)]}}),$u(yr.prototype,{ua:{name:"addScope",j:[qu("scope")]},Ca:{name:"setCustomParameters",j:[ju("customOAuthParameters")]}}),ec(yr,"credential",vr,[Ju(qu(),ju(),"token")]),ec(kr,"credentialWithLink",Nr,[qu("email"),qu("emailLink")]),$u(br.prototype,{ua:{name:"addScope",j:[qu("scope")]},Ca:{name:"setCustomParameters",j:[ju("customOAuthParameters")]}}),ec(br,"credential",wr,[Ju(qu(),ju(),"token")]),$u(_r.prototype,{ua:{name:"addScope",j:[qu("scope")]},Ca:{name:"setCustomParameters",j:[ju("customOAuthParameters")]}}),ec(_r,"credential",Er,[Ju(qu(),Ju(ju(),Ku()),"idToken"),Ju(qu(),Ku(),"accessToken",!0)]),$u(Sr.prototype,{Ca:{name:"setCustomParameters",j:[ju("customOAuthParameters")]}}),ec(Sr,"credential",Tr,[Ju(qu(),ju(),"token"),qu("secret",!0)]),$u(gr.prototype,{ua:{name:"addScope",j:[qu("scope")]},credential:{name:"credential",j:[Ju(qu(),Ju(ju(),Ku()),"optionsOrIdToken"),Ju(qu(),Ku(),"accessToken",!0)]},Ca:{name:"setCustomParameters",j:[ju("customOAuthParameters")]}}),$u(hr.prototype,{A:{name:"toJSON",j:[qu(null,!0)]}}),$u(ur.prototype,{A:{name:"toJSON",j:[qu(null,!0)]}}),ec(Pr,"credential",Or,[qu("verificationId"),qu("verificationCode")]),$u(Pr.prototype,{Ta:{name:"verifyPhoneNumber",j:[qu("phoneNumber"),Xu()]}}),$u(Dr.prototype,{A:{name:"toJSON",j:[qu(null,!0)]}}),$u(Un.prototype,{toJSON:{name:"toJSON",j:[qu(null,!0)]}}),$u(jr.prototype,{toJSON:{name:"toJSON",j:[qu(null,!0)]}}),$u(Vr.prototype,{toJSON:{name:"toJSON",j:[qu(null,!0)]}}),$u(Uu.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"==typeof ic||!ic.INTERNAL||!ic.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:au,AuthCredential:ar,Error:Un};ec(e,"EmailAuthProvider",kr,[]),ec(e,"FacebookAuthProvider",yr,[]),ec(e,"GithubAuthProvider",br,[]),ec(e,"GoogleAuthProvider",_r,[]),ec(e,"TwitterAuthProvider",Sr,[]),ec(e,"OAuthProvider",gr,[qu("providerId")]),ec(e,"SAMLAuthProvider",mr,[qu("providerId")]),ec(e,"PhoneAuthProvider",Pr,[Gu()]),ec(e,"RecaptchaVerifier",Uu,[Ju(qu(),Qu(),"recaptchaContainer"),ju("recaptchaParameters",!0),zu()]),ic.INTERNAL.registerService("auth",function(e,t){return e=new au(e),t({INTERNAL:{getUid:g(e.getUid,e),getToken:g(e.Yb,e),addAuthTokenListener:g(e.Rb,e),removeAuthTokenListener:g(e.zc,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),ic.INTERNAL.extendNamespace({User:ds})}()}).apply("undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),l=i(c),h=n(5),f=r(h),d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:[]},n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;f.firestore().collection("myDataApp").onSnapshot(function(t){var n=t.docChanges();e.setState({items:n.map(function(e){if(f.auth().currentUser.email===e.doc.data().email)return console.log(e.doc.data().title+"\n"+e.doc.data().post+"|"),{title:e.doc.data().title,post:e.doc.data().post}}).filter(function(e){return!!e})})})}},{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement("button",{className:"btnLogOut",onClick:function(){return f.auth().signOut()}},"Sign out!"),l.default.createElement("br",null),l.default.createElement("br",null),l.default.createElement("h1",null,"Welcome ",f.auth().currentUser.displayName),l.default.createElement("img",{className:"LogIn-photo",alt:"profile_picture_not_found",src:f.auth().currentUser.photoURL}),l.default.createElement("h1",{style:{color:"#eb0363"}},"Dashboard =D "),l.default.createElement("div",null,this.state.items.map(function(e){return l.default.createElement("div",null,l.default.createElement("p",null,e.title),l.default.createElement("p",null,e.post),l.default.createElement("p",null,e.email))})))}}]),t}(l.default.Component);t.default=d},function(e,t,n){"use strict";e.exports=n(44)},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return y=e,v}}function o(e,t){try{return e(t)}catch(e){return y=e,v}}function a(e,t,n){try{e(t,n)}catch(e){return y=e,v}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&m(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),c(e,new p(t,n,a))})}function c(e,t){for(;3===e._81;)e=e._65;return s._10&&s._10(e),0===e._81?0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t):void l(e,t)}function l(e,t){g(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?h(t.promise,e._65):f(t.promise,e._65));var r=o(n,e._65);r===v?f(t.promise,y):h(t.promise,r)})}function h(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===v)return f(e,y);if(n===e.then&&t instanceof s)return e._81=3,e._65=t,void d(e);if("function"==typeof n)return void m(n.bind(t),e)}e._81=1,e._65=t,d(e)}function f(e,t){e._81=2,e._65=t,s._97&&s._97(e,t),d(e)}function d(e){if(1===e._45&&(c(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)c(e,e._54[t]);e._54=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==v||(n=!0,f(t,y))}var g=n(28),y=null,v={};e.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return c(this,new p(e,t,n)),n}},function(e,t,n){"use strict";e.exports=n(56)},function(e,t,n){"use strict";e.exports=n(57)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}e.exports=n},function(e,t,n){(function(r){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function o(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function a(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}function s(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=C.__values(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Q("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function u(e){v=e}function c(e){w=e}function l(e){_=e}function h(e,t){return J(e.name,t.name)}function f(e,t){return J(e,t)}function d(e,t){if(void 0===t&&(t=null),null===e)return ht.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),I.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){var n=e;return new Ze(n,d(t))}if(e instanceof Array||!pt){var r=ht.EMPTY_NODE;return o(e,function(t,n){if(I.contains(e,t)&&"."!==t.substring(0,1)){var i=d(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}}),r.updatePriority(d(t))}var i=[],a=!1,s=e;if(o(s,function(e,t){if("."!==e.substring(0,1)){var n=d(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new ze(e,n)))}}),0==i.length)return ht.EMPTY_NODE;var u=ut(i,h,function(e){return e.name},f);if(a){var c=ut(i,tt.getCompare());return new ht(u,d(t),new lt({".priority":c},{".priority":tt}))}return new ht(u,d(t),lt.Default)}function p(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(t,i){".priority"===t?(I.assert(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=p(e.child(t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(e.child(".priority"),r)),n}function m(e){Vn=e}function g(t){m(t.SDK_VERSION);var n=t.INTERNAL.registerService("database",function(e,t,n){return Ar.getInstance().databaseFromApp(e,n)},{Reference:Sr,Query:Ct,Database:Dr,DataSnapshot:wt,enableLogging:q,INTERNAL:qr,ServerValue:Hr,TEST_ACCESS:zr},null,!0);I.isNodeSdk()&&(e.exports=n)}Object.defineProperty(t,"__esModule",{value:!0});var y,v,b,w,_,E,S,T=i(n(1)),C=n(3),I=n(4),k=n(6),N=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),I.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:I.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),A=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return I.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),D=function(e){try{if("undefined"!=typeof window&&"undefined"!=typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new N(t)}}catch(e){}return new A},x=D("localStorage"),R=D("sessionStorage"),P=new k.Logger("@firebase/database"),O="FIREBASE_DATABASE_EMULATOR_HOST",M=function(){var e=1;return function(){return e++}}(),L=function(e){var t=I.stringToByteArray(e),n=new I.Sha1;n.update(t);var r=n.digest();return I.base64.encodeByteArray(r)},F=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)n+=Array.isArray(e[r])||e[r]&&"object"==typeof e[r]&&"number"==typeof e[r].length?F.apply(null,e[r]):"object"==typeof e[r]?I.stringify(e[r]):e[r],n+=" ";return n},U=null,B=!0,q=function(e,t){I.assert(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(P.logLevel=k.LogLevel.VERBOSE,U=P.log.bind(P),t&&R.set("logging_enabled",!0)):"function"==typeof e?U=e:(U=null,R.remove("logging_enabled"))},V=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(B===!0&&(B=!1,null===U&&R.get("logging_enabled")===!0&&q(!0)),U){var n=F.apply(null,e);U(n)}},j=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];V.apply(void 0,C.__spread([e],t))}},W=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+F.apply(void 0,C.__spread(e));P.error(n)},K=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+F.apply(void 0,C.__spread(e));throw P.error(n),new Error(n)},Q=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+F.apply(void 0,C.__spread(e));P.warn(n)},G=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Q("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},z=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},H=function(e){if(I.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){return document.body?void(t||(t=!0,e())):void setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},Y="[MIN_NAME]",X="[MAX_NAME]",J=function(e,t){if(e===t)return 0;if(e===Y||t===X)return-1;if(t===Y||e===X)return 1;var n=se(e),r=se(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},$=function(e,t){return e===t?0:e<t?-1:1},Z=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+I.stringify(t))},ee=function(e){if("object"!=typeof e||null===e)return I.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=I.stringify(t[i]),r+=":",r+=ee(e[t[i]]);return r+="}"},te=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r},ne=function(e){I.assert(!z(e),"Invalid JSON number");var t,n,r,i,o,a,s,u=11,c=52,l=(1<<u-1)-1;for(0===e?(n=0,r=0,t=1/e===-(1/0)?1:0):(t=e<0,e=Math.abs(e),e>=Math.pow(2,1-l)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),l),n=i+l,r=Math.round(e*Math.pow(2,c-i)-Math.pow(2,c))):(n=0,r=Math.round(e/Math.pow(2,1-l-c)))),a=[],o=c;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=u;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var h="";for(o=0;o<64;o+=8){var f=parseInt(s.substr(o,8),2).toString(16);1===f.length&&(f="0"+f),h+=f}return h.toLowerCase()},re=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},ie=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},oe=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},ae=new RegExp("^-?\\d{1,10}$"),se=function(e){if(ae.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ue=function(e){try{e()}catch(e){setTimeout(function(){var t=e.stack||"";throw Q("Exception was thrown by user callback.",t),e},Math.floor(0))}},ce=function(){var e="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},le=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},he=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=J(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),fe=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=I.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=I.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=I.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),de="5",pe="v",me="s",ge="r",ye="f",ve="firebaseio.com",be="ls",we="websocket",_e="long_polling",Ee=function(){function e(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=x.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&x.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){I.assert("string"==typeof e,"typeof type must == string"),I.assert("object"==typeof t,"typeof params must == object");var n;if(e===we)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==_e)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return o(t,function(e,t){r.push(e+"="+t)}),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}(),Se=function(e){var t=Te(e),n=t.namespace;"firebase"===t.domain&&K(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||K("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||G();var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new Ee(t.host,t.secure,n,r,"",n!=t.subdomain),path:new he(t.pathString)}},Te=function(e){var t="",n="",r="",i="",o="",u=!0,c="https",l=443;if("string"==typeof e){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var f=e.indexOf("/");f===-1&&(f=e.length);var d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(f,d)),f<d&&(i=a(e.substring(f,d)));var p=s(e.substring(Math.min(e.length,d)));h=t.indexOf(":"),h>=0?(u="https"===c||"wss"===c,l=parseInt(t.substring(h+1),10)):h=e.length;var m=t.split(".");3===m.length?(n=m[1],r=m[0].toLowerCase(),o=r):2===m.length?n=m[0]:"localhost"===m[0].slice(0,h).toLowerCase()&&(n="localhost"),"ns"in p&&(o=p.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:u,scheme:c,pathString:i,namespace:o}},Ce=/[\[\].#$\/\u0000-\u001F\u007F]/,Ie=/[\[\].#$\u0000-\u001F\u007F]/,ke=10485760,Ne=function(e){return"string"==typeof e&&0!==e.length&&!Ce.test(e)},Ae=function(e){return"string"==typeof e&&0!==e.length&&!Ie.test(e)},De=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ae(e)},xe=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!z(e)||e&&"object"==typeof e&&I.contains(e,".sv")},Re=function(e,t,n,r,i){i&&void 0===n||Pe(I.errorPrefix(e,t,i),n,r)},Pe=function(e,t,n){var r=n instanceof he?new fe(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(z(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>ke/3&&I.stringLength(t)>ke)throw new Error(e+"contains a string greater than "+ke+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,a=!1;if(o(t,function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!Ne(t)))throw new Error(e+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),Pe(e,n,r),r.pop()}),i&&a)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Oe=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=r.slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ne(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(he.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},Me=function(e,t,n,r,i){if(!i||void 0!==n){var a=I.errorPrefix(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];o(n,function(e,t){var n=new he(e);if(Pe(a,t,r.child(n)),".priority"===n.getBack()&&!xe(t))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),Oe(a,s)}},Le=function(e,t,n,r){if(!r||void 0!==n){if(z(n))throw new Error(I.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xe(n))throw new Error(I.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fe=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(I.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ue=function(e,t,n,r){if(!(r&&void 0===n||Ne(n)))throw new Error(I.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Be=function(e,t,n,r){if(!(r&&void 0===n||Ae(n)))throw new Error(I.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qe=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Be(e,t,n,r)},Ve=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},je=function(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ne(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!De(r))throw new Error(I.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},We=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(I.errorPrefix(e,t,r)+"must be a boolean.")},Ke=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){I.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),I.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new I.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){I.validateArgCount("OnDisconnect.remove",0,1,arguments.length),Ve("OnDisconnect.remove",this.path_),I.validateCallback("OnDisconnect.remove",1,e,!0);var t=new I.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){I.validateArgCount("OnDisconnect.set",1,2,arguments.length),Ve("OnDisconnect.set",this.path_),Re("OnDisconnect.set",1,e,this.path_,!1),I.validateCallback("OnDisconnect.set",2,t,!0);var n=new I.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){I.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),Ve("OnDisconnect.setWithPriority",this.path_),Re("OnDisconnect.setWithPriority",1,e,this.path_,!1),Le("OnDisconnect.setWithPriority",2,t,!1),I.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new I.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(I.validateArgCount("OnDisconnect.update",1,2,arguments.length),Ve("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Q("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Me("OnDisconnect.update",1,e,this.path_,!1),I.validateCallback("OnDisconnect.update",2,t,!0);var i=new I.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),Qe=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return I.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Ge=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(r){var i=r===t;t=r;var o,a=new Array(8);for(o=7;o>=0;o--)a[o]=e.charAt(r%64),r=Math.floor(r/64);I.assert(0===r,"Cannot push at time == 0");var s=a.join("");if(i){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)s+=e.charAt(n[o]);return I.assert(20===s.length,"nextPushId: Length should be 20."),s}}(),ze=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),He=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new ze(Y,e),r=new ze(Y,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return ze.MIN},e}(),Ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return J(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw I.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return ze.MIN},t.prototype.maxPost=function(){return new ze(X,y)},t.prototype.makePost=function(e,t){return I.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new ze(e,y)},t.prototype.toString=function(){return".key"},t}(He),Xe=new Ye,Je=function(e){return"number"==typeof e?"number:"+ne(e):"string:"+e},$e=function(e){if(e.isLeafNode()){var t=e.val();I.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&I.contains(t,".sv"),"Priority must be a string or number.")}else I.assert(e===v||e.isEmpty(),"priority of unexpected type.");I.assert(e===v||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ze=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,I.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),$e(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return b},set:function(e){b=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(I.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Je(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ne(this.value_):this.value_,this.lazyHash_=L(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(I.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return I.assert(i>=0,"Unknown leaf type: "+n),I.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?J(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return ze.MIN},t.prototype.maxPost=function(){return new ze(X,new Ze("[PRIORITY-POST]",_))},t.prototype.makePost=function(e,t){var n=w(e);return new ze(t,new Ze("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(He),tt=new et,nt=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),rt=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,
this.left=null!=i?i:ot.EMPTY_NODE,this.right=null!=o?o:ot.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i;return i=this,r=n(e,i.key),i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return ot.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},e.prototype.remove=function(e,t){var n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ot.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if(e=this.left.check_(),e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),it=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new rt(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),ot=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,rt.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,rt.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new nt(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new nt(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new nt(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new nt(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new it,e}(),at=Math.log(2),st=function(){function e(e){var t=function(e){return parseInt(Math.log(e)/at,10)},n=function(e){return parseInt(Array(e+1).join("1"),2)};this.count=t(e+1),this.current_=this.count-1;var r=n(this.count);this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),ut=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a,s=r-t;if(0==s)return null;if(1==s)return o=e[t],a=n?n(o):o,new rt(a,o.node,rt.BLACK,null,null);var u=parseInt(s/2,10)+t,c=i(t,u),l=i(u+1,r);return o=e[u],a=n?n(o):o,new rt(a,o.node,rt.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new rt(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,rt.BLACK):(s(h,rt.BLACK),s(h,rt.RED))}return o},a=new st(e.length),s=o(a);return new ot(r||t,s)},ct={},lt=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return I.assert(ct&&tt,"ChildrenNode.ts has not been loaded"),E=E||new e({".priority":ct},{".priority":tt})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=I.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ot?t:null},e.prototype.hasIndex=function(e){return I.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){I.assert(t!==Xe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,o=n.getIterator(ze.Wrap),a=o.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=o.getNext();var s;s=i?ut(r,t.getCompare()):ct;var u=t.toString(),c=C.__assign({},this.indexSet_);c[u]=t;var l=C.__assign({},this.indexes_);return l[u]=s,new e(l,c)},e.prototype.addToIndexes=function(t,n){var r=this,i=I.map(this.indexes_,function(e,i){var o=I.safeGet(r.indexSet_,i);if(I.assert(o,"Missing index implementation for "+i),e===ct){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(ze.Wrap),u=s.getNext();u;)u.name!=t.name&&a.push(u),u=s.getNext();return a.push(t),ut(a,o.getCompare())}return ct}var c=n.get(t.name),l=e;return c&&(l=l.remove(new ze(t.name,c))),l.insert(t,t.node)});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=I.map(this.indexes_,function(e){if(e===ct)return e;var r=n.get(t.name);return r?e.remove(new ze(t.name,r)):e});return new e(r,this.indexSet_)},e}(),ht=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$e(this.priorityNode_),this.children_.isEmpty()&&I.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return S||(S=new e(new ot(f),null,lt.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||S},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?S:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(I.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new ze(t,n),i=void 0,o=void 0,a=void 0;return n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_)),a=i.isEmpty()?S:this.priorityNode_,new e(i,a,o)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;I.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(tt,function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Je(this.getPriority().val())+":"),this.forEachChild(tt,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":L(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ze(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new ze(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new ze(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,ze.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,ze.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===dt?-1:0},e.prototype.withIndex=function(t){if(t===Xe||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Xe||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(tt),r=t.getIterator(tt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Xe?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),ft=function(e){function t(){return e.call(this,new ot(f),ht.EMPTY_NODE,lt.Default)||this}return C.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return ht.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(ht),dt=new ft;Object.defineProperties(ze,{MIN:{value:new ze(Y,ht.EMPTY_NODE)},MAX:{value:new ze(X,dt)}}),Ye.__EMPTY_NODE=ht.EMPTY_NODE,Ze.__childrenNodeConstructor=ht,u(dt),l(dt);var pt=!0;c(d);var mt,gt,yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?J(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return ze.MIN},t.prototype.maxPost=function(){return ze.MAX},t.prototype.makePost=function(e,t){var n=d(e);return new ze(t,n)},t.prototype.toString=function(){return".value"},t}(He),vt=new yt,bt=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,I.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return C.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?J(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=d(e),r=ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new ze(t,r)},t.prototype.maxPost=function(){var e=ht.EMPTY_NODE.updateChild(this.indexPath_,dt);return new ze(X,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(He),wt=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return I.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return I.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return I.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return I.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){I.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),Be("DataSnapshot.child",1,t,!1);var n=new he(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,tt)},e.prototype.hasChild=function(e){I.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Be("DataSnapshot.hasChild",1,e,!1);var t=new he(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return I.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(I.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),I.validateCallback("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return t(new e(i,n.ref_.child(r),tt))})},e.prototype.hasChildren=function(){return I.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return I.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return I.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),_t=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+I.stringify(this.snapshot.exportVal())},e}(),Et=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),St=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new _t("value",this,new wt(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){I.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Et(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Tt=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,I.contains(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Et(this,e,t):null},e.prototype.createEvent=function(e,t){I.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new _t(e.type,this,new wt(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){I.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length,a=i.length;if(o===a){if(1===o){var s=r[0],u=i[0];return!(u!==s||t.callbacks_[s]&&this.callbacks_[u]&&t.callbacks_[s]!==this.callbacks_[u])}return i.every(function(e){return t.callbacks_[e]===n.callbacks_[e]})}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Ct=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return I.assert(mt,"Reference.ts has not been loaded"),mt},set:function(e){mt=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Xe){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){var o=e.getIndexStartName();if(o!=Y)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){var a=e.getIndexEndName();if(a!=X)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===tt){if(null!=t&&!xe(t)||null!=n&&!xe(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(I.assert(e.getIndex()instanceof bt||e.getIndex()===vt,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(this.orderByCalled_===!0)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return I.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){I.validateArgCount("Query.on",2,4,arguments.length),Fe("Query.on",1,t,!1),I.validateCallback("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[t]=n,this.onChildEvent(a,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new St(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new Tt(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){I.validateArgCount("Query.off",0,3,arguments.length),Fe("Query.off",1,e,!0),I.validateCallback("Query.off",2,t,!0),I.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new St(o,null,n||null)}else e&&(t&&(i={},i[e]=t),r=new Tt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;I.validateArgCount("Query.once",1,4,arguments.length),Fe("Query.once",1,t,!1),I.validateCallback("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new I.Deferred;u.promise.catch(function(){});var c=function(e){s&&(s=!1,o.off(t,c),n&&n.bind(a.context)(e),u.resolve(e))};return this.on(t,c,function(e){o.off(t,c),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)}),u.promise},e.prototype.limitToFirst=function(t){if(I.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(I.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(I.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Be("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new he(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new bt(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){I.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Xe);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){I.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(tt);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){I.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(vt);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),I.validateArgCount("Query.startAt",0,2,arguments.length),Re("Query.startAt",1,t,this.path,!0),Ue("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),I.validateArgCount("Query.endAt",0,2,arguments.length),Re("Query.endAt",1,t,this.path,!0),Ue("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(I.validateArgCount("Query.equalTo",1,2,arguments.length),Re("Query.equalTo",1,e,this.path,!1),Ue("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return I.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return I.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=ee(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(I.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,I.validateCallback(e,3,r.cancel,!0),r.context=n,I.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(I.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),It=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();if(e=e.popFront(),this.children.has(t)){var n=this.children.get(t);return n.find(e)}return null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(tt,function(e,t){n.remember(new he(e),t)}),this.forget(e)}if(this.children.size>0){var r=e.getFront();if(e=e.popFront(),this.children.has(r)){var i=this.children.get(r).forget(e);i&&this.children.delete(r)}return 0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild(function(n,r){var i=new he(e.toString()+"/"+n);r.forEachTree(i,t)})},e.prototype.forEachChild=function(e){this.children.forEach(function(t,n){e(n,t)})},e}(),kt=function(e){return e=e||{},e.timestamp=e.timestamp||(new Date).getTime(),e},Nt=function(e,t){return e&&"object"==typeof e?(I.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},At=function(e,t){var n=new It;return e.forEachTree(new he(""),function(e,r){n.remember(e,Dt(r,t))}),n},Dt=function(e,t){var n,r=e.getPriority().val(),i=Nt(r,t);if(e.isLeafNode()){var o=e,a=Nt(o.getValue(),t);return a!==o.getValue()||i!==o.getPriority().val()?new Ze(a,d(i)):e}var s=e;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new Ze(i))),s.forEachChild(tt,function(e,r){var i=Dt(r,t);i!==r&&(n=n.updateImmediateChild(e,i))}),n};!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(gt||(gt={}));var xt,Rt,Pt=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,I.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),Ot=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=gt.ACK_USER_WRITE,this.source=Pt.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return I.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new he(t));return new e(he.Empty,n,this.revert)}return I.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),Mt=function(){return xt||(xt=new ot($)),xt},Lt=function(){function e(e,t){void 0===t&&(t=Mt()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return o(t,function(e,t){n=n.set(new he(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:he.Empty,value:this.value};if(e.isEmpty())return null;
var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);if(null!=i){var o=new he(n).child(i.path);return{path:o,value:i.value}}return null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=this.children.get(r)||e.Empty,o=i.set(t.popFront(),n),a=this.children.insert(r,o);return new e(this.value,a)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),i=this.children.get(r)||e.Empty,o=i.setTree(t.popFront(),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new e(this.value,a)},e.prototype.fold=function(e){return this.fold_(he.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(e.child(r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,he.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,he.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(he.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}(),Ft=function(){function e(e,t){this.source=e,this.path=t,this.type=gt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,he.Empty):new e(this.source,this.path.popFront())},e}(),Ut=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=gt.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,he.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),Bt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=gt.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new he(t));return n.isEmpty()?null:n.value?new Ut(this.source,he.Empty,n.value):new e(this.source,he.Empty,n)}return I.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),qt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),Vt=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new qt(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new qt(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new qt(ht.EMPTY_NODE,!1,!1),new qt(ht.EMPTY_NODE,!1,!1)),e}(),jt=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),Wt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){I.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(jt.childRemovedChange(t,a)):I.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(jt.childAddedChange(t,n)):o.trackChildChange(jt.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(tt,function(e,r){t.hasChild(e)||n.trackChildChange(jt.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(tt,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(jt.childChangedChange(t,r,i))}else n.trackChildChange(jt.childAddedChange(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?ht.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Kt=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;I.assert(t==jt.CHILD_ADDED||t==jt.CHILD_CHANGED||t==jt.CHILD_REMOVED,"Only child changes supported for tracking"),I.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(t==jt.CHILD_ADDED&&i==jt.CHILD_REMOVED)this.changeMap.set(n,jt.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t==jt.CHILD_REMOVED&&i==jt.CHILD_ADDED)this.changeMap.delete(n);else if(t==jt.CHILD_REMOVED&&i==jt.CHILD_CHANGED)this.changeMap.set(n,jt.childRemovedChange(n,r.oldSnap));else if(t==jt.CHILD_CHANGED&&i==jt.CHILD_ADDED)this.changeMap.set(n,jt.childAddedChange(n,e.snapshotNode));else{if(t!=jt.CHILD_CHANGED||i!=jt.CHILD_CHANGED)throw I.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,jt.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),Qt=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}(),Gt=new Qt,zt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new qt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),Ht=function(){function e(e,t){this.viewCache=e,this.changes=t}return e}(),Yt=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){I.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),I.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var o,a,s=new Kt;if(n.type===gt.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(t,u.path,u.snap,r,i,s):(I.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(t,u.path,u.snap,r,i,a,s))}else if(n.type===gt.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(t,c.path,c.children,r,i,s):(I.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.getServerCache().isFiltered(),o=this.applyServerMerge_(t,c.path,c.children,r,i,a,s))}else if(n.type===gt.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(t,l.path,r,i,s):this.ackUserWrite_(t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==gt.LISTEN_COMPLETE)throw I.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(t,n.path,r,s)}var h=s.getChanges();return e.maybeAddValueEvent_(t,o,h),new Ht(o,h)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(jt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(I.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=u instanceof ht?u:ht.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(e.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var f=t.getFront();if(".priority"==f){I.assert(1==t.getLength(),"Can't have a priority with additional path components");var d=o.getNode();s=e.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(t,d,s);a=null!=p?this.filter_.updatePriority(d,p):o.getNode()}else{var m=t.popFront(),g=void 0;if(o.isCompleteForChild(f)){s=e.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),s);g=null!=y?o.getNode().getImmediateChild(f).updateChild(m,y):o.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,e.getServerCache());a=null!=g?this.filter_.updateChild(o.getNode(),f,g,m,r,i):o.getNode()}}return e.updateEventSnap(a,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var f=t.popFront(),d=u.getNode().getImmediateChild(h),p=d.updateChild(f,n);s=".priority"==h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Gt,null)}var m=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),g=new zt(r,m,i);return this.generateEventCacheAfterServerEvent_(m,t,r,g,a)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,s,u=e.getEventCache(),c=new zt(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):ht.EMPTY_NODE}if(f.equals(d))a=e;else{var m=this.filter_.updateChild(u.getNode(),l,d,h,c,o);a=e.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,a){var s=this,u=t;return r.foreach(function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,c=e;u=t.isEmpty()?n:Lt.Empty.setTree(t,n);var l=e.getServerCache().getNode();return u.children.inorderTraversal(function(t,n){if(l.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new he(t),h,r,i,o,a)}}),u.children.inorderTraversal(function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new he(t),f,r,i,o,a)}}),c},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,i,a,o);if(t.isEmpty()){var u=Lt.Empty;return s.getNode().forEachChild(Xe,function(e,t){u=u.set(new he(e),t)}),this.applyServerMerge_(e,t,u,r,i,a,o)}return e}var c=Lt.Empty;return n.foreach(function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(c=c.set(e,s.getNode().getChild(r)))}),this.applyServerMerge_(e,t,c,r,i,a,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,Gt,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var a=new zt(n,e,r),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var l=e.getServerCache().getNode();I.assert(l instanceof ht,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=t.getFront(),f=n.calcCompleteChild(h,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),u=null!=f?this.filter_.updateChild(s,h,f,t.popFront(),a,i):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,ht.EMPTY_NODE,t.popFront(),a,i):s,u.isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap()),o.isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i)))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(he.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},e}(),Xt=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach(function(e){e.type===jt.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(jt.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,jt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,jt.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,jt.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,jt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,jt.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,a=n.filter(function(e){return e.type===t});a.sort(this.compareChanges_.bind(this)),a.forEach(function(t){var n=o.materializeSingleChange_(t,i);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw I.assertionError("Should only compare child_ events.");var n=new ze(e.childName,e.snapshotNode),r=new ze(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),Jt=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Wt(n.getIndex()),i=n.getNodeFilter();this.processor_=new Yt(i);var o=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ht.EMPTY_NODE,a.getNode(),null),c=new qt(s,o.isFullyInitialized(),r.filtersNodes()),l=new qt(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Vt(l,c),this.eventGenerator_=new Xt(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){I.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var i=e.createCancelEvent(t,r);i&&n.push(i)})}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===gt.MERGE&&null!==e.source.queryId&&(I.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),I.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),I.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];if(!t.getNode().isLeafNode()){var r=t.getNode();r.forEachChild(tt,function(e,t){n.push(jt.childAddedChange(e,t))})}return t.isFullyInitialized()&&n.push(jt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}(),$t=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return I.assert(Rt,"Reference.ts has not been loaded"),Rt},set:function(e){I.assert(!Rt,"__referenceConstructor has already been defined"),Rt=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var a=this.views.get(o);return I.assert(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,t,n)}var s=[];try{for(var u=C.__values(this.views.values()),c=u.next();!c.done;c=u.next()){var a=c.value;s=s.concat(a.applyOperation(e,t,n))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof ht?(s=n.calcCompleteEventChildren(r),u=!1):(s=ht.EMPTY_NODE,u=!1);var c=new Vt(new qt(s,u,!1),new qt(r,i,!1));a=new Jt(e,c),this.views.set(o,a)}return a.addEventRegistration(t),a.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i,o,a=t.queryIdentifier(),s=[],u=[],c=this.hasCompleteView();if("default"===a)try{for(var l=C.__values(this.views.entries()),h=l.next();!h.done;h=l.next()){var f=C.__read(h.value,2),d=f[0],p=f[1];u=u.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(d),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else{var p=this.views.get(a);p&&(u=u.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())))}return c&&!this.hasCompleteView()&&s.push(new e.__referenceConstructor(t.repo,t.path)),{removed:s,events:u}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=C.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=C.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.viewForQuery=function(e){var t=e.getQueryParams();if(t.loadsAllData())return this.getCompleteView();var n=e.queryIdentifier();return this.views.get(n)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=C.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),Zt=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new Lt(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=he.relativePath(i,t);return o=o.updateChild(a,n),new e(this.writeTree_.set(i,o))}var s=new Lt(n),u=this.writeTree_.setTree(t,s);return new e(u)},e.prototype.addWrites=function(e,t){var n=this;return o(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},e.prototype.removeWrite=function(t){if(t.isEmpty())return e.Empty;var n=this.writeTree_.setTree(t,Lt.Empty);return new e(n)},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(he.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(tt,function(t,n){e.push(new ze(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new ze(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new Lt(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return p(he.Empty,this.writeTree_,e)},e.Empty=new e(new Lt(null)),e}(),en=function(){function e(){this.visibleWrites_=Zt.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new tn(e,this)},e.prototype.addOverwrite=function(e,t,n,r){I.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){I.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});I.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,a=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(a=!0)),s--}if(i){if(a)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var c=r.children;o(c,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))})}return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(t);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(he.Empty)){var a=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},s=e.layerTree_(this.allWrites_,a,t),u=n||ht.EMPTY_NODE;return s.apply(u)}return null}var c=this.visibleWrites_.getCompleteNode(t);if(null!=c)return c;var l=this.visibleWrites_.childCompoundWrite(t);if(l.isEmpty())return n;if(null!=n||l.hasCompleteWrite(he.Empty)){var u=n||ht.EMPTY_NODE;return l.apply(u)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(tt,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(tt,function(e,t){var r=i.childCompoundWrite(new he(e)).apply(t);n=n.updateImmediateChild(e,r)}),i.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}var o=this.visibleWrites_.childCompoundWrite(e);return o.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){I.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);if(null!=i)return i;if(n.isCompleteForChild(t)){var o=this.visibleWrites_.childCompoundWrite(r);return o.apply(n.getNode().getImmediateChild(t))}return null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(he.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,he.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=Zt.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=he.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=he.relativePath(a,n),r=r.addWrite(he.Empty,o.snap.getChild(s)));else{if(!o.children)throw I.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=he.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if(s=he.relativePath(a,n),s.isEmpty())r=r.addWrites(he.Empty,o.children);else{var u=I.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(he.Empty,c)}}}}}return r},e}(),tn=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),nn=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=Lt.Empty,this.pendingWriteTree_=new en,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new Ut(Pt.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=Lt.fromObject(t);return this.applyOperationToSyncPoints_(new Bt(Pt.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e),r=this.pendingWriteTree_.removeWrite(e);if(r){var i=Lt.Empty;return null!=n.snap?i=i.set(he.Empty,!0):o(n.children,function(e,t){i=i.set(new he(e),t)}),this.applyOperationToSyncPoints_(new Ot(n.path,i,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new Ut(Pt.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=Lt.fromObject(t);return this.applyOperationToSyncPoints_(new Bt(Pt.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new Ft(Pt.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){
var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=he.relativePath(a,t),c=new Ut(Pt.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=he.relativePath(a,t),c=Lt.fromObject(n),l=new Bt(Pt.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,a=i.queryId,s=he.relativePath(o,t),u=new Ft(Pt.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(e,t){var n=he.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(he.Empty)):(a=new $t,this.syncPointTree_=this.syncPointTree_.set(r,a));var s;if(null!=i)s=!0;else{s=!1,i=ht.EMPTY_NODE;var u=this.syncPointTree_.subtree(r);u.foreachChild(function(e,t){var n=t.getCompleteServerCache(he.Empty);n&&(i=i.updateImmediateChild(e,n))})}var c=a.viewExistsForQuery(t);if(!c&&!t.getQueryParams().loadsAllData()){var l=e.makeQueryKey_(t);I.assert(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=e.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=a.addEventRegistration(t,n,f,i,s);if(!c&&!o){var p=a.viewForQuery(t);d=d.concat(this.setupListener_(t,p))}return d},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(e){return e.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(e,t){return t.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var m=d[p],g=m.getQuery(),y=this.createListenerForView_(m);this.listenProvider_.startListening(e.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){var v=null;this.listenProvider_.stopListening(e.queryForListening_(t),v)}else c.forEach(function(t){var n=i.queryToTagMap.get(e.makeQueryKey_(t));i.listenProvider_.stopListening(e.queryForListening_(t),n)});this.removeTags_(c)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=!0,r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(e,function(t,n){var r=he.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i});return r.calcCompleteEventCache(e,i,t,n)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView()){var r=t.getCompleteView();return[r]}var i=[];return t&&(i=t.getQueryViews()),o(n,function(e,t){i=i.concat(t)}),i})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),a=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),i,a.hashFn,a.onComplete),u=this.syncPointTree_.subtree(r);if(i)I.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),o(n,function(e,t){r=r.concat(t)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){var t=e.getServerCache()||ht.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=oe(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return I.assert(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new he(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);I.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(he.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(he.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(he.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(he.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(he.Empty));var a=[];return t.children.inorderTraversal(function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(e,r,n))),a},e.nextQueryTag_=1,e}(),rn=function(){function e(){this.rootNode_=ht.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),on=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(V("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Q(e)},e}(),an=function(){function e(e){this.accessToken=e}return e}(),sn=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return Promise.resolve(new an("owner"))},e.prototype.addTokenChangeListener=function(e){},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){var e='Database emulator unexpectedly rejected fake "owner" credentials.';Q(e)},e}(),un=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),I.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return I.deepCopy(this.counters_)},e}(),cn=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new un),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),ln=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=C.__assign({},e);return this.last_&&o(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),hn=1e4,fn=3e4,dn=3e5,pn=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ln(e);var n=hn+(fn-hn)*Math.random();le(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;o(t,function(t,i){i>0&&I.contains(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),le(this.reportStats_.bind(this),Math.floor(2*Math.random()*dn))},e}(),mn=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new gn(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){var i=r.getPath();e(i)?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),gn=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();U&&V("event: "+t.toString()),ue(n)}}},e.prototype.getPath=function(){return this.path_},e}(),yn=function(){function e(e){this.allowedEvents_=e,this.listeners_={},I.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=C.__spread(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){I.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),vn=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!=typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!=typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!=typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return C.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return I.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(yn),bn=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||"undefined"==typeof window.addEventListener||I.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return C.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return I.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(yn),wn=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&ue(function(){n.onMessage_(e[t])})},r=0;r<e.length;++r)t(r);return i.currentResponseNum===i.closeAfterResponse?(i.onClose&&(i.onClose(),i.onClose=null),"break"):void i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){var o=r();if("break"===o)break}},e}(),_n="start",En="close",Sn="pLPCommand",Tn="pRTLPCB",Cn="id",In="pw",kn="ser",Nn="cb",An="seg",Dn="ts",xn="d",Rn="disconn",Pn="dframe",On=1870,Mn=30,Ln=On-Mn,Fn=25e3,Un=3e4,Bn=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=j(e),this.stats_=cn.getCollection(t),this.urlFn=function(e){return t.connectionURL(_e,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(Un)),H(function(){if(!n.isClosed_){n.scriptTagHolder=new qn(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=C.__read(e,5),i=r[0],o=r[1],a=r[2];r[3],r[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i==_n)n.id=o,n.password=a;else{if(i!==En)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=C.__read(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var e={};e[_n]="t",e[kn]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e[Nn]=n.scriptTagHolder.uniqueCallbackIdentifier),e[pe]=de,n.transportSessionId&&(e[me]=n.transportSessionId),n.lastSessionId&&(e[be]=n.lastSessionId),!I.isNodeSdk()&&"undefined"!=typeof location&&location.href&&location.href.indexOf(ve)!==-1&&(e[ge]=ye);var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!re()&&!ie()&&!I.isNodeSdk()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=I.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=I.base64Encode(t),r=te(n,Ln),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!I.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Pn]="t",n[Cn]=e,n[In]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=I.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),qn=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,I.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=M(),window[Sn+this.uniqueCallbackIdentifier]=t,window[Tn+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var a=document.domain;o='<script>document.domain="'+a+'";</script>'}var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(e){V("frame writing exception"),e.stack&&V(e.stack),V(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{var t=e.contentWindow.document;t||V("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var t=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0))),I.isNodeSdk()&&this.myID){var n={};n[Rn]="t",n[Cn]=this.myID,n[In]=this.myPW;var r=this.urlFn(n);e.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[Cn]=this.myID,e[In]=this.myPW,e[kn]=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){var i=this.pendingSegs[0];if(!(i.d.length+Mn+n.length<=On))break;var o=this.pendingSegs.shift();n=n+"&"+An+r+"="+o.seg+"&"+Dn+r+"="+o.ts+"&"+xn+r+"="+o.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(Fn)),o=function(){clearTimeout(i),r()};this.addTag(e,o)},e.prototype.addTag=function(e,t){var n=this;I.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){V("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}},Math.floor(1))},e}(),Vn="",jn=16384,Wn=45e3,Kn=null;"undefined"!=typeof MozWebSocket?Kn=MozWebSocket:"undefined"!=typeof WebSocket&&(Kn=WebSocket);var Qn=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=j(this.connId),this.stats_=cn.getCollection(n),this.connURL=e.connectionURL_(n,r,i)}return e.connectionURL_=function(e,t,n){var r={};return r[pe]=de,!I.isNodeSdk()&&"undefined"!=typeof location&&location.href&&location.href.indexOf(ve)!==-1&&(r[ge]=ye),t&&(r[me]=t),n&&(r[be]=n),e.connectionURL(we,r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,x.set("previous_websocket_failure",!0);try{if(I.isNodeSdk()){var i=I.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/"+de+"/"+Vn+"/"+r.platform+"/"+i}},a=r.env,s=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new Kn(this.connURL,[],o)}else this.mySock=new Kn(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var u=e.message||e.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Kn&&!e.forceDisallow_},e.previouslyFailed=function(){return x.isInMemoryStorage||x.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){x.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=I.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(I.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=I.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=te(t,jn);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(Wn))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Gn=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Bn,Qn]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=Qn&&Qn.isAvailable(),o=i&&!Qn.previouslyFailed();if(t.webSocketOnly&&(i||Q("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Qn];else{var a=this.transports_=[];try{for(var s=C.__values(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),zn=6e4,Hn=5e3,Yn=10240,Xn=102400,Jn="t",$n="d",Zn="s",er="r",tr="e",nr="o",rr="a",ir="n",or="p",ar="h",sr=function(){function e(e,t,n,r,i,o,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=j("c:"+this.id+":"),this.transportManager_=new Gn(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=le(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>Xn?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>Yn?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if(Jn in e){var t=e[Jn];t===rr?this.upgradeIfSecondaryHealthy_():t===er?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===nr&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=Z("t",e),n=Z("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:or,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:rr,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ir,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=Z("t",e),n=Z("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=Z(Jn,e);if($n in e){var n=e[$n];if(t===ar)this.onHandshake_(n);else if(t===ir){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Zn?this.onConnectionShutdown_(n):t===er?this.onReset_(n):t===tr?W("Server Error: "+n):t===nr?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):W("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),de!==n&&Q("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),le(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(zn))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):le(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(Hn))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:or,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,
this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(x.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),ur=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),cr=1e3,lr=3e5,hr=3e4,fr=1.3,dr=3e4,pr="server_kill",mr=3,gr=function(e){function t(n,r,i,o,a,s){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=t.nextPersistentConnectionId_++,u.log_=j("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=cr,u.maxReconnectDelay_=lr,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!I.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),vn.getInstance().on("visible",u.onVisible_,u),n.host.indexOf("fblocal")===-1&&bn.getInstance().on("online",u.onOnline_,u),u}return C.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(I.stringify(i)),I.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),I.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),I.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest(s,a,function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&I.contains(e,"w")){var n=I.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();Q("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+r+" at ")+(i+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t=e&&40===e.length;(t||I.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hr)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=I.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),I.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e},o="n";r&&(i.q=n,i.t=r),this.sendRequest(o,i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){var n=e.s;if("ok"!==n){var r=e.d;t.log_("reportStats","Error sending stats: "+r)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+I.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):W("Unrecognized action received from server: "+I.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;I.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>dr&&(this.reconnectDelay_=cr),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fr)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())},l=function(e){I.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)};this.realtime_={close:c,sendRequest:l};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(t){s?V("getToken() completed but was canceled"):(V("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new sr(i,o.repoInfo_,e,n,r,function(e){Q(e+" ("+o.repoInfo_.toString()+")"),o.interrupt(pr)},a))}).then(null,function(e){o.log_("Failed to get token: "+e),s||(I.CONSTANTS.NODE_ADMIN&&Q(e),c())})}},t.prototype.interrupt=function(e){V("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){V("Resuming connection for reason: "+e),delete this.interruptReasons_[e],I.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=cr,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return ee(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new he(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){V("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mr&&(this.reconnectDelay_=hr,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=C.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,C.__values(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";I.CONSTANTS.NODE_ADMIN?t="admin_node":I.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+Vn.replace(/\./g,"-")]=1,I.isMobileCordova()?e["framework.cordova"]=1:I.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=bn.getInstance().currentlyOnline();return I.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(ur),yr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=j("p:rest:"),i.listens_={},i}return C.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(I.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(e,t){var n=t;if(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),I.safeGet(o.listens_,s)===u){var c;c=e?401==e?"permission_denied":"rest_error:"+e:"ok",i(c,null)}})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(t.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+I.querystring(t);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var e=null;if(s.status>=200&&s.status<300){try{e=I.jsonEval(s.responseText)}catch(e){Q("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&Q("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},t}(ur),vr="repo_interrupt",br=function(){function e(e,t,n){var i=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new It,this.persistentConnection_=null;var o;if(o="undefined"!=typeof r&&{NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}[O]?new sn(n):new on(n),this.stats_=cn.getCollection(e),t||ce())this.server_=new yr(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if("undefined"!=typeof a&&null!==a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{I.stringify(a)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new gr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener(function(e){i.server_.refreshAuthToken(e)}),this.statsReporter_=cn.getOrCreateReporter(e,function(){return new pn(i.stats_,i.server_)}),this.transactions_init_(),this.infoData_=new rn,this.infoSyncTree_=new nn({startListening:function(e,t,n,r){var o=[],a=i.infoData_.getNode(e.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new nn({startListening:function(e,t,n,r){return i.server_.listen(e,n,t,function(t,n){var o=r(t,n);i.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,t){i.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new he(".info/serverTimeOffset")),t=e.val()||0;return(new Date).getTime()+t},e.prototype.generateServerValues=function(){return kt({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new he(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var a=I.map(t,function(e){return d(e)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=d(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=I.map(t,function(e){return d(e)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=d(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),e===!1&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;o(e,function(e,n){t.updateInfo_(e,n)})},e.prototype.updateInfo_=function(e,t){var n=new he("/.info/"+e),r=d(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),a=d(t,n),s=Dt(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),a.val(!0),function(t,n){var o="ok"===t;o||Q("set at "+e+" failed: "+t);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(e,a),i.callOnCompleteCallback(r,t,n)});var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,a=this.generateServerValues(),s={};if(o(t,function(e,t){i=!1;var n=d(t);s[e]=Dt(n,a)}),i)V("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserMerge(e,s,u);this.eventQueue_.queueEvents(c),this.server_.merge(e.toString(),t,function(t,i){var o="ok"===t;o||Q("update at "+e+" failed: "+t);var a=r.serverSyncTree_.ackUserWrite(u,!o),s=a.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(s,a),r.callOnCompleteCallback(n,t,i)}),o(t,function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=At(this.onDisconnect_,t),r=[];n.forEachTree(he.Empty,function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)}),this.onDisconnect_=new It,this.eventQueue_.raiseEventsForChangedPath(he.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)})},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=d(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=d(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;return I.isEmpty(t)?(V("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok")):void this.server_.onDisconnectMerge(e.toString(),t,function(i,a){"ok"===i&&o(t,function(t,n){var i=d(n);r.onDisconnect_.remember(e.child(t),i)}),r.callOnCompleteCallback(n,i,a)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(vr)},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(vr)},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new ln(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);o(t,function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),V.apply(void 0,C.__spread([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&ue(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new Dr(this))},enumerable:!0,configurable:!0}),e}(),wr=function(){function e(t){this.indexedFilter_=new Wt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new ze(t,n))||(n=ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=ht.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ht.EMPTY_NODE);var i=this;return t.forEachChild(tt,function(e,t){i.matches(new ze(e,t))||(r=r.updateImmediateChild(e,ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),_r=function(){function e(e){this.rangedFilter_=new wr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new ze(t,n))||(n=ht.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=t.withIndex(this.index_),r=r.updatePriority(ht.EMPTY_NODE);var u=void 0,c=void 0,l=void 0,i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(e,t){return h(t,e)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();for(var o=0,f=!1;i.hasNext();){var a=i.getNext();!f&&l(u,a)<=0&&(f=!0);var s=f&&o<this.limit_&&l(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;I.assert(s.numChildren()==this.limit_,"");var u=new ze(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u),p=l&&!n.isEmpty()&&d>=0;if(p)return null!=i&&i.trackChildChange(jt.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(jt.childRemovedChange(t,h));var m=s.updateImmediateChild(t,ht.EMPTY_NODE),g=null!=f&&this.rangedFilter_.matches(f);return g?(null!=i&&i.trackChildChange(jt.childAddedChange(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}return n.isEmpty()?e:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(jt.childRemovedChange(c.name,c.node)),i.trackChildChange(jt.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,ht.EMPTY_NODE)):e},e}(),Er=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return I.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return I.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Y},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return I.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return I.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:X},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return I.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==tt&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==tt},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new Wt(this.getIndex()):this.hasLimit()?new _r(this):new wr(this)},e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===tt?r=t.PRIORITY_INDEX:this.index_===vt?r=t.VALUE_INDEX:this.index_===Xe?r=t.KEY_INDEX:(I.assert(this.index_ instanceof bt,"Unrecognized index type!"),r=this.index_.toString()),n[t.ORDER_BY]=I.stringify(r),this.startSet_&&(n[t.START_AT]=I.stringify(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+I.stringify(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=I.stringify(this.indexEndValue_),
this.endNameSet_&&(n[t.END_AT]+=","+I.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_),n},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),Sr=function(e){function t(t,n){var r=this;if(!(t instanceof br))throw new Error("new Reference() no longer supported - use app.database().");return r=e.call(this,t,n,Er.DEFAULT,!1)||this}return C.__extends(t,e),t.prototype.getKey=function(){return I.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return I.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof he||(null===this.path.getFront()?qe("Reference.child",1,e,!1):Be("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){I.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){I.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){I.validateArgCount("Reference.set",1,2,arguments.length),Ve("Reference.set",this.path),Re("Reference.set",1,e,this.path,!1),I.validateCallback("Reference.set",2,t,!0);var n=new I.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(I.validateArgCount("Reference.update",1,2,arguments.length),Ve("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Q("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Me("Reference.update",1,e,this.path,!1),I.validateCallback("Reference.update",2,t,!0);var i=new I.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(I.validateArgCount("Reference.setWithPriority",2,3,arguments.length),Ve("Reference.setWithPriority",this.path),Re("Reference.setWithPriority",1,e,this.path,!1),Le("Reference.setWithPriority",2,t,!1),I.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new I.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return I.validateArgCount("Reference.remove",0,1,arguments.length),Ve("Reference.remove",this.path),I.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(I.validateArgCount("Reference.transaction",1,3,arguments.length),Ve("Reference.transaction",this.path),I.validateCallback("Reference.transaction",1,e,!1),I.validateCallback("Reference.transaction",2,t,!0),We("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new I.Deferred;"function"==typeof t&&r.promise.catch(function(){});var i=function(e,n,i){e?r.reject(e):r.resolve(new Qe(n,i)),"function"==typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){I.validateArgCount("Reference.setPriority",1,2,arguments.length),Ve("Reference.setPriority",this.path),Le("Reference.setPriority",1,e,!1),I.validateCallback("Reference.setPriority",2,t,!0);var n=new I.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){I.validateArgCount("Reference.push",0,2,arguments.length),Ve("Reference.push",this.path),Re("Reference.push",1,e,this.path,!0),I.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=Ge(r),o=this.child(i),a=this.child(i);return n=null!=e?o.set(e,t).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),o},t.prototype.onDisconnect=function(){return Ve("Reference.onDisconnect",this.path),new Ke(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(Ct);Ct.__referenceConstructor=Sr,$t.__referenceConstructor=Sr;var Tr,Cr=function(){function e(){this.children={},this.childCount=0,this.value=null}return e}(),Ir=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new Cr),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof he?t:new he(t),i=this;null!==(n=r.getFront());){var o=I.safeGet(i.node_.children,n)||new Cr;i=new e(n,i,o),r=r.popFront()}return i},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){I.assert("undefined"!=typeof e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;o(this.node_.children,function(r,i){t(new e(r,n,i))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new he(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=I.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(Tr||(Tr={})),br.MAX_TRANSACTION_RETRIES_=25,br.prototype.transactions_init_=function(){this.transactionQueueTree_=new Ir},br.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var i=function(){},o=new Sr(this,e);o.on("value",i);var a=function(){o.off("value",i)},s={path:e,update:t,onComplete:n,status:null,order:M(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(e);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new wt(s.currentInputSnapshot,new Sr(this,s.path),tt);s.onComplete(null,!1,l)}}else{Pe("transaction failed: Data returned ",c,s.path),s.status=Tr.RUN;var h=this.transactionQueueTree_.subTree(e),f=h.getValue()||[];f.push(s),h.setValue(f);var p=void 0;if("object"==typeof c&&null!==c&&I.contains(c,".priority"))p=I.safeGet(c,".priority"),I.assert(xe(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var m=this.serverSyncTree_.calcCompleteEventCache(e)||ht.EMPTY_NODE;p=m.getPriority().val()}p=p;var g=this.generateServerValues(),y=d(c,p),v=Dt(y,g);s.currentOutputSnapshotRaw=y,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var b=this.serverSyncTree_.applyUserOverwrite(e,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,b),this.sendReadyTransactions_()}},br.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||ht.EMPTY_NODE},br.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);I.assert(n.length>0,"Sending zero length transaction queue");var r=n.every(function(e){return e.status===Tr.RUN});r&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},br.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map(function(e){return e.currentWriteId}),i=this.getLatestState_(e,r),o=i,a=i.hash(),s=0;s<t.length;s++){var u=t[s];I.assert(u.status===Tr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Tr.SENT,u.retryCount++;var c=he.relativePath(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;this.server_.put(h.toString(),l,function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<t.length;a++){if(t[a].status=Tr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var s=t[a].currentOutputSnapshotResolved,u=new Sr(n,t[a].path),c=new wt(s,u,tt);o.push(t[a].onComplete.bind(null,null,!0,c))}t[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i);for(var a=0;a<o.length;a++)ue(o[a])}else{if("datastale"===r)for(var a=0;a<t.length;a++)t[a].status===Tr.SENT_NEEDS_ABORT?t[a].status=Tr.NEEDS_ABORT:t[a].status=Tr.RUN;else{Q("transaction at "+h.toString()+" failed: "+r);for(var a=0;a<t.length;a++)t[a].status=Tr.NEEDS_ABORT,t[a].abortReason=r}n.rerunTransactions_(e)}},a)},br.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},br.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],r=[],i=e.filter(function(e){return e.status===Tr.RUN}),o=i.map(function(e){return e.currentWriteId}),a=0;a<e.length;a++){var s=e[a],u=he.relativePath(t,s.path),c=!1,l=void 0;if(I.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Tr.NEEDS_ABORT)c=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Tr.RUN)if(s.retryCount>=br.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var f=e[a].update(h.val());if(void 0!==f){Pe("transaction failed: Data returned ",f,s.path);var p=d(f),m="object"==typeof f&&null!=f&&I.contains(f,".priority");m||(p=p.updatePriority(h.getPriority()));var g=s.currentWriteId,y=this.generateServerValues(),v=Dt(p,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(g),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,v,s.currentWriteId,s.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(g,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],c&&(e[a].status=Tr.COMPLETED,function(e){setTimeout(e,Math.floor(0))}(e[a].unwatcher),e[a].onComplete))if("nodata"===l){var b=new Sr(this,e[a].path),w=e[a].currentInputSnapshot,_=new wt(w,b,tt);n.push(e[a].onComplete.bind(null,null,!1,_))}else n.push(e[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var a=0;a<n.length;a++)ue(n[a]);this.sendReadyTransactions_()}},br.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},br.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},br.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},br.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Tr.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},br.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},br.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)if(t[o].status===Tr.SENT_NEEDS_ABORT);else if(t[o].status===Tr.SENT)I.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,t[o].status=Tr.SENT_NEEDS_ABORT,t[o].abortReason="set";else if(I.assert(t[o].status===Tr.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete){var a=null;n.push(t[o].onComplete.bind(null,new Error("set"),!1,a))}i===-1?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r);for(var o=0;o<n.length;o++)ue(n[o])}};var kr,Nr="databaseURL",Ar=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return kr||(kr=new e),kr},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options[Nr];void 0===n&&K("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var i=Se(n),o=i.repoInfo,a=void 0;"undefined"!=typeof r&&(a={NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}[O]),a&&(n="http://"+a+"?ns="+o.namespace,i=Se(n),o=i.repoInfo),je("Invalid Firebase Database URL",1,i),i.path.isEmpty()||K("Database URL must point to the root of a Firebase Database (not including a child path).");var s=this.createRepo(o,e);return s.database},e.prototype.deleteRepo=function(e){var t=I.safeGet(this.repos_,e.app.name);t&&I.safeGet(t,e.repoInfo_.toURLString())===e||K("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=I.safeGet(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var r=I.safeGet(n,e.toURLString());return r&&K("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new br(e,this.useRestClient_,t),n[e.toURLString()]=r,r},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),Dr=function(){function e(e){this.repo_=e,e instanceof br||K("Don't call new Database() directly - please use firebase.database()."),this.root_=new Sr(e,he.Empty),this.INTERNAL=new xr(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),I.validateArgCount("database.ref",0,1,arguments.length),e instanceof Sr?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),I.validateArgCount(t,1,1,arguments.length);var n=Se(e);je(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&K(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&K("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){I.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){I.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}(),xr=function(){function e(e){this.database=e}return e.prototype.delete=function(){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){return this.database.checkDeleted_("delete"),Ar.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},e}(),Rr=function(){Qn.forceDisallow(),Bn.forceAllow()},Pr=function(){Bn.forceDisallow()},Or=function(){return Qn.isAvailable()},Mr=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},Lr=function(e,t){e.repo.stats(t)},Fr=function(e,t){e.repo.statsIncrementCounter(t)},Ur=function(e){return e.repo.dataUpdateCount},Br=function(e,t){return e.repo.interceptServerData_(t)},qr=Object.freeze({forceLongPolling:Rr,forceWebSockets:Pr,isWebSocketsAvailable:Or,setSecurityDebugCallback:Mr,stats:Lr,statsIncrementCounter:Fr,dataUpdateCount:Ur,interceptServerData:Br}),Vr=gr;gr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},gr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var jr=sr,Wr=function(e){var t=gr.prototype.put;return gr.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){gr.prototype.put=t}},Kr=Ee,Qr=function(e){return e.queryIdentifier()},Gr=function(e){Ar.getInstance().forceRestClient(e)},zr=Object.freeze({DataConnection:Vr,RealTimeConnection:jr,hijackHash:Wr,ConnectionTarget:Kr,queryIdentifier:Qr,forceRestClient:Gr}),Hr=Dr.ServerValue;g(T),t.DataSnapshot=wt,t.Database=Dr,t.OnDisconnect=Ke,t.Query=Ct,t.Reference=Sr,t.ServerValue=Hr,t.enableLogging=q,t.registerDatabase=g}).call(t,n(48))},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(){return Lt.logLevel===xt.LogLevel.DEBUG?At.DEBUG:Lt.logLevel===xt.LogLevel.SILENT?At.SILENT:At.ERROR}function o(e){switch(e){case At.DEBUG:Lt.logLevel=xt.LogLevel.DEBUG;break;case At.ERROR:Lt.logLevel=xt.LogLevel.ERROR;break;case At.SILENT:Lt.logLevel=xt.LogLevel.SILENT;break;default:Lt.error("Firestore ("+Mt+"): Invalid value passed to `setLogLevel`")}}function a(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Lt.logLevel<=xt.LogLevel.DEBUG){var i=n.map(u);Lt.debug.apply(Lt,["Firestore ("+Mt+") ["+e+"]: "+t].concat(i))}}function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Lt.logLevel<=xt.LogLevel.ERROR){var r=t.map(u);Lt.error.apply(Lt,["Firestore ("+Mt+"): "+e].concat(r))}}function u(e){if("string"==typeof e)return e;var t=Ut.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function c(e){var t="FIRESTORE ("+Mt+") INTERNAL ASSERTION FAILED: "+e;throw s(t),new Error(t)}function l(e,t){e||c(t)}function h(){return Ut.getPlatform().emptyByteString}function f(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new qt(Bt.INVALID_ARGUMENT,e)}n.prototype=e.prototype;for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e,t){return void 0!==e?e:t}function m(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function g(e){var t=[];return y(e,function(e,n){return t.push(n)}),t}function y(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function v(e){l(null!=e&&"object"==typeof e,"isEmpty() expects object parameter.");for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function b(e){l(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function w(e,t){if(0!==t.length)throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+j(t.length,"argument")+".")}function _(e,t,n){if(t.length!==n)throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires "+j(n,"argument")+", but was called with "+j(t.length,"argument")+".")}function E(e,t,n){if(t.length<n)throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires at least "+j(n,"argument")+", but was called with "+j(t.length,"argument")+".")}function S(e,t,n,r){if(t.length<n||t.length>r)throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+(r+" arguments, but was called with ")+j(t.length,"argument")+".")}function T(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+(j(r,"element")+"."))}function C(e,t,n,r){O(e,t,V(n)+" argument",r)}function I(e,t,n,r){void 0!==r&&C(e,t,n,r)}function k(e,t,n,r){O(e,t,n+" option",r)}function N(e,t,n,r){void 0!==r&&k(e,t,n,r)}function A(e,t,n,r,i){if(!(r instanceof Array))throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+L(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" "+("elements to be "+n+", but the value at index "+o+" ")+("was: "+L(r[o])))}function D(e,t,n,r,i){void 0!==r&&A(e,t,n,r,i)}function x(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(L(u))}var c=L(r);throw new qt(Bt.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+"() for option "+('"'+n+'". Acceptable values: '+o.join(", ")))}function R(e,t,n,r,i){void 0!==r&&x(e,t,n,r,i)}function P(e,t,n,r){if(!t.some(function(e){return e===r}))throw new qt(Bt.INVALID_ARGUMENT,"Invalid value "+L(r)+" provided to function "+(e+"() for its "+V(n)+" argument. Acceptable ")+("values: "+t.join(", ")))}function O(e,t,n,r){var i=!1;if(i="object"===t?M(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t,!i){var o=L(r);throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" "+("to be of type "+t+", but it was: "+o))}}function M(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function L(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=F(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":c("Unknown wrong type: "+typeof e)}function F(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/,n=t.exec(e.constructor.toString());if(n&&n.length>1)return n[1]}return null}function U(e,t,n){if(void 0===n)throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+V(t)+" argument, but it was undefined.")}function B(e,t,n){y(t,function(t,r){if(n.indexOf(t)<0)throw new qt(Bt.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function q(e,t,n,r){var i=L(r);return new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() requires its "+V(n)+" "+("argument to be a "+t+", but it was: "+i))}function V(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function j(e,t){return e+" "+t+(1===e?"":"s")}function W(e,t){return e<t?-1:e>t?1:0}function K(e,t){return null!==e&&void 0!==e?!(!t||!e.isEqual(t)):e===t}function Q(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function G(e){return e+"\0"}function z(){if("undefined"==typeof Uint8Array)throw new qt(Bt.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function H(){if(!Ut.getPlatform().base64Available)throw new qt(Bt.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function Y(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=J(t)),t=X(e.get(n),t);return J(t)}function X(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=rn+an;break;case rn:n+=rn+sn;break;default:n+=o}}return n}function J(e){return e+rn+on}function $(e){var t=e.length;if(l(t>=2,"Invalid path "+e),2===t)return l(e.charAt(0)===rn&&e.charAt(1)===on,"Non-empty path "+e+" had length 2"),Xt.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(rn,o);(a<0||a>n)&&c('Invalid encoded resource path: "'+e+'"');var s=e.charAt(a+1);switch(s){case on:var u=e.substring(o,a),h=void 0;0===i.length?h=u:(i+=u,h=i,i=""),r.push(h);break;case an:i+=e.substring(o,a),i+="\0";break;case sn:i+=e.substring(o,a+1);break;default:c('Invalid encoded resource path: "'+e+'"')}o=a+2}return new Xt(r)}function Z(){return yn}function ee(){return Z()}function te(){return vn}function ne(){return bn}function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=wn,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}function ie(){return _n}function oe(e,t,n){var r=Zn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return le(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function ae(e,t){var n=!1;return he(e).iterateSerial(function(r){return oe(e,r,t).next(function(e){return e&&(n=!0),Cn.resolve(!e)})}).next(function(){return n})}function se(e,t,n){var r=e.store($n.store),i=e.store(Zn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){l(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var d=f[h],p=Zn.key(t,d.key.path,n.batchId);o.push(i.delete(p)),c.push(d.key)}return Cn.waitFor(o).next(function(){return c})}function ue(e){return e instanceof Uint8Array?(l("YES"==={NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ce(e){return Fr.getStore(e,$n.store)}function le(e){return Fr.getStore(e,Zn.store)}function he(e){return Fr.getStore(e,Jn.store)}function fe(e){return new Cn(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=de(e.target.error);n(t)}})}function de(e){var t=xn.getIOSVersion(Pt.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new qt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Mn||(Mn=!0,setTimeout(function(){throw r},0)),r}}return e}function pe(e){return Fr.getStore(e,ir.store)}function me(e){return Fr.getStore(e,ar.store)}function ge(e){var t=xn.getStore(e,ar.store);return t.get(ar.key).next(function(e){return l(null!==e,"Missing metadata row."),e})}function ye(e){return ge(e).next(function(e){return e.highestListenSequenceNumber})}function ve(e){return Fr.getStore(e,or.store)}function be(e){return Fr.getStore(e,rr.store)}function we(e){return e.code===Bt.DATA_LOSS&&e.message===Wn}function _e(e){return Fr.getStore(e,nr.store)}function Ee(e){return Fr.getStore(e,ur.store)}function Se(e){return e.path.toArray()}function Te(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw c("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}function Ce(e){return[0,Y(e)]}function Ie(e){e.createObjectStore(Xn.store)}function ke(e){e.createObjectStore(Jn.store,{keyPath:Jn.keyPath});var t=e.createObjectStore($n.store,{keyPath:$n.keyPath,autoIncrement:!0});t.createIndex($n.userMutationsIndex,$n.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Zn.store)}function Ne(e,t){var n=t.store($n.store);return n.loadAll().next(function(n){e.deleteObjectStore($n.store);var r=e.createObjectStore($n.store,{keyPath:$n.keyPath,autoIncrement:!0});r.createIndex($n.userMutationsIndex,$n.userMutationsKeyPath,{unique:!0});var i=t.store($n.store),o=n.map(function(e){return i.put(e)});return Cn.waitFor(o)})}function Ae(e){e.createObjectStore(nr.store)}function De(e){e.createObjectStore(rr.store)}function xe(e){var t=e.createObjectStore(or.store,{keyPath:or.keyPath});t.createIndex(or.documentTargetsIndex,or.documentTargetsKeyPath,{unique:!0});var n=e.createObjectStore(ir.store,{keyPath:ir.keyPath});n.createIndex(ir.queryTargetsIndexName,ir.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ar.store)}function Re(e){e.deleteObjectStore(or.store),e.deleteObjectStore(ir.store),e.deleteObjectStore(ar.store)}function Pe(e){var t=e.store(ar.store),n=new ar(0,0,cn.MIN.toTimestamp(),0);return t.put(ar.key,n)}function Oe(e){e.createObjectStore(ur.store,{keyPath:"id",autoIncrement:!0})}function Me(e){e.createObjectStore(cr.store,{keyPath:cr.keyPath})}function Le(e){return Fr.getStore(e,sr.store)}function Fe(e){return void 0!==e.documents}function Ue(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=W(n,i);return 0===a?W(r,o):a}function Be(e){return e.code===Bt.FAILED_PRECONDITION&&e.message===Rr}function qe(e){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(t){if(!Be(e))throw e;return a(Nr,"Unexpectedly lost primary lease"),[2]})})}function Ve(e){return e.store(Xn.store)}function je(e){return e.store(cr.store)}function We(e){return[0,Y(e.path)]}function Ke(e,t){return new or(0,Y(e.path),t)}function Qe(e,t){return ve(e).put(Ke(t,e.currentSequenceNumber))}function Ge(e,t){return e<t?-1:e>t?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}function ze(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function He(){return new ln(Zt.comparator)}function Ye(e){return null===e||void 0===e}function Xe(e){return Ni(e)&&e<=ki&&e>=Ii}function Je(e){switch(e){case Bt.OK:return c("Treated status OK as error");case Bt.CANCELLED:case Bt.UNKNOWN:case Bt.DEADLINE_EXCEEDED:case Bt.RESOURCE_EXHAUSTED:case Bt.INTERNAL:case Bt.UNAVAILABLE:case Bt.UNAUTHENTICATED:return!1;case Bt.INVALID_ARGUMENT:case Bt.NOT_FOUND:case Bt.ALREADY_EXISTS:case Bt.PERMISSION_DENIED:case Bt.FAILED_PRECONDITION:case Bt.ABORTED:case Bt.OUT_OF_RANGE:case Bt.UNIMPLEMENTED:case Bt.DATA_LOSS:return!0;default:return c("Unknown status code: "+e)}}function $e(e){return Je(e)&&e!==Bt.ABORTED}function Ze(e){var t=Wi[e];if(void 0!==t)return et(t)}function et(e){if(void 0===e)return s("GRPC error has no .code"),Bt.UNKNOWN;switch(e){case Wi.OK:return Bt.OK;case Wi.CANCELLED:return Bt.CANCELLED;
case Wi.UNKNOWN:return Bt.UNKNOWN;case Wi.DEADLINE_EXCEEDED:return Bt.DEADLINE_EXCEEDED;case Wi.RESOURCE_EXHAUSTED:return Bt.RESOURCE_EXHAUSTED;case Wi.INTERNAL:return Bt.INTERNAL;case Wi.UNAVAILABLE:return Bt.UNAVAILABLE;case Wi.UNAUTHENTICATED:return Bt.UNAUTHENTICATED;case Wi.INVALID_ARGUMENT:return Bt.INVALID_ARGUMENT;case Wi.NOT_FOUND:return Bt.NOT_FOUND;case Wi.ALREADY_EXISTS:return Bt.ALREADY_EXISTS;case Wi.PERMISSION_DENIED:return Bt.PERMISSION_DENIED;case Wi.FAILED_PRECONDITION:return Bt.FAILED_PRECONDITION;case Wi.ABORTED:return Bt.ABORTED;case Wi.OUT_OF_RANGE:return Bt.OUT_OF_RANGE;case Wi.UNIMPLEMENTED:return Bt.UNIMPLEMENTED;case Wi.DATA_LOSS:return Bt.DATA_LOSS;default:return c("Unknown status code: "+e)}}function tt(e){if(void 0===e)return Wi.OK;switch(e){case Bt.OK:return Wi.OK;case Bt.CANCELLED:return Wi.CANCELLED;case Bt.UNKNOWN:return Wi.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return Wi.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return Wi.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return Wi.INTERNAL;case Bt.UNAVAILABLE:return Wi.UNAVAILABLE;case Bt.UNAUTHENTICATED:return Wi.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return Wi.INVALID_ARGUMENT;case Bt.NOT_FOUND:return Wi.NOT_FOUND;case Bt.ALREADY_EXISTS:return Wi.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return Wi.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return Wi.FAILED_PRECONDITION;case Bt.ABORTED:return Wi.ABORTED;case Bt.OUT_OF_RANGE:return Wi.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return Wi.UNIMPLEMENTED;case Bt.DATA_LOSS:return Wi.DATA_LOSS;default:return c("Unknown status code: "+e)}}function nt(e){var t=e.toLowerCase().replace("_","-");return Object.values(Bt).indexOf(t)>=0?t:Bt.UNKNOWN}function rt(){return new ln(Zt.comparator)}function it(){return new ln(Zt.comparator)}function ot(e){return e instanceof ti?e.internalValue.slice():[]}function at(e,t){l(!Ye(e),t+" is missing")}function st(e){return"number"==typeof e?e:"string"==typeof e?Number(e):c("can't parse "+e)}function ut(e,t){var n=function(e){switch(e){case Hi.Added:return 1;case Hi.Modified:return 2;case Hi.Metadata:return 2;case Hi.Removed:return 0;default:return c("Unknown ChangeType: "+e)}};return n(e)-n(t)}function ct(e){var t=zt.INVALID;if(null!=e)try{var n=JSON.parse(e);l("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){s(Jo,"Failed to read sequence number from WebStorage",e)}return t}function lt(e){var t=e.search(ba);if(t>=0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(va.bind.apply(va,[void 0].concat(e.split("."))))}catch(t){throw new qt(Bt.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}function ht(e){if(!e)return new _a;switch(e.type){case"gapi":var t=e.client;return l(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Ta(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new qt(Bt.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function ft(e){return dt(e,["next","error","complete"])}function dt(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}function pt(e){switch(e){case io.Set:case io.MergeSet:case io.Update:return!0;case io.Argument:return!1;default:throw c("Unexpected case for UserDataSource: "+e)}}function mt(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof un||e instanceof fo||e instanceof jt||e instanceof La||e instanceof Ca)}function gt(e,t,n){if(!mt(n)||!M(n)){var r=L(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function yt(e,t){if(t instanceof va)return t._internalPath;if("string"==typeof t)return vt(e,t);var n="Field path arguments must be of type string or FieldPath.";throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}function vt(e,t){try{return lt(t)._internalPath}catch(t){var n=bt(t);throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function bt(e){return e instanceof Error?e.message:e.toString()}function wt(){throw new qt(Bt.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}function _t(e,t){if(void 0===t)return{merge:!1};if(B(e,t,["merge","mergeFields"]),N(e,"boolean","merge",t.merge),D(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof va}),void 0!==t.mergeFields&&void 0!==t.merge)throw new qt(Bt.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Et(e,t){return void 0===t?{}:(B(e,t,["serverTimestamps"]),R(e,"options","serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function St(e,t){I(e,"object",1,t),t&&(B(e,t,["source"]),R(e,"options","source",t.source,["default","server","cache"]))}function Tt(e,t,n){if(t instanceof Ha){if(t.firestore!==n)throw new qt(Bt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw q(e,"DocumentReference",1,t)}function Ct(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new Ja(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return l(t.type===Hi.Added,"Invalid event type for first snapshot"),l(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==Hi.Metadata}).map(function(t){var r=new Ja(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==Hi.Added&&(i=o.indexOf(t.doc.key),l(i>=0,"Index for document not found"),o=o.delete(t.doc.key)),t.type!==Hi.Removed&&(o=o.add(t.doc),a=o.indexOf(t.doc.key)),{type:It(t.type),doc:r,oldIndex:i,newIndex:a}})}function It(e){switch(e){case Hi.Added:return"added";case Hi.Modified:case Hi.Metadata:return"modified";case Hi.Removed:return"removed";default:return c("Unknown change type: "+e)}}function kt(e){e.INTERNAL.registerService("firestore",function(e){return new Qa(e)},b(hs))}function Nt(e){kt(e)}Object.defineProperty(t,"__esModule",{value:!0});var At,Dt=r(n(1)),xt=n(6),Rt=n(3),Pt=n(4),Ot=n(27),Mt=Dt.SDK_VERSION,Lt=new xt.Logger("@firebase/firestore");!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(At||(At={}));var Ft,Ut=function(){function e(){}return e.setPlatform=function(t){e.platform&&c("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||c("Platform not set"),e.platform},e}(),Bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qt=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Rt.__extends(t,e),t}(Error),Vt=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return l(20===t.length,"Invalid auto ID: "+t),t},e}(),jt=function(){function e(e){H(),this._binaryString=e}return e.fromBase64String=function(t){_("Blob.fromBase64String",arguments,1),C("Blob.fromBase64String","string",1,t),H();try{var n=Ut.getPlatform().atob(t);return new e(n)}catch(e){throw new qt(Bt.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(_("Blob.fromUint8Array",arguments,1),z(),!(t instanceof Uint8Array))throw q("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join("");return new e(n)},e.prototype.toBase64=function(){return _("Blob.toBase64",arguments,0),H(),Ut.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){_("Blob.toUint8Array",arguments,0),z();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return W(this._binaryString,e._binaryString)},e}(),Wt=f(jt,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Kt=function(){function e(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}return e}(),Qt="(default)",Gt=function(){function e(e,t){this.projectId=e,this.database=t?t:Qt}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===Qt},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return W(this.projectId,e.projectId)||W(this.database,e.database)},e}(),zt=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),Ht="__name__",Yt=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&c("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&c("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,l(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return l(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return l(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return l(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),Xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");var n=e.split("/").filter(function(e){return e.length>0});return new t(n)},t.EMPTY_PATH=new t([]),t}(Yt),Jt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return Jt.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Ht},t.keyField=function(){return new t([Ht])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new qt(Bt.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new qt(Bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new qt(Bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new qt(Bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(Yt),Zt=function(){function e(t){this.path=t,l(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===Xt.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return Xt.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2===0},e.fromSegments=function(t){return new e(new Xt(t.slice()))},e.fromPathString=function(t){return new e(Xt.fromString(t))},e.EMPTY=new e(new Xt([])),e}(),en=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e}();!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(Ft||(Ft={}));var tn=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=Date.now()+r,s=new e(t,n,a,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qt(Bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),nn=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw s("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),l(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=tn.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&c("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){l(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){var r=n[t];if(r.timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){l(e===Ft.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Ft.All&&i.timerId===e)break}return t.drain()})},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);l(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),rn="",on="",an="",sn="",un=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qt(Bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3),r=1e6*(t-1e3*n);return new e(n,r)},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),cn=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6),r=t%1e6*1e3;return new e(new un(n,r))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new un(0,0)),e}(),ln=function(){function e(e,t){this.comparator=e,this.root=t?t:fn.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fn.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new hn(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new hn(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new hn(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new hn(this.root,e,this.comparator,!0)},e}(),hn=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){l(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),fn=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw c("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw c("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw c("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),dn=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw c("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw c("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw c("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw c("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw c("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new fn(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();fn.EMPTY=new dn;var pn,mn=function(){function e(e){this.comparator=e,this.data=new ln(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){var r=n.getNext(),i=e(r.key);if(!i)return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new gn(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new gn(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),gn=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),yn=new ln(Zt.comparator),vn=new ln(Zt.comparator),bn=new ln(Zt.comparator),wn=new mn(Zt.comparator),_n=new mn(W),En=-1,Sn=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,l(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&l(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;l(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&l(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(e)&&(t=i.applyToLocalView(t,t,this.localWriteTime))}for(var o=t,a=0,s=this.mutations;a<s.length;a++){var i=s[a];i.key.isEqual(e)&&(t=i.applyToLocalView(t,o,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},re())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Q(this.mutations,e.mutations)&&Q(this.baseMutations,e.baseMutations)},e}(),Tn=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){
l(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=ne(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Cn=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&c("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0,o=t;i<o.length;i++){var a=o[i];r(a)}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),In=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){l(""!==t.uid,"UserID must not be an empty string.");var o=t.isAuthenticated()?t.uid:"";return new e(o,n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ce(e).iterate({index:$n.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=ue(n),he(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=ue(t),he(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=le(e),a=ce(e);return a.add({}).next(function(s){l("number"==typeof s,"Auto-generated key is not a number");var u=new Sn(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var h=[],f=0,d=r;f<d.length;f++){var p=d[f],m=Zn.key(i.userId,p.key.path,s);h.push(a.put(c)),h.push(o.put(m,Zn.PLACEHOLDER)),h.push(i.indexManager.addToCollectionParentIndex(e,p.key.path.popLast()))}return Cn.waitFor(h).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ce(e).get(t).next(function(e){return e?(l(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Cn.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ce(e).iterate({index:$n.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(l(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()}).next(function(){return o})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=En;return ce(e).iterate({index:$n.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,En],[this.userId,Number.POSITIVE_INFINITY]);return ce(e).loadAll($n.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Zn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return le(e).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],h=r[2],f=$(u);return s===n.userId&&t.path.isEqual(f)?ce(e).get(h).next(function(e){if(!e)throw c("Dangling document-mutation reference found: "+r+" which points to "+h);l(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+h),o.push(n.serializer.fromDbMutationBatch(e))}):void a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new mn(W),i=[];return t.forEach(function(t){var o=Zn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=le(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=$(s);return a===n.userId&&t.path.isEqual(c)?void(r=r.add(u)):void o.done()});i.push(s)}),Cn.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;l(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),l(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=Zn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new mn(W);return le(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=$(u);return a===n.userId&&r.isPrefixOf(l)?void(l.length===i&&(s=s.add(c))):void o.done()}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(ce(e).get(t).next(function(e){if(null===e)throw c("Dangling document-mutation reference found, which points to "+t);l(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),Cn.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return se(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),Cn.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Cn.resolve();var r=IDBKeyRange.lowerBound(Zn.prefixForUser(t.userId)),i=[];return le(e).iterate({range:r},function(e,n,r){var o=e[0];if(o!==t.userId)return void r.done();var a=$(e[1]);i.push(a)}).next(function(){l(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return oe(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return he(e).get(this.userId).next(function(e){return e||new Jn(t.userId,En,"")})},e}(),kn=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(pn||(pn={}));var Nn,An=function(){function e(e,t){this.generatorId=e,l((e&kn)===e,"Generator ID "+e+" contains more than "+kn+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<kn,e},e.prototype.after=function(e){return this.seek(e+(1<<kn)),this.next()},e.prototype.seek=function(e){l((e&kn)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){var t=new e(pn.QueryCache,2);return t},e.forSyncEngine=function(){return new e(pn.SyncEngine)},e}(),Dn="SimpleDb",xn=function(){function e(t){this.db=t;var n=e.getIOSVersion(Pt.getUA());12.2===n&&s("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return l(e.isAvailable(),"IndexedDB not supported in current environment."),a(Dn,"Opening database:",t),new Cn(function(i,o){var s=window.indexedDB.open(t,n);s.onsuccess=function(t){var n=t.target.result;i(new e(n))},s.onblocked=function(){o(new qt(Bt.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(e){var t=e.target.error;o("VersionError"===t.name?new qt(Bt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},s.onupgradeneeded=function(e){a(Dn,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new Pn(s.transaction);r.createOrUpgrade(n,i,e.oldVersion,zn).next(function(){a(Dn,"Database upgrade to version "+zn+" complete")})}}).toPromise()},e.delete=function(e){return a(Dn,"Removing database:",e),fe(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"==={NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}.USE_MOCK_PERSISTENCE;var t=Pt.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){var r=Pn.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),Cn.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),Rn=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return fe(this.dbCursor.delete())},e}(),Pn=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new en,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=de(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(a(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return l(!!t,"Object store not part of transaction: "+e),new On(t)},e}(),On=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(a(Dn,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(a(Dn,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fe(n)},e.prototype.add=function(e){a(Dn,"ADD",this.store.name,e,e);var t=this.store.add(e);return fe(t)},e.prototype.get=function(e){var t=this,n=this.store.get(e);return fe(n).next(function(n){return void 0===n&&(n=null),a(Dn,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){a(Dn,"DELETE",this.store.name,e);var t=this.store.delete(e);return fe(t)},e.prototype.count=function(){a(Dn,"COUNT",this.store.name);var e=this.store.count();return fe(e)},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){a(Dn,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Cn(function(n,r){t.onerror=function(e){var t=de(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;return r?void e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):void n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new Cn(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(!i)return void r();var o=new Rn(i),a=t(i.primaryKey,i.value,o);if(a instanceof Cn){var s=a.catch(function(e){return o.done(),Cn.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}}).next(function(){return Cn.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(l(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}(),Mn=!1,Ln=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=An.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return cn.fromTimestamp(new un(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return ye(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return pe(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return l(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return pe(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return Cn.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return pe(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return ge(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return me(e).put(ar.key,t)},e.prototype.saveQueryData=function(e,t){return pe(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return pe(e).iterate({range:i,index:ir.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=ve(e);return t.forEach(function(t){var a=Y(t.path);i.push(o.put(new or(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),Cn.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=ve(e);return Cn.forEach(t,function(t){var o=Y(t.path);return Cn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=ve(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ve(e),i=re();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=$(e[1]),o=new Zt(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=Y(t.path),r=IDBKeyRange.bound([n],[G(n)],!1,!0),i=0;return ve(e).iterate({index:or.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return pe(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}(),Fn=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return Zt.comparator(e.key,t.key)},e}(),Un=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return Rt.__extends(t,e),t.prototype.field=function(e){return this.data.field(e)},t.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", "+("{hasLocalMutations: "+this.hasLocalMutations+"}), ")+("{hasCommittedMutations: "+this.hasCommittedMutations+"})")},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):c("Trying to compare documents on fields that don't exist")},t}(Fn),Bn=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Rt.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Fn),qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Fn),Vn=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return void(this.inner[n]=[[e,t]]);for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){y(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},e.prototype.isEmpty=function(){return v(this.inner)},e}(),jn=function(){function e(){this.changes=new Vn(function(e){return e.toString()}),this.changesApplied=!1}return e.prototype.addEntry=function(e){this.assertNotApplied(),this.changes.set(e.key,e)},e.prototype.removeEntry=function(e){this.assertNotApplied(),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Cn.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){l(!this.changesApplied,"Changes have already been applied.")},e}(),Wn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Kn=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=xn.getStore(e,ur.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntry=function(e,t,n){var r=this,i=_e(e);return i.put(Se(t),n).next(function(){r.indexManager.addToCollectionParentIndex(e,t.path.popLast())})},e.prototype.removeEntry=function(e,t){var n=_e(e),r=Se(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.setMetadata(e,i).next(function(){if(r.keepDocumentChangeLog)return Ee(e).put({changes:r.serializer.toDbResourcePaths(t)})})})},e.prototype.getEntry=function(e,t){var n=this;return _e(e).get(Se(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return _e(e).get(Se(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Te(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=ee();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=ee(),i=new ln(Zt.comparator);return this.forEachDbEntry(e,t,function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i=i.insert(e,Te(t))):(r=r.insert(e,null),i=i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Cn.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return _e(e).iterate({range:r},function(e,t,r){for(var a=Zt.fromSegments(e);o&&Zt.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;l(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=te(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return _e(e).iterate({range:a},function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof Un&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;l(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=re(),r=Z(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Ee(e);return a.iterate({range:i},function(e,r){return o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id)?t.synchronizeLastDocumentChangeId(a).next(function(){return Cn.reject(new qt(Bt.DATA_LOSS,Wn))}):(n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),void(t._lastProcessedDocumentChangeId=r.id))}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new Bn(n,cn.forDeletedDoc());r=r.insert(n,t)}))}),Cn.waitFor(i)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Ee(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return be(e).get(rr.key).next(function(e){return l(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return be(e).put(rr.key,t)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n.documentSizes=new Vn(function(e){return e.toString()}),n}return Rt.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=re();return this.changes.forEach(function(o,a){var s=t.documentSizes.get(o);if(l(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){var u=t.documentCache.serializer.toDbRemoteDocument(a),c=Te(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else r-=s,n.push(t.documentCache.removeEntry(e,o));i=i.add(o)}),n.push(this.documentCache.updateMetadata(e,i,r)),Cn.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments,r=e.sizeMap;return r.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},t}(jn),e}(),Qn=function(){function e(){this.collectionParentIndex=new Gn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Cn.resolve()},e.prototype.getCollectionParents=function(e,t){return Cn.resolve(this.collectionParentIndex.getEntries(t))},e}(),Gn=function(){function e(){this.index={}}return e.prototype.add=function(e){l(e.length%2===1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mn(Xt.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.getEntries=function(e){var t=this.index[e]||new mn(Xt.comparator);return t.toArray()},e}(),zn=8,Hn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;l(n<r&&n>=0&&r<=zn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(Ie(e),ke(e),xe(e),Ae(e));var o=Cn.resolve();return n<3&&r>=3&&(0!==n&&(Re(e),xe(e)),o=o.next(function(){return Pe(t)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return Ne(e,t)})),o=o.next(function(){Me(e),Oe(e)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(o=o.next(function(){return De(e),i.addDocumentGlobal(t)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(t)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(e,t)})),o},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(nr.store).iterate(function(e,n){t+=Te(n)}).next(function(){var n=new rr(t);return e.store(rr.store).put(rr.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Jn.store),r=e.store($n.store);return n.loadAll().next(function(n){return Cn.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,En],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll($n.userMutationsIndex,i).next(function(r){return Cn.forEach(r,function(r){l(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return se(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(or.store),n=e.store(nr.store);return ye(e).next(function(e){var r=function(n){return t.put(new or(0,Y(n),e))},i=[];return n.iterate(function(e,n){var o=new Xt(e),a=Ce(o);i.push(t.get(a).next(function(e){return e?Cn.resolve():r(o)}))}).next(function(){return Cn.waitFor(i)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(sr.store,{keyPath:sr.keyPath});var n=t.store(sr.store),r=new Gn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Y(i)})}};return t.store(nr.store).iterate({keysOnly:!0},function(e,t){var n=new Xt(e);return i(n.popLast())}).next(function(){return t.store(Zn.store).iterate({keysOnly:!0},function(e,t){var n=(e[0],e[1]),r=(e[2],$(n));return i(r.popLast())})})},e}(),Yn=function(){function e(e,t){this.seconds=e,this.nanoseconds=t}return e}(),Xn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),Jn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),$n=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),Zn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Y(t)]},e.key=function(e,t,n){return[e,Y(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),er=function(){function e(e,t){this.path=e,this.readTime=t}return e}(),tr=function(){function e(e,t){this.path=e,this.version=t}return e;
}(),nr=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),rr=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),ir=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),or=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,l(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),ar=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),sr=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}(),ur=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),cr=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store="clientMetadata",e.keyPath="clientId",e}(),lr=[Jn.store,$n.store,Zn.store,nr.store,ir.store,Xn.store,ar.store,or.store],hr=lr,fr=hr.concat([cr.store,ur.store]),dr=fr.concat([rr.store]),pr=dr.concat([sr.store]),mr=pr,gr=function(){function e(){this.collectionParentsCache=new Gn}return e.prototype.addToCollectionParentIndex=function(e,t){if(l(t.length%2===1,"Expected a collection path."),this.collectionParentsCache.add(t)){l(t.length>=1,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return Le(e).put({collectionId:n,parent:Y(r)})}return Cn.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[G(t),""],!1,!0);return Le(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push($(o.parent))}return n})},e}();!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(Nn||(Nn={}));var yr,vr=function(){function e(e,t,n,r,i,o){void 0===i&&(i=cn.MIN),void 0===o&&(o=h()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),br=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Zt.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Bn(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var t=Zt.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new qn(t,n)}return c("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof Un){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new nr(null,null,t,n)}if(e instanceof Bn){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version),n=e.hasCommittedMutations;return new nr(null,new er(r,i),null,n)}if(e instanceof qn){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return new nr(new tr(r,i),null,null,!0)}return c("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Yn(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new un(e.seconds,e.nanoseconds);return cn.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new $n(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=un.fromMillis(e.localWriteTimeMs);return new Sn(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(Y(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=re(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Zt($(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=Fe(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new vr(t,e.targetId,Nn.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){l(Nn.Listen===e.purpose,"Only queries with purpose "+Nn.Listen+" may be stored, got "+e.purpose);var t,n=this.toDbTimestamp(e.snapshotVersion);t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query);var r;return e.resumeToken instanceof Uint8Array?(l("YES"==={NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),r=e.resumeToken.toString()):r=e.resumeToken,new ir(e.targetId,e.query.canonicalId(),n,r,e.sequenceNumber,t)},e}(),wr=function(){function e(e){this.maxElements=e,this.buffer=new mn(Ue),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ue(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),_r={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Er=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Sr=6e4,Tr=3e5,Cr=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){l(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Er.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;l(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?Tr:Sr;a("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Ft.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(qe)})},e}(),Ir=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Cn.resolve(zt.INVALID);var r=new wr(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Er.COLLECTION_DISABLED?(a("LruGarbageCollector","Garbage collection skipped; disabled"),Cn.resolve(_r)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(a("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),_r):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,s,u,c,l,h=this,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>h.params.maximumSequenceNumbersToCollect?(a("LruGarbageCollector","Capping sequence numbers to collect down "+("to the maximum of "+h.params.maximumSequenceNumbersToCollect+" ")+("from "+t)),r=h.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),h.nthSequenceNumber(e,r)}).next(function(r){return n=r,u=Date.now(),h.removeTargets(e,n,t)}).next(function(t){return o=t,c=Date.now(),h.removeOrphanedDocuments(e,n)}).next(function(e){if(l=Date.now(),i()<=At.DEBUG){var t="LRU Garbage Collection\n"+("\tCounted targets in "+(s-f)+"ms\n")+("\tDetermined least recently used "+r+" in ")+(u-s+"ms\n")+("\tRemoved "+o+" targets in ")+(c-u+"ms\n")+("\tRemoved "+e+" documents in ")+(l-c+"ms\n")+("Total Duration: "+(l-f)+"ms");a("LruGarbageCollector",t)}return Cn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})})},e}(),kr=function(){function e(){}return e}(),Nr="IndexedDbPersistence",Ar=18e5,Dr=5e3,xr=4e3,Rr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Or="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Mr="firestore_zombie",Lr=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return Rt.__extends(t,e),t}(kr),Fr=function(){function e(t,n,r,i,o,a,s){if(this.persistenceKey=t,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new qt(Bt.UNIMPLEMENTED,Or);if(this.referenceDelegate=new Ur(this,a),this.dbName=t+e.MAIN_DATABASE,this.serializer=new br(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new Ln(this.referenceDelegate,this.serializer),this.indexManager=new gr,this.remoteDocumentCache=new Kn(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new qt(Bt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Lr)return xn.getStore(e.simpleDbTransaction,t);throw c("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,r,i,o,a){return Rt.__awaiter(this,void 0,void 0,function(){var s;return Rt.__generator(this,function(u){switch(u.label){case 0:return s=new e(t,n,r,i,o,a),[4,s.start()];case 1:return u.sent(),[2,s]}})})},e.createMultiClientIndexedDbPersistence=function(t,n,r,i,o,a,s){return Rt.__awaiter(this,void 0,void 0,function(){var u;return Rt.__generator(this,function(c){switch(c.label){case 0:return u=new e(t,n,r,i,o,a,s),[4,u.start()];case 1:return c.sent(),[2,u]}})})},e.prototype.start=function(){var e=this;return l(!this.started,"IndexedDbPersistence double-started!"),l(null!==this.window,"Expected 'window' to be defined"),xn.openOrCreate(this.dbName,zn,new Hn(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[ar.store],function(t){return ye(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new zt(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",mr,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return Rt.__awaiter(t,void 0,void 0,function(){return Rt.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return Rt.__awaiter(t,void 0,void 0,function(){return Rt.__generator(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return Rt.__awaiter(t,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",mr,function(t){var n=je(t);return n.put(new cr(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this,n=Ve(e);return n.get(Xn.key).next(function(e){return Cn.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){var t=je(e);return t.delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Rt.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,Ar)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=e.getStore(i,cr.store);return o.loadAll().next(function(e){t=r.filterActiveClients(e,Ar),n=e.filter(function(e){return t.indexOf(e)===-1})}).next(function(){return Cn.forEach(n,function(e){return o.delete(e.clientId)})}).next(function(){if(t=t.filter(function(e){return e.clientId!==r.clientId}),t.length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),i.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Ft.ClientMetadataRefresh,xr,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this,n=Ve(e);return n.get(Xn.key).next(function(n){var r=null!==n&&t.isWithinAge(n.leaseTimestampMs,Dr)&&!t.isClientZombied(n.ownerId);if(r){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new qt(Bt.FAILED_PRECONDITION,Pr);return!1}}return!(!t.networkEnabled||!t.inForeground)||je(e).loadAll().next(function(e){var n=t.filterActiveClients(e,Dr).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1});return void 0===n})}).next(function(e){return t.isPrimary!==e&&a(Nr,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return Rt.__awaiter(this,void 0,void 0,function(){var e=this;return Rt.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Xn.store,cr.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[cr.store],function(t){return je(t).loadAll().next(function(t){return e.filterActiveClients(t,Ar).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return Rt.__awaiter(this,void 0,void 0,function(){var n;return Rt.__generator(this,function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,xn.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return l(this.started,"Cannot initialize MutationQueue before persistence is started."),In.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return l(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return l(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return l(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return a(Nr,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",mr,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw s("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new qt(Bt.FAILED_PRECONDITION,Rr);return n(new Lr(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Lr(i,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this,n=Ve(e);return n.get(Xn.key).next(function(e){var n=null!==e&&t.isWithinAge(e.leaseTimestampMs,Dr)&&!t.isClientZombied(e.ownerId);if(n&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new qt(Bt.FAILED_PRECONDITION,Pr)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Xn(this.clientId,this.allowTabSynchronization,Date.now());return Ve(e).put(Xn.key,t)},e.isAvailable=function(){return xn.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Ve(e);return n.get(Xn.key).next(function(e){return t.isLocalClient(e)?(a(Nr,"Releasing primary lease."),n.delete(Xn.key)):Cn.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now(),r=n-t,i=n;return!(e<r)&&(!(e>i)||(s("Detected an update time that is in the future: "+e+" > "+i),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(l(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(l("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return a(Nr,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return s(Nr,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){s("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return Mr+"_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}(),Ur=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Ir(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e),n=this.db.getQueryCache().getQueryCount(e);return n.next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Qe(e,t)},e.prototype.removeReference=function(e,t){return Qe(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Qe(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Cn.resolve(!0):ae(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache(),i=r.newChangeBuffer(),o=[],a=0,s=this.forEachOrphanedDocument(e,function(r,s){if(s<=t){var u=n.isPinned(e,r).next(function(t){if(!t)return a++,i.getEntry(e,r).next(function(){return i.removeEntry(r),ve(e).delete(We(r))})});o.push(u)}});return s.next(function(){return Cn.waitFor(o)}).next(function(){return i.apply(e)}).next(function(){return a})},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Qe(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=ve(e),i=zt.INVALID;return r.iterate({index:or.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==zt.INVALID&&t(new Zt($(n)),i),i=s,n=a):i=zt.INVALID}).next(function(){i!==zt.INVALID&&t(new Zt($(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(yr||(yr={}));var Br;!function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Br||(Br={}));var qr,Vr=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Br.Estimate,n);case"previous":return new e(Br.Previous,n);case"none":case void 0:return new e(Br.Default,n);default:return c("fromSnapshotOptions() called with invalid options.")}},e}(),jr=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){l(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type.");var t=W(this.typeOrder,e.typeOrder);return t},e}(),Wr=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=yr.NullValue,t.internalValue=null,t}return Rt.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(jr),Kr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.BooleanValue,n}return Rt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?W(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(jr),Qr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.NumberValue,n}return Rt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Ge(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(jr),Gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&ze(this.internalValue,e.internalValue)},t}(Qr),zr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&ze(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-(1/0)),t}(Qr),Hr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.StringValue,n}return Rt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?W(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(jr),Yr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.TimestampValue,n}return Rt.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Xr?-1:this.defaultCompareTo(e)},t}(jr),Xr=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=yr.TimestampValue,r}return Rt.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Br.Estimate?new Yr(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Br.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Yr?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(jr),Jr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.BlobValue,n}return Rt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(jr),$r=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=yr.RefValue,r}return Rt.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:Zt.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(jr),Zr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.GeoPointValue,n}return Rt.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(jr),ei=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.ObjectValue,
n}return Rt.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=W(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return W(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(l(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(l(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){l(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e):null}),n},t.prototype.fieldMask=function(){var e=new mn($t.comparator);return this.internalValue.forEach(function(n,r){var i=new $t([n]);if(r instanceof t){var o=r.fieldMask(),a=o.fields;a.isEmpty()?e=e.add(i):a.forEach(function(t){e=e.add(i.child(t))})}else e=e.add(i)}),ni.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new ln(W)),t}(jr),ti=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=yr.ArrayValue,n}return Rt.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){var r=n[t];if(r.isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return W(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){var e=this.internalValue.map(function(e){return e.toString()});return"["+e.join(",")+"]"},t}(jr),ni=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new mn($t.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),ri=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),ii=function(){function e(e,t){this.version=e,this.transformResults=t}return e}();!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(qr||(qr={}));var oi,ai=function(){function e(e,t){this.updateTime=e,this.exists=t,l(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Un&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Un:(l(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return K(this.updateTime,e.updateTime)&&this.exists===e.exists},e.NONE=new e,e}(),si=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&l(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Un?e.version:cn.MIN},e}(),ui=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=qr.Set,i}return Rt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),l(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Un(this.key,n,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=si.getPostMutationVersion(e);return new Un(this.key,r,this.value,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(si),ci=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=qr.Patch,o}return Rt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),l(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new qn(this.key,t.version);var n=this.patchDocument(e);return new Un(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=si.getPostMutationVersion(e),i=this.patchDocument(e);return new Un(this.key,r,i,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Un?e.data:ei.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},t}(si),li=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=qr.Transform,r.precondition=ai.exists(!0),r}return Rt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),l(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new qn(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data,r);return new Un(this.key,i,o,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data,i);return new Un(this.key,r.version,o,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Un?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?ei.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&Q(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){l(e instanceof Un,"Unknown MaybeDocument type "+e);var t=e;return l(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];l(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") "+("should match field transform count ("+this.fieldTransforms.length+")"));for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Un&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Un&&(u=t.field(a.field)),null===u&&n instanceof Un&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){l(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.field;e=e.set(i,t[n])}return e},t}(si),hi=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=qr.Delete,r}return Rt.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),l(null==t.transformResults,"Transform results received by DeleteMutation."),new Bn(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&l(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Bn(this.key,cn.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(si),fi=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++){var o=i[r];e=o.applyToLocalView(t,e)}return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=ee();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++){var a=o[i];t=a.applyToLocalView(e,t)}r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Z();return i.forEach(function(e,t){t||(t=new Bn(e,cn.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Zt(t)).next(function(e){var t=te();return e instanceof Un&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;l(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=te();return this.indexManager.getCollectionParents(e,r).next(function(o){return Cn.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return r=t,i.addMissingBaseDocuments(e,r,n).next(function(e){n=e;for(var t=0,i=r;t<i.length;t++)for(var o=i[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof Un?n.insert(c,h):n.remove(c)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=re(),i=0,o=t;i<o.length;i++)for(var a=o[i],s=0,u=a.mutations;s<u.length;s++){var c=u[s];c instanceof ci&&null===n.get(c.key)&&(r=r.add(c.key))}var l=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof Un&&(l=l.insert(e,t))}),l})},e}(),di=function(){function e(){this.refsByKey=new mn(pi.compareByKey),this.refsByTarget=new mn(pi.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new pi(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new pi(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=Zt.EMPTY,r=new pi(n,e),i=new pi(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=Zt.EMPTY,n=new pi(t,e),r=new pi(t,e+1),i=re();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new pi(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),pi=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return Zt.comparator(e.key,t.key)||W(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return W(e.targetOrBatchId,t.targetOrBatchId)||Zt.comparator(e.key,t.key)},e}(),mi="LocalStore",gi=function(){function e(e,t){this.persistence=e,this.localViewReferences=new di,this.queryDataByTarget={},l(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new fi(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new fi(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],a=re(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var c=p[d];o.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++){var f=g[m];a=a.add(f.key)}}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},e.prototype.localWrite=function(e){var t=this,n=un.now(),r=e.reduce(function(e,t){return e.add(t.key)},re());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=u.extractBaseValue(r.get(u.key));null!=c&&o.push(new ci(u.key,c,c.fieldMask(),ai.exists(!0)))}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):Cn.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return l(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer(),i=t.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=[];m(t.targetChanges,function(t,r){var a=n.queryDataByTarget[t];if(a){s.push(n.queryCache.removeMatchingKeys(o,r.removedDocuments,t).next(function(){return n.queryCache.addMatchingKeys(o,r.addedDocuments,t)}));var u=r.resumeToken;if(u.length>0){var c=a.copy({resumeToken:u,snapshotVersion:i});n.queryDataByTarget[t]=c,e.shouldPersistQueryData(a,c,r)&&s.push(n.queryCache.updateQueryData(o,c))}}});var u=Z(),c=re();if(t.documentUpdates.forEach(function(e,t){c=c.add(e)}),s.push(r.getEntries(o,c).next(function(e){t.documentUpdates.forEach(function(i,c){var l=e.get(i);null==l||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(r.addEntry(c),u=u.insert(i,c)):c instanceof Bn&&c.version.isEqual(cn.MIN)?(r.removeEntry(i),u=u.insert(i,c)):a(mi,"Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))})})),!i.isEqual(cn.MIN)){var h=n.queryCache.getLastRemoteSnapshotVersion(o).next(function(e){return l(i.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+i+" < "+e),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,i)});s.push(h)}return Cn.waitFor(s).next(function(){return r.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,u)})})},e.shouldPersistQueryData=function(e,t,n){if(l(t.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===e.resumeToken.length)return!0;var r=t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds();if(r>=this.RESUME_TOKEN_MAX_AGE_MICROS)return!0;var i=n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size;return i>0},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Cn.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),Cn.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=En),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,Cn.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new vr(e,i,Nn.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return l(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){l(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?Cn.resolve():Cn.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Cn.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);l(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(r,o,t),o?n.addEntry(o):l(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),yi=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=h(),this.batchesByDocumentKey=new mn(pi.compareByKey)}return e.prototype.checkEmpty=function(e){return Cn.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");l(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return l(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Cn.resolve()},e.prototype.getLastStreamToken=function(e){return Cn.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Cn.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){l(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){var o=this.mutationQueue[this.mutationQueue.length-1];l(o.batchId<i,"Mutation batchIDs must be monotonically increasing order")}var a=new Sn(i,t,n,r);this.mutationQueue.push(a);for(var s=0,u=r;s<u.length;s++){var c=u[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new pi(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}return Cn.resolve(a)},e.prototype.lookupMutationBatch=function(e,t){return Cn.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return l(null!=n,"Failed to find local mutation batch."),Cn.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Cn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Cn.resolve(0===this.mutationQueue.length?En:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Cn.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new pi(t,0),i=new pi(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){l(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);l(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Cn.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new mn(W);return t.forEach(function(e){var t=new pi(e,0),i=new pi(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){l(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),Cn.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){l(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Zt.isDocumentKey(i)||(i=i.child(""));var o=new pi(new Zt(i),0),a=new mn(W);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),Cn.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this,r=this.indexOfExistingBatchId(t.batchId,"removed");l(0===r,"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var i=this.batchesByDocumentKey;return Cn.forEach(t.mutations,function(r){var o=new pi(r.key,t.batchId);return i=i.delete(o),n.referenceDelegate.removeMutationReference(e,r.key)}).next(function(){n.batchesByDocumentKey=i})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new pi(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Cn.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&l(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Cn.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return l(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){if(0===this.mutationQueue.length)return 0;var t=this.mutationQueue[0].batchId;return e-t},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return l(n.batchId===e,"If found batch must match"),n},e}(),vi=function(){function e(e){this.persistence=e,this.queries=new Vn(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=cn.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new di,this.targetCount=0,this.targetIdGenerator=An.forQueryCache()}return e.prototype.getTargetCount=function(e){return Cn.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),Cn.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Cn.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Cn.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Cn.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Cn.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return l(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Cn.resolve()},e.prototype.updateQueryData=function(e,t){return l(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Cn.resolve()},e.prototype.removeQueryData=function(e,t){return l(this.targetCount>0,"Removing a target from an empty cache"),l(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Cn.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Cn.waitFor(o).next(function(){return i})},e.prototype.getQueryCount=function(e){return Cn.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Cn.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return c("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),Cn.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),Cn.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Cn.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){
var n=this.references.referencesForId(t);return Cn.resolve(n)},e.prototype.containsKey=function(e,t){return Cn.resolve(this.references.containsKey(t))},e}(),bi=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=He(),this.newDocumentChanges=re(),this.size=0}return e.prototype.addEntry=function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(t);return this.docs=this.docs.insert(n,{maybeDocument:t,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Cn.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=ee();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),Cn.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t){l(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=te(),r=new Zt(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof Un&&t.matches(s)&&(n=n.insert(s.key,s))}return Cn.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return Cn.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=Z();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new Bn(e,cn.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=re(),Cn.resolve(n)},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Cn.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return Rt.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i?n.push(t.documentCache.addEntry(e,i)):t.documentCache.removeEntry(r)}),Cn.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(jn),e}(),wi="MemoryPersistence",_i=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new zt(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new vi(this);var r=function(e){return n.referenceDelegate.documentSize(e)};this.indexManager=new Qn,this.remoteDocumentCache=new bi(this.indexManager,r)}return e.createLruPersistence=function(t,n,r){var i=function(e){return new Ti(e,new br(n),r)};return new e(t,i)},e.createEagerPersistence=function(t){var n=function(e){return new Si(e)};return new e(t,n)},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new yi(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;a(wi,"Starting transaction:",e);var i=new Ei(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return Cn.or(g(this.mutationQueues).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),Ei=function(){function e(e){this.currentSequenceNumber=e}return e}(),Si=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw c("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Cn.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Cn.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Cn.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache(),r=n.newChangeBuffer();return Cn.forEach(this.orphanedDocuments,function(n){return t.isReferenced(e,n).next(function(e){e||r.removeEntry(n)})}).next(function(){return t._orphanedDocuments=null,r.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Cn.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Cn.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Ti=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Vn(function(e){return Y(e.path)}),this.garbageCollector=new Ir(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Cn.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e),n=this.persistence.getQueryCache().getTargetCount(e);return n.next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Cn.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?Cn.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer(),a=i.forEachDocumentKey(e,function(i){return n.isPinned(e,i,t).next(function(e){e||(r++,o.removeEntry(i))})});return a.next(function(){return o.apply(e)}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Cn.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Cn.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Cn.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Cn.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw c("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Cn.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Cn.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Cn.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),Ci=Number,Ii=Ci.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),ki=Ci.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Ni=Ci.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Ai="ExponentialBackoff",Di=1e3,xi=1.5,Ri=6e4,Pi=function(){function e(e,t,n,r,i){void 0===n&&(n=Di),void 0===r&&(r=xi),void 0===i&&(i=Ri),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&a(Ai,"Backing off for "+i+" ms "+("(base delay: "+this.currentBaseMs+" ms, ")+("delay with jitter: "+n+" ms, ")+("last attempt: "+r+" ms ago)")),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),Oi="PersistentStream";!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(oi||(oi={}));var Mi,Li=6e4,Fi=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=oi.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Pi(e,t)}return e.prototype.isStarted=function(){return this.state===oi.Starting||this.state===oi.Open||this.state===oi.Backoff},e.prototype.isOpen=function(){return this.state===oi.Open},e.prototype.start=function(){return this.state===oi.Error?void this.performBackoff():(l(this.state===oi.Initial,"Already started"),void this.auth())},e.prototype.stop=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(oi.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){l(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=oi.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,Li,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){return this.isOpen()?[2,this.close(oi.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(n){switch(n.label){case 0:return l(this.isStarted(),"Only started streams should be closed."),l(e===oi.Error||Ye(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==oi.Error?this.backoff.reset():t&&t.code===Bt.RESOURCE_EXHAUSTED?(s(t.toString()),s("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Bt.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;l(this.state===oi.Initial,"Must be in initial state to auth"),this.state=oi.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new qt(Bt.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;l(this.state===oi.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return l(t.state===oi.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=oi.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;l(this.state===oi.Error,"Should only perform backoff when in Error state"),this.state=oi.Backoff,this.backoff.backoffAndRun(function(){return Rt.__awaiter(e,void 0,void 0,function(){return Rt.__generator(this,function(e){return l(this.state===oi.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=oi.Initial,this.start(),l(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return l(this.isStarted(),"Can't handle server close on non-started stream"),a(Oi,"close with error: "+e),this.stream=null,this.close(oi.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(a(Oi,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),Ui=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Ft.ListenStreamConnectionBackoff,Ft.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return Rt.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Fi),Bi=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Ft.WriteStreamConnectionBackoff,Ft.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=h(),a}return Rt.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(l(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return l(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){l(this.isOpen(),"Writing handshake requires an opened stream"),l(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;l(this.isOpen(),"Writing mutations requires an opened stream"),l(this.handshakeComplete_,"Handshake must be complete before writing mutations"),l(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(Fi),qi=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Bi(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Ui(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Z();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);l(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===Bt.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===Bt.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),Vi=function(){function e(e){this.datastore=e,this.readVersions=ne(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n=this;return Rt.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new qt(Bt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return t=r.sent(),t.forEach(function(e){e instanceof Bn||e instanceof Un?n.recordVersion(e):c("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new hi(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return Rt.__awaiter(this,void 0,void 0,function(){var e;return Rt.__generator(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new qt(Bt.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e instanceof Un)t=e.version;else{if(!(e instanceof Bn))throw c("Document in a transaction was a "+e.constructor.name);t=cn.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new qt(Bt.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?ai.updateTime(t):ai.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(cn.forDeletedDoc()))throw new qt(Bt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ai.updateTime(t)}return ai.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){l(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Mi||(Mi={}));var ji;!function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(ji||(ji={}));var Wi,Ki="OnlineStateTracker",Qi=1,Gi=1e4,zi=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Mi.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Mi.Unknown),l(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Ft.OnlineStateTimeout,Gi,function(){return e.onlineStateTimer=null,l(e.state===Mi.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within "+Gi/1e3+" seconds."),e.setAndBroadcast(Mi.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===Mi.Online?(this.setAndBroadcast(Mi.Unknown),l(0===this.watchStreamFailures,"watchStreamFailures must be 0"),l(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=Qi&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed "+Qi+" times. Most recent error: "+e.toString()),this.setAndBroadcast(Mi.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Mi.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(s(t),this.shouldWarnClientIsOffline=!1):a(Ki,t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Wi||(Wi={}));var Hi,Yi=function(){function e(e){e?this.comparator=function(t,n){return e(t,n)||Zt.comparator(t.key,n.key)}:this.comparator=function(e,t){return Zt.comparator(e.key,t.key)},this.keyedMap=te(),this.sortedSet=new ln(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(Hi||(Hi={}));var Xi;!function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Xi||(Xi={}));var Ji,$i=function(){function e(){this.changeMap=new ln(Zt.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);return n?void(e.type!==Hi.Added&&n.type===Hi.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Hi.Metadata&&n.type!==Hi.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Hi.Modified&&n.type===Hi.Modified?this.changeMap=this.changeMap.insert(t,{type:Hi.Modified,doc:e.doc}):e.type===Hi.Modified&&n.type===Hi.Added?this.changeMap=this.changeMap.insert(t,{type:Hi.Added,doc:e.doc}):e.type===Hi.Removed&&n.type===Hi.Added?this.changeMap=this.changeMap.remove(t):e.type===Hi.Removed&&n.type===Hi.Modified?this.changeMap=this.changeMap.insert(t,{type:Hi.Removed,doc:n.doc}):e.type===Hi.Added&&n.type===Hi.Removed?this.changeMap=this.changeMap.insert(t,{type:Hi.Modified,doc:e.doc}):c("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n))):void(this.changeMap=this.changeMap.insert(t,e))},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Zi=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:Hi.Added,doc:e})}),new e(t,n,Yi.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),eo=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=(r={},r[t]=to.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(cn.MIN,i,ie(),Z(),re())},e}(),to=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(h(),n,re(),re(),re())},e}(),no=function(){function e(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}return e}(),ro=function(){function e(e,t){this.targetId=e,this.existenceFilter=t}return e}();!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Ji||(Ji={}));var io,oo=function(){function e(e,t,n,r){void 0===n&&(n=h()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}return e}(),ao=function(){function e(){this.pendingResponses=0,this.documentChanges=it(),this._resumeToken=h(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=re(),t=re(),n=re();return this.documentChanges.forEach(function(r,i){switch(i){case Hi.Added:e=e.add(r);break;case Hi.Modified:t=t.add(r);break;case Hi.Removed:n=n.add(r);break;default:c("Encountered invalid change type: "+i)}}),new to(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=it()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),so="WatchChangeAggregator",uo=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Z(),this.pendingDocumentTargetMapping=rt(),this.pendingTargetResets=new mn(W)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Un?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Bn&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){var r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case Ji.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Ji.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Ji.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),l(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Ji.Current:t.isActiveTarget(n)&&(r.markCurrent(),
r.updateResumeToken(e.resumeToken));break;case Ji.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:c("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):m(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Zt(i.path);this.removeDocumentFromTarget(t,o,new Bn(o,cn.forDeletedDoc()))}else l(1===n,"Single document existence filter with count: "+n);else{var a=this.getCurrentDocumentCountForTarget(t);a!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}}},e.prototype.createRemoteEvent=function(e){var t=this,n={};m(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new Zt(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Bn(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=re();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===Nn.LimboResolution||(i=!1,!1)}),i&&(r=r.add(e))});var i=new eo(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Z(),this.pendingDocumentTargetMapping=rt(),this.pendingTargetResets=new mn(W),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Hi.Modified:Hi.Added,r=this.ensureTargetState(e);r.addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Hi.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e),n=t.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){var t=this.ensureTargetState(e);t.recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new ao),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new mn(W),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||a(so,"Detected inactive target",e),t},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;l(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new ao;var n=this.metadataProvider.getRemoteKeysForTarget(e);n.forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){var n=this.metadataProvider.getRemoteKeysForTarget(e);return n.has(t)},e}(),co="RemoteStore",lo=10,ho=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return Rt.__awaiter(o,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(a(co,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new zi(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return Rt.__awaiter(this,void 0,void 0,function(){var e;return Rt.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Mi.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mi.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(a(co,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return a(co,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Mi.Unknown),[2]}})})},e.prototype.listen=function(e){l(!d(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){l(d(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),v(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Mi.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){l(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new uo(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!v(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return Rt.__awaiter(this,void 0,void 0,function(){var e=this;return Rt.__generator(this,function(t){return m(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(t){return void 0===e&&l(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Mi.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){var n;return Rt.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Mi.Online),e instanceof oo&&e.state===Ji.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof no?this.watchChangeAggregator.handleDocumentChange(e):e instanceof ro?this.watchChangeAggregator.handleExistenceFilter(e):(l(e instanceof oo,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(cn.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;l(!e.isEqual(cn.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return m(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:h()}),t.sendUnwatchRequest(e);var r=new vr(n.query,e,Nn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;l(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return Rt.__awaiter(t,void 0,void 0,function(){return Rt.__generator(this,function(t){return d(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return Rt.__awaiter(this,void 0,void 0,function(){var e,t;return Rt.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:En,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return t=n.sent(),null!==t?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<lo},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){l(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){l(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(qe)},e.prototype.onMutationResult=function(e,t){var n=this;l(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Tn.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n=this;return Rt.__generator(this,function(r){return void 0===e&&l(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(t=void 0,t=this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e),[2,t.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(e){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(t){return Je(e.code)?(a(co,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=h(),[2,this.localStore.setLastStreamToken(h()).catch(qe)]):[2]})})},e.prototype.handleWriteError=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n=this;return Rt.__generator(this,function(r){return $e(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2]})})},e.prototype.createTransaction=function(){return new Vi(this.datastore)},e.prototype.restartNetwork=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mi.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(a(co,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Mi.Unknown),t.label=4;case 4:return[2]}})})},e}(),fo=function(){function e(e,t){if(_("GeoPoint",arguments,2),C("GeoPoint","number",1,e),C("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new qt(Bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qt(Bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return W(this._lat,e._lat)||W(this._long,e._long)},e}(),po=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Io]:this.memoizedOrderBy=[new Co(e),Io];else{l(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:So.ASCENDING;this.memoizedOrderBy.push(a===So.ASCENDING?Io:ko)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){l(null==this.getInequalityFilterField()||!(t instanceof yo)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),l(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){l(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];e+=r.canonicalId(),e+=","}e+="|ob:";for(var i=0,o=this.orderBy;i<o.length;i++){var a=o[i];e+=a.canonicalId(),e+=","}Ye(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Ye(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(var t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return l(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!Ye(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof yo&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof yo&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return Zt.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Zt.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(!r.matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){l(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),mo=function(){function e(){}return e}(),go=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return c("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),yo=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return Rt.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===go.IN?(l(r instanceof ti,"Comparing on key with IN, but filter value not an ArrayValue"),l(r.internalValue.every(function(e){return e instanceof $r}),"Comparing on key with IN, but an array value was not a RefValue"),new bo(e,r)):(l(r instanceof $r,"Comparing on key, but filter value not a RefValue"),l(n!==go.ARRAY_CONTAINS&&n!==go.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new vo(e,n,r));if(r.isEqual(Wr.INSTANCE)){if(n!==go.EQUAL)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(zr.NAN)){if(n!==go.EQUAL)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===go.ARRAY_CONTAINS?new wo(e,r):n===go.IN?(l(r instanceof ti,"IN filter has invalid value: "+r.toString()),new _o(e,r)):n===go.ARRAY_CONTAINS_ANY?(l(r instanceof ti,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Eo(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case go.LESS_THAN:return e<0;case go.LESS_THAN_OR_EQUAL:return e<=0;case go.EQUAL:return 0===e;case go.GREATER_THAN:return e>0;case go.GREATER_THAN_OR_EQUAL:return e>=0;default:return c("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[go.LESS_THAN,go.LESS_THAN_OR_EQUAL,go.GREATER_THAN,go.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(mo),vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=Zt.comparator(e.key,t.key);return this.matchesComparison(n)},t}(yo),bo=function(e){function t(t,n){var r=e.call(this,t,go.IN,n)||this;return r.value=n,r}return Rt.__extends(t,e),t.prototype.matches=function(e){var t=this.value;return t.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}(yo),wo=function(e){function t(t,n){return e.call(this,t,go.ARRAY_CONTAINS,n)||this}return Rt.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof ti&&t.contains(this.value)},t}(yo),_o=function(e){function t(t,n){var r=e.call(this,t,go.IN,n)||this;return r.value=n,r}return Rt.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(yo),Eo=function(e){function t(t,n){var r=e.call(this,t,go.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return Rt.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof ti&&n.internalValue.some(function(e){return t.value.contains(e)})},t}(yo),So=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),To=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){var r=n[t];e+=r.toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){l(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())l(o instanceof $r,"Bound has a non-key value where the key path is being used."),n=Zt.comparator(o.key,t.key);else{var a=t.field(i.field);l(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===So.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),Co=function(){function e(e,t){this.field=e,void 0===t&&(t=So.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Un.compareByKey(e,t):Un.compareByField(this.field,e,t);switch(this.dir){case So.ASCENDING:return n;case So.DESCENDING:return-1*n;default:return c("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Io=new Co($t.keyField(),So.ASCENDING),ko=new Co($t.keyField(),So.DESCENDING),No=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Xr(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),Ao=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ot(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++){var o=i[r];n(o)}return new ti(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Q(t.elements,this.elements)},e}(),Do=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ot(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++){var o=i[r];n(o)}return new ti(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&Q(t.elements,this.elements)},e}(),xo=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Gr&&this.operand instanceof Gr){var r=n.internalValue+this.operand.internalValue;return new Gr(r)}var r=n.internalValue+this.operand.internalValue;return new zr(r)},e.prototype.applyToRemoteDocument=function(e,t){return l(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Qr?e:new Gr(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}(),Ro=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),Po=function(){var e={};return e[So.ASCENDING.name]="ASCENDING",e[So.DESCENDING.name]="DESCENDING",e}(),Oo=function(){var e={};return e[go.LESS_THAN.name]="LESS_THAN",e[go.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",e[go.GREATER_THAN.name]="GREATER_THAN",e[go.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",e[go.EQUAL.name]="EQUAL",e[go.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",e[go.IN.name]="IN",e[go.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",e}(),Mo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Lo=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Bt.UNKNOWN:et(e.code);return new qt(t,e.message||"")},e.prototype.toInt32Value=function(e){return Ye(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return t="object"==typeof e?e.value:e,Ye(t)?null:t},e.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);l(!!e,"Cannot deserialize null or undefined timestamp.");var t=st(e.seconds||"0"),n=e.nanos||0;return new un(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=Mo.exec(e);if(l(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new un(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(l(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),jt.fromBase64String(e)):(l(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),jt.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return l(!!e,"Trying to deserialize version that isn't set"),cn.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString();
},e.prototype.fromResourceName=function(e){var t=Xt.fromString(e);return l(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return l(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),l(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Zt(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?Xt.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){var e=new Xt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]);return e.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new Xt(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return l(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Wr)return{nullValue:"NULL_VALUE"};if(e instanceof Kr)return{booleanValue:e.value()};if(e instanceof Gr)return{integerValue:""+e.value()};if(e instanceof zr){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-(1/0))return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Hr?{stringValue:e.value()}:e instanceof ei?{mapValue:this.toMapValue(e)}:e instanceof ti?{arrayValue:this.toArrayValue(e)}:e instanceof Yr?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Zr?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Jr?{bytesValue:this.toBytes(e.value())}:e instanceof $r?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:c("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Wr.INSTANCE;if("booleanValue"in e)return Kr.of(e.booleanValue);if("integerValue"in e)return new Gr(st(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return zr.NAN;if("Infinity"===e.doubleValue)return zr.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return zr.NEGATIVE_INFINITY}return new zr(e.doubleValue)}if("stringValue"in e)return new Hr(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){at(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new ti(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return at(e.timestampValue,"timestampValue"),new Yr(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){at(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new Zr(new fo(r,i))}if("bytesValue"in e){at(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Jr(o)}if("referenceValue"in e){at(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Gt(a.get(1),a.get(3)),u=new Zt(this.extractLocalPathFromResourceName(a));return new $r(s,u)}return c("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return l(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new Un(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=e,r=ei.EMPTY;return y(n,function(e,n){r=r.set(new $t([e]),t.fromValue(n))}),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){l(!!e.found,"Tried to deserialize a found document from a missing document."),at(e.found.name,"doc.found.name"),at(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new Un(t,n,r,{},e.found)},e.prototype.fromMissing=function(e){l(!!e.missing,"Tried to deserialize a missing document from a found document."),l(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Bn(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):c("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Ji.Added:return"ADD";case Ji.Current:return"CURRENT";case Ji.NoChange:return"NO_CHANGE";case Ji.Removed:return"REMOVE";case Ji.Reset:return"RESET";default:return c("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof ro)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof no){if(e.newDoc instanceof Un){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Bn){var t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof oo){var n=void 0;return e.cause&&(n={code:tt(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return c("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t;if("targetChange"in e){at(e.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=e.targetChange.resumeToken||this.emptyByteString(),o=e.targetChange.cause,a=o&&this.fromRpcStatus(o);t=new oo(n,r,i,a||null)}else if("documentChange"in e){at(e.documentChange,"documentChange"),at(e.documentChange.document,"documentChange.name"),at(e.documentChange.document.name,"documentChange.document.name"),at(e.documentChange.document.updateTime,"documentChange.document.updateTime");var s=e.documentChange,u=this.fromName(s.document.name),l=this.fromVersion(s.document.updateTime),h=this.fromFields(s.document.fields||{}),f=new Un(u,l,h,{},s.document),d=s.targetIds||[],p=s.removedTargetIds||[];t=new no(d,p,f.key,f)}else if("documentDelete"in e){at(e.documentDelete,"documentDelete"),at(e.documentDelete.document,"documentDelete.document");var m=e.documentDelete,u=this.fromName(m.document),l=m.readTime?this.fromVersion(m.readTime):cn.forDeletedDoc(),f=new Bn(u,l),p=m.removedTargetIds||[];t=new no([],p,f.key,f)}else if("documentRemove"in e){at(e.documentRemove,"documentRemove"),at(e.documentRemove.document,"documentRemove");var g=e.documentRemove,u=this.fromName(g.document),p=g.removedTargetIds||[];t=new no([],p,u,null)}else{if(!("filter"in e))return c("Unknown change type "+JSON.stringify(e));at(e.filter,"filter"),at(e.filter.targetId,"filter.targetId");var y=e.filter,v=y.count||0,b=new Ro(v),w=y.targetId;t=new ro(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Ji.NoChange:"ADD"===e?Ji.Added:"REMOVE"===e?Ji.Removed:"CURRENT"===e?Ji.Current:"RESET"===e?Ji.Reset:c("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return cn.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?cn.MIN:t.readTime?this.fromVersion(t.readTime):cn.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof ui)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof hi)t={delete:this.toName(e.key)};else if(e instanceof ci)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof li))return c("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):ai.NONE;if(e.update){at(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new ci(r,i,o,n)}return new ui(r,i,n)}if(e.delete){var r=this.fromName(e.delete);return new hi(r,n)}if(e.transform){var r=this.fromName(e.transform.document),a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return l(n.exists===!0,'Transforms only support precondition "exists == true"'),new li(r,a)}return c("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return l(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:c("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?ai.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?ai.exists(e.exists):ai.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new ii(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(l(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof No)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ao)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Do)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof xo)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw c("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)l("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=No.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ao(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e){var r=e.removeAllFromArray.values||[];n=new Do(r.map(function(e){return t.fromValue(e)}))}else if("increment"in e){var i=this.fromValue(e.increment);l(i instanceof Qr,"NUMERIC_ADD transform requires a NumberValue"),n=new xo(i)}else c("Unknown transform proto: "+JSON.stringify(e));var o=$t.fromServerFormat(e.fieldPath);return new ri(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;l(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return po.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(l(n.length%2===0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l(n.length%2!==0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){l(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var h=null;return n.endAt&&(h=this.fromCursor(n.endAt)),new po(t,i,s,a,u,c,h)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Nn.Listen:return null;case Nn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Nn.LimboResolution:return"limbo-document";default:return c("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},t.targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof yo?t.toUnaryOrFieldFilter(e):c("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):c("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new To(r,n)},e.prototype.toDirection=function(e){return Po[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return So.ASCENDING;case"DESCENDING":return So.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return Oo[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return go.EQUAL;case"GREATER_THAN":return go.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return go.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return go.LESS_THAN;case"LESS_THAN_OR_EQUAL":return go.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return go.ARRAY_CONTAINS;case"IN":return go.IN;case"ARRAY_CONTAINS_ANY":return go.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return c("Unspecified operator");default:return c("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return $t.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new Co(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return yo.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===go.EQUAL){if(e.value.isEqual(zr.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Wr.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return yo.create(t,go.EQUAL,zr.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return yo.create(n,go.EQUAL,Wr.INSTANCE);case"OPERATOR_UNSPECIFIED":return c("Unspecified filter");default:return c("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=e.fieldPaths||[],n=t.map(function(e){return $t.fromServerFormat(e)});return ni.fromArray(n)},e}(),Fo=function(){function e(){this.viewSnap=null,this.targetId=0,this.listeners=[]}return e}(),Uo=function(){function e(e){this.syncEngine=e,this.queries=new Vn(function(e){return e.canonicalId()}),this.onlineState=Mi.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new Fo,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return Rt.__generator(this,function(o){return t=e.query,n=!1,r=this.queries.get(t),r&&(i=r.listeners.indexOf(e),i>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length)),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){var u=s[a];u.onViewSnapshot(r)}o.viewSnap=r}}},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.applyOnlineStateChange(e)}})},e}(),Bo=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Mi.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(l(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Hi.Metadata&&t.push(i)}e=new Zi(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(l(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Mi.Offline;return this.options.waitForSyncWhenOnline&&n?(l(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Mi.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0},e.prototype.raiseInitialEvent=function(e){l(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),qo=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=re(),i=re(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Hi.Added:r=r.add(s.doc.key);break;case Hi.Removed:i=i.add(s.doc.key)}}return new e(t,r,i)},e}(),Vo=function(){function e(e){this.key=e}return e}(),jo=function(){function e(e){this.key=e}return e}(),Wo=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=re(),this.mutatedKeys=re(),this.documentSet=new Yi(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new $i,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var c=i.get(e),h=t instanceof Un?t:null;h&&(l(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;if(c&&h){var m=c.data.isEqual(h.data);m?f!==d&&(r.track({type:Hi.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(c,h)||(r.track({type:Hi.Modified,doc:h}),p=!0,u&&n.query.docComparator(h,u)>0&&(s=!0))}else!c&&h?(r.track({type:Hi.Added,doc:h}),p=!0):c&&!h&&(r.track({type:Hi.Removed,doc:c}),p=!0,u&&(s=!0));p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Hi.Removed,doc:c})}return l(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;l(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return ut(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current,u=s?Xi.Synced:Xi.Local,c=u!==this.syncState;if(this.syncState=u,0!==o.length||c){var h=new Zi(this.query,e.documentSet,i,o,e.mutatedKeys,u===Xi.Local,c,!1);return{snapshot:h,limboChanges:a}}return{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Mi.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new $i,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return l(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=re(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new jo(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new Vo(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=re();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Zi.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Xi.Local)},e}(),Ko=5,Qo=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ko,this.backoff=new Pi(this.asyncQueue,Ft.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return Rt.__awaiter(e,void 0,void 0,function(){var e,t,n=this;return Rt.__generator(this,function(r){return e=this.remoteStore.createTransaction(),t=this.tryRunUpdateFunction(e),t&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.handleTransactionError(e)})})}).catch(function(e){n.handleTransactionError(e)}),[2]})})})},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Ye(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Je(t)}return!1},e}(),Go="SyncEngine",zo=function(){function e(e,t,n){this.query=e,this.targetId=t,this.view=n}return e}(),Ho=function(){function e(e){this.key=e,this.receivedDocument=!1}return e}(),Yo=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Vn(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new ln(Zt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new di,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=An.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Mi.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.isPrimary===!0},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){l(null!==e,"SyncEngine listener cannot be null"),l(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return Rt.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c;return Rt.__generator(this,function(h){switch(h.label){case 0:return n=e.query,[4,this.localStore.executeQuery(n)];case 1:return r=h.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return i=h.sent(),o=new Wo(n,i),a=o.computeDocChanges(r),s=to.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==Mi.Offline),u=o.applyChanges(a,this.isPrimary===!0,s),l(0===u.limboChanges.length,"View returned limbo docs before target ack from the server."),l(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new zo(n,e.targetId,o),this.queryViewsByQuery.set(n,c),this.queryViewsByTarget[e.targetId]=c,[2,u.snapshot]}})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r;return Rt.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=i.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=i.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},e.prototype.unlisten=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Rt.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),t=this.queryViewsByQuery.get(e),l(!!t,"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),n=this.sharedClientState.isActiveQueryTarget(t.targetId),n?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupQuery(t)}).catch(qe)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){var n;return Rt.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},e.prototype.runTransaction=function(e,t,n){new Qo(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Rt.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("applyRemoteEvent()"),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=i.sent(),y(e.targetChanges,function(e,t){var n=r.limboResolutionsByTarget[Number(e)];n&&(l(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?n.receivedDocument=!0:t.modifiedDocuments.size>0?l(n.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(l(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return i.sent(),[3,6];case 4:return n=i.sent(),[4,qe(n)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===ji.RemoteStore||!this.isPrimary&&t===ji.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(t,r){
var i=r.view.applyOnlineStateChange(e);l(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return Rt.__generator(this,function(c){switch(c.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=new ln(Zt.comparator),i=i.insert(r,new Bn(r,cn.forDeletedDoc())),o=re().add(r),a=new eo(cn.MIN,{},new mn(W),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return s=this.queryViewsByTarget[e],l(!!s,"Unknown targetId: "+e),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return u.removeAndCleanupQuery(s)}).catch(qe)];case 2:c.sent(),this.syncEngineListener.onWatchError(s.query,t),c.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return Rt.__awaiter(this,void 0,void 0,function(){var r;return Rt.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return r=i.sent(),null===r?(a(Go,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n?n:null),this.localStore.removeCachedMutationBatchMetadata(e)):c("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r;return Rt.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return r=i.sent(),[4,qe(r)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.rejectFailedWrite=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){var n,r;return Rt.__generator(this,function(i){switch(i.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return r=i.sent(),[4,qe(r)];case 5:return i.sent(),[3,6];case 6:return[2]}})})},e.prototype.registerPendingWritesCallback=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n;return Rt.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||a(Go,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return t=r.sent(),t===En?(e.resolve(),[2]):(n=this.pendingWritesCallbacks.get(t)||[],n.push(e),this.pendingWritesCallbacks.set(t,n),[2])}})})},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new qt(Bt.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new ln(W)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(l(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){var n=t.limboDocumentRefs.containsKey(e);n||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof Vo)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof jo){a(Go,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e);var o=this.limboDocumentRefs.containsKey(i.key);o||this.removeLimboTarget(i.key)}else c("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){a(Go,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=po.atPath(t.path);this.limboResolutionsByTarget[n]=new Ho(t),this.remoteStore.listen(new vr(r,n,Nn.LimboResolution,zt.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return Rt.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,o.isPrimary===!0,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=qo.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){l(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n;return Rt.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u=this;return Rt.__generator(this,function(c){switch(c.label){case 0:return e!==!0||this.isPrimary===!0?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return e!==!1||this.isPrimary===!1?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),m(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;m(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new ln(Zt.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return Rt.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c;return Rt.__generator(this,function(h){switch(h.label){case 0:t=[],n=[],r=0,i=e,h.label=1;case 1:return r<i.length?(o=i[r],a=void 0,s=this.queryViewsByTarget[o],s?[4,this.localStore.releaseQuery(s.query,!0)]:[3,5]):[3,11];case 2:return h.sent(),[4,this.localStore.allocateQuery(s.query)];case 3:return a=h.sent(),[4,this.synchronizeViewAndComputeSnapshot(s)];case 4:return u=h.sent(),u.snapshot&&n.push(u.snapshot),[3,9];case 5:return l(this.isPrimary===!0,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return c=h.sent(),l(!!c,"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(c)];case 7:return a=h.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:h.sent(),h.label=9;case 9:t.push(a),h.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return Rt.__awaiter(this,void 0,void 0,function(){var r,i,o,s,u,l;return Rt.__generator(this,function(h){switch(h.label){case 0:if(this.isPrimary)return a(Go,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(r=t){case"current":return[3,1];case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return h.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return i=h.sent(),o=eo.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(i,o)];case 3:return h.sent(),[3,11];case 4:return s=h.sent(),we(s)?(u=[],m(this.queryViewsByTarget,function(e){return u.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(u)]):[3,6];case 5:return h.sent(),[3,7];case 6:throw s;case 7:return[3,8];case 8:return l=this.queryViewsByTarget[e],this.removeAndCleanupQuery(l),[4,this.localStore.releaseQuery(l.query,!0)];case 9:return h.sent(),this.syncEngineListener.onWatchError(l.query,n),[3,11];case 10:c("Unexpected target state: "+t),h.label=11;case 11:return[2]}})})},e.prototype.applyActiveTargetsChange=function(e,t){return Rt.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,h,i,f=this;return Rt.__generator(this,function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(i=r[n],l(!this.queryViewsByTarget[i],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(i)]):[3,6];case 2:return o=d.sent(),l(!!o,"Query data for active target "+i+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return a=d.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 4:d.sent(),this.remoteStore.listen(a),d.label=5;case 5:return n++,[3,1];case 6:s=function(e){var t;return Rt.__generator(this,function(n){switch(n.label){case 0:return t=u.queryViewsByTarget[e],t?[4,u.localStore.releaseQuery(t.query,!1).then(function(){f.remoteStore.unlisten(e),f.removeAndCleanupQuery(t)}).catch(qe)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,h=t,d.label=7;case 7:return c<h.length?(i=h[c],[5,s(i)]):[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?re().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:re()},e}(),Xo=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Jo="SharedClientState",$o="firestore_clients",Zo="firestore_mutations",ea="firestore_targets",ta="firestore_online_state",na="firestore_sequence_number",ra=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,l(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(a=new qt(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(s(Jo,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),ia=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,l(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(o=new qt(r.error.code,r.error.message))),i?new e(t,r.state,o):(s(Jo,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),oa=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ie(),a=0;i&&a<r.activeTargetIds.length;++a)i=Xe(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(s(Jo,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),aa=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t),r="object"==typeof n&&n.onlineState in Mi&&"string"==typeof n.clientId;return r?new e(n.clientId,Mi[n.onlineState]):(s(Jo,"Failed to parse online state: "+t),null)},e}(),sa=function(){function e(){this.activeTargetIds=ie()}return e.prototype.addQueryTarget=function(e){l(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),ua=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new qt(Bt.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=na+"_"+r,this.activeClients[this.localClientId]=new sa,this.clientStateKeyRe=new RegExp("^"+$o+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Zo+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+ea+"_"+a+"_(\\d+)$"),this.onlineStateKey=ta+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return Rt.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u,c,h,f=this;return Rt.__generator(this,function(d){switch(d.label){case 0:return l(!this.started,"WebStorageSharedClientState already started"),l(null!==this.syncEngine,"syncEngine property must be set before calling start()"),l(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=d.sent(),t=0,n=e;t<n.length;t++)r=n[t],r!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)),i&&(o=oa.fromWebStorageEntry(r,i),o&&(this.activeClients[o.clientId]=o)));for(this.persistClientState(),a=this.storage.getItem(this.onlineStateKey),a&&(s=this.fromWebStorageOnlineState(a),s&&this.handleOnlineStateEvent(s)),u=0,c=this.earlyEvents;u<c.length;u++)h=c[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=ie();return y(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=ia.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return a(Jo,"READ",e,t),t},e.prototype.setItem=function(e,t){a(Jo,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){a(Jo,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(a(Jo,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void s("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return Rt.__awaiter(t,void 0,void 0,function(){var t,n,r,i,o,a;return Rt.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(l(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),a=ct(e.newValue),a!==zt.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new ra(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Mi[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new ia(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return l(e.indexOf("_")===-1,"Client key cannot contain '_', but was '"+e+"'"),$o+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return ea+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Zo+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return l(null!==n,"Cannot parse client state key '"+e+"'"),oa.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);l(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ra.fromWebStorageEntry(new Xo(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);l(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return ia.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return aa.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(a(Jo,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return Rt.__awaiter(n,void 0,void 0,function(){return Rt.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return Rt.__awaiter(n,void 0,void 0,function(){return Rt.__generator(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),ca=function(){function e(){this.localState=new sa,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new sa,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),la="FirestoreClient",ha=11,fa=20,da=22,pa=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Er.withCacheSize(this.cacheSizeBytes)},e}(),ma=function(){function e(){}return e}(),ga=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Vt.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new en,r=new en,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof pa?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof qt?e.code===Bt.FAILED_PRECONDITION||e.code===Bt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(e.code===da||e.code===fa||e.code===ha)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new qt(Bt.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Fr.buildStoragePrefix(this.databaseInfo),i=new Lo(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return Rt.__awaiter(n,void 0,void 0,function(){var n,o;return Rt.__generator(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!ua.isAvailable(this.platform))throw new qt(Bt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=t.lruParams(),t.synchronizeTabs?(this.sharedClientState=new ua(this.asyncQueue,this.platform,r,this.clientId,e),[4,Fr.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new ca,[4,Fr.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=_i.createEagerPersistence(this.clientId),this.sharedClientState=new ca,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return a(la,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return Rt.__awaiter(n,void 0,void 0,function(){var n,i,o,a,s,u=this;return Rt.__generator(this,function(c){switch(c.label){case 0:return this.localStore=new gi(this.persistence,e),t&&(this.lruScheduler=new Cr(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),o=new qi(this.asyncQueue,r,this.credentials,i),a=function(e){return u.syncEngine.applyOnlineStateChange(e,ji.RemoteStore)},s=function(e){return u.syncEngine.applyOnlineStateChange(e,ji.SharedClientState)},this.remoteStore=new ho(this.localStore,o,this.asyncQueue,a,n),this.syncEngine=new Yo(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Uo(this.syncEngine),[4,this.sharedClientState.start()];case 1:return c.sent(),[4,this.remoteStore.start()];case 2:return c.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return Rt.__awaiter(u,void 0,void 0,function(){return Rt.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return c.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return Rt.__awaiter(u,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 4:return c.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),a(la,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return Rt.__awaiter(e,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new en;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new Bo(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){
var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Un)return e;if(e instanceof Bn)return null;throw new qt(Bt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=re(),r=new Wo(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new en;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new en;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},e}(),ya=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),va=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];T("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(C("FieldPath","string",n,e[n]),0===e[n].length)throw new qt(Bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e($t.keyField().canonicalString()),e}(),ba=new RegExp("[~\\*/\\[\\]]"),wa=function(){function e(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}return e}(),_a=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){l(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Xo.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){l(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Ea=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=Xo.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;l(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new qt(Bt.ABORTED,"getToken aborted due to token change.");return n?(l("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new wa(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){l(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){l(null!=this.tokenListener,"removeChangeListener() called twice"),l(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return l(null===e||"string"==typeof e,"Received invalid UID: "+e),new Xo(e)},e}(),Sa=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Xo.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),Ta=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Sa(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Xo.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}(),Ca=function(){function e(e){this._methodName=e}return e.delete=function(){return w("FieldValue.delete",arguments),Ia.instance},e.serverTimestamp=function(){return w("FieldValue.serverTimestamp",arguments),ka.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return E("FieldValue.arrayUnion",arguments,1),new Na(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return E("FieldValue.arrayRemove",arguments,1),new Aa(e)},e.increment=function(e){return C("FieldValue.increment","number",1,e),_("FieldValue.increment",arguments,1),new Da(e)},e.prototype.isEqual=function(e){return this===e},e}(),Ia=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return Rt.__extends(t,e),t.instance=new t,t}(Ca),ka=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return Rt.__extends(t,e),t.instance=new t,t}(Ca),Na=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return Rt.__extends(t,e),t}(Ca),Aa=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return Rt.__extends(t,e),t}(Ca),Da=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return Rt.__extends(t,e),t}(Ca),xa=f(Ca,"Use FieldValue.<field>() instead."),Ra=/^__.*__$/,Pa=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new ci(e,this.data,this.fieldMask,t)):n.push(new ui(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new li(e,this.fieldTransforms)),n},e}(),Oa=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new ci(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new li(e,this.fieldTransforms)),n},e}();!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument"}(io||(io={}));var Ma=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new qt(Bt.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(pt(this.dataSource)&&Ra.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),La=function(){function e(e,t){this.databaseId=e,this.key=t}return e}(),Fa=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Ma(io.Set,e,$t.EMPTY_PATH);gt("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Pa(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Ma(io.MergeSet,e,$t.EMPTY_PATH);gt("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new mn($t.comparator),u=0,l=n;u<l.length;u++){var h=l[u],f=void 0;if(h instanceof va)f=h._internalPath;else{if("string"!=typeof h)throw c("Expected stringOrFieldPath to be a string or a FieldPath");f=vt(e,h)}if(!r.contains(f))throw new qt(Bt.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");s=s.add(f)}i=ni.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=ni.fromArray(r.fieldMask),o=r.fieldTransforms;return new Pa(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Ma(io.Update,e,$t.EMPTY_PATH);gt("Data must be an object, but it was:",r,t);var i=new mn($t.comparator),o=ei.EMPTY;y(t,function(t,a){var s=vt(e,t),u=r.childContextForFieldPath(s);if(a=n.runPreConverter(a,u),a instanceof Ia)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=ni.fromSet(i);return new Oa(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Ma(io.Update,e,$t.EMPTY_PATH),o=[yt(e,t)],a=[n];if(r.length%2!==0)throw new qt(Bt.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(yt(e,r[s])),a.push(r[s+1]);for(var u=new mn($t.comparator),c=ei.EMPTY,s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Ia)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=ni.fromSet(u);return new Oa(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new Ma(io.Argument,e,$t.EMPTY_PATH),r=this.parseData(t,n);return l(null!=r,"Parsed data should not be null."),l(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=bt(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(e=this.runPreConverter(e,t),mt(e))return gt("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Ca)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new ln(W);return v(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):y(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new ei(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Wr.INSTANCE),n.push(s),r++}return new ti(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!pt(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Ia){if(t.dataSource!==io.MergeSet)throw t.dataSource===io.Update?(l(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof ka)t.fieldTransforms.push(new ri(t.path,No.instance));else if(e instanceof Na){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Ao(n);t.fieldTransforms.push(new ri(t.path,r))}else if(e instanceof Aa){var n=this.parseArrayTransformElements(e._methodName,e._elements),i=new Do(n);t.fieldTransforms.push(new ri(t.path,i))}else if(e instanceof Da){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new xo(o);t.fieldTransforms.push(new ri(t.path,a))}else c("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Wr.INSTANCE;if("number"==typeof e)return Xe(e)?new Gr(e):new zr(e);if("boolean"==typeof e)return Kr.of(e);if("string"==typeof e)return new Hr(e);if(e instanceof Date)return new Yr(un.fromDate(e));if(e instanceof un)return new Yr(new un(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof fo)return new Zr(e);if(e instanceof jt)return new Jr(e);if(e instanceof La)return new $r(e.databaseId,e.key);throw t.createError("Unsupported field value: "+L(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new Ma(io.Argument,e,$t.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}(),Ua="firestore.googleapis.com",Ba=!0,qa=!0,Va=!1,ja=Er.COLLECTION_DISABLED,Wa=!1,Ka=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new qt(Bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ua,this.ssl=Ba}else k("settings","non-empty string","host",e.host),this.host=e.host,N("settings","boolean","ssl",e.ssl),this.ssl=p(e.ssl,Ba);if(B("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),N("settings","object","credentials",e.credentials),this.credentials=e.credentials,N("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),e.timestampsInSnapshots===!0?s("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):e.timestampsInSnapshots===!1&&s("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=p(e.timestampsInSnapshots,qa),N("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Er.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==ja&&e.cacheSizeBytes<Er.MINIMUM_CACHE_SIZE_BYTES)throw new qt(Bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Er.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}N("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Va:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),Qa=function(){function e(t){var n=this;if(this._firebaseApp=null,this._queue=new nn,this.INTERNAL={delete:function(){return Rt.__awaiter(n,void 0,void 0,function(){return Rt.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=e.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Ea(r)}else{var i=t;if(!i.projectId)throw new qt(Bt.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Gt(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new _a}this._settings=new Ka({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(_("Firestore.settings",arguments,1),C("Firestore.settings","object",1,e),d(e,"persistence"))throw new qt(Bt.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ka(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new qt(Bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=ht(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new qt(Bt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&s("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=p(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,Wa)),this.configureClient(new pa(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Fr.buildStoragePrefix(this.makeDatabaseInfo()),n=new en;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return Rt.__awaiter(e,void 0,void 0,function(){var e;return Rt.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new qt(Bt.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Fr.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new ma),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new Kt(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){l(!!this._settings.host,"FirestoreSettings.host is not set"),l(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new ga(Ut.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){var t=function(t){if(t instanceof Ha){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new qt(Bt.INVALID_ARGUMENT,"Document reference is for database "+(r.projectId+"/"+r.database+" but should be ")+("for database "+n.projectId+"/"+n.database));return new La(e,t._key)}return t};return new Fa(t)},e.databaseIdFromApp=function(e){var t=e.options;if(!d(t,"projectId"))throw new qt(Bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new qt(Bt.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Gt(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new qt(Bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return _("Firestore.collection",arguments,1),C("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new ts(Xt.fromString(e),this)},e.prototype.doc=function(e){return _("Firestore.doc",arguments,1),C("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Ha.forPath(Xt.fromString(e),this)},e.prototype.collectionGroup=function(e){if(_("Firestore.collectionGroup",arguments,1),C("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new $a(new po(Xt.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return _("Firestore.runTransaction",arguments,1),C("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new Ga(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new za(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(i()){case At.DEBUG:return"debug";case At.ERROR:return"error";case At.SILENT:return"silent";default:return c("Unknown log level: "+i())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(_("Firestore.setLogLevel",arguments,1),C("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":o(At.DEBUG);break;case"error":o(At.ERROR);break;case"silent":o(At.SILENT);break;default:throw new qt(Bt.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Ga=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;_("Transaction.get",arguments,1);var n=Tt("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return c("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Bn)return new Xa(t._firestore,n._key,null,!1,!1);if(r instanceof Un)return new Xa(t._firestore,n._key,r,!1,!1);throw c("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){S("Transaction.set",arguments,2,3);var r=Tt("Transaction.set",e,this._firestore);n=_t("Transaction.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a;return"string"==typeof t||t instanceof va?(E("Transaction.update",arguments,3),o=Tt("Transaction.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,r)):(_("Transaction.update",arguments,2),o=Tt("Transaction.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(o._key,a),this},e.prototype.delete=function(e){_("Transaction.delete",arguments,1);var t=Tt("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),za=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){S("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Tt("WriteBatch.set",e,this._firestore);n=_t("WriteBatch.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,ai.NONE)),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.verifyNotCommitted();var o,a;return"string"==typeof t||t instanceof va?(E("WriteBatch.update",arguments,3),o=Tt("WriteBatch.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,r)):(_("WriteBatch.update",arguments,2),o=Tt("WriteBatch.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(a.toMutations(o._key,ai.exists(!0))),this},e.prototype.delete=function(e){_("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Tt("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new hi(t._key,ai.NONE)),this},e.prototype.commit=function(){return Rt.__awaiter(this,void 0,void 0,function(){return Rt.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new qt(Bt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Ha=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!==0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+(t.canonicalString()+" has "+t.length));return new e(new Zt(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ts(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(_("DocumentReference.collection",arguments,1),C("DocumentReference.collection","non-empty string",1,e),!e)throw new qt(Bt.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=Xt.fromString(e);return new ts(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){S("DocumentReference.set",arguments,1,2),t=_t("DocumentReference.set",t);var n=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,ai.NONE))},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i;return"string"==typeof e||e instanceof va?(E("DocumentReference.update",arguments,2),i=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,n)):(_("DocumentReference.update",arguments,1),i=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(i.toMutations(this._key,ai.exists(!0)))},e.prototype.delete=function(){return _("DocumentReference.delete",arguments,0),this._firestoreClient.write([new hi(this._key,ai.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];S("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||ft(e[i])||(r=e[i],B("DocumentReference.onSnapshot",r,["includeMetadataChanges"]),N("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ft(e[i])?n=e[i]:(C("DocumentReference.onSnapshot","function",i,e[i]),I("DocumentReference.onSnapshot","function",i+1,e[i+1]),I("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ya({next:function(e){if(t.next){l(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Xa(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(po.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return S("DocumentReference.get",arguments,0,1),St("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new Xa(t.firestore,t._key,e,!0,e instanceof Un&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new qt(Bt.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new qt(Bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),Ya=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Xa=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return S("DocumentSnapshot.data",arguments,0,1),e=Et("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,Vr.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(S("DocumentSnapshot.get",arguments,1,2),t=Et("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(yt("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Vr.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ha(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Ya(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document));
},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof ei)return this.convertObject(e,t);if(e instanceof ti)return this.convertArray(e,t);if(e instanceof $r){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||s("Document "+this._key.path+" contains a document reference within a different database ("+(e.databaseId.projectId+"/"+e.databaseId.database+") which is not ")+"supported. It will be treated as a reference in the current "+("database ("+r.projectId+"/"+r.database+") ")+"instead."),new Ha(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),Ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return l("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Xa),$a=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){if(_("Query.where",arguments,3),U("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){var i=["<","<=","==",">=",">","array-contains"];P("Query.where",i,2,n)}var o,a=yt("Query.where",t),s=go.fromString(n);if(a.isKeyField()){if(s===go.ARRAY_CONTAINS||s===go.ARRAY_CONTAINS_ANY)throw new qt(Bt.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===go.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}o=new ti(u)}else o=this.parseDocumentIdValue(r)}else s!==go.IN&&s!==go.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),o=this.firestore._dataConverter.parseQueryValue("Query.where",r);var f=yo.create(a,s,o);return this.validateNewFilter(f),new e(this._query.addFilter(f),this.firestore)},e.prototype.orderBy=function(t,n){S("Query.orderBy",arguments,1,2),I("Query.orderBy","non-empty string",2,n);var r;if(void 0===n||"asc"===n)r=So.ASCENDING;else{if("desc"!==n)throw new qt(Bt.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=So.DESCENDING}if(null!==this._query.startAt)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=yt("Query.orderBy",t),o=new Co(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(_("Query.limit",arguments,1),C("Query.limit","number",1,t),t<=0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(U(e,1,t),t instanceof Xa){if(n.length>0)throw new qt(Bt.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new qt(Bt.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+(e+"()."));return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new $r(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Xr)throw new qt(Bt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a "+("document for which the field '"+u+"' (used as the ")+"orderBy) does not exist.")}r.push(s)}}return new To(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new qt(Bt.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o],s=r[o];if(s.field.isKeyField()){if("string"!=typeof a)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+(e+"(), but got a "+typeof a));if(!this._query.isCollectionGroupQuery()&&a.indexOf("/")!==-1)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), "+("the value passed to "+e+"() must be a plain document ID, but ")+("'"+a+"' contains a slash."));var u=this._query.path.child(Xt.fromString(a));if(!Zt.isDocumentKey(u))throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by "+("FieldPath.documentId(), the value passed to "+e+"() must result in a ")+("valid document path, but '"+u+"' is not because it contains an odd number ")+"of segments.");var c=new Zt(u);i.push(new $r(this.firestore._databaseId,c))}else{var l=this.firestore._dataConverter.parseQueryValue(e,a);i.push(l)}}return new To(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];S("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||ft(e[i])||(r=e[i],B("Query.onSnapshot",r,["includeMetadataChanges"]),N("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ft(e[i])?n=e[i]:(C("Query.onSnapshot","function",i,e[i]),I("Query.onSnapshot","function",i+1,e[i+1]),I("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ya({next:function(e){t.next&&t.next(new Za(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.get=function(e){var t=this;return S("Query.get",arguments,0,1),St("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Za(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new qt(Bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&e.indexOf("/")!==-1)throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but "+("'"+e+"' contains a '/' character."));var t=this._query.path.child(Xt.fromString(e));if(!Zt.isDocumentKey(t))throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, "+("but '"+t+"' is not because it has an odd number of segments ("+t.length+")."));return new $r(this.firestore._databaseId,new Zt(t))}if(e instanceof Ha){var n=e;return new $r(this.firestore._databaseId,n._key)}throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+(L(e)+"."))},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new qt(Bt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for "+("'"+t.toString()+"' filters."));if(e.length>10)throw new qt(Bt.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(e){return Number.isNaN(e)}).length>0)throw new qt(Bt.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof yo){var t=[go.ARRAY_CONTAINS,go.ARRAY_CONTAINS_ANY],n=[go.IN,go.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have"+(" inequality filters on '"+o.toString()+"'")+(" and '"+e.field.toString()+"'"));var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new qt(Bt.INVALID_ARGUMENT,"Invalid query. You cannot use more than one "+("'"+e.op.toString()+"' filter.")):new qt(Bt.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters "+("with '"+s.toString()+"' filters."))}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new qt(Bt.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality "+("(<, <=, >, or >=) on field '"+e.toString()+"' ")+("and so you must also use '"+e.toString()+"' ")+"as your first Query.orderBy(), but your first Query.orderBy() "+("is on field '"+t.toString()+"' instead."))},e}(),Za=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ya(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;S("QuerySnapshot.forEach",arguments,1,2),C("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new $a(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(B("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),N("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new qt(Bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=Ct(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw q("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new Ja(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}(),es=["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]);es.forEach(function(e){try{Object.defineProperty(Za.prototype.docChanges,e,{get:function(){return wt()}})}catch(e){}});var ts=function(e){function t(t,n){var r=e.call(this,po.atPath(t),n)||this;if(t.length%2!==1)throw new qt(Bt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+(t.canonicalString()+" has "+t.length));return r}return Rt.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Ha(new Zt(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(S("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Vt.newId()),C("CollectionReference.doc","non-empty string",1,e),""===e)throw new qt(Bt.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=Xt.fromString(e);return Ha.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){_("CollectionReference.add",arguments,1),C("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}($a),ns=f(Qa,"Use firebase.firestore() instead."),rs=f(Ga,"Use firebase.firestore().runTransaction() instead."),is=f(za,"Use firebase.firestore().batch() instead."),os=f(Ha,"Use firebase.firestore().doc() instead."),as=f(Xa),ss=f(Ja),us=f($a),cs=f(Za),ls=f(ts,"Use firebase.firestore().collection() instead."),hs={Firestore:ns,GeoPoint:fo,Timestamp:un,Blob:Wt,Transaction:rs,WriteBatch:is,DocumentReference:os,DocumentSnapshot:as,Query:us,QueryDocumentSnapshot:ss,QuerySnapshot:cs,CollectionReference:ls,FieldPath:va,FieldValue:xa,setLogLevel:Qa.setLogLevel,CACHE_SIZE_UNLIMITED:ja},fs=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),ds="ConnectivityMonitor",ps=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){a(ds,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){var n=t[e];n(0)}},e.prototype.onNetworkUnavailable=function(){a(ds,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){var n=t[e];n(1)}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ms=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){l(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){l(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){l(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){l(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){l(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){l(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),gs="Connection",ys="google.firestore.v1.Firestore",vs="v1",bs={BatchGetDocuments:"batchGet",Commit:"commit"},ws="gl-js/ fire/"+Mt,_s=15,Es=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ws},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(o,s){var u=new Ot.XhrIo;u.listenOnce(Ot.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case Ot.ErrorCode.NO_ERROR:var t=u.getResponseJson();a(gs,"XHR received:",JSON.stringify(t)),o(t);break;case Ot.ErrorCode.TIMEOUT:a(gs,'RPC "'+e+'" timed out'),s(new qt(Bt.DEADLINE_EXCEEDED,"Request time out"));break;case Ot.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(a(gs,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=nt(r.status);s(new qt(i,r.message))}else s(new qt(Bt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(gs,'RPC "'+e+'" failed'),s(new qt(Bt.UNAVAILABLE,"Connection failed."));break;default:c('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{a(gs,'RPC "'+e+'" completed.')}});var l=JSON.stringify(t);a(gs,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",l,h,_s)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/",ys,"/",e,"/channel"],r=Ot.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),Pt.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");a(gs,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,h=new ms({sendFn:function(e){c?a(gs,"Not sending because WebChannel is closed:",e):(u||(a(gs,"Opening WebChannel transport."),s.open(),u=!0),a(gs,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}}),f=function(e,t){s.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return f(Ot.WebChannel.EventType.OPEN,function(){c||a(gs,"WebChannel transport opened.")}),f(Ot.WebChannel.EventType.CLOSE,function(){c||(c=!0,a(gs,"WebChannel transport closed"),h.callOnClose())}),f(Ot.WebChannel.EventType.ERROR,function(e){c||(c=!0,a(gs,"WebChannel transport errored:",e),h.callOnClose(new qt(Bt.UNAVAILABLE,"The operation could not be completed")))}),f(Ot.WebChannel.EventType.MESSAGE,function(e){if(!c){var t=e.data[0];l(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){a(gs,"WebChannel received error:",r);var i=r.status,o=Ze(i),u=r.message;void 0===o&&(o=Bt.INTERNAL,u="Unknown error status: "+i+" with message "+r.message),c=!0,h.callOnClose(new qt(o,u)),s.close()}else a(gs,"WebChannel received:",t),h.callOnMessage(t)}}),setTimeout(function(){h.callOnOpen()},0),h},e.prototype.makeUrl=function(e){var t=bs[e];l(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/",vs];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),Ss=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new Es(e))},e.prototype.newConnectivityMonitor=function(){return ps.isAvailable()?new ps:new fs},e.prototype.newSerializer=function(e){return new Lo(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();Ut.setPlatform(new Ss),Nt(Dt),t.registerFirestore=Nt},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function o(e,t,n){var r=i(e),o=r,a=void 0;try{var s=t&&t.error;if(s){var u=s.status;if("string"==typeof u){if(!f[u])return new d("internal","internal");r=f[u],o=u}var c=s.message;"string"==typeof c&&(o=c),a=s.details,void 0!==a&&(a=n.decode(a))}}catch(e){}return"ok"===r?null:new d(r,o,a)}function a(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function s(e){return new Promise(function(t,n){setTimeout(function(){n(new d("deadline-exceeded","deadline-exceeded"))},e)})}function u(e,t,n){return new v(e,n)}function c(e){var t={Functions:v};e.INTERNAL.registerService(b,u,t,void 0,!0)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n(1)),h=n(3),f={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return h.__extends(t,e),t}(Error),p=function(){function e(e){this.app=e}return e.prototype.getAuthToken=function(){return h.__awaiter(this,void 0,void 0,function(){var e,t;return h.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return e=n.sent(),e?[2,e.accessToken]:[2,void 0];case 2:return t=n.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getInstanceIdToken=function(){return h.__awaiter(this,void 0,void 0,function(){var e,t,n;return h.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.app.messaging?(e=this.app.messaging(),[4,e.getToken()]):[2,void 0];case 1:return t=r.sent(),t?[2,t]:[2,void 0];case 2:return n=r.sent(),[2,void 0];case 3:return[2]}})})},e.prototype.getContext=function(){return h.__awaiter(this,void 0,void 0,function(){var e,t;return h.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}(),m="type.googleapis.com/google.protobuf.Int64Value",g="type.googleapis.com/google.protobuf.UInt64Value",y=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(e===!0||e===!1)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return a(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case m:case g:var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?a(e,function(e){return t.decode(e)}):e},e}(),v=function(){function e(e,t){var n=this;void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new y,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return n.deleteService()}},this.contextProvider=new p(e),this.cancelAllRequests=new Promise(function(e){n.deleteService=function(){return e()}})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;if(null!==this.emulatorOrigin){var r=this.emulatorOrigin;return r+"/"+t+"/"+n+"/"+e}return"https://"+n+"-"+t+".cloudfunctions.net/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return h.__awaiter(this,void 0,void 0,function(){var r,i,o,a;return h.__generator(this,function(s){switch(s.label){case 0:n.append("Content-Type","application/json"),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=s.sent(),[3,4];case 3:return i=s.sent(),[2,{status:0,json:null}];case 4:o=null,s.label=5;case 5:return s.trys.push([5,7,,8]),[4,r.json()];case 6:return o=s.sent(),[3,8];case 7:return a=s.sent(),[3,8];case 8:return[2,{status:r.status,json:o}]}})})},e.prototype.call=function(e,t,n){return h.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,f,p,m;return h.__generator(this,function(h){switch(h.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},a=new Headers,[4,this.contextProvider.getContext()];case 1:return u=h.sent(),u.authToken&&a.append("Authorization","Bearer "+u.authToken),u.instanceIdToken&&a.append("Firebase-Instance-ID-Token",u.instanceIdToken),c=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,a),s(c),this.cancelAllRequests])];case 2:if(l=h.sent(),!l)throw new d("cancelled","Firebase Functions instance was deleted.");if(f=o(l.status,l.json,this.serializer))throw f;if(!l.json)throw new d("internal","Response is not valid JSON object.");if(p=l.json.data,"undefined"==typeof p&&(p=l.json.result),"undefined"==typeof p)throw new d("internal","Response is missing data field.");return m=this.serializer.decode(p),[2,{data:m}]}})})},e}(),b="functions";c(l),t.registerFunctions=c},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return e instanceof $.FirebaseError&&e.code.includes("request-failed")}function o(e){if(!e||!e.options)throw ce.create("missing-app-config-values");var t=e.name,n=e.options,r=n.projectId,i=n.apiKey,o=n.appId;if(!(t&&r&&i&&o))throw ce.create("missing-app-config-values");return{appName:t,projectId:r,apiKey:i,appId:o}}function a(e){var t=e.projectId;return ie+"/projects/"+t+"/installations"}function s(e){return{token:e.token,requestStatus:2,expiresIn:f(e.expiresIn),creationTime:Date.now()}}function u(e,t){return J.__awaiter(this,void 0,void 0,function(){var n,r;return J.__generator(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,ce.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function c(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function l(e,t){var n=t.refreshToken,r=c(e);return r.append("Authorization",d(n)),r}function h(e){return J.__awaiter(this,void 0,void 0,function(){var t;return J.__generator(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function f(e){return Number(e.replace("s","000"))}function d(e){return re+" "+e}function p(e,t){var n=t.fid;return J.__awaiter(this,void 0,void 0,function(){var t,r,i,o,l,f,d;return J.__generator(this,function(p){switch(p.label){case 0:return t=a(e),r=c(e),i={fid:n,authVersion:re,appId:e.appId,sdkVersion:ne},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,h(function(){return fetch(t,o)})];case 1:return l=p.sent(),l.ok?[4,l.json()]:[3,3];case 2:return f=p.sent(),d={fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:s(f.authToken)},[2,d];case 3:return[4,u("Create Installation",l)];case 4:throw p.sent()}})})}function m(e){return new Promise(function(t){setTimeout(t,e)})}function g(e){var t=btoa(String.fromCharCode.apply(String,J.__spread(e)));return t.replace(/\+/g,"-").replace(/\//g,"_")}function y(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=v(e);return le.test(n)?n:he}catch(e){return he}}function v(e){var t=g(e);return t.substr(0,22)}function b(){return me||(me=Z.openDb(fe,de,function(e){switch(e.oldVersion){case 0:e.createObjectStore(pe)}})),me}function w(e,t){return J.__awaiter(this,void 0,void 0,function(){var n,r,i;return J.__generator(this,function(o){switch(o.label){case 0:return n=S(e),[4,b()];case 1:return r=o.sent(),i=r.transaction(pe,"readwrite"),[4,i.objectStore(pe).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}})})}function _(e){return J.__awaiter(this,void 0,void 0,function(){var t,n,r;return J.__generator(this,function(i){switch(i.label){case 0:return t=S(e),[4,b()];case 1:return n=i.sent(),r=n.transaction(pe,"readwrite"),[4,r.objectStore(pe).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function E(e,t){return J.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s;return J.__generator(this,function(u){switch(u.label){case 0:return n=S(e),[4,b()];case 1:return r=u.sent(),i=r.transaction(pe,"readwrite"),o=i.objectStore(pe),[4,o.get(n)];case 2:return a=u.sent(),s=t(a),s===a?[2,s]:void 0!==s?[3,4]:[4,o.delete(n)];
case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),[2,s]}})})}function S(e){return e.appName+"!"+e.appId}function T(e){return J.__awaiter(this,void 0,void 0,function(){var t,n,r;return J.__generator(this,function(i){switch(i.label){case 0:return[4,E(e,function(n){var r=C(n),i=I(e,r);return t=i.registrationPromise,i.installationEntry})];case 1:return n=i.sent(),n.fid!==he?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function C(e){var t=e||{fid:y(),registrationStatus:0};return D(t)?{fid:t.fid,registrationStatus:0}:t}function I(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(ce.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=k(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:N(e)}:{installationEntry:t}}function k(e,t){return J.__awaiter(this,void 0,void 0,function(){var n,r;return J.__generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,7]),[4,p(e,t)];case 1:return n=o.sent(),[2,w(e,n)];case 2:return r=o.sent(),i(r)&&409===r.serverCode?[4,_(e)]:[3,4];case 3:return o.sent(),[3,6];case 4:return[4,w(e,{fid:t.fid,registrationStatus:0})];case 5:o.sent(),o.label=6;case 6:throw r;case 7:return[2]}})})}function N(e){return J.__awaiter(this,void 0,void 0,function(){var t;return J.__generator(this,function(n){switch(n.label){case 0:return[4,A(e)];case 1:t=n.sent(),n.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,m(100)];case 3:return n.sent(),[4,A(e)];case 4:return t=n.sent(),[3,2];case 5:if(0===t.registrationStatus)throw ce.create("create-installation-failed");return[2,t]}})})}function A(e){return E(e,function(e){if(!e)throw ce.create("installation-not-found");return D(e)?{fid:e.fid,registrationStatus:0}:e})}function D(e){return 1===e.registrationStatus&&e.registrationTime+te<Date.now()}function x(e,t){return J.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,c,f;return J.__generator(this,function(d){switch(d.label){case 0:return n=R(e,t),r=l(e,t),i={installation:{sdkVersion:ne}},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,h(function(){return fetch(n,o)})];case 1:return a=d.sent(),a.ok?[4,a.json()]:[3,3];case 2:return c=d.sent(),f=s(c),[2,f];case 3:return[4,u("Generate Auth Token",a)];case 4:throw d.sent()}})})}function R(e,t){var n=t.fid;return a(e)+"/"+n+"/authTokens:generate"}function P(e){return J.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return J.__generator(this,function(o){switch(o.label){case 0:return[4,E(e,function(n){if(!F(n))throw ce.create("not-registered");var r=n.authToken;if(U(r))return n;if(1===r.requestStatus)return t=O(e),n;if(!navigator.onLine)throw ce.create("app-offline");var i=q(n);return t=L(e,i),i})];case 1:return n=o.sent(),t?[4,t]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=n.authToken,o.label=4;case 4:return r=i,[2,r.token]}})})}function O(e){return J.__awaiter(this,void 0,void 0,function(){var t,n;return J.__generator(this,function(r){switch(r.label){case 0:return[4,M(e)];case 1:t=r.sent(),r.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,m(100)];case 3:return r.sent(),[4,M(e)];case 4:return t=r.sent(),[3,2];case 5:if(n=t.authToken,0===n.requestStatus)throw ce.create("generate-token-failed");return[2,n]}})})}function M(e){return E(e,function(e){if(!F(e))throw ce.create("not-registered");var t=e.authToken;return V(t)?J.__assign({},e,{authToken:{requestStatus:0}}):e})}function L(e,t){return J.__awaiter(this,void 0,void 0,function(){var n,r,o,r;return J.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,8]),[4,x(e,t)];case 1:return n=a.sent(),r=J.__assign({},t,{authToken:n}),[4,w(e,r)];case 2:return a.sent(),[2,n];case 3:return o=a.sent(),!i(o)||401!==o.serverCode&&404!==o.serverCode?[3,5]:[4,_(e)];case 4:return a.sent(),[3,7];case 5:return r=J.__assign({},t,{authToken:{requestStatus:0}}),[4,w(e,r)];case 6:a.sent(),a.label=7;case 7:throw o;case 8:return[2]}})})}function F(e){return void 0!==e&&2===e.registrationStatus}function U(e){return 2===e.requestStatus&&!B(e)}function B(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+oe}function q(e){var t={requestStatus:1,requestTime:Date.now()};return J.__assign({},e,{authToken:t})}function V(e){return 1===e.requestStatus&&e.requestTime+te<Date.now()}function j(e){return J.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return J.__generator(this,function(a){switch(a.label){case 0:return t=o(e),[4,T(t)];case 1:return n=a.sent(),r=n.installationEntry,i=n.registrationPromise,i&&i.catch(function(){}),2===r.registrationStatus&&P(t).catch(function(){}),[2,r.fid]}})})}function W(e){return J.__awaiter(this,void 0,void 0,function(){var t;return J.__generator(this,function(n){switch(n.label){case 0:return t=o(e),[4,K(t)];case 1:return n.sent(),[2,P(t)]}})})}function K(e){return J.__awaiter(this,void 0,void 0,function(){var t,n,r;return J.__generator(this,function(i){switch(i.label){case 0:return[4,T(e)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?[4,r]:[3,3];case 2:return i.sent(),[3,4];case 3:if(2!==n.registrationStatus)throw ce.create("create-installation-failed");i.label=4;case 4:return[2]}})})}function Q(e,t){return J.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return J.__generator(this,function(a){switch(a.label){case 0:return n=G(e,t),r=l(e,t),i={method:"DELETE",headers:r},[4,h(function(){return fetch(n,i)})];case 1:return o=a.sent(),o.ok?[3,3]:[4,u("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}})})}function G(e,t){var n=t.fid;return a(e)+"/"+n}function z(e){return J.__awaiter(this,void 0,void 0,function(){var t,n;return J.__generator(this,function(r){switch(r.label){case 0:return t=o(e),[4,E(t,function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw ce.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw ce.create("app-offline");case 3:return[4,Q(t,n)];case 4:return r.sent(),[4,_(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}function H(e){var t="installations",n=function(e){return o(e),{app:e,getId:function(){return j(e)},getToken:function(){return W(e)},delete:function(){return z(e)}}};e.INTERNAL.registerService(t,n)}Object.defineProperty(t,"__esModule",{value:!0});var Y,X=r(n(1)),J=n(3),$=n(4),Z=n(46),ee="0.2.5",te=1e4,ne="w:"+ee,re="FIS_v2",ie="https://firebaseinstallations.googleapis.com/v1",oe=36e5,ae="installations",se="Installations",ue=(Y={},Y["missing-app-config-values"]="Missing App configuration values.",Y["create-installation-failed"]="Could not register Firebase Installation.",Y["generate-token-failed"]="Could not generate Auth Token.",Y["not-registered"]="Firebase Installation is not registered.",Y["installation-not-found"]="Firebase Installation not found.",Y["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Y["app-offline"]="Could not process request. Application offline.",Y["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Y),ce=new $.ErrorFactory(ae,se,ue),le=/^[cdef][\w-]{21}$/,he="",fe="firebase-installations-database",de=1,pe="firebase-installations-store",me=null;H(X),t.registerInstallations=H},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function o(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,E.__spread(t)))}function a(e){var t=o(e);return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}function u(e){if(e.objectStoreNames.contains(x)){var t=e.transaction(x),n=t.objectStore(x),r=new A,i=n.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var t=i.result;if(t){var n=t.value;r.deleteToken(n.fcmSenderId,n.fcmToken,n.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(D)}}}function c(){var e=indexedDB.open(D);e.onerror=function(e){},e.onsuccess=function(t){var n=e.result;u(n)}}function l(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function h(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw C.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw C.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw C.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw C.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw C.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw C.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw C.create("bad-sender-id");if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw C.create("bad-push-set")}function f(e,t,n){if(!n.vapidKey||!i(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,o=i(e.getKey("auth"),n.auth),a=i(e.getKey("p256dh"),n.p256dh);return r&&o&&a}function d(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function p(e,t){var n;return n={},n[w.TYPE_OF_MSG]=e,n[w.DATA]=t,n}function m(e){var t="messaging",n=function(e){if(!g())throw C.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new q(e):new W(e)},r={isSupported:g};e.INTERNAL.registerService(t,n,r)}function g(){return self&&"ServiceWorkerGlobalScope"in self?v():y()}function y(){return navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function v(){return"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Object.defineProperty(t,"__esModule",{value:!0});var b,w,_=r(n(1)),E=n(3),S=n(4),T=(b={},b["only-available-in-window"]="This method is available in a Window context.",b["only-available-in-sw"]="This method is available in a service worker context.",b["should-be-overriden"]="This method should be overriden by extended classes.",b["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",b["permission-default"]="The required permissions were not granted and dismissed instead.",b["permission-blocked"]="The required permissions were not granted and blocked instead.",b["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",b["notifications-blocked"]="Notifications have been blocked.",b["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",b["sw-registration-expected"]="A service worker registration was the expected input.",b["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",b["invalid-saved-token"]="Unable to access details of the saved token.",b["sw-reg-redundant"]="The service worker being used for push was made redundant.",b["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",b["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",b["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",b["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",b["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",b["token-update-no-token"]="FCM returned no token when updating the user to push.",b["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",b["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",b["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",b["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",b["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",b["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",b["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",b["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",b["failed-to-delete-token"]="Unable to delete the currently saved token.",b["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",b["bad-scope"]="The service worker scope must be a string with at least one character.",b["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",b["bad-subscription"]="The subscription must be a valid PushSubscription.",b["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",b["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",b["failed-delete-vapid-key"]="The VAPID key could not be deleted.",b["invalid-public-vapid-key"]="The public VAPID key must be a string.",b["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",b["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",b),C=new S.ErrorFactory("messaging","Messaging",T),I=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),k="https://fcm.googleapis.com";!function(e){e.TYPE_OF_MSG="firebase-messaging-msg-type",e.DATA="firebase-messaging-msg-data"}(w||(w={}));var N;!function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(N||(N={}));var A=function(){function e(){}return e.prototype.getToken=function(e,t,n){return E.__awaiter(this,void 0,void 0,function(){var r,o,s,u,c,l,h,f,d,p;return E.__generator(this,function(m){switch(m.label){case 0:r=a(t.getKey("p256dh")),o=a(t.getKey("auth")),s="authorized_entity="+e+"&"+("endpoint="+t.endpoint+"&")+("encryption_key="+r+"&")+("encryption_auth="+o),i(n.buffer,I.buffer)||(u=a(n),s+="&application_pub_key="+u),c=new Headers,c.append("Content-Type","application/x-www-form-urlencoded"),l={method:"POST",headers:c,body:s},m.label=1;case 1:return m.trys.push([1,4,,5]),[4,fetch(k+"/fcm/connect/subscribe",l)];case 2:return f=m.sent(),[4,f.json()];case 3:return h=m.sent(),[3,5];case 4:throw d=m.sent(),C.create("token-subscribe-failed",{errorInfo:d});case 5:if(h.error)throw p=h.error.message,C.create("token-subscribe-failed",{errorInfo:p});if(!h.token)throw C.create("token-subscribe-no-token");if(!h.pushSet)throw C.create("token-subscribe-no-push-set");return[2,{token:h.token,pushSet:h.pushSet}]}})})},e.prototype.updateToken=function(e,t,n,r,o){return E.__awaiter(this,void 0,void 0,function(){var s,u,c,l,h,f,d,p,m,g;return E.__generator(this,function(y){switch(y.label){case 0:s=a(r.getKey("p256dh")),u=a(r.getKey("auth")),c="push_set="+n+"&"+("token="+t+"&")+("authorized_entity="+e+"&")+("endpoint="+r.endpoint+"&")+("encryption_key="+s+"&")+("encryption_auth="+u),i(o.buffer,I.buffer)||(l=a(o),c+="&application_pub_key="+l),h=new Headers,h.append("Content-Type","application/x-www-form-urlencoded"),f={method:"POST",headers:h,body:c},y.label=1;case 1:return y.trys.push([1,4,,5]),[4,fetch(k+"/fcm/connect/subscribe",f)];case 2:return p=y.sent(),[4,p.json()];case 3:return d=y.sent(),[3,5];case 4:throw m=y.sent(),C.create("token-update-failed",{errorInfo:m});case 5:if(d.error)throw g=d.error.message,C.create("token-update-failed",{errorInfo:g});if(!d.token)throw C.create("token-update-no-token");return[2,d.token]}})})},e.prototype.deleteToken=function(e,t,n){return E.__awaiter(this,void 0,void 0,function(){var r,i,o,a,s,u,c;return E.__generator(this,function(l){switch(l.label){case 0:r="authorized_entity="+e+"&"+("token="+t+"&")+("pushSet="+n),i=new Headers,i.append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},l.label=1;case 1:return l.trys.push([1,4,,5]),[4,fetch(k+"/fcm/connect/unsubscribe",o)];case 2:return a=l.sent(),[4,a.json()];case 3:if(s=l.sent(),s.error)throw u=s.error.message,C.create("token-unsubscribe-failed",{errorInfo:u});return[3,5];case 4:throw c=l.sent(),C.create("token-unsubscribe-failed",{errorInfo:c});case 5:return[2]}})})},e}(),D="undefined",x="fcm_token_object_Store",R=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction(function(t){return t.get(e)})},e.prototype.getIndex=function(e,t){function n(n){var r=n.index(e);return r.get(t)}return this.createTransaction(n)},e.prototype.put=function(e){return this.createTransaction(function(t){return t.put(e)},"readwrite")},e.prototype.delete=function(e){return this.createTransaction(function(t){return t.delete(e)},"readwrite")},e.prototype.closeDatabase=function(){return E.__awaiter(this,void 0,void 0,function(){var e;return E.__generator(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e=t.sent(),e.close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),E.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return E.__generator(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,l(e(i))];case 2:return o=a.sent(),[2,new Promise(function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}})]}})})},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise(function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}})),this.dbPromise},e}(),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return E.__extends(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:var r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"});r.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:c();case 2:var r=e.transaction.objectStore(this.objectStoreName),i=r.openCursor();i.onsuccess=function(){var e=i.result;if(e){var t=e.value,n=E.__assign({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=s(t.vapidKey)),"string"==typeof t.auth&&(n.auth=s(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=s(t.p256dh).buffer),e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(t){if(!e)throw C.create("bad-token");return h({fcmToken:e}),[2,this.getIndex("fcmToken",e)]})})},t.prototype.getTokenDetailsFromSWScope=function(e){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(t){if(!e)throw C.create("bad-scope");return h({swScope:e}),[2,this.get(e)]})})},t.prototype.saveTokenDetails=function(e){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(t){if(!e.swScope)throw C.create("bad-scope");if(!e.vapidKey)throw C.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw C.create("bad-subscription");if(!e.fcmSenderId)throw C.create("bad-sender-id");if(!e.fcmToken)throw C.create("bad-token");if(!e.fcmPushSet)throw C.create("bad-push-set");return h(e),[2,this.put(e)]})})},t.prototype.deleteToken=function(e){return E.__awaiter(this,void 0,void 0,function(){var t;return E.__generator(this,function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(C.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(t=n.sent(),!t)throw C.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}})})},t}(R),O=65,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return E.__extends(t,e),t.prototype.onDbUpgrade=function(e){var t=e.result;t.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return E.__awaiter(this,void 0,void 0,function(){var t;return E.__generator(this,function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw C.create("bad-scope");return[4,this.get(e)];case 1:return t=n.sent(),[2,t?t.vapidKey:void 0]}})})},t.prototype.saveVapidDetails=function(e,t){return E.__awaiter(this,void 0,void 0,function(){var n;return E.__generator(this,function(r){if("string"!=typeof e||0===e.length)throw C.create("bad-scope");if(null===t||t.length!==O)throw C.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]})})},t.prototype.deleteVapidDetails=function(e){return E.__awaiter(this,void 0,void 0,function(){var t;return E.__generator(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(t=n.sent(),!t)throw C.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}})})},t}(R),L="messagingSenderId",F=6048e5,U=function(){function e(e){var t=this;if(!e.options[L]||"string"!=typeof e.options[L])throw C.create("bad-sender-id");this.messagingSenderId=e.options[L],this.tokenDetailsModel=new P,this.vapidDetailsModel=new M,this.iidModel=new A,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}return e.prototype.getToken=function(){return E.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i;return E.__generator(this,function(o){switch(o.label){case 0:if(e=this.getNotificationPermission_(),"denied"===e)throw C.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return i=o.sent(),i?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}})})},e.prototype.manageExistingToken=function(e,t,n,r){return E.__awaiter(this,void 0,void 0,function(){var i,o;return E.__generator(this,function(a){switch(a.label){case 0:return i=f(t,n,r),i?(o=Date.now(),o<r.createTime+F?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]):[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return a.sent(),[2,this.getNewToken(e,t,n)]}})})},e.prototype.updateToken=function(e,t,n,r){return E.__awaiter(this,void 0,void 0,function(){var i,o,a;return E.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},e.prototype.getNewToken=function(e,t,n){return E.__awaiter(this,void 0,void 0,function(){var r,i;return E.__generator(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r.token]}})})},e.prototype.deleteToken=function(e){return E.__awaiter(this,void 0,void 0,function(){var t,n;return E.__generator(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return t=r.sent(),t?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},e.prototype.deleteTokenFromDB=function(e){return E.__awaiter(this,void 0,void 0,function(){var t;return E.__generator(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}})})},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then(function(n){return n?n:e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})})},e.prototype.requestPermission=function(){throw C.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw C.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw C.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw C.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw C.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw C.create("only-available-in-sw")},e.prototype.delete=function(){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}(),B="FCM_MSG",q=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(e){n.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){n.onSubChange(e)}),self.addEventListener("notificationclick",function(e){n.onNotificationClick(e)}),n}return E.__extends(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return E.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return E.__generator(this,function(u){switch(u.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return(n=u.sent())?[2,this.sendMessageToWindowClients_(t)]:(r=this.getNotificationData_(t))?(i=r.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return o=u.sent(),a=r.actions,s=Notification.maxActions,a&&s&&a.length>s&&console.warn("This browser only supports "+s+" actions.The remaining actions will not be displayed."),[2,o.showNotification(i,r)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return u.sent(),[2];case 5:return[2]}})})},t.prototype.onSubChange_=function(e){return E.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i;return E.__generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=o.sent(),[3,3];case 2:throw t=o.sent(),C.create("unable-to-resubscribe",{errorInfo:t});case 3:return o.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return o.sent(),[3,8];case 5:return n=o.sent(),r=this.getTokenDetailsModel(),[4,r.getTokenDetailsFromSWScope(e.scope)];case 6:if(i=o.sent(),!i)throw n;return[4,this.deleteToken(i.fcmToken)];case 7:throw o.sent(),n;case 8:return[2]}})})},t.prototype.onNotificationClick_=function(e){return E.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return E.__generator(this,function(o){switch(o.label){case 0:return e.notification&&e.notification.data&&e.notification.data[B]?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),t=e.notification.data[B],t.notification?(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action,n?[4,this.getWindowClient_(n)]:[2]):[2]):[2];case 1:return r=o.sent(),r?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=o.sent(),o.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,i=p(N.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=E.__assign({},e.notification);return n.data=E.__assign({},e.notification.data,(t={},t[B]=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw C.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return E.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return E.__generator(this,function(a){switch(a.label){case 0:return t=new URL(e,self.location.href).href,[4,d()];case 1:for(n=a.sent(),r=null,i=0;i<n.length;i++)if(o=new URL(n[i].url,self.location.href).href,o===t){r=n[i];break}return[2,r]}})})},t.prototype.attemptToMessageClient_=function(e,t){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(n){if(!e)throw C.create("no-window-client-to-msg");return e.postMessage(t),[2]})})},t.prototype.hasVisibleClients_=function(){return E.__awaiter(this,void 0,void 0,function(){var e;return E.__generator(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return e=t.sent(),[2,e.some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")})]}})})},t.prototype.sendMessageToWindowClients_=function(e){return E.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return E.__generator(this,function(i){switch(i.label){case 0:return[4,d()];case 1:return t=i.sent(),n=p(N.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map(function(e){return r.attemptToMessageClient_(e,n)}))];case 2:return i.sent(),[2]}})})},t.prototype.getSWRegistration_=function(){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(e){return[2,self.registration]})})},t.prototype.getPublicVapidKey_=function(){return E.__awaiter(this,void 0,void 0,function(){var e,t;return E.__generator(this,function(n){
switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(e=n.sent(),!e)throw C.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return t=n.sent(),null==t?[2,I]:[2,t]}})})},t}(U),V="/firebase-messaging-sw.js",j="/firebase-cloud-messaging-push-scope",W=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=S.createSubscribe(function(e){n.messageObserver=e}),n.onTokenRefreshInternal=S.createSubscribe(function(e){n.tokenRefreshObserver=e}),n.setupSWMessageListener_(),n}return E.__extends(t,e),t.prototype.requestPermission=function(){return E.__awaiter(this,void 0,void 0,function(){var e;return E.__generator(this,function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if(e=t.sent(),"granted"===e)return[2];throw"denied"===e?C.create("permission-blocked"):C.create("permission-default")}})})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw C.create("sw-registration-expected");if(null!=this.registrationToUse)throw C.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw C.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw C.create("use-public-key-before-get-token");var t=s(e);if(65!==t.length)throw C.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise(function(n,r){if(!t)return void r(C.create("no-sw-in-reg"));if("activated"===t.state)return void n(e);if("redundant"===t.state)return void r(C.create("sw-reg-redundant"));var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(C.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register(V,{scope:j}).catch(function(e){throw C.create("failed-serviceworker-registration",{browserErrorMessage:e.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse=t,t.update(),t})}))},t.prototype.getPublicVapidKey_=function(){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,I]})})},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[w.TYPE_OF_MSG]){var n=t.data;switch(n[w.TYPE_OF_MSG]){case N.PUSH_MSG_RECEIVED:case N.NOTIFICATION_CLICKED:var r=n[w.DATA];e.messageObserver&&e.messageObserver.next(r)}}},!1)},t}(U);m(_),t.isSupported=g,t.registerMessaging=m},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){X=e}function o(){var e=ye.getInstance().firebaseAppInstance.installations().getId();return e.then(function(e){$=e}),e}function a(){return $}function s(){var e=ye.getInstance().firebaseAppInstance.installations().getToken();return e.then(function(e){}),e}function u(){var e=ge.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function c(){var e=ge.getInstance().document,t=e.visibilityState;switch(t){case"visible":return Z.VISIBLE;case"hidden":return Z.HIDDEN;case"prerender":return Z.PRERENDER;default:return Z.UNKNOWN}}function l(){var e=ge.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function h(e){if(0===e.length||e.length>we)return!1;var t=ve.some(function(t){return e.startsWith(t)});return!t&&!!e.match(be)}function f(e){return 0!==e.length&&e.length<=_e}function d(e){var t=p();return t?(y(t),Promise.resolve()):g(e).then(function(e){return y(e)}).then(function(e){return m(e)},function(){})}function p(){var e=ge.getInstance().localStorage,t=e.getItem(he);if(t&&v(t)){var n=e.getItem(le);if(n)try{var r=JSON.parse(n);return r}catch(e){return}}}function m(e){if(e){var t=ge.getInstance().localStorage;t.setItem(le,JSON.stringify(e)),t.setItem(he,String(Date.now()+60*ye.getInstance().configTimeToLive*60*1e3))}}function g(e){return s().then(function(t){var n=ye.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+ye.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:Ie+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:ye.getInstance().getAppId(),app_version:ne,sdk_version:Te})});return fetch(i).then(function(e){if(e.ok)return e.json();throw me.create("RC response not ok")})}).catch(function(){Ee.info(ke)})}function y(e){if(!e)return e;var t=ye.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=Ce.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=b(t.tracesSamplingRate),t.logNetworkAfterSampling=b(t.networkRequestsSamplingRate),e}function v(e){return Number(e)>Date.now()}function b(e){return Math.random()<=e}function w(){return Ne=2,Se=Se||E()}function _(){return 3===Ne}function E(){return S().then(function(){return o()}).then(function(e){return d(e)}).then(function(){return T()},function(){return T()})}function S(){var e=ge.getInstance().document;return new Promise(function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function T(){Ne=3}function C(e){setTimeout(function(){if(0!==Re){if(!Pe.length)return C(Ae);var e=Pe.slice();Pe=[];var t=e.map(function(e){return{source_extension_json:e.message,event_time_ms:String(e.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:ye.getInstance().logSource,log_event:t};fetch(ye.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(n)}).then(function(e){return e.ok||Ee.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.next_request_wait_millis),n=isNaN(t)?Ae:Math.max(Ae,t);Re=xe,C(n)}).catch(function(){Pe=e.concat(Pe),Re--,Ee.info("Tries left: "+Re+"."),C(Ae)})}},e)}function I(e){if(!e.eventTime||!e.message)throw me.create("invalid cc log");Pe=Pe.concat([e])}function k(e){return function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=e.apply(void 0,r);I({message:o,eventTime:Date.now()})}}function N(){if(Oe)return Oe;var e=k(R);return Oe=new ee.Logger("@firebase/performance/cc"),Oe.logHandler=e,Oe}function A(e){var t=ye.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&ge.getInstance().requiredApisAvailable()&&(e.isAuto&&c()!==Z.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(_()?D(e):w().then(function(){return D(e)},function(){return D(e)})))}function D(e){a()&&setTimeout(function(){return N().log(e,1)},0)}function x(e){var t=ye.getInstance();t.instrumentationEnabled&&e.url!==t.logEndPointUrl.split("?")[0]&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(function(){return N().log(e,0)},0)}function R(e,t){return 0===t?P(e):O(e)}function P(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:M(),network_request_metric:t};return JSON.stringify(n)}function O(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=L(e.counters));var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=L(n));var r={application_info:M(),trace_metric:t};return JSON.stringify(r)}function M(){return{google_app_id:ye.getInstance().getAppId(),app_instance_id:a(),web_app_info:{sdk_version:ne,page_url:ge.getInstance().getUrl(),service_worker_status:u(),visibility_state:c(),effective_connection_type:l()},application_process_state:0}}function L(e){var t=Object.keys(e);return t.map(function(t){return{key:t,value:e[t]}})}function F(e,t){return!(0===e.length||e.length>Me)&&(t&&t.startsWith(ae)&&Fe.indexOf(e)>-1||!e.startsWith(Le))}function U(e){var t=e;if(t&&void 0!==t.responseStart){var n=ge.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime)),a=t.name&&t.name.split("?")[0],s={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};x(s)}}function B(){a()&&(setTimeout(function(){return V()},0),setTimeout(function(){return q()},0),setTimeout(function(){return j()},0))}function q(){for(var e=ge.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];U(i)}e.setupObserver("resource",U)}function V(){var e=ge.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){Ue.createOobTrace(t,n),r=void 0},Be);e.onFirstInputDelay(function(e){r&&(clearTimeout(r),Ue.createOobTrace(t,n,e))})}else Ue.createOobTrace(t,n)}function j(){for(var e=ge.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];W(i)}e.setupObserver("measure",W)}function W(e){var t=e.name;t.substring(0,oe.length)!==oe&&Ue.createUserTimingTrace(t)}function K(e){var t=function(e){if(e.name!==Ve)throw me.create("FB not default");if("undefined"==typeof window)throw me.create("no window");return i(window),ye.getInstance().firebaseAppInstance=e,new qe(e)},n={};e.INTERNAL.registerService("performance",t,n)}Object.defineProperty(t,"__esModule",{value:!0});var Q=r(n(1)),G=n(3),z=n(4);n(23);var H,Y,X,J,$,Z,ee=n(6),te="0.2.17",ne=te,re="FB-PERF-TRACE-START",ie="FB-PERF-TRACE-STOP",oe="FB-PERF-TRACE-MEASURE",ae="_wt_",se="_fp",ue="_fcp",ce="_fid",le="@firebase/performance/config",he="@firebase/performance/configexpire",fe="performance",de="Performance",pe=(H={},H["trace started"]="Trace {$traceName} was started before.",H["trace stopped"]="Trace {$traceName} is not running.",H["no window"]="Window is not available.",H["no app id"]="App id is not available.",H["no project id"]="Project id is not available.",H["no api key"]="Api key is not available.",H["invalid cc log"]="Attempted to queue invalid cc event",H["FB not default"]="Performance can only start when Firebase app instance is the default one.",H["RC response not ok"]="RC response is not ok",H["invalid attribute name"]="Attribute name {$attributeName} is invalid.",H["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",H["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",H),me=new z.ErrorFactory(fe,de,pe),ge=function(){function e(e){if(!e)throw me.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver(function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}});n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===Y&&(Y=new e(X)),Y},e}(),ye=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw me.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw me.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw me.create("no api key");return e},e.getInstance=function(){return void 0===J&&(J=new e),J},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN",e[e.PRERENDER=3]="PRERENDER",e[e.UNLOADED=4]="UNLOADED"}(Z||(Z={}));var ve=["firebase_","google_","ga_"],be=new RegExp("^[a-zA-Z]\\w*$"),we=40,_e=100,Ee=new ee.Logger(de);Ee.logLevel=ee.LogLevel.INFO;var Se,Te="0.0.1",Ce={loggingEnabled:!0},Ie="FIREBASE_INSTALLATIONS_AUTH",ke="Could not fetch config, will use default configs",Ne=1,Ae=1e4,De=5500,xe=3,Re=xe,Pe=[];C(De);var Oe,Me=100,Le="_",Fe=[se,ue,ce],Ue=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=ge.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=re+"-"+this.randomId+"-"+this.name,this.traceStopMark=ie+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||oe+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw me.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw me.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),A(this)},e.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=G.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}A(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&this.putMetric(e,0),this.counters[e]+=t},e.prototype.putMetric=function(e,t){if(!F(e,this.name))throw me.create("invalide custom metric name",{customMetricName:e});this.counters[e]=t},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=h(e),r=f(t);if(n&&r)return void(this.customAttributes[e]=t);if(!n)throw me.create("invalid attribute name",{attributeName:e});if(!r)throw me.create("invalid attribute value",{attributeValue:t})},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return G.__assign({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=ge.getInstance().getUrl();if(i){var o=new e(ae+i,!0),a=Math.floor(1e3*ge.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find(function(e){return e.name===s});c&&c.startTime&&o.putMetric(se,Math.floor(1e3*c.startTime));var l=n.find(function(e){return e.name===u});l&&l.startTime&&o.putMetric(ue,Math.floor(1e3*l.startTime)),r&&o.putMetric(ce,Math.floor(1e3*r))}A(o)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);A(n)},e}(),Be=5e3,qe=function(){function e(e){this.app=e,ge.getInstance().requiredApisAvailable()?w().then(B,B):Ee.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return e.prototype.trace=function(e){return new Ue(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return ye.getInstance().instrumentationEnabled},set:function(e){ye.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return ye.getInstance().dataCollectionEnabled},set:function(e){ye.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),e}(),Ve="[DEFAULT]";K(Q),t.registerPerformance=K},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e){return"storage/"+e}function o(){var e="An unknown error occurred, please check the error payload for server response.";return new et(tt.UNKNOWN,e)}function a(e){return new et(tt.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function s(e){return new et(tt.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new et(tt.UNAUTHENTICATED,e)}function c(e){return new et(tt.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function l(){return new et(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h(){return new et(tt.CANCELED,"User canceled the upload/download.")}function f(e){return new et(tt.INVALID_URL,"Invalid URL '"+e+"'.")}function d(e){return new et(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function p(){return new et(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Xe+"' property when initializing the app?")}function m(){return new et(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g(){return new et(tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function y(){return new et(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v(e,t,n){return new et(tt.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function b(e,t,n,r){var i,o;return e===t?(i=e,o=1===e?"argument":"arguments"):(i="between "+e+" and "+t,o="arguments"),new et(tt.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function w(){return new et(tt.APP_DELETED,"The Firebase app was deleted.")}function _(e){return new et(tt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function E(e,t){return new et(tt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function S(e){throw new et(tt.INTERNAL_ERROR,"Internal error: "+e)}function T(e){switch(e){case nt.RAW:case nt.BASE64:case nt.BASE64URL:case nt.DATA_URL:return;default:throw"Expected one of the event types: ["+nt.RAW+", "+nt.BASE64+", "+nt.BASE64URL+", "+nt.DATA_URL+"]."}}function C(e,t){switch(e){case nt.RAW:return new rt(I(t));case nt.BASE64:case nt.BASE64URL:return new rt(N(e,t));case nt.DATA_URL:return new rt(A(t),D(t))}throw o()}function I(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<e.length-1&&56320===(64512&e.charCodeAt(n+1));if(i){var o=r,a=e.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function k(e){var t;try{t=decodeURIComponent(e)}catch(e){throw E(nt.DATA_URL,"Malformed data URL.")}return I(t)}function N(e,t){switch(e){case nt.BASE64:var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw E(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case nt.BASE64URL:var o=t.indexOf("+")!==-1,a=t.indexOf("/")!==-1;if(o||a){var i=o?"+":"/";throw E(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw E(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}function A(e){var t=new it(e);return t.base64?N(nt.BASE64,t.rest):k(t.rest)}function D(e){var t=new it(e);return t.contentType}function x(e,t){var n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}function R(e){switch(e){case at.RUNNING:case at.PAUSING:case at.CANCELING:return st.RUNNING;case at.PAUSED:return st.PAUSED;case at.SUCCESS:return st.SUCCESS;case at.CANCELED:return st.CANCELED;case at.ERROR:return st.ERROR;default:return st.ERROR}}function P(e){return null!=e}function O(e){return void 0!==e}function M(e){return"function"==typeof e}function L(e){return"object"==typeof e}function F(e){return L(e)&&null!==e}function U(e){return L(e)&&!Array.isArray(e)}function B(e){return"string"==typeof e||e instanceof String}function q(e){return V(e)&&Number.isInteger(e)}function V(e){return"number"==typeof e||e instanceof Number}function j(e){return W()&&e instanceof Blob}function W(){return"undefined"!=typeof Blob}function K(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=K();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(W())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}function G(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function z(e){var t;try{t=JSON.parse(e)}catch(e){return null}return U(t)?t:null}function H(e){if(0===e.length)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function Y(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}function X(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}function J(e){return"https://"+Ye+"/v0"+e}function $(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1)}function Z(e,t){return t}function ee(e){return!B(e)||e.length<2?e:X(e)}function te(){function e(e,t){return ee(t)}function t(e,t){return P(t)?Number(t):t}if(dt)return dt;var n=[];n.push(new ft("bucket")),n.push(new ft("generation")),n.push(new ft("metageneration")),n.push(new ft("name","fullPath",!0));var r=new ft("name");r.xform=e,n.push(r);var i=new ft("size");return i.xform=t,n.push(i),n.push(new ft("timeCreated")),n.push(new ft("updated")),n.push(new ft("md5Hash",null,!0)),n.push(new ft("cacheControl",null,!0)),n.push(new ft("contentDisposition",null,!0)),n.push(new ft("contentEncoding",null,!0)),n.push(new ft("contentLanguage",null,!0)),n.push(new ft("contentType",null,!0)),n.push(new ft("metadata","customMetadata",!0)),dt=n}function ne(e,t){function n(){var n=e.bucket,r=e.fullPath,i=new ht(n,r);return t.makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function re(e,t,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return ne(r,e),r}function ie(e,t,n){var r=z(t);if(null===r)return null;var i=r;return re(e,i,n)}function oe(e,t){var n=z(t);if(null===n)return null;if(!B(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent,o=r.split(","),a=o.map(function(t){var n=e.bucket,r=e.fullPath,o="/b/"+i(n)+"/o/"+i(r),a=J(o),s=$({alt:"media",token:t});return a+s});return a[0]}function ae(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function se(e){if(!L(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!L(n))throw"Expected object for 'customMetadata' mapping."}else if(F(n))throw"Mapping for '"+t+"' cannot be an object."}}function ue(e,t){var n={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=e.bucket();if(null===r)throw p();if(t[yt])for(var i=0,o=t[yt];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=e.makeStorageReference(new ht(r,s));n.prefixes.push(u)}if(t[vt])for(var c=0,l=t[vt];c<l.length;c++){var h=l[c],u=e.makeStorageReference(new ht(r,h.name));n.items.push(u)}return n}function ce(e,t){var n=z(t);if(null===n)return null;var r=n;return ue(e,r)}function le(e){if(!L(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===pt){if(!q(e[pt])||e[pt]<=0)throw"Expected maxResults to be a positive number.";if(e[pt]>1e3)throw"Expected maxResults to be less than or equal to "+mt+"."}else{if(t!==gt)throw"Unknown option: "+t;if(e[gt]&&!B(e[gt]))throw"Expected pageToken to be string."}}function he(e){if(!e)throw o()}function fe(e,t){function n(n,r){var i=ie(e,r,t);return he(null!==i),i}return n}function de(e){function t(t,n){var r=ce(e,n);return he(null!==r),r}return t}function pe(e,t){function n(n,r){var i=ie(e,r,t);return he(null!==i),oe(i,r)}return n}function me(e){function t(t,n){var r;return r=401===t.getStatus()?u():402===t.getStatus()?s(e.bucket):403===t.getStatus()?c(e.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return t}function ge(e){function t(t,r){var i=n(t,r);return 404===t.getStatus()&&(i=a(e.path)),i.setServerResponseProp(r.serverResponseProp()),i}var n=me(e);return t}function ye(e,t,n){var r=t.fullServerUrl(),i=J(r),o="GET",a=e.maxOperationRetryTime(),s=new bt(i,o,fe(e,n),a);return s.errorHandler=ge(t),s}function ve(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=t.bucketOnlyServerUrl(),s=J(a),u="GET",c=e.maxOperationRetryTime(),l=new bt(s,u,de(e),c);return l.urlParams=o,l.errorHandler=me(t),l}function be(e,t,n){var r=t.fullServerUrl(),i=J(r),o="GET",a=e.maxOperationRetryTime(),s=new bt(i,o,pe(e,n),a);return s.errorHandler=ge(t),s}function we(e,t,n,r){var i=t.fullServerUrl(),o=J(i),a="PATCH",s=ae(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime(),l=new bt(o,a,fe(e,r),c);return l.headers=u,l.body=s,l.errorHandler=ge(t),l}function _e(e,t){function n(e,t){}var r=t.fullServerUrl(),i=J(r),o="DELETE",a=e.maxOperationRetryTime(),s=new bt(i,o,n,a);return s.successCodes=[200,204],s.errorHandler=ge(t),s}function Ee(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Se(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Ee(null,t)),r}function Te(e,t,n,r,i){function o(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}var a=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},u=o();s["Content-Type"]="multipart/related; boundary="+u;var c=Se(t,r,i),l=ae(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",f="\r\n--"+u+"--",d=lt.getBlob(h,r,f);if(null===d)throw m();var p={name:c.fullPath},g=J(a),y="POST",v=e.maxUploadRetryTime(),b=new bt(g,y,fe(e,n),v);return b.urlParams=p,b.headers=s,b.body=d.uploadData(),b.errorHandler=me(t),b}function Ce(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){he(!1)}var r=t||["active"];return he(!!n&&r.indexOf(n)!==-1),n}function Ie(e,t,n,r,i){function o(e){Ce(e);var t;try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){he(!1)}return he(B(t)),t}var a=t.bucketOnlyServerUrl(),s=Se(t,r,i),u={name:s.fullPath},c=J(a),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=ae(s,n),d=e.maxUploadRetryTime(),p=new bt(c,l,o,d);return p.urlParams=u,p.headers=h,p.body=f,p.errorHandler=me(t),p}function ke(e,t,n,r){function i(e){var t=Ce(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){he(!1)}n||he(!1);var i=Number(n);return he(!isNaN(i)),new wt(i,r.size(),"final"===t)}var o={"X-Goog-Upload-Command":"query"},a="POST",s=e.maxUploadRetryTime(),u=new bt(n,a,i,s);return u.headers=o,u.errorHandler=me(t),u}function Ne(e,t,n,r,i,o,a,s){function u(e,n){var i,a=Ce(e,["active","final"]),s=c.current+h,u=r.size();return i="final"===a?fe(t,o)(e,n):null,new wt(s,u,"final"===a,i)}var c=new wt(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw g();var l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));var f=c.current,d=f+h,p=h===l?"upload, finalize":"upload",y={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":c.current},v=r.slice(f,d);if(null===v)throw m();var b="POST",w=t.maxUploadRetryTime(),_=new bt(n,b,u,w);return _.headers=y,_.body=v.uploadData(),_.progressCallback=s||null,_.errorHandler=me(e),_}function Ae(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var a=r<=n.length&&n.length<=i;if(!a)throw b(r,i,e,n.length);for(var o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?v(o,e,t.message):v(o,e,t)}}function De(e,t){return function(n){e(n),t(n)}}function xe(e,t){function n(e){if(!B(e))throw"Expected string."}var r;return r=e?De(n,e):n,new Tt(r,t)}function Re(){function e(e){var t=e instanceof Uint8Array||e instanceof ArrayBuffer||W()&&e instanceof Blob;if(!t)throw"Expected Blob or File."}return new Tt(e)}function Pe(e){return new Tt(se,e)}function Oe(e){return new Tt(le,e)}function Me(){function e(e){var t=V(e)&&e>=0;if(!t)throw"Expected a number 0 or greater.";
}return new Tt(e)}function Le(e,t){function n(t){var n=null===t||P(t)&&t instanceof Object;if(!n)throw"Expected an Object.";void 0!==e&&null!==e&&e(t)}return new Tt(n,t)}function Fe(e){function t(e){var t=null===e||M(e);if(!t)throw"Expected a Function."}return new Tt(t,e)}function Ue(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}function Be(e,t,n){function r(){return 2===h}function i(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];f||(f=!0,t.apply(null,e))}function o(t){c=setTimeout(function(){c=null,e(a,r())},t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!f){if(e)return void i.call.apply(i,[null,e].concat(t));var a=r()||l;if(a)return void i.call.apply(i,[null,e].concat(t));u<64&&(u*=2);var s;1===h?(h=2,s=0):s=1e3*(u+Math.random()),o(s)}}function s(e){d||(d=!0,f||(null!==c?(e||(h=2),clearTimeout(c),o(0)):e||(h=1)))}var u=1,c=null,l=!1,h=0,f=!1,d=!1;return o(0),setTimeout(function(){l=!0,s(!0)},n),s}function qe(e){e(!1)}function Ve(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function je(e){var t="undefined"!=typeof ze?ze.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}function We(e,t,n){var r=$(e.urlParams),i=e.url+r,o=Object.assign({},e.headers);return Ve(o,t),je(o),new Dt(i,e.method,o,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}function Ke(e,t,n){return new Rt(e,new ct,n)}function Qe(e){var t={TaskState:st,TaskEvent:ot,StringFormat:nt,Storage:Rt,Reference:It};e.INTERNAL.registerService(Ot,Ke,t,void 0,!0)}Object.defineProperty(t,"__esModule",{value:!0});var Ge,ze=r(n(1)),He=n(3),Ye="firebasestorage.googleapis.com",Xe="storageBucket",Je=12e4,$e=6e4,Ze=-9007199254740991,et=function(){function e(e,t){this.code_=i(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return i(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),tt={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"},nt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},rt=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}(),it=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw E(nt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=x(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}(),ot={STATE_CHANGED:"state_changed"},at={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},st={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ge||(Ge={}));var ut=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ge.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=Ge.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=Ge.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw S("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),P(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return P(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw S("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw S("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw S("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){P(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){P(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),ct=function(){function e(){}return e.prototype.createXhrIo=function(){return new ut},e}(),lt=function(){function e(e,t){var n=0,r="";j(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(j(this.data_)){var r=this.data_,i=G(r,t,n);return null===i?null:new e(i)}var o=new Uint8Array(this.data_.buffer,t,n-t);return new e(o,!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(W()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(Q.apply(null,r))}var i=t.map(function(e){return B(e)?C(nt.RAW,e).data:e.data_}),o=0;i.forEach(function(e){o+=e.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}(),ht=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n;throw d(t)},e.makeFromUrl=function(t){function n(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}function r(e){e.path_=decodeURIComponent(e.path)}for(var i=null,o="([A-Za-z0-9.\\-_]+)",a="(/(.*))?$",s="(/([^?#]*).*)?$",u=new RegExp("^gs://"+o+a,"i"),c={bucket:1,path:3},l="v[A-Za-z0-9_]+",h=Ye.replace(/[.]/g,"\\."),d=new RegExp("^https?://"+h+"/"+l+"/b/"+o+"/o"+s,"i"),p={bucket:1,path:3},m=[{regex:u,indices:c,postModify:n},{regex:d,indices:p,postModify:r}],g=0;g<m.length;g++){var y=m[g],v=y.regex.exec(t);if(v){var b=v[y.indices.bucket],w=v[y.indices.path];w||(w=""),i=new e(b,w),y.postModify(i);break}}if(null==i)throw f(t);return i},e}(),ft=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Z}return e}(),dt=null,pt="maxResults",mt=1e3,gt="pageToken",yt="prefixes",vt="items",bt=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}(),wt=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}(),_t=262144,Et=function(){function e(e,t,n){var r=M(e)||P(t)||P(n);if(r)this.next=e,this.error=t||null,this.complete=n||null;else{var i=e;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}}return e}(),St=function(){function e(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o}return e}(),Tt=function(){function e(e,t){var n=this;this.validator=function(t){n.optional&&!O(t)||e(t)},this.optional=!!t}return e}(),Ct=function(){function e(e,t,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=at.RUNNING,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(tt.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(at.ERROR))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(tt.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(at.ERROR))},this.promise_=new Promise(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n){return e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===at.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case at.RUNNING:e(n);break;case at.CANCELING:t.transition_(at.CANCELED);break;case at.PAUSING:t.transition_(at.PAUSED)}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=Ie(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=ke(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=_t*this.chunkMultiplier_,n=new wt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=Ne(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(t){return e.error_=t,void e.transition_(at.ERROR)}var a=e.authWrapper_.makeRequest(o,i);e.request_=a,a.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(at.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){var e=_t*this.chunkMultiplier_;e<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=ye(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(at.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=Te(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(at.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case at.CANCELING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case at.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case at.RUNNING:var t=this.state_===at.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case at.PAUSED:this.state_=e,this.notifyObservers_();break;case at.CANCELED:this.error_=h(),this.state_=e,this.notifyObservers_();break;case at.ERROR:this.state_=e,this.notifyObservers_();break;case at.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case at.PAUSING:this.transition_(at.PAUSED);break;case at.CANCELING:this.transition_(at.CANCELED);break;case at.RUNNING:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=R(this.state_);return new St(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function i(){if(e!==ot.STATE_CHANGED)throw"Expected one of the event types: ["+ot.STATE_CHANGED+"]."}function o(e){try{return void c(e)}catch(e){}try{l(e);var t=O(e.next)||O(e.error)||O(e.complete);if(!t)throw"";return}catch(e){throw u}}function a(e){function t(t,n,i){null!==e&&Ae("on",e,arguments);var o=new Et(t,n,r);return f.addObserver_(o),function(){f.removeObserver_(o)}}return t}function s(e){if(null===e)throw u;o(e)}var u="Expected a function or an Object with one of `next`, `error`, `complete` properties.",c=Fe(!0).validator,l=Le(null,!0).validator,h=[xe(i),Le(o,!0),Fe(!0),Fe(!0)];Ae("on",h,arguments);var f=this,d=[Le(s),Fe(!0),Fe(!0)],p=!(O(t)||O(n)||O(r));return p?a(d):a(null)(t,n,r)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);t!==-1&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_();var t=this.observers_.slice();t.forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(R(this.state_)){case st.SUCCESS:Ue(this.resolve_.bind(null,this.snapshot))();break;case st.CANCELED:case st.ERROR:var t=this.reject_;Ue(t.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){var t=R(this.state_);switch(t){case st.RUNNING:case st.PAUSED:e.next&&Ue(e.next.bind(e,this.snapshot))();break;case st.SUCCESS:e.complete&&Ue(e.complete.bind(e))();break;case st.CANCELED:case st.ERROR:e.error&&Ue(e.error.bind(e,this.error_))();break;default:e.error&&Ue(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){Ae("resume",[],arguments);var e=this.state_===at.PAUSED||this.state_===at.PAUSING;return e&&this.transition_(at.RUNNING),e},e.prototype.pause=function(){Ae("pause",[],arguments);var e=this.state_===at.RUNNING;return e&&this.transition_(at.PAUSING),e},e.prototype.cancel=function(){Ae("cancel",[],arguments);var e=this.state_===at.RUNNING||this.state_===at.PAUSING;return e&&this.transition_(at.CANCELING),e},e}(),It=function(){function e(e,t){this.authWrapper=e,t instanceof ht?this.location=t:this.location=ht.makeFromUrl(t)}return e.prototype.toString=function(){return Ae("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return te()},e.prototype.child=function(e){Ae("child",[xe()],arguments);var t=Y(this.location.path,e),n=new ht(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=H(this.location.path);if(null===e)return null;var t=new ht(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new ht(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return X(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),Ae("put",[Re(),Pe(!0)],arguments),this.throwIfRoot_("put"),new Ct(this,this.authWrapper,this.location,this.mappings(),new lt(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=nt.RAW),Ae("putString",[xe(),xe(T,!0),Pe(!0)],arguments),this.throwIfRoot_("putString");var r=C(t,e),i=Object.assign({},n);return!P(i.contentType)&&P(r.contentType)&&(i.contentType=r.contentType),new Ct(this,this.authWrapper,this.location,this.mappings(),new lt(r.data,!0),i)},e.prototype.delete=function(){var e=this;return Ae("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var n=_e(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.listAll=function(){Ae("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},e.prototype.listAllHelper=function(e,t){return He.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return He.__generator(this,function(a){switch(a.label){case 0:return n={pageToken:t},[4,this.list(n)];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.list=function(e){Ae("list",[Oe(!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=e||{},i=ve(t.authWrapper,t.location,"/",r.pageToken,r.maxResults);return t.authWrapper.makeRequest(i,n).getPromise()})},e.prototype.getMetadata=function(){var e=this;return Ae("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var n=ye(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){var t=this;return Ae("updateMetadata",[Pe()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=we(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getDownloadURL=function(){var e=this;return Ae("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var n=be(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then(function(e){if(null===e)throw y();return e})})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw _(e)},e}(),kt=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),Nt=function(){function e(){this.map=new Map,this.id=Ze}return e.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then(function(){return t.map.delete(n)},function(){return t.map.delete(n)})},e.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},e}(),At=function(){function e(t,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;P(a)&&(this.bucket_=e.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=Je,this.maxUploadRetryTime_=$e,this.requestMap_=new Nt}return e.extractBucket_=function(e){var t=e[Xe]||null;if(null==t)return null;var n=ht.makeFromBucketSpec(t);return n.bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&P(this.app_.INTERNAL)&&P(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw w();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new kt(w());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),Dt=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){function e(e,t){function r(e){var t=e.loaded,r=e.lengthComputable?e.total:-1;null!==n.progressCallback_&&n.progressCallback_(t,r)}if(t)return void e(!1,new xt(!1,null,!0));var i=n.pool_.createXhrIo();n.pendingXhr_=i,null!==n.progressCallback_&&i.addUploadProgressListener(r),i.send(n.url_,n.method_,n.body_,n.headers_).then(function(t){null!==n.progressCallback_&&t.removeUploadProgressListener(r),n.pendingXhr_=null,t=t;var i=t.getErrorCode()===Ge.NO_ERROR,o=t.getStatus();if(!i||n.isRetryStatusCode_(o)){var a=t.getErrorCode()===Ge.ABORT;return void e(!1,new xt(!1,null,a))}var s=n.successCodes_.indexOf(o)!==-1;e(!0,new xt(s,t))})}function t(e,t){var r=n.resolve_,i=n.reject_,a=t.xhr;if(t.wasSuccessCode)try{var s=n.callback_(a,a.getResponseText());O(s)?r(s):r()}catch(e){i(e)}else if(null!==a){var u=o();u.setServerResponseProp(a.getResponseText()),i(n.errorCallback_?n.errorCallback_(a,u):u)}else if(t.canceled){var u=n.appDelete_?w():h();i(u)}else{var u=l();i(u)}}var n=this;this.canceled_?t(!1,new xt(!1,null,!0)):this.backoffId_=Be(e,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&qe(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=n.indexOf(e)!==-1,i=this.additionalRetryCodes_.indexOf(e)!==-1;return t||r||i},e}(),xt=function(){function e(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}return e}(),Rt=function(){function e(e,t,n){function r(e,t){return new It(e,t)}if(this.bucket_=null,this.authWrapper_=new At(e,r,We,this,t),this.app_=e,null!=n)this.bucket_=ht.makeFromBucketSpec(n);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new ht(i,""))}this.internals_=new Pt(this)}return e.prototype.ref=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(Ae("ref",[xe(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new It(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{ht.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}return Ae("refFromURL",[xe(t,!1)],arguments),new It(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){Ae("setMaxUploadRetryTime",[Me()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},e.prototype.setMaxOperationRetryTime=function(e){Ae("setMaxOperationRetryTime",[Me()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),Pt=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},e}(),Ot="storage";Qe(ze),t.registerStorage=Qe},function(e,t){(function(t){(function(){"use strict";function t(e){return"string"==typeof e}function n(e){return"number"==typeof e}function r(e,t){e=e.split("."),t=t||vn;for(var n=0;n<e.length;n++)if(t=t[e[n]],null==t)return null;return t}function i(){}function o(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function a(e){return"array"==o(e)}function s(e){var t=o(e);return"array"==t||"object"==t&&"number"==typeof e.length}function u(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function h(e,t,n){return h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:l,h.apply(null,arguments)}function f(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function p(){0!=En&&(Sn[this[bn]||(this[bn]=++wn)]=this),this.j=this.j,this.i=this.i}function m(e){e:{for(var n=Mt,r=e.length,i=t(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&n.call(void 0,i[o],o,e)){n=o;break e}n=-1}return 0>n?null:t(e)?e.charAt(n):e[n]}function g(e){return Array.prototype.concat.apply([],arguments)}function y(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function v(e){return/^[\s\xa0]*$/.test(e)}function b(e,t){return-1!=e.indexOf(t)}function w(e,t){return e<t?-1:e>t?1:0}function _(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function E(e){var t,n={};for(t in e)n[t]=e[t];return n}function S(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<Dn.length;o++)n=Dn[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function T(e){return T[" "](e),e}function C(e,t){var n=jn;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function I(){var e=vn.document;return e?e.documentMode:void 0}function k(e){return C(e,function(){for(var t=0,n=kn(String(xn)).split("."),r=kn(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=w(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||w(0==a[2].length,0==s[2].length)||w(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function N(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function A(e,n){if(N.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var r=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=n,n=e.relatedTarget){if(Ln){e:{try{T(n.nodeName);var o=!0;break e}catch(e){}o=!1}o||(n=null)}}else"mouseover"==r?n=e.fromElement:"mouseout"==r&&(n=e.toElement);this.relatedTarget=n,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=t(e.pointerType)?e.pointerType:zn[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}function D(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++Yn,this.X=this.Z=!1}function x(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function R(e){this.src=e,this.a={},this.b=0}function P(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=Cn(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(x(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function O(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}function M(e,t,n,r,i){if(r&&r.once)return U(e,t,n,r,i);if(a(t)){for(var o=0;o<t.length;o++)M(e,t[o],n,r,i);return null}return n=Q(n),e&&e[Hn]?e.Aa(t,n,u(r)?!!r.capture:!!r,i):L(e,t,n,!1,r,i)}function L(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=u(i)?!!i.capture:!!i;if(a&&!Kn)return null;var s=K(e);if(s||(e[Xn]=s=new R(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=F(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Gn||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(V(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");
e.addListener(r)}return $n++,n}function F(){var e=W,t=Kn?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function U(e,t,n,r,i){if(a(t)){for(var o=0;o<t.length;o++)U(e,t[o],n,r,i);return null}return n=Q(n),e&&e[Hn]?e.Ba(t,n,u(r)?!!r.capture:!!r,i):L(e,t,n,!0,r,i)}function B(e,t,n,r,i){if(a(t))for(var o=0;o<t.length;o++)B(e,t[o],n,r,i);else r=u(r)?!!r.capture:!!r,n=Q(n),e&&e[Hn]?(e=e.c,t=String(t).toString(),t in e.a&&(o=e.a[t],n=O(o,n,r,i),-1<n&&(x(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=K(e))&&(t=e.a[t.toString()],e=-1,t&&(e=O(t,n,r,i)),(n=-1<e?t[e]:null)&&q(n))}function q(e){if(!n(e)&&e&&!e.X){var t=e.src;if(t&&t[Hn])P(t.c,e);else{var r=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(r,i,e.capture):t.detachEvent?t.detachEvent(V(r),i):t.addListener&&t.removeListener&&t.removeListener(i),$n--,(r=K(t))?(P(r,e),0==r.b&&(r.src=null,t[Xn]=null)):x(e)}}}function V(e){return e in Jn?Jn[e]:Jn[e]="on"+e}function j(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&q(e),n.call(r,t)}function W(e,t){return!!e.X||(Kn?j(e,new A(t,this)):(t=new A(t||r("window.event"),this),j(e,t)))}function K(e){return e=e[Xn],e instanceof R?e:null}function Q(e){return"function"==o(e)?e:(e[Zn]||(e[Zn]=function(t){return e.handleEvent(t)}),e[Zn])}function G(){p.call(this),this.c=new R(this),this.J=this,this.B=null}function z(e,t,n,r){if(t=e.c.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&P(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}function H(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Y(){this.b=this.a=null}function X(){var e=ir,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function J(){this.next=this.b=this.a=null}function $(e){vn.setTimeout(function(){throw e},0)}function Z(e,t){nr||ee(),rr||(nr(),rr=!0),ir.add(e,t)}function ee(){var e=vn.Promise.resolve(void 0);nr=function(){e.then(te)}}function te(){for(var e;e=X();){try{e.a.call(e.b)}catch(e){$(e)}var t=tr;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}rr=!1}function ne(e,t){G.call(this),this.b=e||1,this.a=t||vn,this.f=h(this.gb,this),this.g=_n()}function re(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function ie(e,t,n){if("function"==o(e))n&&(e=h(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=h(e.handleEvent,e)}return 2147483647<Number(t)?-1:vn.setTimeout(e,t||0)}function oe(e,t,n){p.call(this),this.f=null!=n?h(e,n):e,this.c=t,this.b=h(this.ab,this),this.a=[]}function ae(e){e.U=ie(e.b,e.c),e.f.apply(null,e.a)}function se(e){p.call(this),this.b=e,this.a={}}function ue(e,t,n,r){a(n)||(n&&(or[0]=n.toString()),n=or);for(var i=0;i<n.length;i++){var o=M(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function ce(e){_(e.a,function(e,t){this.a.hasOwnProperty(t)&&q(e)},e),e.a={}}function le(){}function he(e){N.call(this,"serverreachability",e)}function fe(e){ar.dispatchEvent(new he(ar,e))}function de(e){N.call(this,"statevent",e)}function pe(e){ar.dispatchEvent(new de(ar,e))}function me(e){N.call(this,"timingevent",e)}function ge(e,t){if("function"!=o(e))throw Error("Fn must not be null and must be a function");return vn.setTimeout(function(){e()},t)}function ye(){}function ve(e){var t;return(t=e.a)||(t=e.a={}),t}function be(){}function we(){N.call(this,"d")}function _e(){N.call(this,"c")}function Ee(){}function Se(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new se(this),this.O=hr,e=Mn?125:void 0,this.P=new ne(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}function Te(e,t,n){e.F=1,e.f=Je(Ke(t)),e.l=n,e.H=!0,Ie(e,null)}function Ce(e,t,n,r){e.F=1,e.f=Je(Ke(t)),e.l=null,e.H=n,Ie(e,r)}function Ie(e,t){e.v=_n(),Ae(e),e.D=Ke(e.f),Xe(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new oe(h(e.Ka,e,e.a),e.J)),ue(e.I,e.a,"readystatechange",e.eb),t=e.h?E(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),fe(1)}function ke(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Ne(e,n);if(i==dr){4==t&&(e.c=4,pe(14),r=!1);break}if(i==fr){e.c=4,pe(15),r=!1;break}Oe(e,i)}4==t&&0==n.length&&(e.c=1,pe(16),r=!1),e.b=e.b&&r,r||(Pe(e),Re(e))}function Ne(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?dr:(n=Number(t.substring(n,r)),isNaN(n)?fr:(r+=1,r+n>t.length?dr:(t=t.substr(r,n),e.A=r+n,t)))}function Ae(e){e.R=_n()+e.O,De(e,e.O)}function De(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=ge(h(e.bb,e),t)}function xe(e){e.i&&(vn.clearTimeout(e.i),e.i=null)}function Re(e){e.g.Da()||e.m||e.g.na(e)}function Pe(e){xe(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,re(e.P),ce(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Oe(e,t){try{e.g.Ga(e,t),fe(4)}catch(e){}}function Me(e){if(e.C&&"function"==typeof e.C)return e.C();if(t(e))return e.split("");if(s(e)){for(var n=[],r=e.length,i=0;i<r;i++)n.push(e[i]);return n}n=[],r=0;for(i in e)n[r++]=e[i];return n}function Le(e,n){if(e.forEach&&"function"==typeof e.forEach)e.forEach(n,void 0);else if(s(e)||t(e))In(e,n,void 0);else{if(e.K&&"function"==typeof e.K)var r=e.K();else if(e.C&&"function"==typeof e.C)r=void 0;else if(s(e)||t(e)){r=[];for(var i=e.length,o=0;o<i;o++)r.push(o)}else for(o in r=[],i=0,e)r[i++]=o;i=Me(e),o=i.length;for(var a=0;a<o;a++)n.call(void 0,i[a],r&&r[a],e)}}function Fe(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Fe)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ue(e){e.b={},e.a.length=0,e.c=0}function Be(e,t){Ve(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&qe(e))}function qe(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ve(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Ve(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function je(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function We(e,t){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1;var n;e instanceof We?(this.h=void 0!==t?t:e.h,Qe(this,e.f),this.j=e.j,Ge(this,e.b),ze(this,e.i),this.a=e.a,He(this,ut(e.c)),this.g=e.g):e&&(n=String(e).match(pr))?(this.h=!!t,Qe(this,n[1]||"",!0),this.j=et(n[2]||""),Ge(this,n[3]||"",!0),ze(this,n[4]),this.a=et(n[5]||"",!0),He(this,n[6]||"",!0),this.g=et(n[7]||"")):(this.h=!!t,this.c=new rt(null,this.h))}function Ke(e){return new We(e)}function Qe(e,t,n){e.f=n?et(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Ge(e,t,n){e.b=n?et(t,!0):t}function ze(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function He(e,t,n){t instanceof rt?(e.c=t,lt(e.c,e.h)):(n||(t=tt(t,vr)),e.c=new rt(t,e.h))}function Ye(e,t,n){e.c.set(t,n)}function Xe(e,t,n){a(n)||(n=[String(n)]),st(e.c,t,n)}function Je(e){return Ye(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_n()).toString(36)),e}function $e(e){return e instanceof We?Ke(e):new We(e,void 0)}function Ze(e,t,n,r){var i=new We(null,void 0);return e&&Qe(i,e),t&&Ge(i,t),n&&ze(i,n),r&&(i.a=r),i}function et(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tt(e,n,r){return t(e)?(e=encodeURI(e).replace(n,nt),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nt(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function rt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function it(e){e.a||(e.a=new Fe,e.b=0,e.c&&je(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function ot(e,t){it(e),t=ct(e,t),Ve(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Be(e.a,t))}function at(e,t){return it(e),t=ct(e,t),Ve(e.a.b,t)}function st(e,t,n){ot(e,t),0<n.length&&(e.c=null,e.a.set(ct(e,t),y(n)),e.b+=n.length)}function ut(e){var t=new rt;return t.c=e.c,e.a&&(t.a=new Fe(e.a),t.b=e.b),t}function ct(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function lt(e,t){t&&!e.f&&(it(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(ot(this,t),st(this,n,e))},e)),e.f=t}function ht(){this.a=_n()}function ft(){wr||(wr=new ht)}function dt(){wr||(wr=new ht)}function pt(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function mt(e){var t=e.a.F.a;if(null!=t)pe(4),t?(pe(10),nn(e.a,e,!1)):(pe(11),nn(e.a,e,!0));else{e.b=new Se(e,void 0,void 0),e.b.h=e.h,t=e.a,t=un(t,t.Y()?e.f:null,e.i),pe(4),Xe(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Ye(t,n,r),Ce(e.b,t,!1,e.f)}}function gt(){this.a=this.b=null}function yt(){this.a=new Fe}function vt(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[bn]||(e[bn]=++wn)):t.charAt(0)+e}function bt(e,t){this.b=e,this.a=t}function wt(e){this.g=e||_r,vn.PerformanceNavigationTiming?(e=vn.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(vn.ka&&vn.ka.Ea&&vn.ka.Ea()&&vn.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new yt),this.b=null,this.c=[]}function _t(e,t){!e.a&&(b(t,"spdy")||b(t,"quic")||b(t,"h2"))&&(e.f=e.g,e.a=new yt,e.b&&(Ct(e,e.b),e.b=null))}function Et(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function St(e){return e.b?1:e.a?e.a.a.c:0}function Tt(e,t){return e.b?e=e.b==t:e.a?(t=vt(t),e=Ve(e.a.a.b,t)):e=!1,e}function Ct(e,t){e.a?e.a.add(t):e.b=t}function It(e,t){if(e.b&&e.b==t)e.b=null;else{var n;(n=e.a)&&(n=vt(t),n=Ve(e.a.a.b,n)),n&&Be(e.a.a,vt(t))}}function kt(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return In(e.a.C(),function(e){t=t.concat(e.j)}),t}return y(e.c)}function Nt(){}function At(){this.a=new Nt}function Dt(e,t,n){var r=n||"";try{Le(e,function(e,n){var i=e;u(e)&&(i=er(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function xt(e,t){var n=new le;if(vn.Image){var r=new Image;r.onload=f(Rt,n,r,"TestLoadImage: loaded",!0,t),r.onerror=f(Rt,n,r,"TestLoadImage: error",!1,t),r.onabort=f(Rt,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=f(Rt,n,r,"TestLoadImage: timeout",!1,t),vn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Rt(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Pt(e){G.call(this),this.headers=new Fe,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Sr,this.D=this.F=!1}function Ot(e){return Pn&&k(9)&&n(e.timeout)&&void 0!==e.ontimeout}function Mt(e){return"content-type"==e.toLowerCase()}function Lt(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Ft(e),Bt(e)}function Ft(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Ut(e){if(e.b&&"undefined"!=typeof yn&&(!e.s[1]||4!=Vt(e)||2!=e.T()))if(e.l&&4==Vt(e))ie(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Vt(e)){e.b=!1;try{var t=e.T();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=0===t){var o=String(e.A).match(pr)[1]||null;if(!o&&vn.self&&vn.self.location){var a=vn.self.location.protocol;o=a.substr(0,a.length-1)}i=!Tr.test(o?o.toLowerCase():"")}r=i}r?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Ft(e))}finally{Bt(e)}}}function Bt(e,t){if(e.a){qt(e);var n=e.a,r=e.s[0]?i:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function qt(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(vn.clearTimeout(e.m),e.m=null)}function Vt(e){return e.a?e.a.readyState:0}function jt(e,t){return e.a?e.a.getResponseHeader(t):null}function Wt(e){var t="";return _(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Kt(e,n,r){e:{for(i in r){var i=!1;break e}i=!0}if(i)return e;if(r=Wt(r),t(e)){if(n=encodeURIComponent(String(n)),r=null!=r?"="+encodeURIComponent(String(r)):"",n+=r){if(r=e.indexOf("#"),0>r&&(r=e.length),i=e.indexOf("?"),0>i||i>r){i=r;var o=""}else o=e.substring(i+1,r);e=[e.substr(0,i),o,e.substr(r)],r=e[1],e[1]=n?r?r+"&"+n:n:r,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Ye(e,n,r),e}function Qt(e){this.f=[],this.F=new gt,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!r("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=r("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=r("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=r("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=r("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new wt(e&&e.concurrentRequestLimit),this.ja=new At,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Gt(e){if(zt(e),3==e.u){var t=e.P++,n=Ke(e.B);Ye(n,"SID",e.H),Ye(n,"RID",t),Ye(n,"TYPE","terminate"),$t(e,n),t=new Se(e,t,void 0),t.F=2,t.f=Je(Ke(n)),n=!1,vn.navigator&&vn.navigator.sendBeacon&&(n=vn.navigator.sendBeacon(t.f.toString(),"")),!n&&vn.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=_n(),Ae(t)}sn(e)}function zt(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(vn.clearTimeout(e.l),e.l=null),rn(e),e.b.cancel(),e.h&&(n(e.h)&&vn.clearTimeout(e.h),e.h=null)}function Ht(e,t){e.f.push(new bt(e.Ra++,t)),3==e.u&&Yt(e)}function Yt(e){Et(e.b)||e.h||(e.h=!0,Z(e.Ia,e),e.A=0)}function Xt(e,t){return!(St(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=ge(h(e.Ia,e,t),on(e,e.A)),e.A++,!0))}function Jt(e,t){var n;n=t?t.W:e.P++;var r=Ke(e.B);Ye(r,"SID",e.H),Ye(r,"RID",n),Ye(r,"AID",e.O),$t(e,r),e.g&&e.i&&Kt(r,e.g,e.i),n=new Se(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Zt(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),Ct(e.b,n),Te(n,r,t)}function $t(e,t){e.c&&Le({},function(e,n){Ye(t,n,e)})}function Zt(e,t,n){n=Math.min(e.f.length,n);var r=e.c?h(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(c-=o,0>c)o=Math.max(0,i[u].b-100),s=!1;else try{Dt(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function en(e){e.a||e.l||(e.S=1,Z(e.Ha,e),e.v=0)}function tn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=ge(h(e.Ha,e),on(e,e.v)),e.v++,!0)}function nn(e,t,n){var r=t.l;r&&_t(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=un(e,null,e.ha),Yt(e)}function rn(e){null!=e.s&&(vn.clearTimeout(e.s),e.s=null)}function on(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function an(e,t){if(2==t){var n=null;e.c&&(n=null);var r=h(e.fb,e);n||(n=new We("//www.google.com/images/cleardot.gif"),vn.location&&"http"==vn.location.protocol||Qe(n,"https"),Je(n)),xt(n.toString(),r)}else pe(2);e.u=0,e.c&&e.c.ta(t),sn(e),zt(e)}function sn(e){e.u=0,e.m=-1,e.c&&(0==kt(e.b).length&&0==e.f.length||(e.b.c.length=0,y(e.f),e.f.length=0),e.c.sa())}function un(e,t,n){var r=$e(n);if(""!=r.b)t&&Ge(r,t+"."+r.b),ze(r,r.i);else{var i,o=vn.location;i=t?t+"."+o.hostname:o.hostname,r=Ze(o.protocol,i,+o.port,n)}return e.V&&_(e.V,function(e,t){Ye(r,t,e)}),t=e.j,n=e.I,t&&n&&Ye(r,t,n),Ye(r,"VER",e.wa),$t(e,r),r}function cn(){}function ln(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(0==r.lastIndexOf("/",0))t=r;else{var i;(i=""==t)||(i=t.length-1,i=0<=i&&t.indexOf("/",i)==i),t+=i?r:"/"+r}}return t}function hn(){if(Pn&&!(10<=Number(Vn)))throw Error("Environmental error: no available transport.")}function fn(e,t){G.call(this),this.a=new Qt(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:ln(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!v(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!v(t)&&(this.a.j=t,e=this.b,null!==e&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new mn(this)}function dn(e){we.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function pn(){_e.call(this),this.status=1}function mn(e){this.a=e}var gn,yn=yn||{},vn=this,bn="closure_uid_"+(1e9*Math.random()>>>0),wn=0,_n=Date.now||function(){return+new Date},En=0,Sn={};p.prototype.j=!1,p.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0!=En)){var e=this[bn]||(this[bn]=++wn);if(0!=En&&this.i&&0<this.i.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Sn[e]}},p.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Tn,Cn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,n){if(t(e))return t(n)&&1==n.length?e.indexOf(n,0):-1;for(var r=0;r<e.length;r++)if(r in e&&e[r]===n)return r;return-1},In=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,n,r){for(var i=e.length,o=t(e)?e.split(""):e,a=0;a<i;a++)a in o&&n.call(r,o[a],a,e)},kn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};e:{var Nn=vn.navigator;if(Nn){var An=Nn.userAgent;if(An){Tn=An;break e}}Tn=""}var Dn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");T[" "]=i;var xn,Rn=b(Tn,"Opera"),Pn=b(Tn,"Trident")||b(Tn,"MSIE"),On=b(Tn,"Edge"),Mn=On||Pn,Ln=b(Tn,"Gecko")&&!(b(Tn.toLowerCase(),"webkit")&&!b(Tn,"Edge"))&&!(b(Tn,"Trident")||b(Tn,"MSIE"))&&!b(Tn,"Edge"),Fn=b(Tn.toLowerCase(),"webkit")&&!b(Tn,"Edge");e:{var Un="",Bn=function(){var e=Tn;return Ln?/rv:([^\);]+)(\)|;)/.exec(e):On?/Edge\/([\d\.]+)/.exec(e):Pn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fn?/WebKit\/(\S+)/.exec(e):Rn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Bn&&(Un=Bn?Bn[1]:""),Pn){var qn=I();if(null!=qn&&qn>parseFloat(Un)){xn=String(qn);break e}}xn=Un}var Vn,jn={},Wn=vn.document;Vn=Wn&&Pn?I()||("CSS1Compat"==Wn.compatMode?parseInt(xn,10):5):void 0;var Kn=!Pn||9<=Number(Vn),Qn=Pn&&!k("9"),Gn=function(){if(!vn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{vn.addEventListener("test",i,t),vn.removeEventListener("test",i,t)}catch(e){}return e}();N.prototype.b=function(){this.Ja=!1},d(A,N);var zn={2:"touch",3:"pen",4:"mouse"};A.prototype.b=function(){A.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Qn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var Hn="closure_listenable_"+(1e6*Math.random()|0),Yn=0;R.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.b++);var a=O(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new D(t,this.src,o,!!r,i),t.Z=n,e.push(t)),t};var Xn="closure_lm_"+(1e6*Math.random()|0),Jn={},$n=0,Zn="__closure_events_fn_"+(1e9*Math.random()>>>0);d(G,p),G.prototype[Hn]=!0,gn=G.prototype,gn.addEventListener=function(e,t,n,r){M(this,e,t,n,r)},gn.removeEventListener=function(e,t,n,r){B(this,e,t,n,r)},gn.dispatchEvent=function(e){var n,r=this.B;if(r)for(n=[];r;r=r.B)n.push(r);r=this.J;var i=e.type||e;if(t(e))e=new N(e,r);else if(e instanceof N)e.target=e.target||r;else{var o=e;e=new N(i,r),S(e,o)}if(o=!0,n)for(var a=n.length-1;0<=a;a--){var s=e.a=n[a];o=z(s,i,!0,e)&&o}if(s=e.a=r,o=z(s,i,!0,e)&&o,o=z(s,i,!1,e)&&o,n)for(a=0;a<n.length;a++)s=e.a=n[a],o=z(s,i,!1,e)&&o;return o},gn.G=function(){if(G.N.G.call(this),this.c){var e,t=this.c,n=0;for(e in t.a){for(var r=t.a[e],i=0;i<r.length;i++)++n,x(r[i]);delete t.a[e],t.b--}}this.B=null},gn.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},gn.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var er=vn.JSON.stringify;H.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var tr=new H(function(){return new J},function(e){e.reset()});Y.prototype.add=function(e,t){var n=tr.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},J.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},J.prototype.reset=function(){this.next=this.b=this.a=null};var nr,rr=!1,ir=new Y;d(ne,G),gn=ne.prototype,gn.ba=!1,gn.L=null,gn.gb=function(){if(this.ba){var e=_n()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(re(this),this.start()))}},gn.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_n())},gn.G=function(){ne.N.G.call(this),re(this),delete this.a},d(oe,p),gn=oe.prototype,gn.ea=!1,gn.U=null,gn.Ua=function(e){this.a=arguments,this.U?this.ea=!0:ae(this)},gn.G=function(){oe.N.G.call(this),this.U&&(vn.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},gn.ab=function(){this.U=null,this.ea&&(this.ea=!1,ae(this))},d(se,p);var or=[];se.prototype.G=function(){se.N.G.call(this),ce(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=new G;d(he,N),d(de,N),d(me,N);var sr={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},ur={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};ye.prototype.a=null;var cr={OPEN:"a",ib:"b",Na:"c",rb:"d"};d(we,N),d(_e,N);var lr;d(Ee,ye),lr=new Ee;var hr=45e3,fr={},dr={};gn=Se.prototype,gn.setTimeout=function(e){this.O=e},gn.eb=function(e){e=e.target;var t=this.B;t&&3==Vt(e)?t.Ua():this.Ka(e)},gn.Ka=function(e){try{if(e==this.a)e:{var t=Vt(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!Mn&&!this.a.aa())){this.m||4!=t||7==n||fe(8==n||0>=r?3:2),xe(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=jt(this.a,"X-HTTP-Initial-Response");if(a&&!v(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,pe(12),Pe(this),Re(this);break e}this.s=!0,Oe(this,s)}this.H?(ke(this,t,o),Mn&&this.b&&3==t&&(ue(this.I,this.P,"tick",this.cb),this.P.start())):Oe(this,o),4==t&&Pe(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,Ae(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,pe(12)):(this.c=0,pe(13)),Pe(this),Re(this)}}}catch(e){}finally{}},gn.cb=function(){if(this.a){var e=Vt(this.a),t=this.a.aa();this.A<t.length&&(xe(this),ke(this,e,t),this.b&&4!=e&&Ae(this))}},gn.cancel=function(){this.m=!0,Pe(this)},gn.bb=function(){this.i=null;var e=_n();0<=e-this.R?(2!=this.F&&(fe(3),pe(17)),Pe(this),this.c=2,Re(this)):De(this,this.R-e)},gn=Fe.prototype,gn.C=function(){qe(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},gn.K=function(){return qe(this),this.a.concat()},gn.get=function(e,t){return Ve(this.b,e)?this.b[e]:t},gn.set=function(e,t){Ve(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},gn.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var pr=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;We.prototype.toString=function(){var e=[],t=this.f;t&&e.push(tt(t,mr,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(tt(t,mr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,null!=n&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(tt(n,"/"==n.charAt(0)?yr:gr,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",tt(n,br)),e.join("")},We.prototype.resolve=function(e){var t=Ke(this),n=!!e.f;n?Qe(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Ge(t,e.b):n=null!=e.i;var r=e.a;if(n)ze(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(b(i,"./")||b(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?He(t,ut(e.c)):n=!!e.g,n&&(t.g=e.g),t};var mr=/[#\/\?@]/g,gr=/[#\?:]/g,yr=/[#\?]/g,vr=/[#\?@]/g,br=/#/g;gn=rt.prototype,gn.add=function(e,t){it(this),this.c=null,e=ct(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},gn.forEach=function(e,t){it(this),this.a.forEach(function(n,r){In(n,function(n){e.call(t,n,r,this)},this)},this)},gn.K=function(){it(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},gn.C=function(e){it(this);var n=[];if(t(e))at(this,e)&&(n=g(n,this.a.get(ct(this,e))));else{e=this.a.C();for(var r=0;r<e.length;r++)n=g(n,e[r])}return n},gn.set=function(e,t){return it(this),this.c=null,e=ct(this,e),at(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},gn.get=function(e,t){return e?(e=this.C(e),0<e.length?String(e[0]):t):t},gn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var wr=null;ht.prototype.set=function(e){this.a=e},ht.prototype.reset=function(){this.set(_n())},ht.prototype.get=function(){return this.a},d(dt,ft),gn=pt.prototype,gn.M=null,gn.$=function(e){return this.a.$(e)},gn.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},gn.Da=function(){return!1},gn.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=jt(e,"X-Client-Wire-Protocol");this.l=n?n:null,this.a.j&&(e=jt(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return t=this.a,t.m=this.c,void an(t,2)}this.f=r[0]}else t=this.a,t.m=this.c,an(t,2)}else 1==this.M&&(this.g?pe(6):"11111"==t?(pe(5),this.g=!0,(!Pn||10<=Number(Vn))&&(this.c=200,this.b.cancel(),pe(11),nn(this.a,this,!0))):(pe(7),this.g=!1))},gn.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,mt(this)):1==this.M&&(this.g?(pe(11),nn(this.a,this,!0)):(pe(10),nn(this.a,this,!1)));else{0==this.M?pe(8):1==this.M&&pe(9);var e=this.a;e.m=this.c,an(e,2)}},gn.Y=function(){return this.a.Y()},gn.ma=function(){return this.a.ma()},yt.prototype.add=function(e){this.a.set(vt(e),e)},yt.prototype.C=function(){return this.a.C()};var _r=10;wt.prototype.cancel=function(){this.c=kt(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(In(this.a.C(),function(e){e.cancel()}),Ue(this.a.a))},Nt.prototype.stringify=function(e){return vn.JSON.stringify(e,void 0)},Nt.prototype.parse=function(e){return vn.JSON.parse(e,void 0)};var Er=vn.JSON.parse;d(Pt,G);var Sr="",Tr=/^https?$/i,Cr=["POST","PUT"];gn=Pt.prototype,gn.ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=ve(this.H?this.H:lr),this.a.onreadystatechange=h(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Lt(this,e)}e=n||"";var i=new Fe(this.headers);r&&Le(r,function(e,t){i.set(t,e)}),r=m(i.K()),n=vn.FormData&&e instanceof vn.FormData,!(0<=Cn(Cr,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{qt(this),0<this.o&&((this.D=Ot(this.a))?(this.a.timeout=this.o,this.a.ontimeout=h(this.Ca,this)):this.m=ie(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Lt(this,e)}},gn.Ca=function(){"undefined"!=typeof yn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},gn.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Bt(this))},gn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Bt(this,!0)),Pt.N.G.call(this)},gn.Fa=function(){this.j||(this.w||this.l||this.g?Ut(this):this.$a())},gn.$a=function(){Ut(this)},gn.T=function(){try{return 2<Vt(this)?this.a.status:-1}catch(e){return-1}},gn.za=function(){try{return 2<Vt(this)?this.a.statusText:""}catch(e){return""}},gn.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},gn.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Er(t)}},gn.ya=function(){return this.h},gn.Ya=function(){return t(this.f)?this.f:String(this.f)},gn=Qt.prototype,gn.wa=8,gn.u=1,gn.Da=function(){return 0==this.u},gn.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random()),e=this.P++;var n=new Se(this,e,void 0),r=this.i;this.J&&(r?(r=E(r),S(r,this.J)):r=this.J),null===this.g&&(n.h=r);var i;if(this.W)e:{for(var o=i=0;o<this.f.length;o++){var a=this.f[o];if(a="__data__"in a.a&&(a=a.a.__data__,t(a))?a.length:void 0,void 0===a)break;if(i+=a,4096<i){i=o;break e}if(4096===i||o===this.f.length-1){i=o+1;break e}}i=1e3}else i=1e3;i=Zt(this,n,i),o=Ke(this.B),Ye(o,"RID",e),Ye(o,"CVER",22),this.o&&this.j&&Ye(o,"X-HTTP-Session-Id",this.j),$t(this,o),this.g&&r&&Kt(o,this.g,r),Ct(this.b,n),this.W?(Ye(o,"$req",i),Ye(o,"SID","null"),n.S=!0,Te(n,o,null)):Te(n,o,i),this.u=2}}else 3==this.u&&(e?Jt(this,e):0==this.f.length||Et(this.b)||Jt(this))},gn.Ha=function(){this.l=null,this.a=new Se(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ke(this.pa);Ye(e,"RID","rpc"),Ye(e,"SID",this.H),Ye(e,"CI",this.ia?"0":"1"),Ye(e,"AID",this.O),$t(this,e),Ye(e,"TYPE","xmlhttp"),this.g&&this.i&&Kt(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),Ce(this.a,e,!0,this.ga)},gn.Ga=function(e,t){if(0!=this.u&&(this.a==e||Tt(this.b,e)))if(this.m=e.o,!e.s&&Tt(this.b,e)&&3==this.u){try{var r=this.ja.a.parse(t)}catch(e){r=null}if(a(r)&&3==r.length){if(t=r,0==t[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;rn(this),this.a.cancel(),this.a=null}tn(this),pe(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ge(h(this.Za,this),6e3));if(1>=St(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else an(this,11)}else if((e.s||this.a==e)&&rn(this),!v(t))for(t=r=this.ja.a.parse(t),r=0;r<t.length;r++){var i=t[r];if(this.O=i[0],i=i[1],2==this.u)if("c"==i[0]){
this.H=i[1],this.ga=i[2];var o=i[3];null!=o&&(this.wa=o),i=i[5],null!=i&&n(i)&&0<i&&(this.D=1.5*i),this.o&&(i=e.a)&&((o=jt(i,"X-Client-Wire-Protocol"))&&_t(this.b,o),this.j&&(i=jt(i,"X-HTTP-Session-Id")))&&(this.I=i,Ye(this.B,this.j,i)),this.u=3,this.c&&this.c.va(),i=e,this.pa=un(this,this.Y()?this.ga:null,this.ha),i.s?(It(this.b,i),(o=this.D)&&i.setTimeout(o),i.i&&(xe(i),Ae(i)),this.a=i):en(this),0<this.f.length&&Yt(this)}else"stop"!=i[0]&&"close"!=i[0]||an(this,7);else 3==this.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?an(this,7):Gt(this):"noop"!=i[0]&&this.c&&this.c.ua(i),this.v=0)}},gn.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,tn(this),pe(19))},gn.na=function(e){var t=null;if(this.a==e){rn(this),this.a=null;var n=2}else{if(!Tt(this.b,e))return;t=e.j,It(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=_n()-e.v,ar.dispatchEvent(new me(ar,e.l?e.l.length:0,t,this.A)),Yt(this)):en(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&Xt(this,e)||2==n&&tn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:an(this,5);break;case 4:an(this,10);break;case 3:an(this,6);break;default:an(this,2)}}},gn.fb=function(e){pe(e?2:1)},gn.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Pt(this.La),e.F=this.R,e},gn.ma=function(){return!!this.c&&!0},gn.Y=function(){return this.R},new dt,gn=cn.prototype,gn.va=function(){},gn.ua=function(){},gn.ta=function(){},gn.sa=function(){},gn.Ta=function(){},hn.prototype.a=function(e,t){return new fn(e,t)},d(fn,G),gn=fn.prototype,gn.addEventListener=function(e,t,n,r){fn.N.addEventListener.call(this,e,t,n,r)},gn.removeEventListener=function(e,t,n,r){fn.N.removeEventListener.call(this,e,t,n,r)},gn.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;pe(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new pt(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Kt(t,e.g,e.i)),e=e.w,e.i=n,t=un(e.a,null,e.i),pe(3),n=e.a.F.b,null!=n?(e.f=n[0],e.M=1,mt(e)):(Xe(t,"MODE","init"),!e.a.o&&e.a.j&&Xe(t,"X-HTTP-Session-Id",e.a.j),e.b=new Se(e,void 0,void 0),e.b.h=e.h,Ce(e.b,t,!1,null),e.M=0)},gn.close=function(){Gt(this.a)},gn.Xa=function(e){if(t(e)){var n={};n.__data__=e,Ht(this.a,n)}else this.h?(n={},n.__data__=er(e),Ht(this.a,n)):Ht(this.a,e)},gn.G=function(){this.a.c=null,delete this.f,Gt(this.a),delete this.a,fn.N.G.call(this)},d(dn,we),d(pn,_e),d(mn,cn),mn.prototype.va=function(){this.a.dispatchEvent("a")},mn.prototype.ua=function(e){this.a.dispatchEvent(new dn(e))},mn.prototype.ta=function(e){this.a.dispatchEvent(new pn(e))},mn.prototype.sa=function(){this.a.dispatchEvent("b")};var Ir=f(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},hn);hn.prototype.createWebChannel=hn.prototype.a,fn.prototype.send=fn.prototype.Xa,fn.prototype.open=fn.prototype.Wa,fn.prototype.close=fn.prototype.close,sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,ur.COMPLETE="complete",be.EventType=cr,cr.OPEN="a",cr.CLOSE="b",cr.ERROR="c",cr.MESSAGE="d",G.prototype.listen=G.prototype.Aa,Pt.prototype.listenOnce=Pt.prototype.Ba,Pt.prototype.getLastError=Pt.prototype.Ya,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.T,Pt.prototype.getStatusText=Pt.prototype.za,Pt.prototype.getResponseJson=Pt.prototype.Va,Pt.prototype.getResponseText=Pt.prototype.aa,Pt.prototype.send=Pt.prototype.ca,e.exports={createWebChannelTransport:Ir,ErrorCode:sr,EventType:ur,WebChannel:be,XhrIo:Pt}}).call("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";function n(e){s.length||(a(),u=!0),s[s.length]=e}function r(){for(;c<s.length;){var e=c;if(c+=1,s[e].call(),c>l){for(var t=0,n=s.length-c;t<n;t++)s[t]=s[t+c];s.length-=c,c=0}}s.length=0,c=0,u=!1}function i(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var a,s=[],u=!1,c=0,l=1024,h="undefined"!=typeof t?t:self,f=h.MutationObserver||h.WebKitMutationObserver;a="function"==typeof f?i(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=r(u);n(37);var l=n(16),h=n(30),f=r(h),d=n(12),p=r(d),m=n(32),g=r(m),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"App"},c.default.createElement("div",{className:"App-header"},c.default.createElement("h2",null,"Magnetic Notes App 2.0")),c.default.createElement(l.HashRouter,null,c.default.createElement(c.default.Fragment,null,c.default.createElement(l.Route,{path:"/logIn",component:f.default}),c.default.createElement(l.Route,{path:"/dashboard",component:p.default}),c.default.createElement(l.Route,{path:"/newNote",component:g.default}))))}}]),t}(c.default.Component);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=r(u),l=n(40),h=r(l),f=n(55),d=r(f);n(34);var p=n(12),m=r(p),g=n(31),y=r(g),v=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.uiConfig={signInFlow:"",signInOptions:[h.default.auth.GoogleAuthProvider.PROVIDER_ID,h.default.auth.FacebookAuthProvider.PROVIDER_ID,h.default.auth.EmailAuthProvider.PROVIDER_ID]},e.componentDidMount=function(){h.default.auth().onAuthStateChanged(function(t){e.setState({isUserSignedIn:!!t}),console.log("El usuario activo es:"),null!=t&&console.log(h.default.auth().currentUser.displayName)})},e.state={isUserSignedIn:!1},e}return a(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",null,this.state.isUserSignedIn?c.default.createElement("div",{className:"currentUser"},c.default.createElement(m.default,null),c.default.createElement(y.default,null)):c.default.createElement(d.default,{uiConfig:this.uiConfig,firebaseAuth:h.default.auth()}))}}]),t}(c.default.Component);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(16),s=function(){return o.default.createElement(o.default.Fragment,null,o.default.createElement("ul",null,o.default.createElement("li",{type:"circle"},o.default.createElement(a.Link,{to:"/LogIn"},"Home")),o.default.createElement("li",{type:"circle"},o.default.createElement(a.Link,{to:"/Dashboard"},"Dashboard")),o.default.createElement("li",{type:"circle"},o.default.createElement(a.Link,{to:"/NewNote"},"New Note Area"))))};t.default=s},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),l=i(c),h=n(5),f=r(h),d=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleChangeInput=function(t){var n=e.state;n[t.target.name]=t.target.value,e.setState(n)},e.handleSubmit=function(t){t.preventDefault();var n=e.state,r=n.title,i=n.post,o=n.email,a=n.timeStamp;e.ref.set({title:r,post:i,email:o,timeStamp:a}).then(function(t){e.setState({title:"",post:"",email:"",timeStamp:f.change.doc.data().timeStamp.toDate()})}).catch(function(e){console.log("Error adding document",e)})},e.ref=f.firestore().collection("myDataApp").doc(f.database().ref().child("myDataApp").push().key),e.state={title:"",post:"",email:f.auth().currentUser.email,timeStamp:f.firestore.FieldValue.serverTimestamp()},e}return s(t,e),u(t,[{key:"render",value:function(){var e=this.state,t=e.title,n=e.post;return l.default.createElement("div",null,l.default.createElement("br",null),l.default.createElement("p",{style:{color:"#fff"}},"New Note =D "),",",l.default.createElement("br",null),l.default.createElement("h3",null,"Add Note"),l.default.createElement("form",{onSubmit:this.handleSubmit},l.default.createElement("br",null),l.default.createElement("input",{type:"text",style:{resize:"none",width:"80%",height:"50%",background:"rgb(75, 70, 70)",color:"#fff",fontSize:"large"},name:"title",placeholder:"Titulo",value:t,onChange:this.handleChangeInput}),l.default.createElement("textarea",{style:{resize:"none",width:"80%",height:"50%",background:"rgb(75, 70, 70)",color:"#fff",fontSize:"large"},name:"post",value:n,placeholder:"Escribe nueva nota",onChange:this.handleChangeInput}),l.default.createElement("br",null),l.default.createElement("button",{type:"submit"},"Guardar")),l.default.createElement("br",null),l.default.createElement("br",null))}}]),t}(l.default.Component);t.default=d},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var i=n(5),o=r(i);o.auth().onAuthStateChanged(function(e){e&&!e.isAnonymous?console.log("Usuario Logueado"):console.log("No Logueado")})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i);n(41),o.initializeApp({apiKey:"AIzaSyCDWs3l7cq7hj6KSL3XBqy_pZupif7Pd3Q",authDomain:"ck-notes.firebaseapp.com",databaseURL:"https://ck-notes.firebaseio.com",projectId:"ck-notes",storageBucket:"",messagingSenderId:"167306684659",appId:"1:167306684659:web:63925f5ab37b762353ef86"});var a=o.firestore();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(2),o=r(i),a=n(54),s=r(a),u=n(29),c=r(u);n(38),n(33),s.default.render(o.default.createElement(c.default,null),document.getElementById("root"))},function(e,t,n){var r;(function(e){!function(){function i(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1}function o(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function a(e){e&&e.blur&&e!==document.body&&e.blur()}function s(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function u(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function c(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal.bind(this));t.observe(e,{attributes:!0,attributeFilter:["open"]})}else{var n,r=!1,i=function(){r?this.downgradeModal():this.maybeHideModal(),r=!1}.bind(this),o=function(t){if(t.target===e){var o="DOMNodeRemoved";r|=t.type.substr(0,o.length)===o,window.clearTimeout(n),n=window.setTimeout(i,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,o)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}var l=window.CustomEvent;l&&"object"!=typeof l||(l=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n},l.prototype=window.Event.prototype),c.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),h.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"],n=t.map(function(e){return e+":not([disabled])"});n.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(n.join(", "))}a(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!h.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");i(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,h.needsCentering(this.dialog_)?(h.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new l("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var h={};if(h.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},h.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],r=null;try{r=n.cssRules}catch(e){}if(r)for(var i=0;i<r.length;++i){var o=r[i],a=null;try{a=document.querySelectorAll(o.selectorText)}catch(e){}if(a&&s(a,e)){var u=o.style.getPropertyValue("top"),c=o.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},h.needsCentering=function(e){var t=window.getComputedStyle(e);return"absolute"===t.position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!h.isInlinePositionSetByStylesheet(e))},h.forceRegisterDialog=function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new c(e)},h.registerDialog=function(e){e.showModal||h.forceRegisterDialog(e)},h.DialogManager=function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var n=[];t.forEach(function(e){for(var t,r=0;t=e.removedNodes[r];++r)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))}),n.length&&e(n)}))},h.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},h.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},h.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var r=this.pendingDialogStack[0];if(r){var i=r.dialog.parentNode||document.body;i.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},h.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=o(e);){for(var t,n=0;t=this.pendingDialogStack[n];++n)if(t.dialog===e)return 0===n;e=e.parentElement}return!1},h.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),a(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0],n=t.dialog,r=n.compareDocumentPosition(e.target);return r&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},h.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new l("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(t)&&n.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},h.DialogManager.prototype.checkDOM_=function(e){var t=this.pendingDialogStack.slice();t.forEach(function(t){e.indexOf(t.dialog)!==-1?t.downgradeModal():t.maybeHideModal()})},h.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},h.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);t!==-1&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},h.dm=new h.DialogManager,h.formSubmitter=null,h.useValue=null,void 0===window.HTMLDialogElement){var f=document.createElement("form");if(f.setAttribute("method","dialog"),"dialog"!==f.method){var d=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(d){var p=d.get;d.get=function(){return u(this)?"dialog":p.call(this)};var m=d.set;d.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):m.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",d)}}document.addEventListener("click",function(e){if(h.formSubmitter=null,h.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&u(t.form)){var n="submit"===t.type&&["button","input"].indexOf(t.localName)>-1;if(!n){if("input"!==t.localName||"image"!==t.type)return;h.useValue=e.offsetX+","+e.offsetY}var r=o(t);r&&(h.formSubmitter=t)}}},!1);var g=HTMLFormElement.prototype.submit,y=function(){if(!u(this))return g.call(this);var e=o(this);e&&e.close()};HTMLFormElement.prototype.submit=y,document.addEventListener("submit",function(e){var t=e.target;if(u(t)){e.preventDefault();var n=o(t);if(n){var r=h.formSubmitter;r&&r.form===t?n.close(h.useValue||r.value):n.close(),h.formSubmitter=null}}},!0)}h.forceRegisterDialog=h.forceRegisterDialog,h.registerDialog=h.registerDialog,"amd"in n(17)?(r=function(){return h}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))):"object"==typeof e&&"object"==typeof e.exports?e.exports=h:window.dialogPolyfill=h}()}).call(t,n(18)(e))},function(e,t){},37,function(e,t,n){"use strict";n(11)},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(n(1));n(11),n(20),n(21),n(22),n(24),n(26),n(25),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),e.exports=i},function(e,t,n){(function(e){!function(e,t){t(n(1))}(this,function(t){"use strict";try{(function(){function n(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case ss.DEBUG:case ss.VERBOSE:console.log.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case ss.INFO:console.info.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case ss.WARN:console.warn.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case ss.ERROR:console.error.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}function r(e){this.name=e,this._logLevel=hs,this._logHandler=n}function i(e,t){function n(){this.constructor=e}ds(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){return new(n=n||Promise)(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function a(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function s(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(e,t){var n=cs.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,ms.prototype.create),n}function c(e,t,n){this.service=e,this.serviceName=t,this.errors=n}function l(e){return"string"==typeof e}function h(e){return"number"==typeof e}function f(e,t){e=e.split("."),t=t||bs;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function d(){}function p(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function m(e){return"array"==p(e)}function g(e){var t=p(e);return"array"==t||"object"==t&&"number"==typeof e.length}function y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function v(e,t,n){return e.call.apply(e.bind,arguments)}function b(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:b).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function E(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function S(){this.j=this.j,this.i=this.i}function T(e){return Array.prototype.concat.apply([],arguments)}function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function I(e){return/^[\s\xa0]*$/.test(e)}function k(e,t){return-1!=e.indexOf(t)}function N(e,t){return e<t?-1:t<e?1:0}function A(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function D(e){var t,n={};for(t in e)n[t]=e[t];return n}function x(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<As.length;o++)n=As[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function R(e){return R[" "](e),e}function P(){var e=bs.document;return e?e.documentMode:void 0}function O(e){return function(e,t){var n=js;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(){for(var t=0,n=Is(String(Ds)).split("."),r=Is(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=N(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||N(0==a[2].length,0==s[2].length)||N(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function M(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function L(e,t){if(M.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Ls){e:{try{R(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=l(e.pointerType)?e.pointerType:zs[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++Ys,this.X=this.Z=!1}function U(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function B(e){this.src=e,this.a={},this.b=0}function q(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=Ts(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(U(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function V(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}function j(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(m(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Y(r),t&&t[Hs]?t.Ba(n,r,y(i)?!!i.capture:!!i,o):W(t,n,r,!0,i,o)}(e,t,n,r,i);if(m(t)){for(var o=0;o<t.length;o++)j(e,t[o],n,r,i);return null}return n=Y(n),e&&e[Hs]?e.Aa(t,n,y(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i;if(a&&!Ks)return null;var s=H(e);
if(s||(e[Xs]=s=new B(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=z,t=Ks?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)Gs||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e){if(!h(e)&&e&&!e.X){var t=e.src;if(t&&t[Hs])q(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=H(t))?(q(n,e),0==n.b&&(n.src=null,t[Xs]=null)):U(e)}}}function Q(e){return e in Js?Js[e]:Js[e]="on"+e}function G(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&K(e),n.call(r,t)}function z(e,t){return!!e.X||(Ks?G(e,new L(t,this)):G(e,t=new L(t||f("window.event"),this)))}function H(e){return(e=e[Xs])instanceof B?e:null}function Y(e){return"function"==p(e)?e:(e[$s]||(e[$s]=function(t){return e.handleEvent(t)}),e[$s])}function X(){S.call(this),this.c=new B(this),(this.J=this).B=null}function J(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&q(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}function $(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Z(){this.b=this.a=null}function ee(){this.next=this.b=this.a=null}function te(e){bs.setTimeout(function(){throw e},0)}function ne(e,t){eu||function(){var e=bs.Promise.resolve(void 0);eu=function(){e.then(re)}}(),nu||(eu(),nu=!0),ru.add(e,t)}function re(){for(var e;r=n=void 0,r=null,(n=ru).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){te(e)}var t=tu;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;nu=!1}function ie(e,t){X.call(this),this.b=e||1,this.a=t||bs,this.f=w(this.gb,this),this.g=Es()}function oe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function ae(e,t,n){if("function"==p(e))n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:bs.setTimeout(e,t||0)}function se(e,t,n){S.call(this),this.f=null!=n?w(e,n):e,this.c=t,this.b=w(this.ab,this),this.a=[]}function ue(e){e.U=ae(e.b,e.c),e.f.apply(null,e.a)}function ce(e){S.call(this),this.b=e,this.a={}}function le(e,t,n,r){m(n)||(n&&(iu[0]=n.toString()),n=iu);for(var i=0;i<n.length;i++){var o=j(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function he(e){A(e.a,function(e,t){this.a.hasOwnProperty(t)&&K(e)},e),e.a={}}function fe(){}function de(e){M.call(this,"serverreachability",e)}function pe(e){ou.dispatchEvent(new de(ou,e))}function me(e){M.call(this,"statevent",e)}function ge(e){ou.dispatchEvent(new me(ou,e))}function ye(e){M.call(this,"timingevent",e)}function ve(e,t){if("function"!=p(e))throw Error("Fn must not be null and must be a function");return bs.setTimeout(function(){e()},t)}function be(){}function we(e){var t;return(t=e.a)||(t=e.a={}),t}function _e(){}function Ee(){M.call(this,"d")}function Se(){M.call(this,"c")}function Te(){}function Ce(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ce(this),this.O=lu,e=Ms?125:void 0,this.P=new ie(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}function Ie(e,t,n){e.F=1,e.f=Xe(We(t)),e.l=n,e.H=!0,Ne(e,null)}function ke(e,t,n,r){e.F=1,e.f=Xe(We(t)),e.l=null,e.H=n,Ne(e,r)}function Ne(e,t){e.v=Es(),xe(e),e.D=We(e.f),Ye(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new se(w(e.Ka,e,e.a),e.J)),le(e.I,e.a,"readystatechange",e.eb),t=e.h?D(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),pe(1)}function Ae(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=De(e,n);if(i==fu){4==t&&(e.c=4,ge(14),r=!1);break}if(i==hu){e.c=4,ge(15),r=!1;break}Le(e,i)}4==t&&0==n.length&&(e.c=1,ge(16),r=!1),e.b=e.b&&r,r||(Me(e),Oe(e))}function De(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?fu:(n=Number(t.substring(n,r)),isNaN(n)?hu:(r+=1)+n>t.length?fu:(t=t.substr(r,n),e.A=r+n,t))}function xe(e){e.R=Es()+e.O,Re(e,e.O)}function Re(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=ve(w(e.bb,e),t)}function Pe(e){e.i&&(bs.clearTimeout(e.i),e.i=null)}function Oe(e){e.g.Da()||e.m||e.g.na(e)}function Me(e){Pe(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,oe(e.P),he(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Le(e,t){try{e.g.Ga(e,t),pe(4)}catch(e){}}function Fe(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(g(e)||l(e))Cs(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(g(e)||l(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(l(e))return e.split("");if(g(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ue(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ue)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Be(e,t){Ve(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&qe(e))}function qe(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ve(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Ve(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function Ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function je(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof je?(this.h=void 0!==t?t:e.h,Ke(this,e.f),this.j=e.j,Qe(this,e.b),Ge(this,e.i),this.a=e.a,ze(this,ot(e.c)),this.g=e.g):e&&(n=String(e).match(du))?(this.h=!!t,Ke(this,n[1]||"",!0),this.j=Je(n[2]||""),Qe(this,n[3]||"",!0),Ge(this,n[4]),this.a=Je(n[5]||"",!0),ze(this,n[6]||"",!0),this.g=Je(n[7]||"")):(this.h=!!t,this.c=new et(null,this.h))}function We(e){return new je(e)}function Ke(e,t,n){e.f=n?Je(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Qe(e,t,n){e.b=n?Je(t,!0):t}function Ge(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function ze(e,t,n){t instanceof et?(e.c=t,function(e,t){t&&!e.f&&(tt(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(nt(this,t),it(this,n,e))},e)),e.f=t}(e.c,e.h)):(n||(t=$e(t,yu)),e.c=new et(t,e.h))}function He(e,t,n){e.c.set(t,n)}function Ye(e,t,n){m(n)||(n=[String(n)]),it(e.c,t,n)}function Xe(e){return He(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Es()).toString(36)),e}function Je(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function $e(e,t,n){return l(e)?(e=encodeURI(e).replace(t,Ze),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ze(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}function et(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function tt(e){e.a||(e.a=new Ue,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function nt(e,t){tt(e),t=at(e,t),Ve(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Be(e.a,t))}function rt(e,t){return tt(e),t=at(e,t),Ve(e.a.b,t)}function it(e,t,n){nt(e,t),0<n.length&&(e.c=null,e.a.set(at(e,t),C(n)),e.b+=n.length)}function ot(e){var t=new et;return t.c=e.c,e.a&&(t.a=new Ue(e.a),t.b=e.b),t}function at(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function st(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function ut(e){var t=e.a.F.a;if(null!=t)ge(4),t?(ge(10),Qt(e.a,e,!1)):(ge(11),Qt(e.a,e,!0));else{e.b=new Ce(e,void 0,void 0),e.b.h=e.h,t=Xt(t=e.a,t.Y()?e.f:null,e.i),ge(4),Ye(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&He(t,n,r),ke(e.b,t,!1,e.f)}}function ct(){this.a=this.b=null}function lt(){this.a=new Ue}function ht(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[ws]||(e[ws]=++_s)):t.charAt(0)+e}function ft(e,t){this.b=e,this.a=t}function dt(e){this.g=e||bu,e=bs.PerformanceNavigationTiming?0<(e=bs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(bs.ka&&bs.ka.Ea&&bs.ka.Ea()&&bs.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new lt),this.b=null,this.c=[]}function pt(e,t){!e.a&&(k(t,"spdy")||k(t,"quic")||k(t,"h2"))&&(e.f=e.g,e.a=new lt,e.b&&(vt(e,e.b),e.b=null))}function mt(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function gt(e){return e.b?1:e.a?e.a.a.c:0}function yt(e,t){return e=e.b?e.b==t:!!e.a&&(t=ht(t),Ve(e.a.a.b,t))}function vt(e,t){e.a?e.a.add(t):e.b=t}function bt(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=ht(t),n=Ve(e.a.a.b,n)),n&&Be(e.a.a,ht(t)))}function wt(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return C(e.c);var t=e.c;return Cs(e.a.C(),function(e){t=t.concat(e.j)}),t}function _t(){}function Et(){this.a=new _t}function St(e,t,n){var r=n||"";try{Fe(e,function(e,n){var i=e;y(e)&&(i=Zs(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Tt(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Ct(e){X.call(this),this.headers=new Ue,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=_u,this.D=this.F=!1}function It(e){return"content-type"==e.toLowerCase()}function kt(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Nt(e),Dt(e)}function Nt(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function At(e){if(e.b&&void 0!==vs&&(!e.s[1]||4!=Rt(e)||2!=e.T()))if(e.l&&4==Rt(e))ae(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==Rt(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.A).match(du)[1]||null;if(!o&&bs.self&&bs.self.location){var a=bs.self.location.protocol;o=a.substr(0,a.length-1)}i=!Eu.test(o?o.toLowerCase():"")}t=i}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Nt(e))}finally{Dt(e)}}}function Dt(e,t){if(e.a){xt(e);var n=e.a,r=e.s[0]?d:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function xt(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(bs.clearTimeout(e.m),e.m=null)}function Rt(e){return e.a?e.a.readyState:0}function Pt(e,t){return e.a?e.a.getResponseHeader(t):null}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return A(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),l(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return He(e,t,n),e}function Mt(e){this.f=[],this.F=new ct,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!f("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=f("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=f("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=f("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=f("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new dt(e&&e.concurrentRequestLimit),this.ja=new Et,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Lt(e){if(Ft(e),3==e.u){var t=e.P++,n=We(e.B);He(n,"SID",e.H),He(n,"RID",t),He(n,"TYPE","terminate"),Vt(e,n),(t=new Ce(e,t,void 0)).F=2,t.f=Xe(We(n)),n=!1,bs.navigator&&bs.navigator.sendBeacon&&(n=bs.navigator.sendBeacon(t.f.toString(),"")),!n&&bs.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=Es(),xe(t)}Yt(e)}function Ft(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(bs.clearTimeout(e.l),e.l=null),Gt(e),e.b.cancel(),e.h&&(h(e.h)&&bs.clearTimeout(e.h),e.h=null)}function Ut(e,t){e.f.push(new ft(e.Ra++,t)),3==e.u&&Bt(e)}function Bt(e){mt(e.b)||e.h||(e.h=!0,ne(e.Ia,e),e.A=0)}function qt(e,t){var n;n=t?t.W:e.P++;var r=We(e.B);He(r,"SID",e.H),He(r,"RID",n),He(r,"AID",e.O),Vt(e,r),e.g&&e.i&&Ot(r,e.g,e.i),n=new Ce(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=jt(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),vt(e.b,n),Ie(n,r,t)}function Vt(e,t){e.c&&Fe({},function(e,n){He(t,n,e)})}function jt(e,t,n){n=Math.min(e.f.length,n);var r=e.c?w(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{St(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Wt(e){e.a||e.l||(e.S=1,ne(e.Ha,e),e.v=0)}function Kt(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=ve(w(e.Ha,e),zt(e,e.v)),e.v++,0))}function Qt(e,t,n){var r=t.l;r&&pt(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Xt(e,null,e.ha),Bt(e)}function Gt(e){null!=e.s&&(bs.clearTimeout(e.s),e.s=null)}function zt(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function Ht(e,t){if(2==t){var n=null;e.c&&(n=null);var r=w(e.fb,e);n||(n=new je("//www.google.com/images/cleardot.gif"),bs.location&&"http"==bs.location.protocol||Ke(n,"https"),Xe(n)),function(e,t){var n=new fe;if(bs.Image){var r=new Image;r.onload=_(Tt,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_(Tt,n,r,"TestLoadImage: error",!1,t),r.onabort=_(Tt,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_(Tt,n,r,"TestLoadImage: timeout",!1,t),bs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else ge(2);e.u=0,e.c&&e.c.ta(t),Yt(e),Ft(e)}function Yt(e){e.u=0,e.m=-1,e.c&&(0==wt(e.b).length&&0==e.f.length||(e.b.c.length=0,C(e.f),e.f.length=0),e.c.sa())}function Xt(e,t,n){var r=function(e){return e instanceof je?We(e):new je(e,void 0)}(n);if(""!=r.b)t&&Qe(r,t+"."+r.b),Ge(r,r.i);else{var i,o=bs.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new je(null,void 0);return e&&Ke(i,e),t&&Qe(i,t),n&&Ge(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&A(e.V,function(e,t){He(r,t,e)}),t=e.j,n=e.I,t&&n&&He(r,t,n),He(r,"VER",e.wa),Vt(e,r),r}function Jt(){}function $t(){if(Ps&&!(10<=Number(Vs)))throw Error("Environmental error: no available transport.")}function Zt(e,t){X.call(this),this.a=new Mt(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!I(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!I(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new nn(this)}function en(e){Ee.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function tn(){Se.call(this),this.status=1}function nn(e){this.a=e}function rn(){return Ou.logLevel===ss.DEBUG?Cu.DEBUG:Ou.logLevel===ss.SILENT?Cu.SILENT:Cu.ERROR}function on(e){switch(e){case Cu.DEBUG:Ou.logLevel=ss.DEBUG;break;case Cu.ERROR:Ou.logLevel=ss.ERROR;break;case Cu.SILENT:Ou.logLevel=ss.SILENT;break;default:Ou.error("Firestore ("+Pu+"): Invalid value passed to `setLogLevel`")}}function an(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Ou.logLevel<=ss.DEBUG){var i=n.map(un);Ou.debug.apply(Ou,["Firestore ("+Pu+") ["+e+"]: "+t].concat(i))}}function sn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ou.logLevel<=ss.ERROR){var r=t.map(un);Ou.error.apply(Ou,["Firestore ("+Pu+"): "+e].concat(r))}}function un(e){if("string"==typeof e)return e;var t=qu.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function cn(e){var t="FIRESTORE ("+Pu+") INTERNAL ASSERTION FAILED: "+e;throw sn(t),new Error(t)}function ln(e,t){e||cn(t)}function hn(){}function fn(){return qu.getPlatform().emptyByteString}function dn(e,t){var n=Mu.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function pn(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new ju(Vu.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gn(e,t){return void 0!==e?e:t}function yn(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function vn(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bn(e){for(var t in ln(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function wn(e,t){if(0!==t.length)throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Fn(t.length,"argument")+".")}function _n(e,t,n){if(t.length!==n)throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires "+Fn(n,"argument")+", but was called with "+Fn(t.length,"argument")+".")}function En(e,t,n){if(t.length<n)throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Fn(n,"argument")+", but was called with "+Fn(t.length,"argument")+".")}function Sn(e,t,n,r){if(t.length<n||t.length>r)throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Fn(t.length,"argument")+".")}function Tn(e,t,n,r){Dn(e,t,Ln(n)+" argument",r)}function Cn(e,t,n,r){void 0!==r&&Tn(e,t,n,r)}function In(e,t,n,r){Dn(e,t,n+" option",r)}function kn(e,t,n,r){void 0!==r&&In(e,t,n,r)}function Nn(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Rn(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+Rn(r[o]))}(e,t,n,r,i)}function An(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(Rn(u))}var c=Rn(r);throw new ju(Vu.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function Dn(e,t,n,r){if(!("object"===t?xn(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=Rn(r);throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function xn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Rn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":cn("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function Pn(e,t,n){if(void 0===n)throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+Ln(t)+" argument, but it was undefined.")}function On(e,t,n){vn(t,function(t,r){if(n.indexOf(t)<0)throw new ju(Vu.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function Mn(e,t,n,r){var i=Rn(r);return new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires its "+Ln(n)+" argument to be a "+t+", but it was: "+i)}function Ln(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Fn(e,t){return e+" "+t+(1===e?"":"s")}function Un(){}function Bn(e,t){return e<t?-1:t<e?1:0}function qn(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Vn(e){return e+"\0"}function jn(){if("undefined"==typeof Uint8Array)throw new ju(Vu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Wn(){if(!qu.getPlatform().base64Available)throw new ju(Vu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function Kn(e){Wn(),this._binaryString=e}function Qn(e,t){this.projectId=e,this.database=t||zu}function Gn(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}function zn(e,t,n){void 0===t?t=0:t>e.length&&cn("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&cn("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}function Hn(){return null!==Lu&&Lu.apply(this,arguments)||this}function Yn(){return null!==Fu&&Fu.apply(this,arguments)||this}function Xn(e){this.path=e,ln(Xn.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}function Jn(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}function $n(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}function Zn(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=tr(t)),t=er(e.get(n),t);return tr(t)}function er(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=oc+sc;break;case oc:n+=oc+uc;break;default:n+=o}}return n}function tr(e){return e+oc+ac}function nr(e){var t=e.length;if(ln(2<=t,"Invalid path "+e),2===t)return ln(e.charAt(0)===oc&&e.charAt(1)===ac,"Non-empty path "+e+" had length 2"),$u.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(oc,o);switch((a<0||n<a)&&cn('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case ac:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case sc:i+=e.substring(o,a),i+="\0";break;case uc:i+=e.substring(o,a+1);break;default:cn('Invalid encoded resource path: "'+e+'"')}o=a+2}return new $u(r)}function rr(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new ju(Vu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new ju(Vu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ju(Vu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new ju(Vu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}function ir(e){this.timestamp=e}function or(e,t){this.comparator=e,this.root=t||dc.EMPTY}function ar(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}function sr(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:sr.RED,this.left=null!=r?r:sr.EMPTY,this.right=null!=i?i:sr.EMPTY,this.size=this.left.size+1+this.right.size}function ur(){this.size=0}function cr(e){this.comparator=e,this.data=new hc(this.comparator)}function lr(e){this.iter=e}function hr(){return bc}function fr(){return hr()}function dr(){return wc}function pr(){return _c}function mr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ec,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}function gr(){return Sc}function yr(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,ln(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}function vr(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}function br(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}function wr(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function _r(e,t,n){var r=il.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Cr(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function Er(e,t,n){var r=e.store(rl.store),i=e.store(il.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){ln(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=il.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ic.waitFor(o).next(function(){return c})}function Sr(e){return e instanceof Uint8Array?(ln("YES"==={NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Tr(e){return Pl.getStore(e,rl.store)}function Cr(e){return Pl.getStore(e,il.store)}function Ir(e){return Pl.getStore(e,nl.store)}function kr(e,t){ln((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}function Nr(e){this.db=e,12.2===Nr.getIOSVersion(s())&&sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Ar(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}function Dr(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new nc,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Pr(e.target.error);t.completionDeferred.reject(n)}}function xr(e){this.store=e}function Rr(e){return new Ic(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Pr(e.target.error);n(t)}})}function Pr(e){var t=Lc.getIOSVersion(s());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new ju("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return qc||(qc=!0,setTimeout(function(){throw r},0)),r}}return e}function Or(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Oc.forQueryCache()}function Mr(e){return Pl.getStore(e,cl.store)}function Lr(e){return Lc.getStore(e,hl.store).get(hl.key).next(function(e){return ln(null!==e,"Missing metadata row."),e})}function Fr(e){return Lr(e).next(function(e){return e.highestListenSequenceNumber})}function Ur(e){return Pl.getStore(e,ll.store)}function Br(e,t){this.key=e,this.version=t}function qr(e,t,n,r,i){var o=Nc.call(this,e,t)||this;return o.data=n,o.proto=i,o.hasLocalMutations=!!r.hasLocalMutations,o.hasCommittedMutations=!!r.hasCommittedMutations,o}function Vr(e,t,n){var r=Ac.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function jr(){return null!==Dc&&Dc.apply(this,arguments)||this}function Wr(e){this.mapKeyFn=e,this.inner={}}function Kr(){this.changes=new Gc(function(e){return e.toString()}),this.changesApplied=!1}function Qr(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}function Gr(e){var t=xc.call(this)||this;return t.documentCache=e,t.documentSizes=new Gc(function(e){return e.toString()}),t}function zr(e){return Pl.getStore(e,ul.store)}function Hr(e){return Pl.getStore(e,sl.store)}function Yr(e){return Pl.getStore(e,dl.store)}function Xr(e){return e.path.toArray()}function Jr(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw cn("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}function $r(){this.collectionParentIndex=new Jc}function Zr(){this.index={}}function ei(e){this.serializer=e}function ti(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}function ni(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}function ri(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}function ii(){}function oi(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}function ai(e){this.byteSize=e}function si(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}function ui(e,t,n){this.targetId=e,this.path=t,ln(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function ci(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function li(e,t){this.collectionId=e,this.parent=t}function hi(e){e.createObjectStore(ll.store,{keyPath:ll.keyPath}).createIndex(ll.documentTargetsIndex,ll.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(cl.store,{keyPath:cl.keyPath}).createIndex(cl.queryTargetsIndexName,cl.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(hl.store)}function fi(e){this.changes=e}function di(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}function pi(){this.collectionParentsCache=new Jc}function mi(e){return Pl.getStore(e,fl.store)}function gi(e,t,n,r,i,o){void 0===i&&(i=lc.MIN),void 0===o&&(o=fn()),
this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}function yi(e){this.remoteSerializer=e}function vi(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Bn(n,i);return 0===a?Bn(r,o):a}function bi(e){this.maxElements=e,this.buffer=new yc(vi),this.previousIndex=0}function wi(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}function _i(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}function Ei(e,t){this.delegate=e,this.params=t}function Si(e,t){var n=yl.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}function Ti(e,t,n,r,i,o,a){if(this.persistenceKey=e,this.clientId=t,this.queue=r,this.multiClientParams=a,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!Ti.isAvailable())throw new ju(Vu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new Ol(this,o),this.dbName=e+Ti.MAIN_DATABASE,this.serializer=new Sl(i),this.document=n.document,this.allowTabSynchronization=void 0!==a,this.queryCache=new Vc(this.referenceDelegate,this.serializer),this.indexManager=new gl,this.remoteDocumentCache=new Yc(this.serializer,this.indexManager,this.allowTabSynchronization),!n.window||!n.window.localStorage)throw new ju(Vu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=n.window,this.webStorage=this.window.localStorage}function Ci(e){return o(this,void 0,void 0,function(){return a(this,function(t){if(!function(e){return e.code===Vu.FAILED_PRECONDITION&&e.message===Dl}(e))throw e;return an(Al,"Unexpectedly lost primary lease"),[2]})})}function Ii(e){return e.store(tl.store)}function ki(e){return e.store(pl.store)}function Ni(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Nl(this,t)}function Ai(e,t){return Ur(e).put(function(e,t){return new ll(0,Zn(e.path),t)}(t,e.currentSequenceNumber))}function Di(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}function xi(){}function Ri(){var e=Ml.call(this)||this;return e.typeOrder=vl.NullValue,e.internalValue=null,e}function Pi(e){var t=Ll.call(this)||this;return t.internalValue=e,t.typeOrder=vl.BooleanValue,t}function Oi(e){var t=Fl.call(this)||this;return t.internalValue=e,t.typeOrder=vl.NumberValue,t}function Mi(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Li(){return null!==Ul&&Ul.apply(this,arguments)||this}function Fi(){return null!==Bl&&Bl.apply(this,arguments)||this}function Ui(e){var t=ql.call(this)||this;return t.internalValue=e,t.typeOrder=vl.StringValue,t}function Bi(e){var t=Vl.call(this)||this;return t.internalValue=e,t.typeOrder=vl.TimestampValue,t}function qi(e,t){var n=jl.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=vl.TimestampValue,n}function Vi(e){var t=Wl.call(this)||this;return t.internalValue=e,t.typeOrder=vl.BlobValue,t}function ji(e,t){var n=Kl.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=vl.RefValue,n}function Wi(e){var t=Ql.call(this)||this;return t.internalValue=e,t.typeOrder=vl.GeoPointValue,t}function Ki(e){var t=Gl.call(this)||this;return t.internalValue=e,t.typeOrder=vl.ObjectValue,t}function Qi(e){var t=zl.call(this)||this;return t.internalValue=e,t.typeOrder=vl.ArrayValue,t}function Gi(e){this.fields=e}function zi(e,t){this.field=e,this.transform=t}function Hi(e,t){this.updateTime=e,this.exists=t,ln(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}function Yi(){}function Xi(e,t,n){var r=ph.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=Hl.Set,r}function Ji(e,t,n,r){var i=mh.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=Hl.Patch,i}function $i(e,t){var n=gh.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=Hl.Transform,n.precondition=_h.exists(!0),n}function Zi(e,t){var n=yh.call(this)||this;return n.key=e,n.precondition=t,n.type=Hl.Delete,n}function eo(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}function to(){this.refsByKey=new yc(Ah.compareByKey),this.refsByTarget=new yc(Ah.compareByTargetId)}function no(e,t){this.key=e,this.targetOrBatchId=t}function ro(e,t){this.persistence=e,this.localViewReferences=new Nh,this.queryDataByTarget={},ln(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new kh(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}function io(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=fn(),this.batchesByDocumentKey=new yc(Ah.compareByKey)}function oo(e){this.persistence=e,this.queries=new Gc(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=lc.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Nh,this.targetCount=0,this.targetIdGenerator=Oc.forQueryCache()}function ao(e,t){this.indexManager=e,this.sizer=t,this.docs=new hc(tc.comparator),this.newDocumentChanges=mr(),this.size=0}function so(e){var t=vh.call(this)||this;return t.documentCache=e,t}function uo(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Yu(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Rh(this),this.indexManager=new Xc,this.remoteDocumentCache=new Ph(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}function co(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}function lo(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Gc(function(e){return Zn(e.path)}),this.garbageCollector=new Nl(this,n)}function ho(e){return null==e}function fo(e){return Vh(e)&&e<=qh&&Bh<=e}function po(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}function mo(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=bh.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new jh(e,t)}function go(e,t,n,r,i){var o=Kh.call(this,e,Uu.ListenStreamConnectionBackoff,Uu.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}function yo(e,t,n,r,i){var o=Qh.call(this,e,Uu.WriteStreamConnectionBackoff,Uu.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=fn(),o}function vo(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}function bo(e){this.datastore=e,this.readVersions=pr(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function wo(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Gh.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function _o(e){switch(e){case Vu.OK:return cn("Treated status OK as error");case Vu.CANCELLED:case Vu.UNKNOWN:case Vu.DEADLINE_EXCEEDED:case Vu.RESOURCE_EXHAUSTED:case Vu.INTERNAL:case Vu.UNAVAILABLE:case Vu.UNAUTHENTICATED:return!1;case Vu.INVALID_ARGUMENT:case Vu.NOT_FOUND:case Vu.ALREADY_EXISTS:case Vu.PERMISSION_DENIED:case Vu.FAILED_PRECONDITION:case Vu.ABORTED:case Vu.OUT_OF_RANGE:case Vu.UNIMPLEMENTED:case Vu.DATA_LOSS:return!0;default:return cn("Unknown status code: "+e)}}function Eo(e){if(void 0===e)return sn("GRPC error has no .code"),Vu.UNKNOWN;switch(e){case tf.OK:return Vu.OK;case tf.CANCELLED:return Vu.CANCELLED;case tf.UNKNOWN:return Vu.UNKNOWN;case tf.DEADLINE_EXCEEDED:return Vu.DEADLINE_EXCEEDED;case tf.RESOURCE_EXHAUSTED:return Vu.RESOURCE_EXHAUSTED;case tf.INTERNAL:return Vu.INTERNAL;case tf.UNAVAILABLE:return Vu.UNAVAILABLE;case tf.UNAUTHENTICATED:return Vu.UNAUTHENTICATED;case tf.INVALID_ARGUMENT:return Vu.INVALID_ARGUMENT;case tf.NOT_FOUND:return Vu.NOT_FOUND;case tf.ALREADY_EXISTS:return Vu.ALREADY_EXISTS;case tf.PERMISSION_DENIED:return Vu.PERMISSION_DENIED;case tf.FAILED_PRECONDITION:return Vu.FAILED_PRECONDITION;case tf.ABORTED:return Vu.ABORTED;case tf.OUT_OF_RANGE:return Vu.OUT_OF_RANGE;case tf.UNIMPLEMENTED:return Vu.UNIMPLEMENTED;case tf.DATA_LOSS:return Vu.DATA_LOSS;default:return cn("Unknown status code: "+e)}}function So(e){this.comparator=e?function(t,n){return e(t,n)||tc.comparator(t.key,n.key)}:function(e,t){return tc.comparator(e.key,t.key)},this.keyedMap=dr(),this.sortedSet=new hc(this.comparator)}function To(){this.changeMap=new hc(tc.comparator)}function Co(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function Io(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function ko(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function No(){this.pendingResponses=0,this.documentChanges=xo(),this._resumeToken=fn(),this._current=!1,this._hasPendingChanges=!0}function Ao(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=hr(),this.pendingDocumentTargetMapping=Do(),this.pendingTargetResets=new yc(Bn)}function Do(){return new hc(tc.comparator)}function xo(){return new hc(tc.comparator)}function Ro(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return o(s,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(an(Lf,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new rf(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}function Po(e,t){if(_n("GeoPoint",arguments,2),Tn("GeoPoint","number",1,e),Tn("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new ju(Vu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new ju(Vu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}function Oo(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}function Mo(){}function Lo(e){this.name=e}function Fo(e,t,n){var r=vf.call(this)||this;return r.field=e,r.op=t,r.value=n,r}function Uo(){return null!==bf&&bf.apply(this,arguments)||this}function Bo(e,t){var n=wf.call(this,e,qf.IN,t)||this;return n.value=t,n}function qo(e,t){return _f.call(this,e,qf.ARRAY_CONTAINS,t)||this}function Vo(e,t){var n=Ef.call(this,e,qf.IN,t)||this;return n.value=t,n}function jo(e,t){var n=Sf.call(this,e,qf.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}function Wo(e){this.name=e}function Ko(e,t){this.position=e,this.before=t}function Qo(e,t){this.field=e,void 0===t&&(t=zf.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}function Go(){}function zo(e){this.elements=e}function Ho(e){this.elements=e}function Yo(e){this.operand=e}function Xo(e){return e instanceof lh?e.internalValue.slice():[]}function Jo(e){this.count=e}function $o(e,t){ln(!ho(e),t+" is missing")}function Zo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):cn("can't parse "+e)}function ea(e,t){this.databaseId=e,this.options=t}function ta(e){this.syncEngine=e,this.queries=new Gc(function(e){return e.canonicalId()}),this.onlineState=Gh.Unknown,this.syncEngine.subscribe(this)}function na(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Gh.Unknown,this.options=n||{}}function ra(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}function ia(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=mr(),this.mutatedKeys=mr(),this.documentSet=new cf(e.docComparator.bind(e))}function oa(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new jh(this.asyncQueue,Uu.RetryTransaction)}function aa(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Gc(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new hc(tc.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Nh,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Oc.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Gh.Unknown}function sa(e){this.uid=e}function ua(e,t,n,r){this.user=e,this.batchId=t,this.state=n,ln(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}function ca(e,t,n){this.targetId=e,this.state=t,ln(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function la(e,t){this.clientId=e,this.activeTargetIds=t}function ha(e,t){this.clientId=e,this.onlineState=t}function fa(){this.activeTargetIds=gr()}function da(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!da.isAvailable(this.platform))throw new ju(Vu.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new Nd,this.clientStateKeyRe=new RegExp("^"+_d+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ed+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Sd+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}function pa(){this.localState=new Nd,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}function ma(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}function ga(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Wu.newId()}function ya(e){this.observer=e,this.muted=!1}function va(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+Fn(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(Tn("FieldPath","string",n,e[n]),0===e[n].length)throw new ju(Vu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ec(e)}function ba(){this.changeListener=null}function wa(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=bd.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}function _a(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=bd.FIRST_PARTY}function Ea(e,t){this.gapi=e,this.sessionIndex=t}function Sa(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e,["next","error","complete"])}function Ta(e){this._methodName=e}function Ca(){return If.call(this,"FieldValue.delete")||this}function Ia(){return kf.call(this,"FieldValue.serverTimestamp")||this}function ka(e){var t=Nf.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}function Na(e){var t=Af.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}function Aa(e){var t=Df.call(this,"FieldValue.increment")||this;return t._operand=e,t}function Da(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function xa(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function Ra(e){switch(e){case xf.Set:case xf.MergeSet:case xf.Update:return!0;case xf.Argument:return!1;default:throw cn("Unexpected case for UserDataSource: "+e)}}function Pa(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}function Oa(e){this.preConverter=e}function Ma(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof cc||e instanceof Uf||e instanceof Ku||e instanceof tp||e instanceof Wd)}function La(e,t,n){if(!Ma(n)||!xn(n)){var r=Rn(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Fa(e,t){if(t instanceof Ld)return t._internalPath;if("string"==typeof t)return Ua(e,t);throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ua(e,t){try{return function(e){if(0<=e.search(Fd))throw new ju(Vu.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ld.bind.apply(Ld,[void 0].concat(e.split("."))))}catch(t){throw new ju(Vu.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Ba(t);throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Ba(e){return e instanceof Error?e.message:e.toString()}function qa(e){if(void 0===e.host){if(void 0!==e.ssl)throw new ju(Vu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else In("settings","non-empty string","host",e.host),this.host=e.host,kn("settings","boolean","ssl",e.ssl),this.ssl=gn(e.ssl,!0);if(On("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),kn("settings","object","credentials",e.credentials),this.credentials=e.credentials,kn("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?sn("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&sn("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=gn(e.timestampsInSnapshots,!0),kn("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Il.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==rp&&e.cacheSizeBytes<Il.MINIMUM_CACHE_SIZE_BYTES)throw new ju(Vu.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Il.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}kn("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}function Va(e){var t=this;if(this._firebaseApp=null,this._queue=new ic,this.INTERNAL={delete:function(){return o(t,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},"object"==typeof e.options){var n=e;this._firebaseApp=n,this._databaseId=Va.databaseIdFromApp(n),this._persistenceKey=n.name,this._credentials=new qd(n)}else{var r=e;if(!r.projectId)throw new ju(Vu.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Hu(r.projectId,r.database),this._persistenceKey="[DEFAULT]",this._credentials=new Bd}this._settings=new ip({}),this._dataConverter=this.createDataConverter(this._databaseId)}function ja(e,t){this._firestore=e,this._transaction=t}function Wa(e){this._firestore=e,this._mutations=[],this._committed=!1}function Ka(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}function Qa(e,t){this.hasPendingWrites=e,this.fromCache=t}function Ga(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}function za(){return null!==Zd&&Zd.apply(this,arguments)||this}function Ha(e,t){this._query=e,this.firestore=t}function Ya(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new cp(n.hasPendingWrites,n.fromCache)}function Xa(e,t){var n=pp.call(this,Bf.atPath(e),t)||this;if(e.length%2!=1)throw new ju(Vu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return n}function Ja(e,t){if(void 0===t)return{merge:!1};if(On(e,t,["merge","mergeFields"]),kn(e,"boolean","merge",t.merge),Nn(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof Ld}),void 0!==t.mergeFields&&void 0!==t.merge)throw new ju(Vu.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function $a(e,t){return void 0===t?{}:(On(e,t,["serverTimestamps"]),An(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Za(e,t){Cn(e,"object",1,t),t&&(On(e,t,["source"]),An(e,0,"source",t.source,["default","server","cache"]))}function es(e,t,n){if(t instanceof up){if(t.firestore!==n)throw new ju(Vu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Mn(e,"DocumentReference",1,t)}function ts(e){e.INTERNAL.registerService("firestore",function(e){return new op(e)},function(e){ln(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Cp))}function ns(){}function rs(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}function is(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}function os(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}function as(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}var ss,us;t=t&&t.hasOwnProperty("default")?t.default:t,(us=ss=ss||{})[us.DEBUG=0]="DEBUG",us[us.VERBOSE=1]="VERBOSE",us[us.INFO=2]="INFO",us[us.WARN=3]="WARN",us[us.ERROR=4]="ERROR",us[us.SILENT=5]="SILENT";var cs,ls,hs=ss.INFO,fs=(Object.defineProperty(r.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in ss))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,ss.DEBUG].concat(e))},r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,ss.VERBOSE].concat(e))},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,ss.INFO].concat(e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,ss.WARN].concat(e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,ss.ERROR].concat(e))},r),ds=function(e,t){return(ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},ps=(i(u,cs=Error),u),ms=(c.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(gs,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new ps(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},c),gs=/\{\$([^}]+)}/g,ys="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},vs=vs||{},bs=ys,ws="closure_uid_"+(1e9*Math.random()>>>0),_s=0,Es=Date.now||function(){return+new Date};S.prototype.j=!1,S.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[ws]||(this[ws]=++_s))},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ss,Ts=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(l(e))return l(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Cs=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=l(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},Is=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};e:{var ks=bs.navigator;if(ks){var Ns=ks.userAgent;if(Ns){Ss=Ns;break e}}Ss=""}var As="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");R[" "]=d;var Ds,xs,Rs=k(Ss,"Opera"),Ps=k(Ss,"Trident")||k(Ss,"MSIE"),Os=k(Ss,"Edge"),Ms=Os||Ps,Ls=k(Ss,"Gecko")&&!(k(Ss.toLowerCase(),"webkit")&&!k(Ss,"Edge"))&&!(k(Ss,"Trident")||k(Ss,"MSIE"))&&!k(Ss,"Edge"),Fs=k(Ss.toLowerCase(),"webkit")&&!k(Ss,"Edge");e:{var Us="",Bs=(xs=Ss,Ls?/rv:([^\);]+)(\)|;)/.exec(xs):Os?/Edge\/([\d\.]+)/.exec(xs):Ps?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(xs):Fs?/WebKit\/(\S+)/.exec(xs):Rs?/(?:Version)[ \/]?(\S+)/.exec(xs):void 0);if(Bs&&(Us=Bs?Bs[1]:""),Ps){var qs=P();if(null!=qs&&qs>parseFloat(Us)){Ds=String(qs);break e}}Ds=Us}var Vs,js={},Ws=bs.document;Vs=Ws&&Ps?P()||("CSS1Compat"==Ws.compatMode?parseInt(Ds,10):5):void 0;var Ks=!Ps||9<=Number(Vs),Qs=Ps&&!O("9"),Gs=function(){if(!bs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{bs.addEventListener("test",d,t),bs.removeEventListener("test",d,t)}catch(e){}return e}();M.prototype.b=function(){this.Ja=!1},E(L,M);var zs={2:"touch",3:"pen",4:"mouse"};L.prototype.b=function(){L.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Qs)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var Hs="closure_listenable_"+(1e6*Math.random()|0),Ys=0;B.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=V(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new F(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var Xs="closure_lm_"+(1e6*Math.random()|0),Js={},$s="__closure_events_fn_"+(1e9*Math.random()>>>0);E(X,S),X.prototype[Hs]=!0,(ls=X.prototype).addEventListener=function(e,t,n,r){j(this,e,t,n,r)},ls.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(m(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=y(i)?!!i.capture:!!i,r=Y(r),t&&t[Hs]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=V(a=t.a[n],r,i,o))&&(U(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&H(t))&&(n=t.a[n.toString()],t=-1,n&&(t=V(n,r,i,o)),(r=-1<t?n[t]:null)&&K(r))}(this,e,t,n,r)},ls.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(l(e))e=new M(e,n);else if(e instanceof M)e.target=e.target||n;else{var i=e;x(e=new M(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=J(a,r,!0,e)&&i}if(i=J(a=e.a=n,r,!0,e)&&i,i=J(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=J(a=e.a=t[o],r,!1,e)&&i;return i},ls.G=function(){if(X.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)U(n[r]);delete t.a[e],t.b--}}this.B=null},ls.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},ls.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Zs=bs.JSON.stringify;$.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var eu,tu=new $(function(){return new ee},function(e){e.reset()});Z.prototype.add=function(e,t){var n=tu.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},ee.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var nu=!(ee.prototype.reset=function(){this.next=this.b=this.a=null}),ru=new Z;E(ie,X),(ls=ie.prototype).ba=!1,ls.L=null,ls.gb=function(){if(this.ba){var e=Es()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(oe(this),this.start()))}},ls.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Es())},ls.G=function(){ie.N.G.call(this),oe(this),delete this.a},E(se,S),(ls=se.prototype).ea=!1,ls.U=null,ls.Ua=function(e){this.a=arguments,this.U?this.ea=!0:ue(this)},ls.G=function(){se.N.G.call(this),this.U&&(bs.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},ls.ab=function(){this.U=null,this.ea&&(this.ea=!1,
ue(this))},E(ce,S);var iu=[];ce.prototype.G=function(){ce.N.G.call(this),he(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ou=new X;E(de,M),E(me,M),E(ye,M);var au={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},su={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};be.prototype.a=null;var uu,cu={OPEN:"a",ib:"b",Na:"c",rb:"d"};E(Ee,M),E(Se,M),E(Te,be),uu=new Te;var lu=45e3,hu={},fu={};(ls=Ce.prototype).setTimeout=function(e){this.O=e},ls.eb=function(e){e=e.target;var t=this.B;t&&3==Rt(e)?t.Ua():this.Ka(e)},ls.Ka=function(e){try{if(e==this.a)e:{var t=Rt(this.a),n=this.a.ya(),r=this.a.T();if(!(t<3||3==t&&!Ms&&!this.a.aa())){this.m||4!=t||7==n||pe(8==n||r<=0?3:2),Pe(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Pt(this.a,"X-HTTP-Initial-Response");if(a&&!I(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,ge(12),Me(this),Oe(this);break e}this.s=!0,Le(this,s)}this.H?(Ae(this,t,o),Ms&&this.b&&3==t&&(le(this.I,this.P,"tick",this.cb),this.P.start())):Le(this,o),4==t&&Me(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,xe(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,ge(12)):(this.c=0,ge(13)),Me(this),Oe(this)}}}catch(e){}},ls.cb=function(){if(this.a){var e=Rt(this.a),t=this.a.aa();this.A<t.length&&(Pe(this),Ae(this,e,t),this.b&&4!=e&&xe(this))}},ls.cancel=function(){this.m=!0,Me(this)},ls.bb=function(){this.i=null;var e=Es();0<=e-this.R?(2!=this.F&&(pe(3),ge(17)),Me(this),this.c=2,Oe(this)):Re(this,this.R-e)},(ls=Ue.prototype).C=function(){qe(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},ls.K=function(){return qe(this),this.a.concat()},ls.get=function(e,t){return Ve(this.b,e)?this.b[e]:t},ls.set=function(e,t){Ve(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},ls.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var du=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;je.prototype.toString=function(){var e=[],t=this.f;t&&e.push($e(t,pu,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push($e(t,pu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push($e(n,"/"==n.charAt(0)?gu:mu,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",$e(n,vu)),e.join("")},je.prototype.resolve=function(e){var t=We(this),n=!!e.f;n?Ke(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Qe(t,e.b):n=null!=e.i;var r=e.a;if(n)Ge(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(k(i,"./")||k(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?ze(t,ot(e.c)):n=!!e.g,n&&(t.g=e.g),t};var pu=/[#\/\?@]/g,mu=/[#\?:]/g,gu=/[#\?]/g,yu=/[#\?@]/g,vu=/#/g;(ls=et.prototype).add=function(e,t){tt(this),this.c=null,e=at(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},ls.forEach=function(e,t){tt(this),this.a.forEach(function(n,r){Cs(n,function(n){e.call(t,n,r,this)},this)},this)},ls.K=function(){tt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},ls.C=function(e){tt(this);var t=[];if(l(e))rt(this,e)&&(t=T(t,this.a.get(at(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=T(t,e[n])}return t},ls.set=function(e,t){return tt(this),this.c=null,rt(this,e=at(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},ls.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},ls.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},E(function(){},function(){}),(ls=st.prototype).M=null,ls.$=function(e){return this.a.$(e)},ls.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},ls.Da=function(){return!1},ls.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Pt(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Pt(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Ht(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Ht(t,2)}else 1==this.M&&(this.g?ge(6):"11111"==t?(ge(5),this.g=!0,(!Ps||10<=Number(Vs))&&(this.c=200,this.b.cancel(),ge(11),Qt(this.a,this,!0))):(ge(7),this.g=!1))},ls.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,ut(this)):1==this.M&&(this.g?(ge(11),Qt(this.a,this,!0)):(ge(10),Qt(this.a,this,!1)));else{0==this.M?ge(8):1==this.M&&ge(9);var e=this.a;e.m=this.c,Ht(e,2)}},ls.Y=function(){return this.a.Y()},ls.ma=function(){return this.a.ma()},lt.prototype.add=function(e){this.a.set(ht(e),e)},lt.prototype.C=function(){return this.a.C()};var bu=10;dt.prototype.cancel=function(){this.c=wt(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(Cs(this.a.C(),function(e){e.cancel()}),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},_t.prototype.stringify=function(e){return bs.JSON.stringify(e,void 0)},_t.prototype.parse=function(e){return bs.JSON.parse(e,void 0)};var wu=bs.JSON.parse;E(Ct,X);var _u="",Eu=/^https?$/i,Su=["POST","PUT"];(ls=Ct.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=we(this.H?this.H:uu),this.a.onreadystatechange=w(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void kt(this,e)}e=n||"";var i=new Ue(this.headers);r&&Fe(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=It,n=e.length,r=l(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:l(e)?e.charAt(t):e[t]}(i.K()),n=bs.FormData&&e instanceof bs.FormData,0<=Ts(Su,t)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xt(this),0<this.o&&((this.D=function(e){return Ps&&O(9)&&h(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=w(this.Ca,this)):this.m=ae(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){kt(this,e)}},ls.Ca=function(){void 0!==vs&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},ls.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dt(this))},ls.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dt(this,!0)),Ct.N.G.call(this)},ls.Fa=function(){this.j||(this.w||this.l||this.g?At(this):this.$a())},ls.$a=function(){At(this)},ls.T=function(){try{return 2<Rt(this)?this.a.status:-1}catch(e){return-1}},ls.za=function(){try{return 2<Rt(this)?this.a.statusText:""}catch(e){return""}},ls.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},ls.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wu(t)}},ls.ya=function(){return this.h},ls.Ya=function(){return l(this.f)?this.f:String(this.f)},(ls=Mt.prototype).wa=8,ls.u=1,ls.Da=function(){return 0==this.u},ls.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random()),e=this.P++;var t,n=new Ce(this,e,void 0),r=this.i;if(this.J&&(r?x(r=D(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&l(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=jt(this,n,t),He(i=We(this.B),"RID",e),He(i,"CVER",22),this.o&&this.j&&He(i,"X-HTTP-Session-Id",this.j),Vt(this,i),this.g&&r&&Ot(i,this.g,r),vt(this.b,n),this.W?(He(i,"$req",t),He(i,"SID","null"),n.S=!0,Ie(n,i,null)):Ie(n,i,t),this.u=2}}else 3==this.u&&(e?qt(this,e):0==this.f.length||mt(this.b)||qt(this))},ls.Ha=function(){this.l=null,this.a=new Ce(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=We(this.pa);He(e,"RID","rpc"),He(e,"SID",this.H),He(e,"CI",this.ia?"0":"1"),He(e,"AID",this.O),Vt(this,e),He(e,"TYPE","xmlhttp"),this.g&&this.i&&Ot(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),ke(this.a,e,!0,this.ga)},ls.Ga=function(e,t){if(0!=this.u&&(this.a==e||yt(this.b,e)))if(this.m=e.o,!e.s&&yt(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(m(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Gt(this),this.a.cancel(),this.a=null}Kt(this),ge(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=ve(w(this.Za,this),6e3));if(gt(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Ht(this,11)}else if(!e.s&&this.a!=e||Gt(this),!I(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&h(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Pt(r,"X-Client-Wire-Protocol"))&&pt(this.b,i),this.j&&(r=Pt(r,"X-HTTP-Session-Id")))&&(this.I=r,He(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Xt(this,this.Y()?this.ga:null,this.ha),r.s?(bt(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Pe(r),xe(r)),this.a=r):Wt(this),0<this.f.length&&Bt(this)}else"stop"!=r[0]&&"close"!=r[0]||Ht(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Ht(this,7):Lt(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},ls.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Kt(this),ge(19))},ls.na=function(e){var t=null;if(this.a==e){Gt(this),this.a=null;var n=2}else{if(!yt(this.b,e))return;t=e.j,bt(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=Es()-e.v,ou.dispatchEvent(new ye(ou,e.l?e.l.length:0,t,this.A)),Bt(this)):Wt(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(gt(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.f=t.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa)||(e.h=ve(w(e.Ia,e,t),zt(e,e.A)),e.A++,0)))}(this,e)||2==n&&Kt(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Ht(this,5);break;case 4:Ht(this,10);break;case 3:Ht(this,6);break;default:Ht(this,2)}}},ls.fb=function(e){ge(e?2:1)},ls.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ct(this.La)).F=this.R,e},ls.ma=function(){return!!this.c&&!0},ls.Y=function(){return this.R},(ls=Jt.prototype).va=function(){},ls.ua=function(){},ls.ta=function(){},ls.sa=function(){},ls.Ta=function(){},$t.prototype.a=function(e,t){return new Zt(e,t)},E(Zt,X),(ls=Zt.prototype).addEventListener=function(e,t,n,r){Zt.N.addEventListener.call(this,e,t,n,r)},ls.removeEventListener=function(e,t,n,r){Zt.N.removeEventListener.call(this,e,t,n,r)},ls.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;ge(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new st(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Ot(t,e.g,e.i)),(e=e.w).i=n,t=Xt(e.a,null,e.i),ge(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,ut(e)):(Ye(t,"MODE","init"),!e.a.o&&e.a.j&&Ye(t,"X-HTTP-Session-Id",e.a.j),e.b=new Ce(e,void 0,void 0),e.b.h=e.h,ke(e.b,t,!1,null),e.M=0)},ls.close=function(){Lt(this.a)},ls.Xa=function(e){if(l(e)){var t={};t.__data__=e,Ut(this.a,t)}else this.h?((t={}).__data__=Zs(e),Ut(this.a,t)):Ut(this.a,e)},ls.G=function(){this.a.c=null,delete this.f,Lt(this.a),delete this.a,Zt.N.G.call(this)},E(en,Ee),E(tn,Se),E(nn,Jt),nn.prototype.va=function(){this.a.dispatchEvent("a")},nn.prototype.ua=function(e){this.a.dispatchEvent(new en(e))},nn.prototype.ta=function(e){this.a.dispatchEvent(new tn(e))},nn.prototype.sa=function(){this.a.dispatchEvent("b")};var Tu=_(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},$t);$t.prototype.createWebChannel=$t.prototype.a,Zt.prototype.send=Zt.prototype.Xa,Zt.prototype.open=Zt.prototype.Wa,Zt.prototype.close=Zt.prototype.close,au.NO_ERROR=0,au.TIMEOUT=8,au.HTTP_ERROR=6,su.COMPLETE="complete",(_e.EventType=cu).OPEN="a",cu.CLOSE="b",cu.ERROR="c",cu.MESSAGE="d",X.prototype.listen=X.prototype.Aa,Ct.prototype.listenOnce=Ct.prototype.Ba,Ct.prototype.getLastError=Ct.prototype.Ya,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.T,Ct.prototype.getStatusText=Ct.prototype.za,Ct.prototype.getResponseJson=Ct.prototype.Va,Ct.prototype.getResponseText=Ct.prototype.aa,Ct.prototype.send=Ct.prototype.ca;var Cu,Iu,ku={createWebChannelTransport:Tu,ErrorCode:au,EventType:su,WebChannel:_e,XhrIo:Ct},Nu=ku.createWebChannelTransport,Au=ku.ErrorCode,Du=ku.EventType,xu=ku.WebChannel,Ru=ku.XhrIo,Pu=t.SDK_VERSION,Ou=new fs("@firebase/firestore");(Iu=Cu=Cu||{})[Iu.DEBUG=0]="DEBUG",Iu[Iu.ERROR=1]="ERROR",Iu[Iu.SILENT=2]="SILENT";var Mu,Lu,Fu,Uu,Bu,qu=(hn.setPlatform=function(e){hn.platform&&cn("Platform already defined"),hn.platform=e},hn.getPlatform=function(){return hn.platform||cn("Platform not set"),hn.platform},hn),Vu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ju=(i(dn,Mu=Error),dn),Wu=(Un.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return ln(20===t.length,"Invalid auto ID: "+t),t},Un),Ku=(Kn.fromBase64String=function(e){_n("Blob.fromBase64String",arguments,1),Tn("Blob.fromBase64String","string",1,e),Wn();try{return new Kn(qu.getPlatform().atob(e))}catch(e){throw new ju(Vu.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},Kn.fromUint8Array=function(e){if(_n("Blob.fromUint8Array",arguments,1),jn(),!(e instanceof Uint8Array))throw Mn("Blob.fromUint8Array","Uint8Array",1,e);return new Kn(Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join(""))},Kn.prototype.toBase64=function(){return _n("Blob.toBase64",arguments,0),Wn(),qu.getPlatform().btoa(this._binaryString)},Kn.prototype.toUint8Array=function(){_n("Blob.toUint8Array",arguments,0),jn();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},Kn.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Kn.prototype.isEqual=function(e){return this._binaryString===e._binaryString},Kn.prototype._compareTo=function(e){return Bn(this._binaryString,e._binaryString)},Kn),Qu=pn(Ku,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Gu=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},zu="(default)",Hu=(Object.defineProperty(Qn.prototype,"isDefaultDatabase",{get:function(){return this.database===zu},enumerable:!0,configurable:!0}),Qn.prototype.isEqual=function(e){return e instanceof Qn&&e.projectId===this.projectId&&e.database===this.database},Qn.prototype.compareTo=function(e){return Bn(this.projectId,e.projectId)||Bn(this.database,e.database)},Qn),Yu=(Gn.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},Gn.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},Gn.INVALID=-1,Gn),Xu="__name__",Ju=(Object.defineProperty(zn.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),zn.prototype.isEqual=function(e){return 0===zn.comparator(this,e)},zn.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof zn?e.forEach(function(e){t.push(e)}):t.push(e),this.construct(t)},zn.prototype.limit=function(){return this.offset+this.length},zn.prototype.popFirst=function(e){return e=void 0===e?1:e,ln(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},zn.prototype.popLast=function(){return ln(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},zn.prototype.firstSegment=function(){return ln(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},zn.prototype.lastSegment=function(){return this.get(this.length-1)},zn.prototype.get=function(e){return ln(e<this.length,"Index out of range"),this.segments[this.offset+e]},zn.prototype.isEmpty=function(){return 0===this.length},zn.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},zn.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},zn.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},zn.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},zn.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},zn),$u=(i(Hn,Lu=Ju),Hn.prototype.construct=function(e,t,n){return new Hn(e,t,n)},Hn.prototype.canonicalString=function(){return this.toArray().join("/")},Hn.prototype.toString=function(){return this.canonicalString()},Hn.fromString=function(e){if(0<=e.indexOf("//"))throw new ju(Vu.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new Hn(e.split("/").filter(function(e){return 0<e.length}))},Hn.EMPTY_PATH=new Hn([]),Hn),Zu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ec=(i(Yn,Fu=Ju),Yn.prototype.construct=function(e,t,n){return new Yn(e,t,n)},Yn.isValidIdentifier=function(e){return Zu.test(e)},Yn.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},Yn.prototype.toString=function(){return this.canonicalString()},Yn.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Xu},Yn.keyField=function(){return new Yn([Xu])},Yn.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new ju(Vu.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new ju(Vu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ju(Vu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new ju(Vu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)},Yn.EMPTY_PATH=new Yn([]),Yn),tc=(Xn.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Xn.prototype.isEqual=function(e){return null!==e&&0===$u.comparator(this.path,e.path)},Xn.prototype.toString=function(){return this.path.toString()},Xn.comparator=function(e,t){return $u.comparator(e.path,t.path)},Xn.isDocumentKey=function(e){return e.length%2==0},Xn.fromSegments=function(e){return new Xn(new $u(e.slice()))},Xn.fromPathString=function(e){return new Xn($u.fromString(e))},Xn.EMPTY=new Xn(new $u([])),Xn),nc=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};(Bu=Uu=Uu||{}).All="all",Bu.ListenStreamIdle="listen_stream_idle",Bu.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Bu.WriteStreamIdle="write_stream_idle",Bu.WriteStreamConnectionBackoff="write_stream_connection_backoff",Bu.OnlineStateTimeout="online_state_timeout",Bu.ClientMetadataRefresh="client_metadata_refresh",Bu.LruGarbageCollection="lru_garbage_collection",Bu.RetryTransaction="retry_transaction";var rc=(Jn.createAndSchedule=function(e,t,n,r,i){var o=new Jn(e,t,Date.now()+n,r,i);return o.start(n),o},Jn.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},Jn.prototype.skipDelay=function(){return this.handleDelayElapsed()},Jn.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ju(Vu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},Jn.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},Jn.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Jn),ic=(Object.defineProperty($n.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),$n.prototype.enqueueAndForget=function(e){this.enqueue(e)},$n.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},$n.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},$n.prototype.enqueueAndInitiateShutdown=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},$n.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},$n.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw sn("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n},$n.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),ln(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=rc.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},$n.prototype.verifyNotFailed=function(){this.failure&&cn("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},$n.prototype.verifyOperationInProgress=function(){ln(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},$n.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},$n.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},$n.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){ln(e===Uu.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Uu.All&&i.timerId===e)break}return t.drain()})},$n.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},$n.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);ln(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},$n),oc="",ac="",sc="",uc="",cc=(rr.now=function(){return rr.fromMillis(Date.now())},rr.fromDate=function(e){return rr.fromMillis(e.getTime())},rr.fromMillis=function(e){var t=Math.floor(e/1e3);return new rr(t,1e6*(e-1e3*t))},rr.prototype.toDate=function(){return new Date(this.toMillis())},rr.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},rr.prototype._compareTo=function(e){return this.seconds===e.seconds?Bn(this.nanoseconds,e.nanoseconds):Bn(this.seconds,e.seconds)},rr.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},rr.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},rr),lc=(ir.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new ir(new cc(t,e%1e6*1e3))},ir.fromTimestamp=function(e){return new ir(e)},ir.forDeletedDoc=function(){return ir.MIN},ir.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},ir.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},ir.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},ir.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},ir.prototype.toTimestamp=function(){return this.timestamp},ir.MIN=new ir(new cc(0,0)),ir),hc=(or.prototype.insert=function(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dc.BLACK,null,null))},or.prototype.remove=function(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dc.BLACK,null,null))},or.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},or.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},or.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(or.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),or.prototype.minKey=function(){return this.root.minKey()},or.prototype.maxKey=function(){return this.root.maxKey()},or.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},or.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},or.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},or.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},or.prototype.getIterator=function(){return new fc(this.root,null,this.comparator,!1)},or.prototype.getIteratorFrom=function(e){return new fc(this.root,e,this.comparator,!1)},or.prototype.getReverseIterator=function(){return new fc(this.root,null,this.comparator,!0)},or.prototype.getReverseIteratorFrom=function(e){return new fc(this.root,e,this.comparator,!0)},or),fc=(ar.prototype.getNext=function(){ln(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},ar.prototype.hasNext=function(){return 0<this.nodeStack.length},ar.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},ar),dc=(sr.prototype.copy=function(e,t,n,r,i){return new sr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},sr.prototype.isEmpty=function(){return!1},sr.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},sr.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},sr.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},sr.prototype.minKey=function(){return this.min().key},sr.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},sr.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},sr.prototype.removeMin=function(){if(this.left.isEmpty())return sr.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},sr.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return sr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},sr.prototype.isRed=function(){return this.color},sr.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},sr.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},sr.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},sr.prototype.rotateLeft=function(){var e=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},sr.prototype.rotateRight=function(){var e=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},sr.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},sr.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},sr.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw cn("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw cn("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw cn("Black depths differ");return e+(this.isRed()?0:1)},sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1,sr),pc=(Object.defineProperty(ur.prototype,"key",{get:function(){throw cn("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(ur.prototype,"value",{get:function(){throw cn("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(ur.prototype,"color",{get:function(){throw cn("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(ur.prototype,"left",{get:function(){throw cn("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(ur.prototype,"right",{get:function(){throw cn("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0
}),ur.prototype.copy=function(e,t,n,r,i){return this},ur.prototype.insert=function(e,t,n){return new dc(e,t)},ur.prototype.remove=function(e,t){return this},ur.prototype.isEmpty=function(){return!0},ur.prototype.inorderTraversal=function(e){return!1},ur.prototype.reverseTraversal=function(e){return!1},ur.prototype.minKey=function(){return null},ur.prototype.maxKey=function(){return null},ur.prototype.isRed=function(){return!1},ur.prototype.checkMaxDepth=function(){return!0},ur.prototype.check=function(){return 0},ur);dc.EMPTY=new pc;var mc,gc,yc=(cr.fromMapKeys=function(e){var t=new cr(e.comparator);return e.forEach(function(e){t=t.add(e)}),t},cr.prototype.has=function(e){return null!==this.data.get(e)},cr.prototype.first=function(){return this.data.minKey()},cr.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(cr.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),cr.prototype.indexOf=function(e){return this.data.indexOf(e)},cr.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},cr.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},cr.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},cr.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},cr.prototype.getIterator=function(){return new vc(this.data.getIterator())},cr.prototype.getIteratorFrom=function(e){return new vc(this.data.getIteratorFrom(e))},cr.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},cr.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},cr.prototype.isEmpty=function(){return this.data.isEmpty()},cr.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},cr.prototype.isEqual=function(e){if(!(e instanceof cr))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},cr.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},cr.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},cr.prototype.copy=function(e){var t=new cr(this.comparator);return t.data=e,t},cr),vc=(lr.prototype.getNext=function(){return this.iter.getNext().key},lr.prototype.hasNext=function(){return this.iter.hasNext()},lr),bc=new hc(tc.comparator),wc=new hc(tc.comparator),_c=new hc(tc.comparator),Ec=new yc(tc.comparator),Sc=new yc(Bn),Tc=(yr.prototype.applyToRemoteDocument=function(e,t,n){t&&ln(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;ln(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},yr.prototype.applyToLocalView=function(e,t){t&&ln(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},yr.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},yr.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},mr())},yr.prototype.isEqual=function(e){return this.batchId===e.batchId&&qn(this.mutations,e.mutations)&&qn(this.baseMutations,e.baseMutations)},yr),Cc=(vr.from=function(e,t,n,r){ln(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=pr(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new vr(e,t,n,r,i)},vr),Ic=(br.prototype.catch=function(e){return this.next(void 0,e)},br.prototype.next=function(e,t){var n=this;return this.callbackAttached&&cn("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new br(function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}})},br.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},br.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof br?t:br.resolve(t)}catch(e){return br.reject(e)}},br.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):br.resolve(t)},br.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):br.reject(t)},br.resolve=function(e){return new br(function(t,n){t(e)})},br.reject=function(e){return new br(function(t,n){n(e)})},br.waitFor=function(e){return new br(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(e){return n(e)})}),o=!0,i===r&&t()})},br.or=function(e){for(var t=br.resolve(!1),n=function(e){t=t.next(function(t){return t?br.resolve(t):e()})},r=0,i=e;r<i.length;r++)n(i[r]);return t},br.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},br),kc=(wr.forUser=function(e,t,n,r){return ln(""!==e.uid,"UserID must not be an empty string."),new wr(e.isAuthenticated()?e.uid:"",t,n,r)},wr.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tr(e).iterate({index:rl.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},wr.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Sr(n),Ir(e).put(t)})},wr.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},wr.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=Sr(t),Ir(e).put(n)})},wr.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Cr(e),a=Tr(e);return a.add({}).next(function(s){ln("number"==typeof s,"Auto-generated key is not a number");var u=new Tc(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],h=0,f=r;h<f.length;h++){var d=f[h],p=il.key(i.userId,d.key.path,s);l.push(a.put(c)),l.push(o.put(p,il.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(e,d.key.path.popLast()))}return Ic.waitFor(l).next(function(){return u})})},wr.prototype.lookupMutationBatch=function(e,t){var n=this;return Tr(e).get(t).next(function(e){return e?(ln(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},wr.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ic.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null})},wr.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Tr(e).iterate({index:rl.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(ln(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()}).next(function(){return o})},wr.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Tr(e).iterate({index:rl.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},wr.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tr(e).loadAll(rl.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},wr.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=il.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Cr(e).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=nr(u);return s===n.userId&&t.path.isEqual(l)?Tr(e).get(c).next(function(e){if(!e)throw cn("Dangling document-mutation reference found: "+r+" which points to "+c);ln(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}):void a.done()}).next(function(){return o})},wr.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new yc(Bn),i=[];return t.forEach(function(t){var o=il.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Cr(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=nr(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),Ic.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},wr.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;ln(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),ln(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=il.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new yc(Bn);return Cr(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=nr(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(e,s)})},wr.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Tr(e).get(t).next(function(e){if(null===e)throw cn("Dangling document-mutation reference found, which points to "+t);ln(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),Ic.waitFor(i).next(function(){return r})},wr.prototype.removeMutationBatch=function(e,t){var n=this;return Er(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),Ic.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},wr.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},wr.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Ic.resolve();var r=IDBKeyRange.lowerBound(il.prefixForUser(t.userId)),i=[];return Cr(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var o=nr(e[1]);i.push(o)}else r.done()}).next(function(){ln(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},wr.prototype.containsKey=function(e,t){return _r(e,this.userId,t)},wr.prototype.getMutationQueueMetadata=function(e){var t=this;return Ir(e).get(this.userId).next(function(e){return e||new nl(t.userId,-1,"")})},wr);(gc=mc=mc||{})[gc.QueryCache=0]="QueryCache",gc[gc.SyncEngine=1]="SyncEngine";var Nc,Ac,Dc,xc,Rc,Pc,Oc=(kr.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},kr.prototype.after=function(e){return this.seek(e+2),this.next()},kr.prototype.seek=function(e){ln((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},kr.forQueryCache=function(){return new kr(mc.QueryCache,2)},kr.forSyncEngine=function(){return new kr(mc.SyncEngine)},kr),Mc="SimpleDb",Lc=(Nr.openOrCreate=function(e,t,n){return ln(Nr.isAvailable(),"IndexedDB not supported in current environment."),an(Mc,"Opening database:",e),new Ic(function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new Nr(t))},o.onblocked=function(){i(new ju(Vu.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;i("VersionError"===t.name?new ju(Vu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},o.onupgradeneeded=function(t){an(Mc,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result,i=new Uc(o.transaction);n.createOrUpgrade(r,i,t.oldVersion,$c).next(function(){an(Mc,"Database upgrade to version "+$c+" complete")})}}).toPromise()},Nr.delete=function(e){return an(Mc,"Removing database:",e),Rr(window.indexedDB.deleteDatabase(e)).toPromise()},Nr.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"==={NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}.USE_MOCK_PERSISTENCE;var e=s(),t=Nr.getIOSVersion(e),n=0<t&&t<10,r=Nr.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},Nr.getStore=function(e,t){return e.store(t)},Nr.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Nr.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Nr.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},Nr.prototype.runTransaction=function(e,t,n){var r=Uc.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),Ic.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},Nr.prototype.close=function(){this.db.close()},Nr),Fc=(Object.defineProperty(Ar.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Ar.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Ar.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),Ar.prototype.done=function(){this.shouldStop=!0},Ar.prototype.skip=function(e){this.nextKey=e},Ar.prototype.delete=function(){return Rr(this.dbCursor.delete())},Ar),Uc=(Dr.open=function(e,t,n){return new Dr(e.transaction(n,t))},Object.defineProperty(Dr.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Dr.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(an(Mc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Dr.prototype.store=function(e){var t=this.transaction.objectStore(e);return ln(!!t,"Object store not part of transaction: "+e),new Bc(t)},Dr),Bc=(xr.prototype.put=function(e,t){return Rr(void 0!==t?(an(Mc,"PUT",this.store.name,e,t),this.store.put(t,e)):(an(Mc,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},xr.prototype.add=function(e){return an(Mc,"ADD",this.store.name,e,e),Rr(this.store.add(e))},xr.prototype.get=function(e){var t=this;return Rr(this.store.get(e)).next(function(n){return void 0===n&&(n=null),an(Mc,"GET",t.store.name,e,n),n})},xr.prototype.delete=function(e){return an(Mc,"DELETE",this.store.name,e),Rr(this.store.delete(e))},xr.prototype.count=function(){return an(Mc,"COUNT",this.store.name),Rr(this.store.count())},xr.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},xr.prototype.deleteAll=function(e,t){an(Mc,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},xr.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},xr.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ic(function(n,r){t.onerror=function(e){var t=Pr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},xr.prototype.iterateCursor=function(e,t){var n=[];return new Ic(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Fc(i),a=t(i.primaryKey,i.value,o);if(a instanceof Ic){var s=a.catch(function(e){return o.done(),Ic.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Ic.waitFor(n)})},xr.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(ln(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},xr.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},xr),qc=!1,Vc=(Or.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},Or.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return lc.fromTimestamp(new cc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},Or.prototype.getHighestSequenceNumber=function(e){return Fr(e.simpleDbTransaction)},Or.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},Or.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},Or.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},Or.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Mr(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return ln(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},Or.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Mr(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return Ic.waitFor(o)}).next(function(){return i})},Or.prototype.forEachTarget=function(e,t){var n=this;return Mr(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},Or.prototype.retrieveMetadata=function(e){return Lr(e.simpleDbTransaction)},Or.prototype.saveMetadata=function(e,t){return function(e){return Pl.getStore(e,hl.store)}(e).put(hl.key,t)},Or.prototype.saveQueryData=function(e,t){return Mr(e).put(this.serializer.toDbTarget(t))},Or.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},Or.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},Or.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Mr(e).iterate({range:i,index:cl.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},Or.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Ur(e);return t.forEach(function(t){var a=Zn(t.path);i.push(o.put(new ll(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),Ic.waitFor(i)},Or.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Ur(e);return Ic.forEach(t,function(t){var o=Zn(t.path);return Ic.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},Or.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Ur(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},Or.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ur(e),i=mr();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=nr(e[1]),o=new tc(r);i=i.add(o)}).next(function(){return i})},Or.prototype.containsKey=function(e,t){var n=Zn(t.path),r=IDBKeyRange.bound([n],[Vn(n)],!1,!0),i=0;return Ur(e).iterate({index:ll.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},Or.prototype.getQueryDataForTarget=function(e,t){var n=this;return Mr(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},Or),jc=(Br.compareByKey=function(e,t){return tc.comparator(e.key,t.key)},Br),Wc=(i(qr,Nc=jc),qr.prototype.field=function(e){return this.data.field(e)},qr.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},qr.prototype.value=function(){return this.data.value()},qr.prototype.isEqual=function(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},qr.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(qr.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),qr.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):cn("Trying to compare documents on fields that don't exist")},qr),Kc=(i(Vr,Ac=jc),Vr.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Vr.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Vr.prototype.isEqual=function(e){return e instanceof Vr&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Vr),Qc=(i(jr,Dc=jc),jr.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(jr.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),jr.prototype.isEqual=function(e){return e instanceof jr&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},jr),Gc=(Wr.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},Wr.prototype.has=function(e){return void 0!==this.get(e)},Wr.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},Wr.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},Wr.prototype.forEach=function(e){vn(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},Wr.prototype.isEmpty=function(){return bn(this.inner)},Wr),zc=(Kr.prototype.addEntry=function(e){this.assertNotApplied(),this.changes.set(e.key,e)},Kr.prototype.removeEntry=function(e){this.assertNotApplied(),this.changes.set(e,null)},Kr.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ic.resolve(n):this.getFromCache(e,t)},Kr.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},Kr.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},Kr.prototype.assertNotApplied=function(){ln(!this.changesApplied,"Changes have already been applied.")},Kr),Hc="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Yc=(Object.defineProperty(Qr.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),Qr.prototype.start=function(e){var t=Lc.getStore(e,dl.store);return this.synchronizeLastDocumentChangeId(t)},Qr.prototype.addEntry=function(e,t,n){var r=this;return Hr(e).put(Xr(t),n).next(function(){r.indexManager.addToCollectionParentIndex(e,t.path.popLast())})},Qr.prototype.removeEntry=function(e,t){var n=Hr(e),r=Xr(t);return n.delete(r)},Qr.prototype.updateMetadata=function(e,t,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.setMetadata(e,i).next(function(){if(r.keepDocumentChangeLog)return Yr(e).put({changes:r.serializer.toDbResourcePaths(t)})})})},Qr.prototype.getEntry=function(e,t){var n=this;return Hr(e).get(Xr(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},Qr.prototype.getSizedEntry=function(e,t){var n=this;return Hr(e).get(Xr(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Jr(e)}:null})},Qr.prototype.getEntries=function(e,t){var n=this,r=fr();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},Qr.prototype.getSizedEntries=function(e,t){var n=this,r=fr(),i=new hc(tc.comparator);return this.forEachDbEntry(e,t,function(e,t){i=t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i.insert(e,Jr(t))):(r=r.insert(e,null),i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},Qr.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ic.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Hr(e).iterate({range:r},function(e,t,r){for(var a=tc.fromSegments(e);o&&tc.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},Qr.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;ln(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=dr(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return Hr(e).iterate({range:a},function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof Wc&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},Qr.prototype.getNewDocumentChanges=function(e){var t=this;ln(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=mr(),r=hr(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Yr(e);return a.iterate({range:i},function(e,r){return o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id)?t.synchronizeLastDocumentChangeId(a).next(function(){return Ic.reject(new ju(Vu.DATA_LOSS,Hc))}):(n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),void(t._lastProcessedDocumentChangeId=r.id))}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new Kc(n,lc.forDeletedDoc());r=r.insert(n,t)}))}),Ic.waitFor(i)}).next(function(){return r})},Qr.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Yr(e).delete(n)},Qr.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},Qr.prototype.newChangeBuffer=function(){return new Qr.RemoteDocumentChangeBuffer(this)},Qr.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},Qr.prototype.getMetadata=function(e){return zr(e).get(ul.key).next(function(e){return ln(!!e,"Missing document cache metadata"),e})},Qr.prototype.setMetadata=function(e,t){return zr(e).put(ul.key,t)},Qr.RemoteDocumentChangeBuffer=(i(Gr,xc=zc),Gr.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=mr();return this.changes.forEach(function(o,a){var s=t.documentSizes.get(o);if(ln(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){var u=t.documentCache.serializer.toDbRemoteDocument(a),c=Jr(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else r-=s,n.push(t.documentCache.removeEntry(e,o));i=i.add(o)}),n.push(this.documentCache.updateMetadata(e,i,r)),Ic.waitFor(n)},Gr.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},Gr.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},Gr),Qr),Xc=($r.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ic.resolve()},$r.prototype.getCollectionParents=function(e,t){return Ic.resolve(this.collectionParentIndex.getEntries(t))},$r),Jc=(Zr.prototype.add=function(e){ln(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yc($u.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},Zr.prototype.getEntries=function(e){return(this.index[e]||new yc($u.comparator)).toArray()},Zr),$c=8,Zc=(ei.prototype.createOrUpgrade=function(e,t,n,r){var i=this;ln(n<r&&0<=n&&r<=$c,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&1<=r&&(function(e){e.createObjectStore(tl.store)}(e),function(e){e.createObjectStore(nl.store,{keyPath:nl.keyPath}),e.createObjectStore(rl.store,{keyPath:rl.keyPath,autoIncrement:!0}).createIndex(rl.userMutationsIndex,rl.userMutationsKeyPath,{unique:!0}),e.createObjectStore(il.store)}(e),hi(e),function(e){e.createObjectStore(sl.store)}(e));var o=Ic.resolve();return n<3&&3<=r&&(0!==n&&(function(e){e.deleteObjectStore(ll.store),e.deleteObjectStore(cl.store),e.deleteObjectStore(hl.store)}(e),hi(e)),o=o.next(function(){return function(e){var t=e.store(hl.store),n=new hl(0,0,lc.MIN.toTimestamp(),0);return t.put(hl.key,n)}(t)})),n<4&&4<=r&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store(rl.store).loadAll().next(function(n){e.deleteObjectStore(rl.store),e.createObjectStore(rl.store,{keyPath:rl.keyPath,autoIncrement:!0}).createIndex(rl.userMutationsIndex,rl.userMutationsKeyPath,{unique:!0});var r=t.store(rl.store),i=n.map(function(e){return r.put(e)});return Ic.waitFor(i)})}(e,t)})),o=o.next(function(){!function(e){e.createObjectStore(pl.store,{keyPath:pl.keyPath})}(e),function(e){e.createObjectStore(dl.store,{keyPath:"id",autoIncrement:!0})}(e)})),n<5&&5<=r&&(o=o.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&6<=r&&(o=o.next(function(){return function(e){e.createObjectStore(ul.store)}(e),i.addDocumentGlobal(t)})),n<7&&7<=r&&(o=o.next(function(){return i.ensureSequenceNumbers(t)})),n<8&&8<=r&&(o=o.next(function(){
return i.createCollectionParentIndex(e,t)})),o},ei.prototype.addDocumentGlobal=function(e){var t=0;return e.store(sl.store).iterate(function(e,n){t+=Jr(n)}).next(function(){var n=new ul(t);return e.store(ul.store).put(ul.key,n)})},ei.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(nl.store),r=e.store(rl.store);return n.loadAll().next(function(n){return Ic.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(rl.userMutationsIndex,i).next(function(r){return Ic.forEach(r,function(r){ln(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Er(e,n.userId,i).next(function(){})})})})})},ei.prototype.ensureSequenceNumbers=function(e){var t=e.store(ll.store),n=e.store(sl.store);return Fr(e).next(function(e){var r=[];return n.iterate(function(n,i){var o=new $u(n),a=function(e){return[0,Zn(e)]}(o);r.push(t.get(a).next(function(n){return n?Ic.resolve():function(n){return t.put(new ll(0,Zn(n),e))}(o)}))}).next(function(){return Ic.waitFor(r)})})},ei.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Zn(n)})}}e.createObjectStore(fl.store,{keyPath:fl.keyPath});var r=t.store(fl.store),i=new Jc;return t.store(sl.store).iterate({keysOnly:!0},function(e,t){var r=new $u(e);return n(r.popLast())}).next(function(){return t.store(il.store).iterate({keysOnly:!0},function(e,t){e[0];var r=e[1],i=(e[2],nr(r));return n(i.popLast())})})},ei),el=function(e,t){this.seconds=e,this.nanoseconds=t},tl=(ti.store="owner",ti.key="owner",ti),nl=(ni.store="mutationQueues",ni.keyPath="userId",ni),rl=(ri.store="mutations",ri.keyPath="batchId",ri.userMutationsIndex="userMutationsIndex",ri.userMutationsKeyPath=["userId","batchId"],ri),il=(ii.prefixForUser=function(e){return[e]},ii.prefixForPath=function(e,t){return[e,Zn(t)]},ii.key=function(e,t,n){return[e,Zn(t),n]},ii.store="documentMutations",ii.PLACEHOLDER=new ii,ii),ol=function(e,t){this.path=e,this.readTime=t},al=function(e,t){this.path=e,this.version=t},sl=(oi.store="remoteDocuments",oi),ul=(ai.store="remoteDocumentGlobal",ai.key="remoteDocumentGlobalKey",ai),cl=(si.store="targets",si.keyPath="targetId",si.queryTargetsIndexName="queryTargetsIndex",si.queryTargetsKeyPath=["canonicalId","targetId"],si),ll=(ui.store="targetDocuments",ui.keyPath=["targetId","path"],ui.documentTargetsIndex="documentTargetsIndex",ui.documentTargetsKeyPath=["path","targetId"],ui),hl=(ci.key="targetGlobalKey",ci.store="targetGlobal",ci),fl=(li.store="collectionParents",li.keyPath=["collectionId","parent"],li),dl=(fi.store="remoteDocumentChanges",fi.keyPath="id",fi),pl=(di.store="clientMetadata",di.keyPath="clientId",di),ml=[nl.store,rl.store,il.store,sl.store,cl.store,tl.store,hl.store,ll.store].concat([pl.store,dl.store]).concat([ul.store]).concat([fl.store]),gl=(pi.prototype.addToCollectionParentIndex=function(e,t){if(ln(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(t)){ln(1<=t.length,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return mi(e).put({collectionId:n,parent:Zn(r)})}return Ic.resolve()},pi.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Vn(t),""],!1,!0);return mi(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(nr(o.parent))}return n})},pi);(Pc=Rc=Rc||{})[Pc.Listen=0]="Listen",Pc[Pc.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Pc[Pc.LimboResolution=2]="LimboResolution";var yl,vl,bl,wl,_l,El=(gi.prototype.copy=function(e){return new gi(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},gi.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},gi),Sl=(yi.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=tc.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Kc(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=tc.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Qc(t,n)):cn("Unexpected DbRemoteDocument")},yi.prototype.toDbRemoteDocument=function(e){if(e instanceof Wc){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new sl(null,null,t,n)}if(e instanceof Kc){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return n=e.hasCommittedMutations,new sl(null,new ol(r,i),null,n)}return e instanceof Qc?(r=e.key.path.toArray(),i=this.toDbTimestamp(e.version),new sl(new al(r,i),null,null,!0)):cn("Unexpected MaybeDocumment")},yi.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new el(t.seconds,t.nanoseconds)},yi.prototype.fromDbTimestamp=function(e){var t=new cc(e.seconds,e.nanoseconds);return lc.fromTimestamp(t)},yi.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new rl(e,t.batchId,t.localWriteTime.toMillis(),r,i)},yi.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=cc.fromMillis(e.localWriteTimeMs);return new Tc(e.batchId,i,n,r)},yi.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(Zn(e.path))}),t},yi.prototype.fromDbResourcePaths=function(e){for(var t=mr(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new tc(nr(i)))}return t},yi.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=function(e){return void 0!==e.documents}(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new El(t,e.targetId,Rc.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},yi.prototype.toDbTarget=function(e){ln(Rc.Listen===e.purpose,"Only queries with purpose "+Rc.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),n=e.resumeToken instanceof Uint8Array?(ln("YES"==={NODE_ENV:"production",PUBLIC_URL:"/GDL003-lab-notes"}.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new cl(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},yi),Tl=(bi.prototype.nextIndex=function(){return++this.previousIndex},bi.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();vi(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(bi.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),bi),Cl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Il=(wi.withCacheSize=function(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},wi.COLLECTION_DISABLED=-1,wi.MINIMUM_CACHE_SIZE_BYTES=1048576,wi.DEFAULT=new wi(wi.DEFAULT_CACHE_SIZE_BYTES=41943040,wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),wi.DISABLED=new wi(wi.COLLECTION_DISABLED,0,0),wi),kl=(_i.prototype.start=function(){ln(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Il.COLLECTION_DISABLED&&this.scheduleGC()},_i.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(_i.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),_i.prototype.scheduleGC=function(){var e=this;ln(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;an("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Uu.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(Ci)})},_i),Nl=(Ei.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},Ei.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ic.resolve(Yu.INVALID);var r=new Tl(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},Ei.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},Ei.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},Ei.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Il.COLLECTION_DISABLED?(an("LruGarbageCollector","Garbage collection skipped; disabled"),Ic.resolve(Cl)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(an("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cl):n.runGarbageCollection(e,t)})},Ei.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},Ei.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(an("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),rn()<=Cu.DEBUG&&an("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Ic.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})},Ei),Al="IndexedDbPersistence",Dl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xl="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Rl=(i(Si,yl=function(){}),Si),Pl=(Ti.getStore=function(e,t){if(e instanceof Rl)return Lc.getStore(e.simpleDbTransaction,t);throw cn("IndexedDbPersistence must use instances of IndexedDbTransaction")},Ti.createIndexedDbPersistence=function(e,t,n,r,i,s){return o(this,void 0,void 0,function(){var o;return a(this,function(a){switch(a.label){case 0:return[4,(o=new Ti(e,t,n,r,i,s)).start()];case 1:return a.sent(),[2,o]}})})},Ti.createMultiClientIndexedDbPersistence=function(e,t,n,r,i,s,u){return o(this,void 0,void 0,function(){var o;return a(this,function(a){switch(a.label){case 0:return[4,(o=new Ti(e,t,n,r,i,s,u)).start()];case 1:return a.sent(),[2,o]}})})},Ti.prototype.start=function(){var e=this;return ln(!this.started,"IndexedDbPersistence double-started!"),ln(null!==this.window,"Expected 'window' to be defined"),Lc.openOrCreate(this.dbName,$c,new Zc(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[hl.store],function(t){return Fr(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new Yu(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},Ti.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",ml,function(t){return e.remoteDocumentCache.start(t)})},Ti.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return o(t,void 0,void 0,function(){return a(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},Ti.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return o(t,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},Ti.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return o(t,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},Ti.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",ml,function(t){return ki(t).put(new pl(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},Ti.prototype.verifyPrimaryLease=function(e){var t=this;return Ii(e).get(tl.key).next(function(e){return Ic.resolve(t.isLocalClient(e))})},Ti.prototype.removeClientMetadata=function(e){return ki(e).delete(this.clientId)},Ti.prototype.maybeGarbageCollectMultiClientState=function(){return o(this,void 0,void 0,function(){var e,t,n=this;return a(this,function(r){switch(r.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),t=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(r){var i=Ti.getStore(r,pl.store);return i.loadAll().next(function(r){e=n.filterActiveClients(r,18e5),t=r.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return Ic.forEach(t,function(e){return i.delete(e.clientId)})}).next(function(){if(0<(e=e.filter(function(e){return e.clientId!==n.clientId})).length){var t=e.map(function(e){return e.lastProcessedDocumentChangeId||0}),i=Math.min.apply(Math,t);return n.remoteDocumentCache.removeDocumentChangesThroughChangeId(r,i)}})})]);case 1:r.sent(),t.forEach(function(e){n.window.localStorage.removeItem(n.zombiedClientLocalStorageKey(e.clientId))}),r.label=2;case 2:return[2]}})})},Ti.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Uu.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},Ti.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},Ti.prototype.canActAsPrimary=function(e){var t=this;return Ii(e).get(tl.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new ju(Vu.FAILED_PRECONDITION,xl);return!1}}return!(!t.networkEnabled||!t.inForeground)||ki(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&an(Al,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},Ti.prototype.shutdown=function(){return o(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[tl.store,pl.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},Ti.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},Ti.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[pl.store],function(t){return ki(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},Ti.clearPersistence=function(e){return o(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return Ti.isAvailable()?(t=e+Ti.MAIN_DATABASE,[4,Lc.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(Ti.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Ti.prototype.getMutationQueue=function(e){return ln(this.started,"Cannot initialize MutationQueue before persistence is started."),kc.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},Ti.prototype.getQueryCache=function(){return ln(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},Ti.prototype.getRemoteDocumentCache=function(){return ln(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},Ti.prototype.getIndexManager=function(){return ln(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},Ti.prototype.runTransaction=function(e,t,n){var r=this;return an(Al,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",ml,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw sn("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new ju(Vu.FAILED_PRECONDITION,Dl);return n(new Rl(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Rl(i,r.listenSequence.next()))})})},Ti.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Ii(e).get(tl.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new ju(Vu.FAILED_PRECONDITION,xl)})},Ti.prototype.acquireOrExtendPrimaryLease=function(e){var t=new tl(this.clientId,this.allowTabSynchronization,Date.now());return Ii(e).put(tl.key,t)},Ti.isAvailable=function(){return Lc.isAvailable()},Ti.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},Ti.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Ii(e);return n.get(tl.key).next(function(e){return t.isLocalClient(e)?(an(Al,"Releasing primary lease."),n.delete(tl.key)):Ic.resolve()})},Ti.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(sn("Detected an update time that is in the future: "+e+" > "+n),1))},Ti.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},Ti.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(ln(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},Ti.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},Ti.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(ln("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},Ti.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return an(Al,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return sn(Al,"Failed to get zombied client id.",e),!1}},Ti.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){sn("Failed to set zombie client id.",e)}},Ti.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},Ti.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},Ti.MAIN_DATABASE="main",Ti),Ol=(Ni.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},Ni.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},Ni.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},Ni.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},Ni.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Ni.prototype.addReference=function(e,t){return Ai(e,t)},Ni.prototype.removeReference=function(e,t){return Ai(e,t)},Ni.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},Ni.prototype.removeMutationReference=function(e,t){return Ai(e,t)},Ni.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ic.resolve(!0):function(e,t){var n=!1;return Ir(e).iterateSerial(function(r){return _r(e,r,t).next(function(e){return e&&(n=!0),Ic.resolve(!e)})}).next(function(){return n})}(e,t)},Ni.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return o++,r.getEntry(e,a).next(function(){return r.removeEntry(a),Ur(e).delete(function(e){return[0,Zn(e.path)]}(a))})});i.push(u)}}).next(function(){return Ic.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})},Ni.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},Ni.prototype.updateLimboDocument=function(e,t){return Ai(e,t)},Ni.prototype.forEachOrphanedDocument=function(e,t){var n,r=Ur(e),i=Yu.INVALID;return r.iterate({index:ll.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Yu.INVALID&&t(new tc(nr(n)),i),i=s,n=a):i=Yu.INVALID}).next(function(){i!==Yu.INVALID&&t(new tc(nr(n)),i)})},Ni.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},Ni);(bl=vl=vl||{})[bl.NullValue=0]="NullValue",bl[bl.BooleanValue=1]="BooleanValue",bl[bl.NumberValue=2]="NumberValue",bl[bl.TimestampValue=3]="TimestampValue",bl[bl.StringValue=4]="StringValue",bl[bl.BlobValue=5]="BlobValue",bl[bl.RefValue=6]="RefValue",bl[bl.GeoPointValue=7]="GeoPointValue",bl[bl.ArrayValue=8]="ArrayValue",bl[bl.ObjectValue=9]="ObjectValue",(_l=wl=wl||{})[_l.Default=0]="Default",_l[_l.Estimate=1]="Estimate",_l[_l.Previous=2]="Previous";var Ml,Ll,Fl,Ul,Bl,ql,Vl,jl,Wl,Kl,Ql,Gl,zl,Hl,Yl,Xl=(Di.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Di(wl.Estimate,t);case"previous":return new Di(wl.Previous,t);case"none":case void 0:return new Di(wl.Default,t);default:return cn("fromSnapshotOptions() called with invalid options.")}},Di),Jl=(xi.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},xi.prototype.defaultCompareTo=function(e){return ln(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Bn(this.typeOrder,e.typeOrder)},xi),$l=(i(Ri,Ml=Jl),Ri.prototype.value=function(e){return null},Ri.prototype.isEqual=function(e){return e instanceof Ri},Ri.prototype.compareTo=function(e){return e instanceof Ri?0:this.defaultCompareTo(e)},Ri.INSTANCE=new Ri,Ri),Zl=(i(Pi,Ll=Jl),Pi.prototype.value=function(e){return this.internalValue},Pi.prototype.isEqual=function(e){return e instanceof Pi&&this.internalValue===e.internalValue},Pi.prototype.compareTo=function(e){return e instanceof Pi?Bn(this,e):this.defaultCompareTo(e)},Pi.of=function(e){return e?Pi.TRUE:Pi.FALSE},Pi.TRUE=new Pi(!0),Pi.FALSE=new Pi(!1),Pi),eh=(i(Oi,Fl=Jl),Oi.prototype.value=function(e){return this.internalValue},Oi.prototype.compareTo=function(e){return e instanceof Oi?function(e,t){return e<t?-1:t<e?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Oi),th=(i(Li,Ul=eh),Li.prototype.isEqual=function(e){return e instanceof Li&&Mi(this.internalValue,e.internalValue)},Li),nh=(i(Fi,Bl=eh),Fi.prototype.isEqual=function(e){return e instanceof Fi&&Mi(this.internalValue,e.internalValue)},Fi.NAN=new Fi(NaN),Fi.POSITIVE_INFINITY=new Fi(1/0),Fi.NEGATIVE_INFINITY=new Fi(-1/0),Fi),rh=(i(Ui,ql=Jl),Ui.prototype.value=function(e){return this.internalValue},Ui.prototype.isEqual=function(e){return e instanceof Ui&&this.internalValue===e.internalValue},Ui.prototype.compareTo=function(e){return e instanceof Ui?Bn(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Ui),ih=(i(Bi,Vl=Jl),Bi.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},Bi.prototype.isEqual=function(e){return e instanceof Bi&&this.internalValue.isEqual(e.internalValue)},Bi.prototype.compareTo=function(e){return e instanceof Bi?this.internalValue._compareTo(e.internalValue):e instanceof oh?-1:this.defaultCompareTo(e)},Bi),oh=(i(qi,jl=Jl),qi.prototype.value=function(e){return e&&e.serverTimestampBehavior===wl.Estimate?new ih(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===wl.Previous&&this.previousValue?this.previousValue.value(e):null},qi.prototype.isEqual=function(e){return e instanceof qi&&this.localWriteTime.isEqual(e.localWriteTime)},qi.prototype.compareTo=function(e){return e instanceof qi?this.localWriteTime._compareTo(e.localWriteTime):e instanceof ih?1:this.defaultCompareTo(e)},qi.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},qi),ah=(i(Vi,Wl=Jl),Vi.prototype.value=function(e){return this.internalValue},Vi.prototype.isEqual=function(e){return e instanceof Vi&&this.internalValue.isEqual(e.internalValue)},Vi.prototype.compareTo=function(e){return e instanceof Vi?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Vi),sh=(i(ji,Kl=Jl),ji.prototype.value=function(e){return this.key},ji.prototype.isEqual=function(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},ji.prototype.compareTo=function(e){if(e instanceof ji){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:tc.comparator(this.key,e.key)}return this.defaultCompareTo(e)},ji),uh=(i(Wi,Ql=Jl),Wi.prototype.value=function(e){return this.internalValue},Wi.prototype.isEqual=function(e){return e instanceof Wi&&this.internalValue.isEqual(e.internalValue)},Wi.prototype.compareTo=function(e){return e instanceof Wi?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Wi),ch=(i(Ki,Gl=Jl),Ki.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},Ki.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},Ki.prototype.isEqual=function(e){if(e instanceof Ki){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},Ki.prototype.compareTo=function(e){if(e instanceof Ki){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=Bn(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return Bn(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},Ki.prototype.set=function(e,t){if(ln(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof Ki||(n=Ki.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},Ki.prototype.delete=function(e){if(ln(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new Ki(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof Ki){var n=t.delete(e.popFirst());return new Ki(this.internalValue.insert(e.firstSegment(),n))}return this},Ki.prototype.contains=function(e){return null!==this.field(e)},Ki.prototype.field=function(e){ln(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach(function(e){t=t instanceof Ki?t.internalValue.get(e):null}),t},Ki.prototype.fieldMask=function(){var e=new yc(ec.comparator);return this.internalValue.forEach(function(t,n){var r=new ec([t]);if(n instanceof Ki){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach(function(t){e=e.add(r.child(t))})}else e=e.add(r)}),hh.fromSet(e)},Ki.prototype.toString=function(){return this.internalValue.toString()},Ki.prototype.child=function(e){return this.internalValue.get(e)||void 0},Ki.prototype.setChild=function(e,t){return new Ki(this.internalValue.insert(e,t))},Ki.EMPTY=new Ki(new hc(Bn)),Ki),lh=(i(Qi,zl=Jl),Qi.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},Qi.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},Qi.prototype.forEach=function(e){this.internalValue.forEach(e);
},Qi.prototype.isEqual=function(e){if(e instanceof Qi){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},Qi.prototype.compareTo=function(e){if(e instanceof Qi){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return Bn(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},Qi.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},Qi),hh=(Gi.fromSet=function(e){return new Gi(e)},Gi.fromArray=function(e){var t=new yc(ec.comparator);return e.forEach(function(e){return t=t.add(e)}),new Gi(t)},Gi.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},Gi.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},Gi),fh=(zi.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},zi),dh=function(e,t){this.version=e,this.transformResults=t};(Yl=Hl=Hl||{})[Yl.Set=0]="Set",Yl[Yl.Patch=1]="Patch",Yl[Yl.Transform=2]="Transform",Yl[Yl.Delete=3]="Delete";var ph,mh,gh,yh,vh,bh,wh,_h=(Hi.exists=function(e){return new Hi(void 0,e)},Hi.updateTime=function(e){return new Hi(e)},Object.defineProperty(Hi.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Hi.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Wc&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Wc:(ln(this.isNone,"Precondition should be empty"),!0)},Hi.prototype.isEqual=function(e){return function(e,t){return null!=e?!(!t||!e.isEqual(t)):e===t}(this.updateTime,e.updateTime)&&this.exists===e.exists},Hi.NONE=new Hi,Hi),Eh=(Yi.prototype.verifyKeyMatches=function(e){null!=e&&ln(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Yi.getPostMutationVersion=function(e){return e instanceof Wc?e.version:lc.MIN},Yi),Sh=(i(Xi,ph=Eh),Xi.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),ln(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Wc(this.key,n,this.value,{hasCommittedMutations:!0})},Xi.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Eh.getPostMutationVersion(e);return new Wc(this.key,r,this.value,{hasLocalMutations:!0})},Xi.prototype.extractBaseValue=function(e){return null},Xi.prototype.isEqual=function(e){return e instanceof Xi&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},Xi),Th=(i(Ji,mh=Eh),Ji.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),ln(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Qc(this.key,t.version);var n=this.patchDocument(e);return new Wc(this.key,t.version,n,{hasCommittedMutations:!0})},Ji.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Eh.getPostMutationVersion(e),i=this.patchDocument(e);return new Wc(this.key,r,i,{hasLocalMutations:!0})},Ji.prototype.extractBaseValue=function(e){return null},Ji.prototype.isEqual=function(e){return e instanceof Ji&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},Ji.prototype.patchDocument=function(e){var t;return t=e instanceof Wc?e.data:ch.EMPTY,this.patchObject(t)},Ji.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},Ji),Ch=(i($i,gh=Eh),$i.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),ln(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Qc(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data,r);return new Wc(this.key,i,o,{hasCommittedMutations:!0})},$i.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data,i);return new Wc(this.key,r.version,o,{hasLocalMutations:!0})},$i.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Wc?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?ch.EMPTY.set(i.field,a):t.set(i.field,a))}return t},$i.prototype.isEqual=function(e){return e instanceof $i&&this.key.isEqual(e.key)&&qn(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},$i.prototype.requireDocument=function(e){ln(e instanceof Wc,"Unknown MaybeDocument type "+e);var t=e;return ln(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},$i.prototype.serverTransformResults=function(e,t){var n=[];ln(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Wc&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},$i.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Wc&&(u=t.field(a.field)),null===u&&n instanceof Wc&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},$i.prototype.transformObject=function(e,t){ln(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},$i),Ih=(i(Zi,yh=Eh),Zi.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),ln(null==t.transformResults,"Transform results received by DeleteMutation."),new Kc(this.key,t.version,{hasCommittedMutations:!0})},Zi.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&ln(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Kc(this.key,lc.forDeletedDoc())):e},Zi.prototype.extractBaseValue=function(e){return null},Zi.prototype.isEqual=function(e){return e instanceof Zi&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Zi),kh=(eo.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},eo.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e})},eo.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=fr();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)}),r},eo.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},eo.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=hr();return i.forEach(function(e,t){t=t||new Kc(e,lc.forDeletedDoc()),o=o.insert(e,t)}),o})},eo.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},eo.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new tc(t)).next(function(e){var t=dr();return e instanceof Wc&&(t=t.insert(e.key,e)),t})},eo.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;ln(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=dr();return this.indexManager.getCollectionParents(e,r).next(function(o){return Ic.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},eo.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,i=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,i.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return r=t,i.addMissingBaseDocuments(e,r,n).next(function(e){n=e;for(var t=0,i=r;t<i.length;t++)for(var o=i[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof Wc?n.insert(c,h):n.remove(c)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},eo.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=mr(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Th&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof Wc&&(c=c.insert(e,t))}),c})},eo),Nh=(to.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},to.prototype.addReference=function(e,t){var n=new Ah(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},to.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},to.prototype.removeReference=function(e,t){this.removeRef(new Ah(e,t))},to.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},to.prototype.removeReferencesForId=function(e){var t=this,n=tc.EMPTY,r=new Ah(n,e),i=new Ah(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},to.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},to.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},to.prototype.referencesForId=function(e){var t=tc.EMPTY,n=new Ah(t,e),r=new Ah(t,e+1),i=mr();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},to.prototype.containsKey=function(e){var t=new Ah(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},to),Ah=(no.compareByKey=function(e,t){return tc.comparator(e.key,t.key)||Bn(e.targetOrBatchId,t.targetOrBatchId)},no.compareByTargetId=function(e,t){return Bn(e.targetOrBatchId,t.targetOrBatchId)||tc.comparator(e.key,t.key)},no),Dh=(ro.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new kh(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],a=mr(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d],o.push(c.batchId);for(var m=0,g=c.mutations;m<g.length;m++)f=g[m],a=a.add(f.key)}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},ro.prototype.localWrite=function(e){var t=this,n=cc.now(),r=e.reduce(function(e,t){return e.add(t.key)},mr());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=u.extractBaseValue(r.get(u.key));null!=c&&o.push(new Th(u.key,c,c.fieldMask(),_h.exists(!0)))}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},ro.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):Ic.resolve(null)})})},ro.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},ro.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return ln(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},ro.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},ro.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},ro.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},ro.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},ro.prototype.applyRemoteEvent=function(e){var t=this,n=this.remoteDocuments.newChangeBuffer(),r=e.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[];yn(e.targetChanges,function(e,n){var a=t.queryDataByTarget[e];if(a){o.push(t.queryCache.removeMatchingKeys(i,n.removedDocuments,e).next(function(){return t.queryCache.addMatchingKeys(i,n.addedDocuments,e)}));var s=n.resumeToken;if(0<s.length){var u=a.copy({resumeToken:s,snapshotVersion:r});t.queryDataByTarget[e]=u,ro.shouldPersistQueryData(a,u,n)&&o.push(t.queryCache.updateQueryData(i,u))}}});var a=hr(),s=mr();if(e.documentUpdates.forEach(function(e,t){s=s.add(e)}),o.push(n.getEntries(i,s).next(function(r){e.documentUpdates.forEach(function(s,u){var c=r.get(s);null==c||0<u.version.compareTo(c.version)||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(n.addEntry(u),a=a.insert(s,u)):u instanceof Kc&&u.version.isEqual(lc.MIN)?(n.removeEntry(s),a=a.insert(s,u)):an("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",u.version),e.resolvedLimboDocuments.has(s)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(i,s))})})),!r.isEqual(lc.MIN)){var u=t.queryCache.getLastRemoteSnapshotVersion(i).next(function(e){return ln(0<=r.compareTo(e),"Watch stream reverted to previous snapshot?? "+r+" < "+e),t.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,r)});o.push(u)}return Ic.waitFor(o).next(function(){return n.apply(i)}).next(function(){return t.localDocuments.getLocalViewOfDocuments(i,a)})})},ro.shouldPersistQueryData=function(e,t,n){return ln(0<t.resumeToken.length,"Attempted to persist query data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},ro.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Ic.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),Ic.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},ro.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},ro.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},ro.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,Ic.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new El(e,i,Rc.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return ln(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r})})},ro.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){ln(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?Ic.resolve():Ic.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},ro.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},ro.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},ro.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},ro.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},ro.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},ro.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Ic.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);ln(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o):ln(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},ro.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},ro.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},ro.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},ro.RESUME_TOKEN_MAX_AGE_MICROS=3e8,ro),xh=(io.prototype.checkEmpty=function(e){return Ic.resolve(0===this.mutationQueue.length)},io.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");ln(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return ln(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ic.resolve()},io.prototype.getLastStreamToken=function(e){return Ic.resolve(this.lastStreamToken)},io.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ic.resolve()},io.prototype.addMutationBatch=function(e,t,n,r){ln(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&ln(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Tc(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Ah(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Ic.resolve(o)},io.prototype.lookupMutationBatch=function(e,t){return Ic.resolve(this.findMutationBatch(t))},io.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return ln(null!=n,"Failed to find local mutation batch."),Ic.resolve(n.keys())},io.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Ic.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},io.prototype.getHighestUnacknowledgedBatchId=function(){return Ic.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},io.prototype.getAllMutationBatches=function(e){return Ic.resolve(this.mutationQueue.slice())},io.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Ah(t,0),i=new Ah(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){ln(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);ln(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Ic.resolve(o)},io.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new yc(Bn);return t.forEach(function(e){var t=new Ah(e,0),i=new Ah(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){ln(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),Ic.resolve(this.findMutationBatches(r))},io.prototype.getAllMutationBatchesAffectingQuery=function(e,t){ln(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;tc.isDocumentKey(i)||(i=i.child(""));var o=new Ah(new tc(i),0),a=new yc(Bn);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),Ic.resolve(this.findMutationBatches(a))},io.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},io.prototype.removeMutationBatch=function(e,t){var n=this;ln(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ic.forEach(t.mutations,function(i){var o=new Ah(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},io.prototype.removeCachedMutationKeys=function(e){},io.prototype.containsKey=function(e,t){var n=new Ah(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ic.resolve(t.isEqual(r&&r.key))},io.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&ln(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ic.resolve()},io.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return ln(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},io.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},io.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return ln(n.batchId===e,"If found batch must match"),n},io),Rh=(oo.prototype.getTargetCount=function(e){return Ic.resolve(this.targetCount)},oo.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),Ic.resolve()},oo.prototype.getLastRemoteSnapshotVersion=function(e){return Ic.resolve(this.lastRemoteSnapshotVersion)},oo.prototype.getHighestSequenceNumber=function(e){return Ic.resolve(this.highestSequenceNumber)},oo.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ic.resolve(t)},oo.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ic.resolve()},oo.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},oo.prototype.addQueryData=function(e,t){return ln(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Ic.resolve()},oo.prototype.updateQueryData=function(e,t){return ln(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Ic.resolve()},oo.prototype.removeQueryData=function(e,t){return ln(0<this.targetCount,"Removing a target from an empty cache"),ln(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ic.resolve()},oo.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Ic.waitFor(o).next(function(){return i})},oo.prototype.getQueryCount=function(e){return Ic.resolve(this.targetCount)},oo.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Ic.resolve(n)},oo.prototype.getQueryDataForTarget=function(e,t){return cn("Not yet implemented.")},oo.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),Ic.waitFor(i)},oo.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),Ic.waitFor(i)},oo.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ic.resolve()},oo.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ic.resolve(n)},oo.prototype.containsKey=function(e,t){return Ic.resolve(this.references.containsKey(t))},oo),Ph=(ao.prototype.addEntry=function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.sizer(t);return this.docs=this.docs.insert(n,{maybeDocument:t,size:o}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())},ao.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},ao.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ic.resolve(n?n.maybeDocument:null)},ao.prototype.getEntries=function(e,t){var n=this,r=fr();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),Ic.resolve(r)},ao.prototype.getDocumentsMatchingQuery=function(e,t){ln(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=dr(),r=new tc(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof Wc&&t.matches(s)&&(n=n.insert(s.key,s))}return Ic.resolve(n)},ao.prototype.forEachDocumentKey=function(e,t){return Ic.forEach(this.docs,function(e){return t(e)})},ao.prototype.getNewDocumentChanges=function(e){var t=this,n=hr();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new Kc(e,lc.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=mr(),Ic.resolve(n)},ao.prototype.newChangeBuffer=function(){return new ao.RemoteDocumentChangeBuffer(this)},ao.prototype.getSize=function(e){return Ic.resolve(this.size)},ao.RemoteDocumentChangeBuffer=(i(so,vh=zc),so.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i?n.push(t.documentCache.addEntry(e,i)):t.documentCache.removeEntry(r)}),Ic.waitFor(n)},so.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},so.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},so),ao),Oh=(uo.createLruPersistence=function(e,t,n){return new uo(e,function(e){return new Fh(e,new Sl(t),n)})},uo.createEagerPersistence=function(e){return new uo(e,function(e){return new Lh(e)})},uo.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(uo.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),uo.prototype.getActiveClients=function(){return o(this,void 0,void 0,function(){return a(this,function(e){return[2,[this.clientId]]})})},uo.prototype.setPrimaryStateListener=function(e){return e(!0)},uo.prototype.setDatabaseDeletedListener=function(){},uo.prototype.setNetworkEnabled=function(e){},uo.prototype.getIndexManager=function(){return this.indexManager},uo.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new xh(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},uo.prototype.getQueryCache=function(){return this.queryCache},uo.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},uo.prototype.runTransaction=function(e,t,n){var r=this;an("MemoryPersistence","Starting transaction:",e);var i=new Mh(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},uo.prototype.mutationQueuesContainKey=function(e,t){return Ic.or(function(e){var t=[];return vn(e,function(e,n){return t.push(n)}),t}(this.mutationQueues).map(function(n){return function(){return n.containsKey(e,t)}}))},uo),Mh=function(e){this.currentSequenceNumber=e},Lh=(Object.defineProperty(co.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw cn("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),co.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},co.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ic.resolve()},co.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ic.resolve()},co.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ic.resolve()},co.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){
return r.removeQueryData(e,t)})},co.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},co.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ic.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(e){e||n.removeEntry(r)})}).next(function(){return t._orphanedDocuments=null,n.apply(e)})},co.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},co.prototype.documentSize=function(e){return 0},co.prototype.isReferenced=function(e,t){var n=this;return Ic.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ic.resolve(n.inMemoryPins.containsKey(t))}])},co),Fh=(lo.prototype.onTransactionStarted=function(){},lo.prototype.onTransactionCommitted=function(e){return Ic.resolve()},lo.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},lo.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},lo.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},lo.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ic.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?Ic.resolve():t(i)})})},lo.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},lo.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},lo.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,function(i){return n.isPinned(e,i,t).next(function(e){e||(r++,o.removeEntry(i))})}).next(function(){return o.apply(e)}).next(function(){return r})},lo.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ic.resolve()},lo.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},lo.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ic.resolve()},lo.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ic.resolve()},lo.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ic.resolve()},lo.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw cn("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},lo.prototype.isPinned=function(e,t,n){var r=this;return Ic.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ic.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ic.resolve(void 0!==e&&n<e)}])},lo.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},lo),Uh=Number,Bh=Uh.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),qh=Uh.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Vh=Uh.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},jh=(po.prototype.reset=function(){this.currentBaseMs=0},po.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},po.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&an("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},po.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},po.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},po),Wh="PersistentStream";(wh=bh=bh||{})[wh.Initial=0]="Initial",wh[wh.Starting=1]="Starting",wh[wh.Open=2]="Open",wh[wh.Error=3]="Error",wh[wh.Backoff=4]="Backoff";var Kh,Qh,Gh,zh,Hh,Yh,Xh=(mo.prototype.isStarted=function(){return this.state===bh.Starting||this.state===bh.Open||this.state===bh.Backoff},mo.prototype.isOpen=function(){return this.state===bh.Open},mo.prototype.start=function(){this.state!==bh.Error?(ln(this.state===bh.Initial,"Already started"),this.auth()):this.performBackoff()},mo.prototype.stop=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(bh.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},mo.prototype.inhibitBackoff=function(){ln(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=bh.Initial,this.backoff.reset()},mo.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},mo.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},mo.prototype.handleIdleCloseTimer=function(){return o(this,void 0,void 0,function(){return a(this,function(e){return this.isOpen()?[2,this.close(bh.Initial)]:[2]})})},mo.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},mo.prototype.close=function(e,t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return ln(this.isStarted(),"Only started streams should be closed."),ln(e===bh.Error||ho(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==bh.Error?this.backoff.reset():t&&t.code===Vu.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Vu.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},mo.prototype.tearDown=function(){},mo.prototype.auth=function(){var e=this;ln(this.state===bh.Initial,"Must be in initial state to auth"),this.state=bh.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new ju(Vu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},mo.prototype.startStream=function(e){var t=this;ln(this.state===bh.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return ln(t.state===bh.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=bh.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},mo.prototype.performBackoff=function(){var e=this;ln(this.state===bh.Error,"Should only perform backoff when in Error state"),this.state=bh.Backoff,this.backoff.backoffAndRun(function(){return o(e,void 0,void 0,function(){return a(this,function(e){return ln(this.state===bh.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=bh.Initial,this.start(),ln(this.isStarted(),"PersistentStream should have started"),[2]})})})},mo.prototype.handleStreamClose=function(e){return ln(this.isStarted(),"Can't handle server close on non-started stream"),an(Wh,"close with error: "+e),this.stream=null,this.close(bh.Error,e)},mo.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(an(Wh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},mo),Jh=(i(go,Kh=Xh),go.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},go.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},go.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},go.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},go),$h=(i(yo,Qh=Xh),Object.defineProperty(yo.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),yo.prototype.start=function(){this.handshakeComplete_=!1,Qh.prototype.start.call(this)},yo.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},yo.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},yo.prototype.onMessage=function(e){if(ln(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return ln(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},yo.prototype.writeHandshake=function(){ln(this.isOpen(),"Writing handshake requires an opened stream"),ln(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},yo.prototype.writeMutations=function(e){var t=this;ln(this.isOpen(),"Writing mutations requires an opened stream"),ln(this.handshakeComplete_,"Handshake must be complete before writing mutations"),ln(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},yo),Zh=(vo.prototype.newPersistentWriteStream=function(e){return new $h(this.queue,this.connection,this.credentials,this.serializer,e)},vo.prototype.newPersistentWatchStream=function(e){return new Jh(this.queue,this.connection,this.credentials,this.serializer,e)},vo.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},vo.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=hr();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);ln(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},vo.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===Vu.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},vo.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===Vu.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},vo),ef=(bo.prototype.lookup=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new ju(Vu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach(function(e){e instanceof Kc||e instanceof Wc?n.recordVersion(e):cn("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},bo.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},bo.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},bo.prototype.delete=function(e){this.write([new Ih(e,this.precondition(e))]),this.writtenDocs.add(e)},bo.prototype.commit=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new ju(Vu.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},bo.prototype.recordVersion=function(e){var t;if(e instanceof Wc)t=e.version;else{if(!(e instanceof Kc))throw cn("Document in a transaction was a "+e.constructor.name);t=lc.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new ju(Vu.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},bo.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?_h.updateTime(t):_h.NONE},bo.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return _h.exists(!0);if(t.isEqual(lc.forDeletedDoc()))throw new ju(Vu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _h.updateTime(t)},bo.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},bo.prototype.ensureCommitNotCalled=function(){ln(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},bo);(zh=Gh=Gh||{})[zh.Unknown=0]="Unknown",zh[zh.Online=1]="Online",zh[zh.Offline=2]="Offline",(Yh=Hh=Hh||{})[Yh.RemoteStore=0]="RemoteStore",Yh[Yh.SharedClientState=1]="SharedClientState";var tf,nf,rf=(wo.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Gh.Unknown),ln(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Uu.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,ln(e.state===Gh.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Gh.Offline),Promise.resolve()}))},wo.prototype.handleWatchStreamFailure=function(e){this.state===Gh.Online?(this.setAndBroadcast(Gh.Unknown),ln(0===this.watchStreamFailures,"watchStreamFailures must be 0"),ln(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Gh.Offline)))},wo.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Gh.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},wo.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},wo.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(sn(t),this.shouldWarnClientIsOffline=!1):an("OnlineStateTracker",t)},wo.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},wo);(nf=tf=tf||{})[nf.OK=0]="OK",nf[nf.CANCELLED=1]="CANCELLED",nf[nf.UNKNOWN=2]="UNKNOWN",nf[nf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nf[nf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nf[nf.NOT_FOUND=5]="NOT_FOUND",nf[nf.ALREADY_EXISTS=6]="ALREADY_EXISTS",nf[nf.PERMISSION_DENIED=7]="PERMISSION_DENIED",nf[nf.UNAUTHENTICATED=16]="UNAUTHENTICATED",nf[nf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nf[nf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nf[nf.ABORTED=10]="ABORTED",nf[nf.OUT_OF_RANGE=11]="OUT_OF_RANGE",nf[nf.UNIMPLEMENTED=12]="UNIMPLEMENTED",nf[nf.INTERNAL=13]="INTERNAL",nf[nf.UNAVAILABLE=14]="UNAVAILABLE",nf[nf.DATA_LOSS=15]="DATA_LOSS";var of,af,sf,uf,cf=(So.emptySet=function(e){return new So(e.comparator)},So.prototype.has=function(e){return null!=this.keyedMap.get(e)},So.prototype.get=function(e){return this.keyedMap.get(e)},So.prototype.first=function(){return this.sortedSet.minKey()},So.prototype.last=function(){return this.sortedSet.maxKey()},So.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},So.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(So.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),So.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},So.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},So.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},So.prototype.isEqual=function(e){if(!(e instanceof So))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},So.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},So.prototype.copy=function(e,t){var n=new So;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},So);(af=of=of||{})[af.Added=0]="Added",af[af.Removed=1]="Removed",af[af.Modified=2]="Modified",af[af.Metadata=3]="Metadata",(uf=sf=sf||{})[uf.Local=0]="Local",uf[uf.Synced=1]="Synced";var lf,hf,ff=(To.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==of.Added&&n.type===of.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===of.Metadata&&n.type!==of.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===of.Modified&&n.type===of.Modified?this.changeMap=this.changeMap.insert(t,{type:of.Modified,doc:e.doc}):e.type===of.Modified&&n.type===of.Added?this.changeMap=this.changeMap.insert(t,{type:of.Added,doc:e.doc}):e.type===of.Removed&&n.type===of.Added?this.changeMap=this.changeMap.remove(t):e.type===of.Removed&&n.type===of.Modified?this.changeMap=this.changeMap.insert(t,{type:of.Removed,doc:n.doc}):e.type===of.Added&&n.type===of.Removed?this.changeMap=this.changeMap.insert(t,{type:of.Modified,doc:e.doc}):cn("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},To.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},To),df=(Co.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach(function(e){i.push({type:of.Added,doc:e})}),new Co(e,t,cf.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(Co.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),Co.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},Co),pf=(Io.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=mf.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new Io(lc.MIN,r,gr(),hr(),mr())},Io),mf=(ko.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new ko(fn(),t,mr(),mr(),mr())},ko),gf=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},yf=function(e,t){this.targetId=e,this.existenceFilter=t};(hf=lf=lf||{})[hf.NoChange=0]="NoChange",hf[hf.Added=1]="Added",hf[hf.Removed=2]="Removed",hf[hf.Current=3]="Current",hf[hf.Reset=4]="Reset";var vf,bf,wf,_f,Ef,Sf,Tf,Cf,If,kf,Nf,Af,Df,xf,Rf,Pf=function(e,t,n,r){void 0===n&&(n=fn()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Of=(Object.defineProperty(No.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),No.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},No.prototype.toTargetChange=function(){var e=mr(),t=mr(),n=mr();return this.documentChanges.forEach(function(r,i){switch(i){case of.Added:e=e.add(r);break;case of.Modified:t=t.add(r);break;case of.Removed:n=n.add(r);break;default:cn("Encountered invalid change type: "+i)}}),new mf(this._resumeToken,this._current,e,t,n)},No.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=xo()},No.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},No.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},No.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},No.prototype.recordTargetResponse=function(){this.pendingResponses-=1},No.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},No),Mf=(Ao.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Wc?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Kc&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},Ao.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case lf.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case lf.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case lf.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),ln(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case lf.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case lf.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:cn("Unknown target watch change state: "+e.state)}})},Ao.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):yn(this.targetStates,t)},Ao.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new tc(i.path);this.removeDocumentFromTarget(t,o,new Kc(o,lc.forDeletedDoc()))}else ln(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},Ao.prototype.createRemoteEvent=function(e){var t=this,n={};yn(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new tc(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Kc(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=mr();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===Rc.LimboResolution||(i=!1)}),i&&(r=r.add(e))});var i=new pf(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=hr(),this.pendingDocumentTargetMapping=Do(),this.pendingTargetResets=new yc(Bn),i},Ao.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?of.Modified:of.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},Ao.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,of.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},Ao.prototype.removeTarget=function(e){delete this.targetStates[e]},Ao.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},Ao.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},Ao.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Of),this.targetStates[e]},Ao.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new yc(Bn),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},Ao.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||an("WatchChangeAggregator","Detected inactive target",e),t},Ao.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},Ao.prototype.resetTarget=function(e){var t=this;ln(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Of,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},Ao.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},Ao),Lf="RemoteStore",Ff=(Ro.prototype.start=function(){return this.enableNetwork()},Ro.prototype.enableNetwork=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Gh.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Ro.prototype.disableNetwork=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Gh.Offline),[2]}})})},Ro.prototype.disableNetworkInternal=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(an(Lf,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},Ro.prototype.shutdown=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return an(Lf,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Gh.Unknown),[2]}})})},Ro.prototype.listen=function(e){ln(!mn(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},Ro.prototype.unlisten=function(e){ln(mn(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),bn(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Gh.Unknown))},Ro.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},Ro.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},Ro.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},Ro.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},Ro.prototype.startWatchStream=function(){ln(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Mf(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Ro.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!bn(this.listenTargets)},Ro.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Ro.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Ro.prototype.onWatchStreamOpen=function(){return o(this,void 0,void 0,function(){var e=this;return a(this,function(t){return yn(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},Ro.prototype.onWatchStreamClose=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){return void 0===e&&ln(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Gh.Unknown),[2]})})},Ro.prototype.onWatchStreamChange=function(e,t){return o(this,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Gh.Online),e instanceof Pf&&e.state===lf.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof gf?this.watchChangeAggregator.handleDocumentChange(e):e instanceof yf?this.watchChangeAggregator.handleExistenceFilter(e):(ln(e instanceof Pf,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(lc.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);
case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},Ro.prototype.raiseWatchSnapshot=function(e){var t=this;ln(!e.isEqual(lc.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return yn(n.targetChanges,function(n,r){if(0<r.resumeToken.length){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:fn()}),t.sendUnwatchRequest(e);var r=new El(n.query,e,Rc.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},Ro.prototype.handleTargetError=function(e){var t=this;ln(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return o(t,void 0,void 0,function(){return a(this,function(t){return mn(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},Ro.prototype.fillWritePipeline=function(){return o(this,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},Ro.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Ro.prototype.outstandingWrites=function(){return this.writePipeline.length},Ro.prototype.addToWritePipeline=function(e){ln(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},Ro.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Ro.prototype.startWriteStream=function(){ln(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Ro.prototype.onWriteStreamOpen=function(){return o(this,void 0,void 0,function(){return a(this,function(e){return this.writeStream.writeHandshake(),[2]})})},Ro.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(Ci)},Ro.prototype.onMutationResult=function(e,t){var n=this;ln(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Cc.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},Ro.prototype.onWriteStreamClose=function(e){return o(this,void 0,void 0,function(){var t=this;return a(this,function(n){return void 0===e&&ln(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},Ro.prototype.handleHandshakeError=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){return _o(e.code)?(an(Lf,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=fn(),[2,this.localStore.setLastStreamToken(fn()).catch(Ci)]):[2]})})},Ro.prototype.handleWriteError=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){return function(e){return _o(e)&&e!==Vu.ABORTED}(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2]})})},Ro.prototype.createTransaction=function(){return new ef(this.datastore)},Ro.prototype.restartNetwork=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Gh.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},Ro.prototype.handleCredentialChange=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(an(Lf,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},Ro.prototype.applyPrimaryState=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Gh.Unknown),t.label=4;case 4:return[2]}})})},Ro),Uf=(Object.defineProperty(Po.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Po.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Po.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},Po.prototype._compareTo=function(e){return Bn(this._lat,e._lat)||Bn(this._long,e._long)},Po),Bf=(Oo.atPath=function(e){return new Oo(e)},Object.defineProperty(Oo.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Xf]:this.memoizedOrderBy=[new Yf(e),Xf];else{ln(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:zf.ASCENDING;this.memoizedOrderBy.push(a===zf.ASCENDING?Xf:Jf)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),Oo.prototype.addFilter=function(e){ln(null==this.getInequalityFilterField()||!(e instanceof Vf)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),ln(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new Oo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.startAt,this.endAt)},Oo.prototype.addOrderBy=function(e){ln(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new Oo(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.startAt,this.endAt)},Oo.prototype.withLimit=function(e){return new Oo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},Oo.prototype.withStartAt=function(e){return new Oo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},Oo.prototype.withEndAt=function(e){return new Oo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},Oo.prototype.asCollectionQueryAtPath=function(e){return new Oo(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},Oo.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";ho(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},Oo.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),ho(this.limit)||(e+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},Oo.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},Oo.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return ln(n,"orderBy used that doesn't compare on key field"),0},Oo.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},Oo.prototype.hasLimit=function(){return!ho(this.limit)},Oo.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},Oo.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Vf&&n.isInequality())return n.field}return null},Oo.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof Vf&&0<=e.indexOf(r.op))return r.op}return null},Oo.prototype.isDocumentQuery=function(){return tc.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},Oo.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},Oo.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):tc.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},Oo.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},Oo.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},Oo.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},Oo.prototype.assertValidBound=function(e){ln(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Oo),qf=(Lo.fromString=function(e){switch(e){case"<":return Lo.LESS_THAN;case"<=":return Lo.LESS_THAN_OR_EQUAL;case"==":return Lo.EQUAL;case">=":return Lo.GREATER_THAN_OR_EQUAL;case">":return Lo.GREATER_THAN;case"array-contains":return Lo.ARRAY_CONTAINS;case"in":return Lo.IN;case"array-contains-any":return Lo.ARRAY_CONTAINS_ANY;default:return cn("Unknown FieldFilter operator: "+e)}},Lo.prototype.toString=function(){return this.name},Lo.prototype.isEqual=function(e){return this.name===e.name},Lo.LESS_THAN=new Lo("<"),Lo.LESS_THAN_OR_EQUAL=new Lo("<="),Lo.EQUAL=new Lo("=="),Lo.GREATER_THAN=new Lo(">"),Lo.GREATER_THAN_OR_EQUAL=new Lo(">="),Lo.ARRAY_CONTAINS=new Lo("array-contains"),Lo.IN=new Lo("in"),Lo.ARRAY_CONTAINS_ANY=new Lo("array-contains-any"),Lo),Vf=(i(Fo,vf=Mo),Fo.create=function(e,t,n){if(e.isKeyField())return t===qf.IN?(ln(n instanceof lh,"Comparing on key with IN, but filter value not an ArrayValue"),ln(n.internalValue.every(function(e){return e instanceof sh}),"Comparing on key with IN, but an array value was not a RefValue"),new Wf(e,n)):(ln(n instanceof sh,"Comparing on key, but filter value not a RefValue"),ln(t!==qf.ARRAY_CONTAINS&&t!==qf.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new jf(e,t,n));if(n.isEqual($l.INSTANCE)){if(t!==qf.EQUAL)throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Fo(e,t,n)}if(n.isEqual(nh.NAN)){if(t!==qf.EQUAL)throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Fo(e,t,n)}return t===qf.ARRAY_CONTAINS?new Kf(e,n):t===qf.IN?(ln(n instanceof lh,"IN filter has invalid value: "+n.toString()),new Qf(e,n)):t===qf.ARRAY_CONTAINS_ANY?(ln(n instanceof lh,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Gf(e,n)):new Fo(e,t,n)},Fo.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},Fo.prototype.matchesComparison=function(e){switch(this.op){case qf.LESS_THAN:return e<0;case qf.LESS_THAN_OR_EQUAL:return e<=0;case qf.EQUAL:return 0===e;case qf.GREATER_THAN:return 0<e;case qf.GREATER_THAN_OR_EQUAL:return 0<=e;default:return cn("Unknown FieldFilter operator: "+this.op)}},Fo.prototype.isInequality=function(){return 0<=[qf.LESS_THAN,qf.LESS_THAN_OR_EQUAL,qf.GREATER_THAN,qf.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Fo.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},Fo.prototype.isEqual=function(e){return e instanceof Fo&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},Fo.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},Fo),jf=(i(Uo,bf=Vf),Uo.prototype.matches=function(e){var t=this.value,n=tc.comparator(e.key,t.key);return this.matchesComparison(n)},Uo),Wf=(i(Bo,wf=Vf),Bo.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},Bo),Kf=(i(qo,_f=Vf),qo.prototype.matches=function(e){var t=e.field(this.field);return t instanceof lh&&t.contains(this.value)},qo),Qf=(i(Vo,Ef=Vf),Vo.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},Vo),Gf=(i(jo,Sf=Vf),jo.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof lh&&n.internalValue.some(function(e){return t.value.contains(e)})},jo),zf=(Wo.prototype.toString=function(){return this.name},Wo.ASCENDING=new Wo("asc"),Wo.DESCENDING=new Wo("desc"),Wo),Hf=(Ko.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},Ko.prototype.sortsBeforeDocument=function(e,t){ln(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())ln(o instanceof sh,"Bound has a non-key value where the key path is being used."),n=tc.comparator(o.key,t.key);else{var a=t.field(i.field);ln(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===zf.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Ko.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},Ko),Yf=(Qo.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Wc.compareByKey(e,t):Wc.compareByField(this.field,e,t);switch(this.dir){case zf.ASCENDING:return n;case zf.DESCENDING:return-1*n;default:return cn("Unknown direction: "+this.dir)}},Qo.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Qo.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Qo.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},Qo),Xf=new Yf(ec.keyField(),zf.ASCENDING),Jf=new Yf(ec.keyField(),zf.DESCENDING),$f=(Go.prototype.applyToLocalView=function(e,t){return new oh(t,e)},Go.prototype.applyToRemoteDocument=function(e,t){return t},Go.prototype.computeBaseValue=function(e){return null},Go.prototype.isEqual=function(e){return e instanceof Go},Go.instance=new Go,Go),Zf=(zo.prototype.applyToLocalView=function(e,t){return this.apply(e)},zo.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},zo.prototype.apply=function(e){for(var t=Xo(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new lh(t)},zo.prototype.computeBaseValue=function(e){return null},zo.prototype.isEqual=function(e){return e instanceof zo&&qn(e.elements,this.elements)},zo),ed=(Ho.prototype.applyToLocalView=function(e,t){return this.apply(e)},Ho.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Ho.prototype.apply=function(e){for(var t=Xo(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new lh(t)},Ho.prototype.computeBaseValue=function(e){return null},Ho.prototype.isEqual=function(e){return e instanceof Ho&&qn(e.elements,this.elements)},Ho),td=(Yo.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof th&&this.operand instanceof th){var r=n.internalValue+this.operand.internalValue;return new th(r)}return r=n.internalValue+this.operand.internalValue,new nh(r)},Yo.prototype.applyToRemoteDocument=function(e,t){return ln(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},Yo.prototype.computeBaseValue=function(e){return e instanceof eh?e:new th(0)},Yo.prototype.isEqual=function(e){return e instanceof Yo&&this.operand.isEqual(e.operand)},Yo),nd=(Jo.prototype.isEqual=function(e){return e&&e.count===this.count},Jo),rd=((Tf={})[zf.ASCENDING.name]="ASCENDING",Tf[zf.DESCENDING.name]="DESCENDING",Tf),id=((Cf={})[qf.LESS_THAN.name]="LESS_THAN",Cf[qf.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Cf[qf.GREATER_THAN.name]="GREATER_THAN",Cf[qf.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Cf[qf.EQUAL.name]="EQUAL",Cf[qf.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Cf[qf.IN.name]="IN",Cf[qf.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Cf),od=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),ad=(ea.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},ea.prototype.unsafeCastProtoByteString=function(e){return e},ea.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Vu.UNKNOWN:Eo(e.code);return new ju(t,e.message||"")},ea.prototype.toInt32Value=function(e){return ho(e)?void 0:{value:e}},ea.prototype.fromInt32Value=function(e){var t;return ho(t="object"==typeof e?e.value:e)?null:t},ea.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},ea.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);ln(!!e,"Cannot deserialize null or undefined timestamp.");var t=Zo(e.seconds||"0"),n=e.nanos||0;return new cc(t,n)},ea.prototype.fromIso8601String=function(e){var t=0,n=od.exec(e);if(ln(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new cc(o,t)},ea.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},ea.prototype.fromBlob=function(e){return"string"==typeof e?(ln(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ku.fromBase64String(e)):(ln(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ku.fromUint8Array(e))},ea.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},ea.prototype.fromVersion=function(e){return ln(!!e,"Trying to deserialize version that isn't set"),lc.fromTimestamp(this.fromTimestamp(e))},ea.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},ea.prototype.fromResourceName=function(e){var t=$u.fromString(e);return ln(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},ea.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},ea.prototype.fromName=function(e){var t=this.fromResourceName(e);return ln(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),ln(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new tc(this.extractLocalPathFromResourceName(t))},ea.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},ea.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?$u.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(ea.prototype,"encodedDatabaseId",{get:function(){return new $u(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),ea.prototype.fullyQualifiedPrefixPath=function(e){return new $u(["projects",e.projectId,"databases",e.database])},ea.prototype.extractLocalPathFromResourceName=function(e){return ln(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},ea.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},ea.prototype.toValue=function(e){if(e instanceof $l)return{nullValue:"NULL_VALUE"};if(e instanceof Zl)return{booleanValue:e.value()};if(e instanceof th)return{integerValue:""+e.value()};if(e instanceof nh){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof rh?{stringValue:e.value()}:e instanceof ch?{mapValue:this.toMapValue(e)}:e instanceof lh?{arrayValue:this.toArrayValue(e)}:e instanceof ih?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof uh?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof ah?{bytesValue:this.toBytes(e.value())}:e instanceof sh?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:cn("Unknown FieldValue "+JSON.stringify(e))},ea.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return $l.INSTANCE;if("booleanValue"in e)return Zl.of(e.booleanValue);if("integerValue"in e)return new th(Zo(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return nh.NAN;if("Infinity"===e.doubleValue)return nh.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return nh.NEGATIVE_INFINITY}return new nh(e.doubleValue)}if("stringValue"in e)return new rh(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){$o(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new lh(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return $o(e.timestampValue,"timestampValue"),new ih(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){$o(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new uh(new Uf(r,i))}if("bytesValue"in e){$o(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new ah(o)}if("referenceValue"in e){$o(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Hu(a.get(1),a.get(3)),u=new tc(this.extractLocalPathFromResourceName(a));return new sh(s,u)}return cn("Unknown Value proto "+JSON.stringify(e))},ea.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},ea.prototype.toDocument=function(e){return ln(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},ea.prototype.fromDocument=function(e,t){return new Wc(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},ea.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},ea.prototype.fromFields=function(e){var t=this,n=e,r=ch.EMPTY;return vn(n,function(e,n){r=r.set(new ec([e]),t.fromValue(n))}),r},ea.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},ea.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},ea.prototype.fromFound=function(e){ln(!!e.found,"Tried to deserialize a found document from a missing document."),$o(e.found.name,"doc.found.name"),$o(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new Wc(t,n,r,{},e.found)},ea.prototype.fromMissing=function(e){ln(!!e.missing,"Tried to deserialize a missing document from a found document."),ln(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Kc(t,n)},ea.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):cn("invalid batch get response: "+JSON.stringify(e))},ea.prototype.toWatchTargetChangeState=function(e){switch(e){case lf.Added:return"ADD";case lf.Current:return"CURRENT";case lf.NoChange:return"NO_CHANGE";case lf.Removed:return"REMOVE";case lf.Reset:return"RESET";default:return cn("Unknown WatchTargetChangeState: "+e)}},ea.prototype.toTestWatchChange=function(e){if(e instanceof yf)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof gf){if(e.newDoc instanceof Wc){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Kc)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Pf){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return tf.OK;switch(e){case Vu.OK:return tf.OK;case Vu.CANCELLED:return tf.CANCELLED;case Vu.UNKNOWN:return tf.UNKNOWN;case Vu.DEADLINE_EXCEEDED:return tf.DEADLINE_EXCEEDED;case Vu.RESOURCE_EXHAUSTED:return tf.RESOURCE_EXHAUSTED;case Vu.INTERNAL:return tf.INTERNAL;case Vu.UNAVAILABLE:return tf.UNAVAILABLE;case Vu.UNAUTHENTICATED:return tf.UNAUTHENTICATED;case Vu.INVALID_ARGUMENT:return tf.INVALID_ARGUMENT;case Vu.NOT_FOUND:return tf.NOT_FOUND;case Vu.ALREADY_EXISTS:return tf.ALREADY_EXISTS;case Vu.PERMISSION_DENIED:return tf.PERMISSION_DENIED;case Vu.FAILED_PRECONDITION:return tf.FAILED_PRECONDITION;case Vu.ABORTED:return tf.ABORTED;case Vu.OUT_OF_RANGE:return tf.OUT_OF_RANGE;case Vu.UNIMPLEMENTED:return tf.UNIMPLEMENTED;case Vu.DATA_LOSS:return tf.DATA_LOSS;default:return cn("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return cn("Unrecognized watch change: "+JSON.stringify(e))},ea.prototype.fromWatchChange=function(e){var t;if("targetChange"in e){$o(e.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=e.targetChange.resumeToken||this.emptyByteString(),o=e.targetChange.cause,a=o&&this.fromRpcStatus(o);t=new Pf(n,r,i,a||null)}else if("documentChange"in e){$o(e.documentChange,"documentChange"),$o(e.documentChange.document,"documentChange.name"),$o(e.documentChange.document.name,"documentChange.document.name"),$o(e.documentChange.document.updateTime,"documentChange.document.updateTime");var s=e.documentChange,u=this.fromName(s.document.name),c=this.fromVersion(s.document.updateTime),l=this.fromFields(s.document.fields||{}),h=new Wc(u,c,l,{},s.document),f=s.targetIds||[],d=s.removedTargetIds||[];t=new gf(f,d,h.key,h)}else if("documentDelete"in e){$o(e.documentDelete,"documentDelete"),$o(e.documentDelete.document,"documentDelete.document");var p=e.documentDelete;u=this.fromName(p.document),c=p.readTime?this.fromVersion(p.readTime):lc.forDeletedDoc(),h=new Kc(u,c),d=p.removedTargetIds||[],t=new gf([],d,h.key,h)}else if("documentRemove"in e){$o(e.documentRemove,"documentRemove"),$o(e.documentRemove.document,"documentRemove");var m=e.documentRemove;u=this.fromName(m.document),d=m.removedTargetIds||[],t=new gf([],d,u,null)}else{if(!("filter"in e))return cn("Unknown change type "+JSON.stringify(e));$o(e.filter,"filter"),$o(e.filter.targetId,"filter.targetId");var g=e.filter,y=g.count||0,v=new nd(y),b=g.targetId;t=new yf(b,v)}return t},ea.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?lf.NoChange:"ADD"===e?lf.Added:"REMOVE"===e?lf.Removed:"CURRENT"===e?lf.Current:"RESET"===e?lf.Reset:cn("Got unexpected TargetChange.state: "+e)},ea.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return lc.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?lc.MIN:t.readTime?this.fromVersion(t.readTime):lc.MIN},ea.prototype.toMutation=function(e){var t,n=this;if(e instanceof Sh)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Ih)t={delete:this.toName(e.key)};else if(e instanceof Th)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Ch))return cn("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},ea.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):_h.NONE;if(e.update){$o(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Th(r,i,o,n)}return new Sh(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new Ih(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return ln(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ch(r,a)}return cn("unknown mutation proto: "+JSON.stringify(e))},ea.prototype.toPrecondition=function(e){return ln(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:cn("Unknown precondition")},ea.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?_h.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?_h.exists(e.exists):_h.NONE},ea.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new dh(r,i)},ea.prototype.fromWriteResults=function(e,t){
var n=this;return e&&0<e.length?(ln(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},ea.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof $f)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zf)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof ed)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof td)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw cn("Unknown transform: "+e.transform)},ea.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)ln("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=$f.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Zf(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new ed(r.map(function(e){return t.fromValue(e)}));else if("increment"in e){var i=this.fromValue(e.increment);ln(i instanceof eh,"NUMERIC_ADD transform requires a NumberValue"),n=new td(i)}else cn("Unknown transform proto: "+JSON.stringify(e));var o=ec.fromServerFormat(e.fieldPath);return new fh(o,n)},ea.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},ea.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;ln(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Bf.atPath(this.fromQueryPath(n))},ea.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(ln(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(ln(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},ea.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){ln(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Bf(t,i,s,a,u,c,l)},ea.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},ea.prototype.toLabel=function(e){switch(e){case Rc.Listen:return null;case Rc.ExistenceFilterMismatch:return"existence-filter-mismatch";case Rc.LimboResolution:return"limbo-document";default:return cn("Unrecognized query purpose: "+e)}},ea.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},ea.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof Vf?t.toUnaryOrFieldFilter(e):cn("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},ea.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):cn("Unknown filter: "+JSON.stringify(e)):[]},ea.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},ea.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},ea.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},ea.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Hf(r,n)},ea.prototype.toDirection=function(e){return rd[e.name]},ea.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return zf.ASCENDING;case"DESCENDING":return zf.DESCENDING;default:return}},ea.prototype.toOperatorName=function(e){return id[e.name]},ea.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return qf.EQUAL;case"GREATER_THAN":return qf.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return qf.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return qf.LESS_THAN;case"LESS_THAN_OR_EQUAL":return qf.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return qf.ARRAY_CONTAINS;case"IN":return qf.IN;case"ARRAY_CONTAINS_ANY":return qf.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return cn("Unspecified operator");default:return cn("Unknown operator")}},ea.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},ea.prototype.fromFieldPathReference=function(e){return ec.fromServerFormat(e.fieldPath)},ea.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},ea.prototype.fromPropertyOrder=function(e){return new Yf(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},ea.prototype.fromFieldFilter=function(e){return Vf.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},ea.prototype.toUnaryOrFieldFilter=function(e){if(e.op===qf.EQUAL){if(e.value.isEqual(nh.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual($l.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},ea.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return Vf.create(t,qf.EQUAL,nh.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return Vf.create(n,qf.EQUAL,$l.INSTANCE);case"OPERATOR_UNSPECIFIED":return cn("Unspecified filter");default:return cn("Unknown filter")}},ea.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},ea.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return ec.fromServerFormat(e)});return hh.fromArray(t)},ea),sd=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},ud=(ta.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new sd,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e}):Promise.resolve(r.targetId)},ta.prototype.unlisten=function(e){return o(this,void 0,void 0,function(){var t,n,r,i;return a(this,function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},ta.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++)s[a].onViewSnapshot(r);o.viewSnap=r}}},ta.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},ta.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(e)})},ta),cd=(na.prototype.onViewSnapshot=function(e){if(ln(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==of.Metadata&&t.push(i)}e=new df(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},na.prototype.onError=function(e){this.queryObserver.error(e)},na.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},na.prototype.shouldRaiseInitialEvent=function(e,t){if(ln(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Gh.Offline;return this.options.waitForSyncWhenOnline&&n?(ln(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Gh.Offline},na.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},na.prototype.raiseInitialEvent=function(e){ln(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=df.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},na),ld=(ra.fromSnapshot=function(e,t){for(var n=mr(),r=mr(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case of.Added:n=n.add(a.doc.key);break;case of.Removed:r=r.add(a.doc.key)}}return new ra(e,n,r)},ra),hd=function(e){this.key=e},fd=function(e){this.key=e},dd=(Object.defineProperty(ia.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),ia.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new ff,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var c=i.get(e),l=t instanceof Wc?t:null;l&&(ln(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(r.track({type:of.Metadata,doc:l}),d=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:of.Modified,doc:l}),d=!0,u&&0<n.query.docComparator(l,u)&&(s=!0)):!c&&l?(r.track({type:of.Added,doc:l}),d=!0):c&&!l&&(r.track({type:of.Removed,doc:c}),d=!0,u&&(s=!0)),d&&(o=l?(a=a.add(l),f?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:of.Removed,doc:c})}return ln(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},ia.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},ia.prototype.applyChanges=function(e,t,n){var r=this;ln(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return function(e,t){function n(e){switch(e){case of.Added:return 1;case of.Modified:case of.Metadata:return 2;case of.Removed:return 0;default:return cn("Unknown ChangeType: "+e)}}return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?sf.Synced:sf.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new df(this.query,e.documentSet,i,o,e.mutatedKeys,s===sf.Local,u,!1),limboChanges:a}:{limboChanges:a}},ia.prototype.applyOnlineStateChange=function(e){return this.current&&e===Gh.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new ff,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},ia.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},ia.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return ln(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},ia.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=mr(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new fd(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new hd(e))}),n},ia.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=mr();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},ia.prototype.computeInitialSnapshot=function(){return df.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===sf.Local)},ia),pd=(oa.prototype.run=function(){this.runWithBackOff()},oa.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return o(e,void 0,void 0,function(){var e,t,n=this;return a(this,function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.handleTransactionError(e)})})}).catch(function(e){n.handleTransactionError(e)}),[2]})})})},oa.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!ho(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},oa.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},oa.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!_o(t)},oa),md="SyncEngine",gd=function(e,t,n){this.query=e,this.targetId=t,this.view=n},yd=function(e){this.key=e,this.receivedDocument=!1},vd=(Object.defineProperty(aa.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),aa.prototype.subscribe=function(e){ln(null!==e,"SyncEngine listener cannot be null"),ln(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},aa.prototype.listen=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o;return a(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},aa.prototype.initializeViewAndComputeSnapshot=function(e,t){return o(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l;return a(this,function(a){switch(a.label){case 0:return n=e.query,[4,this.localStore.executeQuery(n)];case 1:return r=a.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return i=a.sent(),o=new dd(n,i),s=o.computeDocChanges(r),u=mf.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==Gh.Offline),ln(0===(c=o.applyChanges(s,!0===this.isPrimary,u)).limboChanges.length,"View returned limbo docs before target ack from the server."),ln(!!c.snapshot,"applyChanges for new view should always return a snapshot"),l=new gd(n,e.targetId,o),this.queryViewsByQuery.set(n,l),this.queryViewsByTarget[e.targetId]=l,[2,c.snapshot]}})})},aa.prototype.synchronizeViewAndComputeSnapshot=function(e){return o(this,void 0,void 0,function(){var t,n,r;return a(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=i.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=i.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},aa.prototype.unlisten=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),ln(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(Ci)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},aa.prototype.write=function(e,t){return o(this,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},aa.prototype.runTransaction=function(e,t,n){new pd(e,this.remoteStore,t,n).run()},aa.prototype.applyRemoteEvent=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),vn(e.targetChanges,function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(ln(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?ln(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(ln(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Ci(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},aa.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Hh.RemoteStore||!this.isPrimary&&t===Hh.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);ln(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},aa.prototype.rejectListen=function(e,t){return o(this,void 0,void 0,function(){var n,r,i,o,s,u,c=this;return a(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new hc(tc.comparator)).insert(r,new Kc(r,lc.forDeletedDoc())),o=mr().add(r),s=new pf(lc.MIN,{},new yc(Bn),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return ln(!!(u=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(Ci)];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,t),a.label=3;case 3:return[2]}})})},aa.prototype.applyBatchState=function(e,t,n){return o(this,void 0,void 0,function(){var r;return a(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(an(md,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):cn("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},aa.prototype.applySuccessfulWrite=function(e){return o(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ci(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},aa.prototype.rejectFailedWrite=function(e,t){return o(this,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ci(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},aa.prototype.registerPendingWritesCallback=function(e){return o(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||an(md,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}})})},aa.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},aa.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new ju(Vu.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},aa.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new hc(Bn)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},aa.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(ln(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},aa.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},aa.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},aa.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof hd?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof fd?(an(md,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):cn("Unknown limbo change: "+JSON.stringify(i))}},aa.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){an(md,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Bf.atPath(t.path);this.limboResolutionsByTarget[n]=new yd(t),this.remoteStore.listen(new El(r,n,Rc.LimboResolution,Yu.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},aa.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},aa.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return o(this,void 0,void 0,function(){var n,r,i,o=this;return a(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=ld.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},aa.prototype.assertSubscribed=function(e){ln(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},aa.prototype.handleCredentialChange=function(e){return o(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},aa.prototype.applyPrimaryState=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o,s,u,c=this;return a(this,function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],u=Promise.resolve(),yn(this.queryViewsByTarget,function(e,t){c.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then(function(){return c.unlisten(t.query)}),c.remoteStore.unlisten(t.targetId)}),[4,u]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},aa.prototype.resetLimboDocuments=function(){var e=this;yn(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new hc(tc.comparator)},aa.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o,s,u,c,l;return a(this,function(a){switch(a.label){case 0:t=[],n=[],r=0,i=e,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(u=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(u.query,!0)]:[3,5]):[3,11];case 2:return a.sent(),[4,this.localStore.allocateQuery(u.query)];case 3:return s=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(u)];case 4:return(c=a.sent()).snapshot&&n.push(c.snapshot),[3,9];case 5:return ln(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return ln(!!(l=a.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(l)];case 7:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(s,!1)];case 8:a.sent(),a.label=9;case 9:t.push(s),a.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},aa.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},aa.prototype.applyTargetState=function(e,t,n){return o(this,void 0,void 0,function(){var r,i,o,s,u;return a(this,function(a){switch(a.label){case 0:if(this.isPrimary)return an(md,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return a.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=a.sent(),i=pf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return a.sent(),[3,11];case 4:return function(e){return e.code===Vu.DATA_LOSS&&e.message===Hc}(o=a.sent())?(s=[],yn(this.queryViewsByTarget,function(e){return s.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)]):[3,6];case 5:return a.sent(),[3,7];case 6:throw o;case 7:return[3,8];case 8:return u=this.queryViewsByTarget[e],this.removeAndCleanupQuery(u),[4,this.localStore.releaseQuery(u.query,!0)];case 9:return a.sent(),this.syncEngineListener.onWatchError(u.query,n),[3,11];case 10:cn("Unexpected target state: "+t),a.label=11;case 11:return[2]}})})},aa.prototype.applyActiveTargetsChange=function(e,t){return o(this,void 0,void 0,function(){var n,r,i,o,s,u,c,l,h,f=this;return a(this,function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(h=r[n],ln(!this.queryViewsByTarget[h],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return ln(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:s=function(e){var t;return a(this,function(n){switch(n.label){case 0:return(t=u.queryViewsByTarget[e])?[4,u.localStore.releaseQuery(t.query,!1).then(function(){f.remoteStore.unlisten(e),f.removeAndCleanupQuery(t)}).catch(Ci)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,
c=0,l=t,d.label=7;case 7:return c<l.length?(h=l[c],[5,s(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},aa.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},aa.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},aa.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?mr().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:mr()},aa),bd=(sa.prototype.isAuthenticated=function(){return null!=this.uid},sa.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},sa.prototype.isEqual=function(e){return e.uid===this.uid},sa.UNAUTHENTICATED=new sa(null),sa.GOOGLE_CREDENTIALS=new sa("google-credentials-uid"),sa.FIRST_PARTY=new sa("first-party-uid"),sa),wd="SharedClientState",_d="firestore_clients",Ed="firestore_mutations",Sd="firestore_targets",Td=(ua.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new ju(r.error.code,r.error.message)),i?new ua(e,t,r.state,o):(sn(wd,"Failed to parse mutation state for ID '"+t+"': "+n),null)},ua.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},ua),Cd=(ca.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new ju(n.error.code,n.error.message)),r?new ca(e,n.state,i):(sn(wd,"Failed to parse target state for ID '"+e+"': "+t),null)},ca.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},ca),Id=(la.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=gr(),o=0;r&&o<n.activeTargetIds.length;++o)r=fo(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new la(e,i):(sn(wd,"Failed to parse client data for instance '"+e+"': "+t),null)},la),kd=(ha.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in Gh&&"string"==typeof t.clientId?new ha(t.clientId,Gh[t.onlineState]):(sn(wd,"Failed to parse online state: "+e),null)},ha),Nd=(fa.prototype.addQueryTarget=function(e){ln(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},fa.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},fa.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},fa),Ad=(da.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},da.prototype.start=function(){return o(this,void 0,void 0,function(){var e,t,n,r,i,o,s,u,c,l,h,f=this;return a(this,function(a){switch(a.label){case 0:return ln(!this.started,"WebStorageSharedClientState already started"),ln(null!==this.syncEngine,"syncEngine property must be set before calling start()"),ln(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Id.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},da.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},da.prototype.getAllActiveQueryTargets=function(){var e=gr();return vn(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},da.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},da.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},da.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},da.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Cd.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},da.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},da.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},da.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},da.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},da.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},da.prototype.setOnlineState=function(e){this.persistOnlineState(e)},da.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},da.prototype.getItem=function(e){var t=this.storage.getItem(e);return an(wd,"READ",e,t),t},da.prototype.setItem=function(e,t){an(wd,"SET",e,t),this.storage.setItem(e,t)},da.prototype.removeItem=function(e){an(wd,"REMOVE",e),this.storage.removeItem(e)},da.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(an(wd,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void sn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return o(t,void 0,void 0,function(){var t,n,r,i,o,s;return a(this,function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(ln(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=Yu.INVALID;if(null!=e)try{var n=JSON.parse(e);ln("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){sn(wd,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Yu.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(da.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),da.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},da.prototype.persistMutationState=function(e,t,n){var r=new Td(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},da.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},da.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Gh[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},da.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Cd(e,t,n);this.setItem(r,i.toWebStorageJSON())},da.prototype.toWebStorageClientStateKey=function(e){return ln(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),_d+"_"+this.persistenceKey+"_"+e},da.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Sd+"_"+this.persistenceKey+"_"+e},da.prototype.toWebStorageMutationBatchKey=function(e){var t=Ed+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},da.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},da.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return ln(null!==n,"Cannot parse client state key '"+e+"'"),Id.fromWebStorageEntry(n,t)},da.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);ln(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Td.fromWebStorageEntry(new bd(i),r,t)},da.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);ln(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Cd.fromWebStorageEntry(r,t)},da.prototype.fromWebStorageOnlineState=function(e){return kd.fromWebStorageEntry(e)},da.prototype.handleMutationBatchEvent=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){return e.user.uid!==this.currentUser.uid?(an(wd,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},da.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},da.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),s=[],u=[];return i.forEach(function(e){return o(n,void 0,void 0,function(){return a(this,function(t){return r.has(e)||s.push(e),[2]})})}),r.forEach(function(e){return o(n,void 0,void 0,function(){return a(this,function(t){return i.has(e)||u.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(s,u)},da.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},da),Dd=(pa.prototype.addPendingMutation=function(e){},pa.prototype.updateMutationState=function(e,t,n){},pa.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},pa.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},pa.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},pa.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},pa.prototype.clearQueryState=function(e){delete this.queryState[e]},pa.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},pa.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},pa.prototype.start=function(){return this.localState=new Nd,Promise.resolve()},pa.prototype.handleUserChange=function(e,t,n){},pa.prototype.setOnlineState=function(e){},pa.prototype.shutdown=function(){},pa.prototype.writeSequenceNumber=function(e){},pa),xd="FirestoreClient",Rd=(ma.prototype.lruParams=function(){return Il.withCacheSize(this.cacheSizeBytes)},ma),Pd=function(){},Od=(ga.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new nc,r=new nc,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},ga.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},ga.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Rd?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},ga.prototype.canFallback=function(e){return e instanceof ju?e.code===Vu.FAILED_PRECONDITION||e.code===Vu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},ga.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ju(Vu.FAILED_PRECONDITION,"The client has already been terminated.")},ga.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Pl.buildStoragePrefix(this.databaseInfo),i=new ad(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return o(n,void 0,void 0,function(){var n,o;return a(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Ad.isAvailable(this.platform))throw new ju(Vu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=t.lruParams(),t.synchronizeTabs?(this.sharedClientState=new Ad(this.asyncQueue,this.platform,r,this.clientId,e),[4,Pl.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Dd,[4,Pl.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return[2,(this.persistence=n).referenceDelegate.garbageCollector]}})})})},ga.prototype.startMemoryPersistence=function(){return this.persistence=Oh.createEagerPersistence(this.clientId),this.sharedClientState=new Dd,Promise.resolve(null)},ga.prototype.initializeRest=function(e,t){var n=this;return an(xd,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return o(n,void 0,void 0,function(){var n,i,s,u,c,l=this;return a(this,function(h){switch(h.label){case 0:return this.localStore=new Dh(this.persistence,e),t&&(this.lruScheduler=new kl(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),i=this.platform.newSerializer(this.databaseInfo.databaseId),s=new Zh(this.asyncQueue,r,this.credentials,i),u=function(e){return l.syncEngine.applyOnlineStateChange(e,Hh.RemoteStore)},c=function(e){return l.syncEngine.applyOnlineStateChange(e,Hh.SharedClientState)},this.remoteStore=new Ff(this.localStore,s,this.asyncQueue,u,n),this.syncEngine=new vd(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=c,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new ud(this.syncEngine),[4,this.sharedClientState.start()];case 1:return h.sent(),[4,this.remoteStore.start()];case 2:return h.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return o(l,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return h.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return o(l,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 4:return h.sent(),[2]}})})})},ga.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),an(xd,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},ga.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},ga.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return o(e,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},ga.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new nc;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},ga.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new cd(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},ga.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},ga.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Wc)return e;if(e instanceof Kc)return null;throw new ju(Vu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},ga.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=mr(),r=new dd(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},ga.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new nc;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},ga.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(ga.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),ga.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new nc;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},ga),Md=(ya.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},ya.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},ya.prototype.mute=function(){this.muted=!0},ya.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},ya),Ld=(va.documentId=function(){return va._DOCUMENT_ID},va.prototype.isEqual=function(e){if(!(e instanceof va))throw Mn("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},va._DOCUMENT_ID=new va(ec.keyField().canonicalString()),va),Fd=new RegExp("[~\\*/\\[\\]]"),Ud=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},Bd=(ba.prototype.getToken=function(){return Promise.resolve(null)},ba.prototype.invalidateToken=function(){},ba.prototype.setChangeListener=function(e){ln(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(bd.UNAUTHENTICATED)},ba.prototype.removeChangeListener=function(){ln(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},ba),qd=(wa.prototype.getToken=function(){var e=this;ln(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new ju(Vu.ABORTED,"getToken aborted due to token change.");return n?(ln("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Ud(n.accessToken,e.currentUser)):null})},wa.prototype.invalidateToken=function(){this.forceRefresh=!0},wa.prototype.setChangeListener=function(e){ln(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},wa.prototype.removeChangeListener=function(){ln(null!=this.tokenListener,"removeChangeListener() called twice"),ln(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},wa.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return ln(null===e||"string"==typeof e,"Received invalid UID: "+e),new bd(e)},wa),Vd=(Object.defineProperty(_a.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),_a),jd=(Ea.prototype.getToken=function(){return Promise.resolve(new Vd(this.gapi,this.sessionIndex))},Ea.prototype.setChangeListener=function(e){e(bd.FIRST_PARTY)},Ea.prototype.removeChangeListener=function(){},Ea.prototype.invalidateToken=function(){},Ea),Wd=(Ta.delete=function(){return wn("FieldValue.delete",arguments),Kd.instance},Ta.serverTimestamp=function(){return wn("FieldValue.serverTimestamp",arguments),Qd.instance},Ta.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return En("FieldValue.arrayUnion",arguments,1),new Gd(e)},Ta.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return En("FieldValue.arrayRemove",arguments,1),new zd(e)},Ta.increment=function(e){return Tn("FieldValue.increment","number",1,e),_n("FieldValue.increment",arguments,1),new Hd(e)},Ta.prototype.isEqual=function(e){return this===e},Ta),Kd=(i(Ca,If=Wd),Ca.instance=new Ca,Ca),Qd=(i(Ia,kf=Wd),Ia.instance=new Ia,Ia),Gd=(i(ka,Nf=Wd),ka),zd=(i(Na,Af=Wd),Na),Hd=(i(Aa,Df=Wd),Aa),Yd=pn(Wd,"Use FieldValue.<field>() instead."),Xd=/^__.*__$/,Jd=(Da.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Th(e,this.data,this.fieldMask,t)):n.push(new Sh(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new Ch(e,this.fieldTransforms)),n},Da),$d=(xa.prototype.toMutations=function(e,t){var n=[new Th(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new Ch(e,this.fieldTransforms)),n},xa);(Rf=xf=xf||{})[Rf.Set=0]="Set",Rf[Rf.Update=1]="Update",Rf[Rf.MergeSet=2]="MergeSet",Rf[Rf.Argument=3]="Argument";var Zd,ep=(Pa.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new Pa(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},Pa.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new Pa(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},Pa.prototype.childContextForArray=function(e){return new Pa(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Pa.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new ju(Vu.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},Pa.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},Pa.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},Pa.prototype.validatePathSegment=function(e){if(Ra(this.dataSource)&&Xd.test(e))throw this.createError("Document fields cannot begin and end with __")},Pa),tp=function(e,t){this.databaseId=e,this.key=t},np=(Oa.prototype.parseSetData=function(e,t){var n=new ep(xf.Set,e,ec.EMPTY_PATH);La("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Jd(r,null,n.fieldTransforms)},Oa.prototype.parseMergeData=function(e,t,n){var r=new ep(xf.MergeSet,e,ec.EMPTY_PATH);La("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new yc(ec.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Ld)h=l._internalPath;else{if("string"!=typeof l)throw cn("Expected stringOrFieldPath to be a string or a FieldPath");h=Ua(e,l)}if(!r.contains(h))throw new ju(Vu.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=hh.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=hh.fromArray(r.fieldMask),o=r.fieldTransforms;return new Jd(a,i,o)},Oa.prototype.parseUpdateData=function(e,t){var n=this,r=new ep(xf.Update,e,ec.EMPTY_PATH);La("Data must be an object, but it was:",r,t);var i=new yc(ec.comparator),o=ch.EMPTY;vn(t,function(t,a){var s=Ua(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Kd)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=hh.fromSet(i);return new $d(o,a,r.fieldTransforms)},Oa.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new ep(xf.Update,e,ec.EMPTY_PATH),o=[Fa(e,t)],a=[n];if(r.length%2!=0)throw new ju(Vu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Fa(e,r[s])),a.push(r[s+1]);var u=new yc(ec.comparator),c=ch.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Kd)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=hh.fromSet(u);return new $d(c,p,i.fieldTransforms)},Oa.prototype.parseQueryValue=function(e,t){var n=new ep(xf.Argument,e,ec.EMPTY_PATH),r=this.parseData(t,n);return ln(null!=r,"Parsed data should not be null."),ln(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},Oa.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Ba(e);throw t.createError(n)}},Oa.prototype.parseData=function(e,t){if(Ma(e=this.runPreConverter(e,t)))return La("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Wd)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},Oa.prototype.parseObject=function(e,t){var n=this,r=new hc(Bn);return bn(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):vn(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new ch(r)},Oa.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=$l.INSTANCE),n.push(s),r++}return new lh(n)},Oa.prototype.parseSentinelFieldValue=function(e,t){if(!Ra(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Kd){if(t.dataSource!==xf.MergeSet)throw t.dataSource===xf.Update?(ln(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Qd)t.fieldTransforms.push(new fh(t.path,$f.instance));else if(e instanceof Gd){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Zf(n);t.fieldTransforms.push(new fh(t.path,r))}else if(e instanceof zd){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new ed(n);t.fieldTransforms.push(new fh(t.path,i))}else if(e instanceof Hd){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new td(o);t.fieldTransforms.push(new fh(t.path,a))}else cn("Unknown FieldValue type: "+e)},Oa.prototype.parseScalarValue=function(e,t){if(null===e)return $l.INSTANCE;if("number"==typeof e)return fo(e)?new th(e):new nh(e);if("boolean"==typeof e)return Zl.of(e);if("string"==typeof e)return new rh(e);if(e instanceof Date)return new ih(cc.fromDate(e));if(e instanceof cc)return new ih(new cc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Uf)return new uh(e);if(e instanceof Ku)return new ah(e);if(e instanceof tp)return new sh(e.databaseId,e.key);throw t.createError("Unsupported field value: "+Rn(e))},Oa.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new ep(xf.Argument,e,ec.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},Oa),rp=Il.COLLECTION_DISABLED,ip=(qa.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},qa),op=(Va.prototype.settings=function(e){if(_n("Firestore.settings",arguments,1),Tn("Firestore.settings","object",1,e),mn(e,"persistence"))throw new ju(Vu.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new ip(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new ju(Vu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new Bd;switch(e.type){case"gapi":var t=e.client;return ln(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new jd(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new ju(Vu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Va.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},Va.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},Va.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new ju(Vu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&sn("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=gn(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Rd(this._settings.cacheSizeBytes,t))},Va.prototype.clearPersistence=function(){var e=this,t=Pl.buildStoragePrefix(this.makeDatabaseInfo()),n=new nc;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return o(e,void 0,void 0,function(){var e;return a(this,function(r){switch(r.label){case 0:
if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new ju(Vu.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Pl.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},Va.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Va.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),Va.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},Va.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Pd),this._firestoreClient},Va.prototype.makeDatabaseInfo=function(){return new Gu(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},Va.prototype.configureClient=function(e){ln(!!this._settings.host,"FirestoreSettings.host is not set"),ln(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Od(qu.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},Va.prototype.createDataConverter=function(e){return new np(function(t){if(t instanceof up){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new ju(Vu.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new tp(e,t._key)}return t})},Va.databaseIdFromApp=function(e){var t=e.options;if(!mn(t,"projectId"))throw new ju(Vu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new ju(Vu.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Hu(n)},Object.defineProperty(Va.prototype,"app",{get:function(){if(!this._firebaseApp)throw new ju(Vu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),Va.prototype.collection=function(e){return _n("Firestore.collection",arguments,1),Tn("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new mp($u.fromString(e),this)},Va.prototype.doc=function(e){return _n("Firestore.doc",arguments,1),Tn("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),up.forPath($u.fromString(e),this)},Va.prototype.collectionGroup=function(e){if(_n("Firestore.collectionGroup",arguments,1),Tn("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new ju(Vu.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new fp(new Bf($u.EMPTY_PATH,e),this)},Va.prototype.runTransaction=function(e){var t=this;return _n("Firestore.runTransaction",arguments,1),Tn("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new ap(t,n))})},Va.prototype.batch=function(){return this.ensureClientConfigured(),new sp(this)},Object.defineProperty(Va,"logLevel",{get:function(){switch(rn()){case Cu.DEBUG:return"debug";case Cu.ERROR:return"error";case Cu.SILENT:return"silent";default:return cn("Unknown log level: "+rn())}},enumerable:!0,configurable:!0}),Va.setLogLevel=function(e){switch(_n("Firestore.setLogLevel",arguments,1),Tn("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":on(Cu.DEBUG);break;case"error":on(Cu.ERROR);break;case"silent":on(Cu.SILENT);break;default:throw new ju(Vu.INVALID_ARGUMENT,"Invalid log level: "+e)}},Va.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},Va),ap=(ja.prototype.get=function(e){var t=this;_n("Transaction.get",arguments,1);var n=es("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return cn("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Kc)return new lp(t._firestore,n._key,null,!1,!1);if(r instanceof Wc)return new lp(t._firestore,n._key,r,!1,!1);throw cn("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},ja.prototype.set=function(e,t,n){Sn("Transaction.set",arguments,2,3);var r=es("Transaction.set",e,this._firestore),i=(n=Ja("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},ja.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof Ld?(En("Transaction.update",arguments,3),r=es("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(_n("Transaction.update",arguments,2),r=es("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},ja.prototype.delete=function(e){_n("Transaction.delete",arguments,1);var t=es("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},ja),sp=(Wa.prototype.set=function(e,t,n){Sn("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=es("WriteBatch.set",e,this._firestore),i=(n=Ja("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,_h.NONE)),this},Wa.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof Ld?(En("WriteBatch.update",arguments,3),r=es("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(_n("WriteBatch.update",arguments,2),r=es("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,_h.exists(!0))),this},Wa.prototype.delete=function(e){_n("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=es("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Ih(t._key,_h.NONE)),this},Wa.prototype.commit=function(){return o(this,void 0,void 0,function(){return a(this,function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},Wa.prototype.verifyNotCommitted=function(){if(this._committed)throw new ju(Vu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Wa),up=(Ka.forPath=function(e,t){if(e.length%2!=0)throw new ju(Vu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new Ka(new tc(e),t)},Object.defineProperty(Ka.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Ka.prototype,"parent",{get:function(){return new mp(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Ka.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),Ka.prototype.collection=function(e){if(_n("DocumentReference.collection",arguments,1),Tn("DocumentReference.collection","non-empty string",1,e),!e)throw new ju(Vu.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=$u.fromString(e);return new mp(this._key.path.child(t),this.firestore)},Ka.prototype.isEqual=function(e){if(!(e instanceof Ka))throw Mn("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},Ka.prototype.set=function(e,t){Sn("DocumentReference.set",arguments,1,2);var n=(t=Ja("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,_h.NONE))},Ka.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof Ld?(En("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(_n("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,_h.exists(!0)))},Ka.prototype.delete=function(){return _n("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Ih(this._key,_h.NONE)])},Ka.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Sn("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||Sa(e[i])||(On("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),kn("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=Sa(e[i])?e[i]:(Tn("DocumentReference.onSnapshot","function",i,e[i]),Cn("DocumentReference.onSnapshot","function",i+1,e[i+1]),Cn("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},Ka.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Md({next:function(e){if(t.next){ln(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new lp(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Bf.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},Ka.prototype.get=function(e){var t=this;return Sn("DocumentReference.get",arguments,0,1),Za("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new lp(t.firestore,t._key,e,!0,e instanceof Wc&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},Ka.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new ju(Vu.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new ju(Vu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},Ka),cp=(Qa.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},Qa),lp=(Ga.prototype.data=function(e){return Sn("DocumentSnapshot.data",arguments,0,1),e=$a("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,Xl.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},Ga.prototype.get=function(e,t){if(Sn("DocumentSnapshot.get",arguments,1,2),t=$a("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(Fa("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Xl.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(Ga.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Ga.prototype,"ref",{get:function(){return new up(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Ga.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(Ga.prototype,"metadata",{get:function(){return new cp(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),Ga.prototype.isEqual=function(e){if(!(e instanceof Ga))throw Mn("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},Ga.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},Ga.prototype.convertValue=function(e,t){if(e instanceof ch)return this.convertObject(e,t);if(e instanceof lh)return this.convertArray(e,t);if(e instanceof sh){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||sn("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new up(n,this._firestore)}return e.value(t)},Ga.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},Ga),hp=(i(za,Zd=lp),za.prototype.data=function(e){var t=Zd.prototype.data.call(this,e);return ln("object"==typeof t,"Document in a QueryDocumentSnapshot should exist"),t},za),fp=(Ha.prototype.where=function(e,t,n){_n("Query.where",arguments,3),Pn("Query.where",3,n),"in"!==t&&"array-contains-any"!==t&&function(e,t,n,r){if(!t.some(function(e){return e===r}))throw new ju(Vu.INVALID_ARGUMENT,"Invalid value "+Rn(r)+" provided to function "+e+"() for its "+Ln(n)+" argument. Acceptable values: "+t.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains"],2,t);var r,i=Fa("Query.where",e),o=qf.fromString(t);if(i.isKeyField()){if(o===qf.ARRAY_CONTAINS||o===qf.ARRAY_CONTAINS_ANY)throw new ju(Vu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===qf.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new lh(a)}else r=this.parseDocumentIdValue(n)}else o!==qf.IN&&o!==qf.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var l=Vf.create(i,o,r);return this.validateNewFilter(l),new Ha(this._query.addFilter(l),this.firestore)},Ha.prototype.orderBy=function(e,t){var n;if(Sn("Query.orderBy",arguments,1,2),Cn("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=zf.ASCENDING;else{if("desc"!==t)throw new ju(Vu.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=zf.DESCENDING}if(null!==this._query.startAt)throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Fa("Query.orderBy",e),i=new Yf(r,n);return this.validateNewOrderBy(i),new Ha(this._query.addOrderBy(i),this.firestore)},Ha.prototype.limit=function(e){if(_n("Query.limit",arguments,1),Tn("Query.limit","number",1,e),e<=0)throw new ju(Vu.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new Ha(this._query.withLimit(e),this.firestore)},Ha.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];En("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new Ha(this._query.withStartAt(r),this.firestore)},Ha.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];En("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new Ha(this._query.withStartAt(r),this.firestore)},Ha.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];En("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new Ha(this._query.withEndAt(r),this.firestore)},Ha.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];En("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new Ha(this._query.withEndAt(r),this.firestore)},Ha.prototype.isEqual=function(e){if(!(e instanceof Ha))throw Mn("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},Ha.prototype.boundFromDocOrFields=function(e,t,n,r){if(Pn(e,1,t),t instanceof lp){if(0<n.length)throw new ju(Vu.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new ju(Vu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},Ha.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new sh(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof oh)throw new ju(Vu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Hf(r,n)},Ha.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new ju(Vu.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child($u.fromString(a));if(!tc.isDocumentKey(s))throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new tc(s);i.push(new sh(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Hf(i,n)},Ha.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Sn("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||Sa(e[i])||(On("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),kn("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=Sa(e[i])?e[i]:(Tn("Query.onSnapshot","function",i,e[i]),Cn("Query.onSnapshot","function",i+1,e[i+1]),Cn("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},Ha.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Md({next:function(e){t.next&&t.next(new dp(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},Ha.prototype.get=function(e){var t=this;return Sn("Query.get",arguments,0,1),Za("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new dp(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},Ha.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new ju(Vu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},Ha.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child($u.fromString(e));if(!tc.isDocumentKey(t))throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new sh(this.firestore._databaseId,new tc(t))}if(e instanceof up){var n=e;return new sh(this.firestore._databaseId,n._key)}throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Rn(e)+".")},Ha.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new ju(Vu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new ju(Vu.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new ju(Vu.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter(function(e){return Number.isNaN(e)}).length)throw new ju(Vu.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},Ha.prototype.validateNewFilter=function(e){if(e instanceof Vf){var t=[qf.ARRAY_CONTAINS,qf.ARRAY_CONTAINS_ANY],n=[qf.IN,qf.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new ju(Vu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ju(Vu.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},Ha.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},Ha.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new ju(Vu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},Ha),dp=(Object.defineProperty(Ya.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(Ya.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(Ya.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),Ya.prototype.forEach=function(e,t){var n=this;Sn("QuerySnapshot.forEach",arguments,1,2),Tn("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(Ya.prototype,"query",{get:function(){return new fp(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),Ya.prototype.docChanges=function(e){e&&(On("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),kn("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new ju(Vu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new hp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return ln(t.type===of.Added,"Invalid event type for first snapshot"),ln(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==of.Metadata}).map(function(t){var r=new hp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==of.Added&&(ln(0<=(i=o.indexOf(t.doc.key)),"Index for document not found"),o=o.delete(t.doc.key)),t.type!==of.Removed&&(a=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case of.Added:return"added";case of.Modified:case of.Metadata:return"modified";case of.Removed:return"removed";default:return cn("Unknown change type: "+e)}}(t.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},Ya.prototype.isEqual=function(e){if(!(e instanceof Ya))throw Mn("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},Ya.prototype.convertToDocumentImpl=function(e){return new hp(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},Ya);["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(dp.prototype.docChanges,e,{get:function(){return function(){throw new ju(Vu.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var pp,mp=(i(Xa,pp=fp),Object.defineProperty(Xa.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Xa.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new up(new tc(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Xa.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),Xa.prototype.doc=function(e){if(Sn("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Wu.newId()),Tn("CollectionReference.doc","non-empty string",1,e),""===e)throw new ju(Vu.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=$u.fromString(e);return up.forPath(this._query.path.child(t),this.firestore)},Xa.prototype.add=function(e){_n("CollectionReference.add",arguments,1),Tn("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},Xa),gp=pn(op,"Use firebase.firestore() instead."),yp=pn(ap,"Use firebase.firestore().runTransaction() instead."),vp=pn(sp,"Use firebase.firestore().batch() instead."),bp=pn(up,"Use firebase.firestore().doc() instead."),wp=pn(lp),_p=pn(hp),Ep=pn(fp),Sp=pn(dp),Tp=pn(mp,"Use firebase.firestore().collection() instead."),Cp={Firestore:gp,GeoPoint:Uf,Timestamp:cc,Blob:Qu,Transaction:yp,WriteBatch:vp,DocumentReference:bp,DocumentSnapshot:wp,Query:Ep,QueryDocumentSnapshot:_p,QuerySnapshot:Sp,CollectionReference:Tp,FieldPath:Ld,FieldValue:Yd,setLogLevel:op.setLogLevel,CACHE_SIZE_UNLIMITED:rp},Ip=(ns.prototype.addCallback=function(e){},ns.prototype.shutdown=function(){},ns),kp="ConnectivityMonitor",Np=(rs.prototype.addCallback=function(e){this.callbacks.push(e)},rs.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},rs.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},rs.prototype.onNetworkAvailable=function(){an(kp,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},rs.prototype.onNetworkUnavailable=function(){an(kp,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},rs.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},rs),Ap=(is.prototype.onOpen=function(e){ln(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},is.prototype.onClose=function(e){ln(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},is.prototype.onMessage=function(e){ln(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},is.prototype.close=function(){this.closeFn()},is.prototype.send=function(e){this.sendFn(e)},is.prototype.callOnOpen=function(){ln(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},is.prototype.callOnClose=function(e){ln(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},is.prototype.callOnMessage=function(e){ln(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},is),Dp="Connection",xp={BatchGetDocuments:"batchGet",Commit:"commit"},Rp="gl-js/ fire/"+Pu,Pp=(os.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Rp},os.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(o,a){var s=new Ru;s.listenOnce(Du.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Au.NO_ERROR:var t=s.getResponseJson();an(Dp,"XHR received:",JSON.stringify(t)),o(t);break;case Au.TIMEOUT:an(Dp,'RPC "'+e+'" timed out'),a(new ju(Vu.DEADLINE_EXCEEDED,"Request time out"));break;case Au.HTTP_ERROR:var n=s.getStatus();if(an(Dp,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),0<n){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return 0<=Object.values(Vu).indexOf(t)?t:Vu.UNKNOWN}(r.status);a(new ju(i,r.message))}else a(new ju(Vu.UNKNOWN,"Server responded with status "+s.getStatus()))}else an(Dp,'RPC "'+e+'" failed'),a(new ju(Vu.UNAVAILABLE,"Connection failed."));break;default:cn('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.");
}}finally{an(Dp,'RPC "'+e+'" completed.')}});var u=JSON.stringify(t);an(Dp,"XHR sending: ",i+" "+u);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),s.send(i,"POST",u,c,15)})},os.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},os.prototype.openStream=function(e,t){function n(e,t){s.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})}var r=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Nu(),o={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(o.initMessageHeaders,t),"object"==typeof navigator&&"ReactNative"===navigator.product||(o.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");an(Dp,"Creating WebChannel: "+a+" "+o);var s=i.createWebChannel(a,o),u=!1,c=!1,l=new Ap({sendFn:function(e){c?an(Dp,"Not sending because WebChannel is closed:",e):(u||(an(Dp,"Opening WebChannel transport."),s.open(),u=!0),an(Dp,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}});return n(xu.EventType.OPEN,function(){c||an(Dp,"WebChannel transport opened.")}),n(xu.EventType.CLOSE,function(){c||(c=!0,an(Dp,"WebChannel transport closed"),l.callOnClose())}),n(xu.EventType.ERROR,function(e){c||(c=!0,an(Dp,"WebChannel transport errored:",e),l.callOnClose(new ju(Vu.UNAVAILABLE,"The operation could not be completed")))}),n(xu.EventType.MESSAGE,function(e){if(!c){var t=e.data[0];ln(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){an(Dp,"WebChannel received error:",r);var i=r.status,o=function(e){var t=tf[e];if(void 0!==t)return Eo(t)}(i),a=r.message;void 0===o&&(o=Vu.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.callOnClose(new ju(o,a)),s.close()}else an(Dp,"WebChannel received:",t),l.callOnMessage(t)}}),setTimeout(function(){l.callOnOpen()},0),l},os.prototype.makeUrl=function(e){var t=xp[e];ln(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},os),Op=(Object.defineProperty(as.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(as.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),as.prototype.loadConnection=function(e){return Promise.resolve(new Pp(e))},as.prototype.newConnectivityMonitor=function(){return Np.isAvailable()?new Np:new Ip},as.prototype.newSerializer=function(e){return new ad(e,{useProto3Json:!0})},as.prototype.formatJSON=function(e){return JSON.stringify(e)},as.prototype.atob=function(e){return atob(e)},as.prototype.btoa=function(e){return btoa(e)},as);qu.setPlatform(new Op),ts(t)}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}})}).call(t,function(){return this}())},function(e,t,n){var r;(function(e,i){!function(){var o=n(5);n(39),"undefined"!=typeof o.default&&(o=o.default);var a={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};a=function(){function e(e,t){for(var n=0;n<f.length;n++)if(f[n].className===e)return"undefined"!=typeof t&&(f[n]=t),f[n];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function n(e,n){var r=t(e);return r.indexOf(n)!==-1}function r(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var r=document.createEvent("Events");return r.initEvent(e,t,n),r}function i(t,n){if("undefined"==typeof t&&"undefined"==typeof n)for(var r=0;r<f.length;r++)i(f[r].className,f[r].cssClass);else{var a=t;if("undefined"==typeof n){var s=e(a);s&&(n=s.cssClass)}for(var u=document.querySelectorAll("."+n),c=0;c<u.length;c++)o(u[c],a)}}function o(i,o){if(!("object"==typeof i&&i instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var a=r("mdl-componentupgrading",!0,!0);if(i.dispatchEvent(a),!a.defaultPrevented){var s=t(i),u=[];if(o)n(i,o)||u.push(e(o));else{var c=i.classList;f.forEach(function(e){c.contains(e.cssClass)&&u.indexOf(e)===-1&&!n(i,e.className)&&u.push(e)})}for(var l,h=0,m=u.length;h<m;h++){if(l=u[h],!l)throw new Error("Unable to find a registered component for the given class.");s.push(l.className),i.setAttribute("data-upgraded",s.join(","));var g=new l.classConstructor(i);g[p]=l,d.push(g);for(var y=0,v=l.callbacks.length;y<v;y++)l.callbacks[y](i);l.widget&&(i[l.className]=g);var b=r("mdl-componentupgraded",!0,!1);i.dispatchEvent(b)}}}function a(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var t,n=0,r=e.length;n<r;n++)t=e[n],t instanceof HTMLElement&&(o(t),t.children.length>0&&a(t.children))}function s(t){var n="undefined"==typeof t.widget&&"undefined"==typeof t.widget,r=!0;n||(r=t.widget||t.widget);var i={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:r,callbacks:[]};if(f.forEach(function(e){if(e.cssClass===i.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===i.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(p))throw new Error("MDL component classes must not have "+p+" defined as a property.");var o=e(t.classAsString,i);o||f.push(i)}function u(t,n){var r=e(t);r&&r.callbacks.push(n)}function c(){for(var e=0;e<f.length;e++)i(f[e].className)}function l(e){if(e){var t=d.indexOf(e);d.splice(t,1);var n=e.element_.getAttribute("data-upgraded").split(","),i=n.indexOf(e[p].classAsString);n.splice(i,1),e.element_.setAttribute("data-upgraded",n.join(","));var o=r("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(o)}}function h(e){var t=function(e){d.filter(function(t){return t.element_===e}).forEach(l)};if(e instanceof Array||e instanceof NodeList)for(var n=0;n<e.length;n++)t(e[n]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}var f=[],d=[],p="mdlComponentConfigInternal_";return{upgradeDom:i,upgradeElement:o,upgradeElements:a,upgradeAllRegistered:c,registerUpgradedCallback:u,register:s,downgradeElements:h}}(),a.ComponentConfigPublic,a.ComponentConfig,a.Component,a.upgradeDom=a.upgradeDom,a.upgradeElement=a.upgradeElement,a.upgradeElements=a.upgradeElements,a.upgradeAllRegistered=a.upgradeAllRegistered,a.registerUpgradedCallback=a.registerUpgradedCallback,a.register=a.register,a.downgradeElements=a.downgradeElements,window.componentHandler=a,window.componentHandler=a,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),a.upgradeAllRegistered()):(a.upgradeElement=function(){},a.register=function(){})}),function(){var e=function(e){this.element_=e,this.init()};window.MaterialButton=e,e.prototype.Constant_={},e.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},e.prototype.blurHandler_=function(e){e&&this.element_.blur()},e.prototype.disable=function(){this.element_.disabled=!0},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.element_.disabled=!1},e.prototype.enable=e.prototype.enable,e.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},a.register({constructor:e,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}(),function(){var e=function(e){this.element_=e,this.init()};window.MaterialProgress=e,e.prototype.Constant_={},e.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},e.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},e.prototype.setProgress=e.prototype.setProgress,e.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},e.prototype.setBuffer=e.prototype.setBuffer,e.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},a.register({constructor:e,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}(),function(){var e=function(e){this.element_=e,this.init()};window.MaterialSpinner=e,e.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},e.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},e.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[n,r,i],a=0;a<o.length;a++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[a].appendChild(s)}t.appendChild(n),t.appendChild(r),t.appendChild(i),this.element_.appendChild(t)},e.prototype.createLayer=e.prototype.createLayer,e.prototype.stop=function(){this.element_.classList.remove("is-active")},e.prototype.stop=e.prototype.stop,e.prototype.start=function(){this.element_.classList.add("is-active")},e.prototype.start=e.prototype.start,e.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},a.register({constructor:e,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}(),function(){var e=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=e,e.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},e.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},e.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},e.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},e.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.onReset_=function(e){this.updateClasses_()},e.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},e.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.checkFocus=e.prototype.checkFocus,e.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},e.prototype.checkValidity=e.prototype.checkValidity,e.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},e.prototype.checkDirty=e.prototype.checkDirty,e.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},e.prototype.enable=e.prototype.enable,e.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},e.prototype.change=e.prototype.change,e.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},a.register({constructor:e,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}(),function(){function i(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1}function o(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function a(e){e&&e.blur&&e!==document.body&&e.blur()}function s(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function u(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function c(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal.bind(this));t.observe(e,{attributes:!0,attributeFilter:["open"]})}else{var n,r=!1,i=function(){r?this.downgradeModal():this.maybeHideModal(),r=!1}.bind(this),o=function(t){if(t.target===e){var o="DOMNodeRemoved";r|=t.type.substr(0,o.length)===o,window.clearTimeout(n),n=window.setTimeout(i,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,o)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}var l=window.CustomEvent;l&&"object"!=typeof l||(l=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n},l.prototype=window.Event.prototype),c.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),h.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"],n=t.map(function(e){return e+":not([disabled])"});n.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(n.join(", "))}a(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!h.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");i(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,h.needsCentering(this.dialog_)?(h.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new l("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var h={};if(h.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},h.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],r=null;try{r=n.cssRules}catch(e){}if(r)for(var i=0;i<r.length;++i){var o=r[i],a=null;try{a=document.querySelectorAll(o.selectorText)}catch(e){}if(a&&s(a,e)){var u=o.style.getPropertyValue("top"),c=o.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},h.needsCentering=function(e){var t=window.getComputedStyle(e);return"absolute"===t.position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!h.isInlinePositionSetByStylesheet(e))},h.forceRegisterDialog=function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new c(e)},h.registerDialog=function(e){e.showModal||h.forceRegisterDialog(e)},h.DialogManager=function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var n=[];t.forEach(function(e){for(var t,r=0;t=e.removedNodes[r];++r)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))}),n.length&&e(n)}))},h.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},h.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},h.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var r=this.pendingDialogStack[0];if(r){var i=r.dialog.parentNode||document.body;i.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},h.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=o(e);){for(var t,n=0;t=this.pendingDialogStack[n];++n)if(t.dialog===e)return 0===n;e=e.parentElement}return!1},h.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),a(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0],n=t.dialog,r=n.compareDocumentPosition(e.target);return r&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},h.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new l("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(t)&&n.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},h.DialogManager.prototype.checkDOM_=function(e){var t=this.pendingDialogStack.slice();t.forEach(function(t){e.indexOf(t.dialog)!==-1?t.downgradeModal():t.maybeHideModal()})},h.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},h.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);t!==-1&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},h.dm=new h.DialogManager,h.formSubmitter=null,h.useValue=null,void 0===window.HTMLDialogElement){var f=document.createElement("form");if(f.setAttribute("method","dialog"),"dialog"!==f.method){var d=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(d){var p=d.get;d.get=function(){return u(this)?"dialog":p.call(this)};var m=d.set;d.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):m.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",d)}}document.addEventListener("click",function(e){if(h.formSubmitter=null,h.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&u(t.form)){var n="submit"===t.type&&["button","input"].indexOf(t.localName)>-1;if(!n){if("input"!==t.localName||"image"!==t.type)return;h.useValue=e.offsetX+","+e.offsetY}var r=o(t);r&&(h.formSubmitter=t)}}},!1);var g=HTMLFormElement.prototype.submit,y=function(){if(!u(this))return g.call(this);var e=o(this);e&&e.close()};HTMLFormElement.prototype.submit=y,document.addEventListener("submit",function(e){var t=e.target;if(u(t)){e.preventDefault();var n=o(t);if(n){var r=h.formSubmitter;r&&r.form===t?n.close(h.useValue||r.value):n.close(),h.formSubmitter=null}}},!0)}h.forceRegisterDialog=h.forceRegisterDialog,h.registerDialog=h.registerDialog,"amd"in n(17)?(r=function(){return h}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))):"object"==typeof e&&"object"==typeof e.exports?e.exports=h:window.dialogPolyfill=h}(),function(){function e(e,t){if(t){var n=Yc;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&Hc(n,e,{configurable:!0,writable:!0,value:t})}}function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function n(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function r(e){return void 0!==e}function a(e){return"string"==typeof e}function s(){}function u(e){e.V=void 0,e.Sa=function(){return e.V?e.V:e.V=new e}}function c(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function l(e){return null!=e}function h(e){return"array"==c(e)}function f(e){var t=c(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){return"function"==c(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function m(e,t,n){return e.call.apply(e.bind,arguments)}function g(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g,y.apply(null,arguments)}function v(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function b(e,t){for(var n in t)e[n]=t[n]}function w(e,t){e=e.split(".");var n=Xc;e[0]in n||"undefined"==typeof n.execScript||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)!e.length&&r(t)?n[i]=t:n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}}function _(e,t){function n(){}n.prototype=t.prototype,e.o=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.fc=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function E(e){if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function S(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");E.call(this,n+e[r])}function T(e,t){throw new S("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function C(e,t){for(var n=a(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}function I(e,t,n){for(var r=e.length,i=a(e)?e.split(""):e,o=0;o<r;o++)if(o in i&&t.call(n,i[o],o,e))return o;return-1}function k(e,t){return 0<=il(e,t)}function N(e,t){t=il(e,t);var n;return(n=0<=t)&&A(e,t),n}function A(e,t){return 1==Array.prototype.splice.call(e,t,1).length}function D(e,t){t=I(e,t,void 0),0<=t&&A(e,t)}function x(e,t){var n=0;C(e,function(r,i){t.call(void 0,r,i,e)&&A(e,i)&&n++})}function R(e){return Array.prototype.concat.apply([],arguments)}function P(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function O(e,t,n,r){return Array.prototype.splice.apply(e,M(arguments,1))}function M(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}function L(e,t){return e<t?-1:e>t?1:0}function F(e){return-1!=rl.indexOf(e)}function U(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function B(e){var t,n={};for(t in e)n[t]=e[t];return n}function q(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<bl.length;o++)n=bl[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(){return(F("Chrome")||F("CriOS"))&&!F("Edge")}function j(e){return gl.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ll,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(hl,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(fl,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(dl,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(pl,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ml,"&#0;"))),e}function W(e){return W[" "](e),e}function K(e,t){var n=Pl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function Q(){var e=Xc.document;return e?e.documentMode:void 0}function G(e){return K(e,function(){for(var t=0,n=cl(String(wl)).split("."),r=cl(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=L(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||L(0==a[2].length,0==s[2].length)||L(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function z(e,t){this.a=e===Ll&&t||"",this.g=Ml}function H(e){return e instanceof z&&e.constructor===z&&e.g===Ml?e.a:(T("expected object of type Const, got '"+e+"'"),"type_error:Const")}function Y(){this.a="",this.h=Fl}function X(e){return e instanceof Y&&e.constructor===Y&&e.h===Fl?e.a:(T("expected object of type TrustedResourceUrl, got '"+e+"' of type "+c(e)),"type_error:TrustedResourceUrl")}function J(e){var t=new Y;return t.a=e,t}function $(){this.a="",this.h=Bl}function Z(e){return ee(e).toString()}function ee(e){return e instanceof $&&e.constructor===$&&e.h===Bl?e.a:(T("expected object of type SafeUrl, got '"+e+"' of type "+c(e)),"type_error:SafeUrl")}function te(e){return e instanceof $?e:(e="object"==typeof e&&e.ka?e.ia():String(e),Ul.test(e)||(e="about:invalid#zClosurez"),ne(e))}function ne(e){var t=new $;return t.a=e,
t}function re(){this.a="",this.g=ql}function ie(){this.a="",this.j=Vl,this.h=null}function oe(e){return e instanceof ie&&e.constructor===ie&&e.j===Vl?e.a:(T("expected object of type SafeHtml, got '"+e+"' of type "+c(e)),"type_error:SafeHtml")}function ae(e,t){var n=new ie;return n.a=e,n.h=t,n}function se(e,t){e.src=X(t),null===$c&&(t=Xc.document,$c=(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&Jc.test(t)?t:""),t=$c,t&&e.setAttribute("nonce",t)}function ue(e,t){this.a=r(e)?e:0,this.g=r(t)?t:0}function ce(e,t){this.width=e,this.height=t}function le(e){return e?new _e(ye(e)):nl||(nl=new _e)}function he(e,t){var n=t||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+e):de(document,e,t)}function fe(e,t){var n=t||document;if(n.getElementsByClassName)e=n.getElementsByClassName(e)[0];else{n=document;var r=t||n;e=r.querySelectorAll&&r.querySelector&&e?r.querySelector(e?"."+e:""):de(n,e,t)[0]||null}return e||null}function de(e,t,n){var r;if(e=n||e,e.querySelectorAll&&e.querySelector&&t)return e.querySelectorAll(t?"."+t:"");if(t&&e.getElementsByClassName){var i=e.getElementsByClassName(t);return i}if(i=e.getElementsByTagName("*"),t){var o={};for(n=r=0;e=i[n];n++){var a=e.className;"function"==typeof a.split&&k(a.split(/\s+/),t)&&(o[r++]=e)}return o.length=r,o}return i}function pe(e,t){U(t,function(t,n){t&&"object"==typeof t&&t.ka&&(t=t.ia()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Kl.hasOwnProperty(n)?e.setAttribute(Kl[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}function me(e){return e.scrollingElement?e.scrollingElement:Il||"CSS1Compat"!=e.compatMode?e.body||e.documentElement:e.documentElement}function ge(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ye(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function ve(e,t){if("textContent"in e)e.textContent=t;else if(3==e.nodeType)e.data=String(t);else if(e.firstChild&&3==e.firstChild.nodeType){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(t)}else{for(var n;n=e.firstChild;)e.removeChild(n);e.appendChild(ye(e).createTextNode(String(t)))}}function be(e,t){return t?we(e,function(e){return!t||a(e.className)&&k(e.className.split(/\s+/),t)}):null}function we(e,t){for(var n=0;e;){if(t(e))return e;e=e.parentNode,n++}return null}function _e(e){this.a=e||Xc.document||document}function Ee(){}function Se(e){if(e instanceof Ee)return e;if("function"==typeof e.fa)return e.fa(!1);if(f(e)){var t=0,n=new Ee;return n.next=function(){for(;;){if(t>=e.length)throw Ql;if(t in e)return e[t++];t++}},n}throw Error("Not implemented")}function Te(e,t){if(f(e))try{ol(e,t,void 0)}catch(e){if(e!==Ql)throw e}else{e=Se(e);try{for(;;)t.call(void 0,e.next(),void 0,e)}catch(e){if(e!==Ql)throw e}}}function Ce(e){if(f(e))return P(e);e=Se(e);var t=[];return Te(e,function(e){t.push(e)}),t}function Ie(e,t){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ie)for(n=e.ha(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ke(e){if(e.h!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ne(e.g,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.h!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Ne(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ae(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function De(e,t,n,r){for(var i=n.length;0<=(t=e.indexOf(n,t))&&t<r;){var o=e.charCodeAt(t-1);if((38==o||63==o)&&(o=e.charCodeAt(t+i),!o||61==o||38==o||35==o))return t;t+=i+1}return-1}function xe(e,t){var n=e.search(zl),r=De(e,0,t,n);if(0>r)return null;var i=e.indexOf("&",r);return(0>i||i>n)&&(i=n),r+=t.length+1,decodeURIComponent(e.substr(r,i-r).replace(/\+/g," "))}function Re(e,t){this.h=this.w=this.j="",this.C=null,this.i=this.g="",this.v=!1;var n;e instanceof Re?(this.v=r(t)?t:e.v,Pe(this,e.j),this.w=e.w,this.h=e.h,Oe(this,e.C),this.g=e.g,Me(this,Qe(e.a)),this.i=e.i):e&&(n=String(e).match(Gl))?(this.v=!!t,Pe(this,n[1]||"",!0),this.w=Ue(n[2]||""),this.h=Ue(n[3]||"",!0),Oe(this,n[4]),this.g=Ue(n[5]||"",!0),Me(this,n[6]||"",!0),this.i=Ue(n[7]||"")):(this.v=!!t,this.a=new Ve(null,this.v))}function Pe(e,t,n){e.j=n?Ue(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Oe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.C=t}else e.C=null}function Me(e,t,n){t instanceof Ve?(e.a=t,ze(e.a,e.v)):(n||(t=Be(t,$l)),e.a=new Ve(t,e.v))}function Le(e){return e instanceof Re?new Re(e):new Re(e,void 0)}function Fe(e,t){return e instanceof Re||(e=Le(e)),t instanceof Re||(t=Le(t)),e.resolve(t)}function Ue(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Be(e,t,n){return a(e)?(e=encodeURI(e).replace(t,qe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qe(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function Ve(e,t){this.g=this.a=null,this.h=e||null,this.j=!!t}function je(e){e.a||(e.a=new Ie,e.g=0,e.h&&Ae(e.h,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function We(e,t){je(e),t=Ge(e,t),Ne(e.a.g,t)&&(e.h=null,e.g-=e.a.get(t).length,e=e.a,Ne(e.g,t)&&(delete e.g[t],e.h--,e.j++,e.a.length>2*e.h&&ke(e)))}function Ke(e,t){return je(e),t=Ge(e,t),Ne(e.a.g,t)}function Qe(e){var t=new Ve;return t.h=e.h,e.a&&(t.a=new Ie(e.a),t.g=e.g),t}function Ge(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function ze(e,t){t&&!e.j&&(je(e),e.h=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(We(this,t),We(this,n),0<e.length&&(this.h=null,this.a.set(Ge(this,n),P(e)),this.g+=e.length))},e)),e.j=t}function He(){throw Error("Do not instantiate directly")}function Ye(e,t,n,r){if(e=e(t||oh,void 0,n),r=(r||le()).a.createElement("DIV"),e=Xe(e),e.match(ih),e=ae(e,null),Wl())for(;r.lastChild;)r.removeChild(r.lastChild);return r.innerHTML=oe(e),1==r.childNodes.length&&(e=r.firstChild,1==e.nodeType&&(r=e)),r}function Xe(e){if(!p(e))return j(String(e));if(e instanceof He){if(e.da===eh)return e.content;if(e.da===rh)return j(e.content)}return T("Soy template output is unsafe for use as HTML: "+e),"zSoyz"}function Je(e){if(null!=e)switch(e.ta){case 1:return 1;case-1:return-1;case 0:return 0}return null}function $e(){He.call(this)}function Ze(e){return null!=e&&e.da===eh?e:e instanceof ie?ah(oe(e).toString(),e.g()):ah(j(String(String(e))),Je(e))}function et(){He.call(this)}function tt(e,t){this.content=String(e),this.ta=null!=t?t:null}function nt(e){return new tt(e,void 0)}function rt(e){function t(){}var n={label:it("New password")};t.prototype=e,e=new t;for(var r in n)e[r]=n[r];return e}function it(e){return(e=String(e))?new tt(e,void 0):""}function ot(e){return null!=e&&e.da===eh?String(String(e.content).replace(mh,"").replace(gh,"&lt;")).replace(hh,st):j(String(e))}function at(e){return null!=e&&e.da===th?e=String(e).replace(fh,ut):e instanceof $?e=String(Z(e)).replace(fh,ut):(e=String(e),ph.test(e)?e=e.replace(fh,ut):(T("Bad value `%s` for |filterNormalizeUri",[e]),e="#zSoyz")),e}function st(e){return ch[e]}function ut(e){return lh[e]}function ct(){return nt("Enter a valid phone number")}function lt(){return nt("Something went wrong. Please try again.")}function ht(){return nt("This email already exists without any means of sign-in. Please reset the password to recover.")}function ft(){return nt("Please login again to perform this operation")}function dt(e,t,n){if(this.code=yh+e,!(e=t)){switch(e="",this.code){case"firebaseui/merge-conflict":e+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:e+=lt()}e=nt(e).toString()}this.message=e||"",this.credential=n||null}function pt(){this.V={}}function mt(e,t,n){if(t.toLowerCase()in e.V)throw Error("Configuration "+t+" has already been defined.");e.V[t.toLowerCase()]=n}function gt(e,t,n){if(!(t.toLowerCase()in e.V))throw Error("Configuration "+t+" is not defined.");e.V[t.toLowerCase()]=n}function yt(e,t){if(e=e.get(t),!e)throw Error("Configuration "+t+" is required.");return e}function vt(){this.g=void 0,this.a={}}function bt(e,t,n,r){for(var i=0;i<t.length;i++){var o=t.charAt(i);e.a[o]||(e.a[o]=new vt),e=e.a[o]}if(r&&void 0!==e.g)throw Error('The collection already contains the key "'+t+'"');e.g=n}function wt(e,t){void 0!==e.g&&t.push(e.g);for(var n in e.a)wt(e.a[n],t)}function _t(e,t,n){void 0!==e.g&&n.push(t);for(var r in e.a)_t(e.a[r],t+r,n)}function Et(e){for(this.a=e,this.g=new vt,e=0;e<this.a.length;e++){var t=this.g.get("+"+this.a[e].b);t?t.push(this.a[e]):this.g.add("+"+this.a[e].b,[this.a[e]])}}function St(e,t){e=e.g;var n={},r=0;for(void 0!==e.g&&(n[r]=e.g);r<t.length;r++){var i=t.charAt(r);if(!(i in e.a))break;e=e.a[i],void 0!==e.g&&(n[r]=e.g)}for(var o in n)if(n.hasOwnProperty(o))return n[o];return[]}function Tt(e){for(var t=0;t<vh.length;t++)if(vh[t].c===e)return vh[t];return null}function Ct(e){e=e.toUpperCase();for(var t=[],n=0;n<vh.length;n++)vh[n].f===e&&t.push(vh[n]);return t}function It(e){if(0<e.length&&"+"==e.charAt(0)){e=e.substring(1);for(var t=[],n=0;n<vh.length;n++)vh[n].b==e&&t.push(vh[n]);e=t}else e=Ct(e);return e}function kt(e){e.sort(function(e,t){return e.name.localeCompare(t.name,"en")})}function Nt(e,t){this.a=e,this.va=t}function At(e){e=cl(e);var t=St(bh,e);return 0<t.length?new Nt("1"==t[0].b?"1-US-0":t[0].c,cl(e.substr(t[0].b.length+1))):null}function Dt(e){var t=Tt(e.a);if(!t)throw Error("Country ID "+e.a+" not found.");return"+"+t.b+e.va}function xt(e,t){for(var n=0;n<e.length;n++)if(!k(wh,e[n])&&(null!==_h&&e[n]in _h||k(t,e[n])))return e[n];return null}function Rt(e,t,n){this.reset(e,t,n,void 0,void 0)}function Pt(e){this.i=e,this.a=this.h=this.j=this.g=null}function Ot(e,t){this.name=e,this.value=t}function Mt(e){return e.j?e.j:e.g?Mt(e.g):(T("Root logger has no level set."),null)}function Lt(){Nh||(Nh=new Pt(""),kh[""]=Nh,Nh.j=Ih)}function Ft(e){Lt();var t;if(!(t=kh[e])){t=new Pt(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=Ft(e.substr(0,n)),n.h||(n.h={}),n.h[r]=t,t.g=n,kh[e]=t}return t}function Ut(){this.a=tl()}function Bt(e){this.j=e||"",Ah||(Ah=new Ut),this.i=Ah}function qt(e){return 10>e?"0"+e:String(e)}function Vt(e,t){e=(e.h-t)/1e3,t=e.toFixed(3);var n=0;if(1>e)n=2;else for(;100>e;)n++,e*=10;for(;0<n--;)t=" "+t;return t}function jt(e){Bt.call(this,e)}function Wt(e,t){var n=[];if(n.push(e.j," "),e.g){var r=new Date(t.h);n.push("[",qt(r.getFullYear()-2e3)+qt(r.getMonth()+1)+qt(r.getDate())+" "+qt(r.getHours())+":"+qt(r.getMinutes())+":"+qt(r.getSeconds())+"."+qt(Math.floor(r.getMilliseconds()/10)),"] ")}return n.push("[",Vt(t,e.i.get()),"s] "),n.push("[",t.g,"] "),n.push(t.i),e.h&&(t=t.a)&&n.push("\n",t instanceof Error?t.message:t.toString()),e.a&&n.push("\n"),n.join("")}function Kt(){this.i=y(this.h,this),this.a=new jt,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}function Qt(e,t,n,r){e[t]?e[t](n,r||""):e.log(n,r||"")}function Gt(e,t){var n=Dh;n&&n.log(Th,e,t)}function zt(e){var t=Dh;t&&t.log(Ch,e,void 0)}function Ht(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function Yt(e,t){this.h=e,this.j=t,this.g=0,this.a=null}function Xt(e,t){e.j(t),100>e.g&&(e.g++,t.next=e.a,e.a=t)}function Jt(){this.g=this.a=null}function $t(){var e=Bh,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.g=null),t.next=null),t}function Zt(){this.next=this.g=this.a=null}function en(e){Xc.setTimeout(function(){throw e},0)}function tn(){var e=Xc.MessageChannel;if("undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!F("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=y(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!=typeof e&&!F("Trident")&&!F("MSIE")){var t=new e,n={},i=n;return t.port1.onmessage=function(){if(r(n.next)){n=n.next;var e=n.ab;n.ab=null,e()}},function(e){i.next={ab:e},i=i.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){Xc.setTimeout(e,0)}}function nn(e,t){Fh||rn(),Uh||(Fh(),Uh=!0),Bh.add(e,t)}function rn(){if(Xc.Promise&&Xc.Promise.resolve){var e=Xc.Promise.resolve(void 0);Fh=function(){e.then(on)}}else Fh=function(){var e=on;!d(Xc.setImmediate)||Xc.Window&&Xc.Window.prototype&&!F("Edge")&&Xc.Window.prototype.setImmediate==Xc.setImmediate?(Lh||(Lh=tn()),Lh(e)):Xc.setImmediate(e)}}function on(){for(var e;e=$t();){try{e.a.call(e.g)}catch(e){en(e)}Xt(Mh,e)}Uh=!1}function an(e){if(this.a=qh,this.w=void 0,this.j=this.g=this.h=null,this.i=this.v=!1,e!=s)try{var t=this;e.call(void 0,function(e){mn(t,Vh,e)},function(e){if(!(e instanceof En))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}mn(t,jh,e)})}catch(e){mn(this,jh,e)}}function sn(){this.next=this.context=this.g=this.h=this.a=null,this.j=!1}function un(e,t,n){var r=Wh.get();return r.h=e,r.g=t,r.context=n,r}function cn(e){if(e instanceof an)return e;var t=new an(s);return mn(t,Vh,e),t}function ln(e){return new an(function(t,n){n(e)})}function hn(e,t){return pn(e,null,t,void 0)}function fn(e,t){if(e.a==qh)if(e.h){var n=e.h;if(n.g){for(var r=0,i=null,o=null,a=n.g;a&&(a.j||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==qh&&1==r?fn(n,t):(o?(r=o,r.next==n.j&&(n.j=r),r.next=r.next.next):vn(n),bn(n,i,jh,t)))}e.h=null}else mn(e,jh,t)}function dn(e,t){e.g||e.a!=Vh&&e.a!=jh||yn(e),e.j?e.j.next=t:e.g=t,e.j=t}function pn(e,t,n,i){var o=un(null,null,null);return o.a=new an(function(e,a){o.h=t?function(n){try{var r=t.call(i,n);e(r)}catch(e){a(e)}}:e,o.g=n?function(t){try{var o=n.call(i,t);!r(o)&&t instanceof En?a(t):e(o)}catch(e){a(e)}}:a}),o.a.h=e,dn(e,o),o.a}function mn(e,t,n){if(e.a==qh){e===n&&(t=jh,n=new TypeError("Promise cannot resolve to itself")),e.a=1;e:{var r=n,i=e.F,o=e.I;if(r instanceof an){dn(r,un(i||s,o||null,e));var a=!0}else if(Ht(r))r.then(i,o,e),a=!0;else{if(p(r))try{var u=r.then;if(d(u)){gn(r,u,i,o,e),a=!0;break e}}catch(t){o.call(e,t),a=!0;break e}a=!1}}a||(e.w=n,e.a=t,e.h=null,yn(e),t!=jh||n instanceof En||_n(e,n))}}function gn(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(e){o(e)}}function yn(e){e.v||(e.v=!0,nn(e.C,e))}function vn(e){var t=null;return e.g&&(t=e.g,e.g=t.next,t.next=null),e.g||(e.j=null),t}function bn(e,t,n,r){if(n==jh&&t.g&&!t.j)for(;e&&e.i;e=e.h)e.i=!1;if(t.a)t.a.h=null,wn(t,n,r);else try{t.j?t.h.call(t.context):wn(t,n,r)}catch(e){Kh.call(null,e)}Xt(Wh,t)}function wn(e,t,n){t==Vh?e.h.call(e.context,n):e.g&&e.g.call(e.context,n)}function _n(e,t){e.i=!0,nn(function(){e.i&&Kh.call(null,t)})}function En(e){E.call(this,e)}function Sn(){0!=Hh&&(Yh[this[Zc]||(this[Zc]=++el)]=this),this.O=this.O,this.C=this.C}function Tn(e,t){e.O?r(void 0)?t.call(void 0):t():(e.C||(e.C=[]),e.C.push(r(void 0)?y(t,void 0):t))}function Cn(e){e&&"function"==typeof e.m&&e.m()}function In(e,t){this.type=e,this.g=this.target=t,this.h=!1,this.ib=!0}function kn(e,t){if(In.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Cl){e:{try{W(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.j=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:Xh[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}function Nn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Fa=i,this.key=++$h,this.qa=this.Ca=!1}function An(e){e.qa=!0,e.listener=null,e.proxy=null,e.src=null,e.Fa=null}function Dn(e){this.src=e,this.a={},this.g=0}function xn(e,t){var n=t.type;n in e.a&&N(e.a[n],t)&&(An(t),0==e.a[n].length&&(delete e.a[n],e.g--))}function Rn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.qa&&o.listener==t&&o.capture==!!n&&o.Fa==r)return i}return-1}function Pn(e,t,n,r,i){if(r&&r.once)return Ln(e,t,n,r,i);if(h(t)){for(var o=0;o<t.length;o++)Pn(e,t[o],n,r,i);return null}return n=Kn(n),e&&e[Jh]?e.F.add(String(t),n,!1,p(r)?!!r.capture:!!r,i):On(e,t,n,!1,r,i)}function On(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=Wn(e);if(s||(e[Zh]=s=new Dn(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=Mn(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zh||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Bn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return tf++,n}function Mn(){var e=jn,t=Qh?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function Ln(e,t,n,r,i){if(h(t)){for(var o=0;o<t.length;o++)Ln(e,t[o],n,r,i);return null}return n=Kn(n),e&&e[Jh]?e.F.add(String(t),n,!0,p(r)?!!r.capture:!!r,i):On(e,t,n,!0,r,i)}function Fn(e,t,n,r,i){if(h(t))for(var o=0;o<t.length;o++)Fn(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Kn(n),e&&e[Jh]?(e=e.F,t=String(t).toString(),t in e.a&&(o=e.a[t],n=Rn(o,n,r,i),-1<n&&(An(o[n]),A(o,n),0==o.length&&(delete e.a[t],e.g--)))):e&&(e=Wn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Rn(t,n,r,i)),(n=-1<e?t[e]:null)&&Un(n))}function Un(e){if("number"!=typeof e&&e&&!e.qa){var t=e.src;if(t&&t[Jh])xn(t.F,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Bn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),tf--,(n=Wn(t))?(xn(n,e),0==n.g&&(n.src=null,t[Zh]=null)):An(e)}}}function Bn(e){return e in ef?ef[e]:ef[e]="on"+e}function qn(e,t,n,r){var i=!0;if((e=Wn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.qa&&(o=Vn(o,r),i=i&&!1!==o)}return i}function Vn(e,t){var n=e.listener,r=e.Fa||e.src;return e.Ca&&Un(e),n.call(r,t)}function jn(e,t){if(e.qa)return!0;if(!Qh){if(!t)e:{t=["window","event"];for(var n=Xc,r=0;r<t.length;r++)if(n=n[t[r]],null==n){t=null;break e}t=n}if(r=t,t=new kn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.g;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;!t.h&&0<=i;i--){t.g=r[i];var o=qn(r[i],e,!0,t);n=n&&o}for(i=0;!t.h&&i<r.length;i++)t.g=r[i],o=qn(r[i],e,!1,t),n=n&&o}return n}return Vn(e,new kn(t,this))}function Wn(e){return e=e[Zh],e instanceof Dn?e:null}function Kn(e){return d(e)?e:(e[nf]||(e[nf]=function(t){return e.handleEvent(t)}),e[nf])}function Qn(e,t,n){t||(t={}),n=n||window;var r=e instanceof $?e:te("undefined"!=typeof e.href?e.href:String(e));e=t.target||e.target;var i=[];for(o in t)switch(o){case"width":case"height":case"top":case"left":i.push(o+"="+t[o]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(o+"="+(t[o]?1:0))}var o=i.join(",");return(F("iPhone")&&!F("iPod")&&!F("iPad")||F("iPad")||F("iPod"))&&n.navigator&&n.navigator.standalone&&e&&"_self"!=e?(o=n.document.createElement("A"),r instanceof $||r instanceof $||(r="object"==typeof r&&r.ka?r.ia():String(r),Ul.test(r)||(r="about:invalid#zClosurez"),r=ne(r)),o.href=ee(r),o.setAttribute("target",e),t.noreferrer&&o.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,n,1),o.dispatchEvent(t),n={}):t.noreferrer?(n=n.open("",e,o),t=Z(r),n&&(Tl&&-1!=t.indexOf(";")&&(t="'"+t.replace(/'/g,"%27")+"'"),n.opener=null,t=ae('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+j(t)+'">',null),n.document.write(oe(t)),n.document.close())):(n=n.open(Z(r),e,o))&&t.noopener&&(n.opener=null),n}function Gn(e){window.location.assign(Z(te(e)))}function zn(){try{return!!(window.opener&&window.opener.location&&window.opener.location.assign&&window.opener.location.hostname===window.location.hostname&&window.opener.location.protocol===window.location.protocol)}catch(e){}return!1}function Hn(e){Qn(e,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function Yn(e){if(e=p(e)&&1==e.nodeType?e:document.querySelector(String(e)),null==e)throw Error("Could not find the FirebaseUI widget element on the page.");return e}function Xn(){return window.location.href}function Jn(){var e=null;return hn(new an(function(t){"complete"==Xc.document.readyState?t():(e=function(){t()},Ln(window,"load",e))}),function(t){throw Fn(window,"load",e),t})}function $n(){for(var e=32,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function Zn(){this.a=new pt,mt(this.a,"acUiConfig"),mt(this.a,"autoUpgradeAnonymousUsers"),mt(this.a,"callbacks"),mt(this.a,"credentialHelper",rf),mt(this.a,"immediateFederatedRedirect",!1),mt(this.a,"popupMode",!1),mt(this.a,"privacyPolicyUrl"),mt(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),mt(this.a,"queryParameterForWidgetMode","mode"),mt(this.a,"signInFlow"),mt(this.a,"signInOptions"),mt(this.a,"signInSuccessUrl"),mt(this.a,"siteName"),mt(this.a,"tosUrl"),mt(this.a,"widgetUrl")}function er(e){return e.a.get("acUiConfig")||null}function tr(e){var t=e.a.get("widgetUrl")||Xn();return nr(e,t)}function nr(e,t){e=yr(e);for(var n,r=t.search(zl),i=0,o=[];0<=(n=De(t,i,e,r));)o.push(t.substring(i,n)),i=Math.min(t.indexOf("&",n)+1||r,r);return o.push(t.substr(i)),t=o.join("").replace(Hl,"$1"),r="="+encodeURIComponent("select"),(e+=r)?(r=t.indexOf("#"),0>r&&(r=t.length),i=t.indexOf("?"),0>i||i>r?(i=r,n=""):n=t.substring(i+1,r),t=[t.substr(0,i),n,t.substr(r)],r=t[1],t[1]=e?r?r+"&"+e:e:r,e=t[0]+(t[1]?"?"+t[1]:"")+t[2]):e=t,e}function rr(e){var t=!!e.a.get("autoUpgradeAnonymousUsers");return t&&!Ar(e)&&Gt('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),t}function ir(e){e=e.a.get("signInOptions")||[];for(var t=[],n=0;n<e.length;n++){var r=e[n];r=p(r)?r:{provider:r},r.provider&&t.push(r)}return t}function or(e,t){e=ir(e);for(var n=0;n<e.length;n++)if(e[n].provider===t)return e[n];return null}function ar(e){return sl(ir(e),function(e){return e.provider})}function sr(e,t){e=ur(e);for(var n=0;n<e.length;n++)if(e[n].providerId===t)return e[n];return null}function ur(e){return sl(ir(e),function(e){return _h[e.provider]||k(uf,e.provider)?{providerId:e.provider}:{providerId:e.provider,hb:e.providerName||e.provider,ob:e.buttonColor||null,fb:e.iconUrl?Z(te(e.iconUrl)):null,Db:e.loginHintKey||null}})}function cr(e){var t=[],n=[];ol(ir(e),function(e){e.authMethod&&(t.push(e.authMethod),e.clientId&&n.push({uri:e.authMethod,clientId:e.clientId}))});var r=null;return"googleyolo"===xr(e)&&t.length&&(r={supportedIdTokenProviders:n,supportedAuthMethods:t}),r}function lr(e,t){var n=null;return ol(ir(e),function(e){e.authMethod===t&&(n=e.provider)}),n}function hr(e){var t=null;if(ol(ir(e),function(e){e.provider==o.auth.PhoneAuthProvider.PROVIDER_ID&&p(e.recaptchaParameters)&&!h(e.recaptchaParameters)&&(t=B(e.recaptchaParameters))}),t){var n=[];ol(cf,function(e){"undefined"!=typeof t[e]&&(n.push(e),delete t[e])}),n.length&&zt('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return t}function fr(e,t){return e=(e=or(e,t))&&e.scopes,h(e)?e:[]}function dr(e,t){return e=(e=or(e,t))&&e.customParameters,p(e)?(e=B(e),t===o.auth.GoogleAuthProvider.PROVIDER_ID&&delete e.login_hint,t===o.auth.GithubAuthProvider.PROVIDER_ID&&delete e.login,e):null}function pr(e){e=or(e,o.auth.PhoneAuthProvider.PROVIDER_ID);var t=null;return e&&a(e.loginHint)&&(t=At(e.loginHint)),e&&e.defaultNationalNumber||t&&t.va||null}function mr(e){var t=(e=or(e,o.auth.PhoneAuthProvider.PROVIDER_ID))&&e.defaultCountry||null;t=t&&Ct(t);var n=null;return e&&a(e.loginHint)&&(n=At(e.loginHint)),t&&t[0]||n&&Tt(n.a)||null}function gr(e){if(e=or(e,o.auth.PhoneAuthProvider.PROVIDER_ID),!e)return null;var t=e.whitelistedCountries,n=e.blacklistedCountries;if("undefined"!=typeof t&&(!h(t)||0==t.length))throw Error("WhitelistedCountries must be a non-empty array.");if("undefined"!=typeof n&&!h(n))throw Error("BlacklistedCountries must be an array.");if(t&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!t&&!n)return vh;if(e=[],t){n={};for(var r=0;r<t.length;r++)for(var i=It(t[r]),a=0;a<i.length;a++)n[i[a].c]=i[a];for(var s in n)n.hasOwnProperty(s)&&e.push(n[s])}else{for(s={},r=0;r<n.length;r++)for(i=It(n[r]),a=0;a<i.length;a++)s[i[a].c]=i[a];for(t=0;t<vh.length;t++)null!==s&&vh[t].c in s||e.push(vh[t])}return e}function yr(e){return yt(e.a,"queryParameterForWidgetMode")}function vr(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&zt("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if(d(t))return t;if(a(t))return function(){Hn(t)}}return null}function br(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&zt("Term of Service URL is missing, the link will not be displayed."),t&&n){if(d(n))return n;if(a(n))return function(){Hn(n)}}return null}function wr(e){return!(e=or(e,o.auth.EmailAuthProvider.PROVIDER_ID))||"undefined"==typeof e.requireDisplayName||!!e.requireDisplayName}function _r(e){return e=or(e,o.auth.EmailAuthProvider.PROVIDER_ID),!(!e||e.signInMethod!==o.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function Er(e){return e=or(e,o.auth.EmailAuthProvider.PROVIDER_ID),!(!e||!e.forceSameDevice)}function Sr(e){if(_r(e)){var t={url:Xn(),handleCodeInApp:!0};return(e=or(e,o.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof e.emailLinkSignIn&&q(t,e.emailLinkSignIn()),t.url=Fe(Xn(),t.url).toString(),t}return null}function Tr(e){var t=!!e.a.get("immediateFederatedRedirect"),n=ar(e);return e=Cr(e),t&&1==n.length&&!k(wh,n[0])&&"redirect"==e}function Cr(e){e=e.a.get("signInFlow");for(var t in af)if(af[t]==e)return af[t];return"redirect"}function Ir(e){return Dr(e).uiShown||null}function kr(e){return Dr(e).signInSuccess||null}function Nr(e){return Dr(e).signInSuccessWithAuthResult||null}function Ar(e){return Dr(e).signInFailure||null}function Dr(e){return e.a.get("callbacks")||{}}function xr(e){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return"none";e=e.a.get("credentialHelper");for(var t in of)if(of[t]==e)return of[t];return rf}function Rr(e){this.a=Le(e)}function Pr(e,t){t?e.a.a.set(lf.Na,t):We(e.a.a,lf.Na)}function Or(e,t){null!==t?e.a.a.set(lf.Ka,t?"1":"0"):We(e.a.a,lf.Ka)}function Mr(e){return e.a.a.get(lf.Ja)||null}function Lr(e,t){t?e.a.a.set(lf.PROVIDER_ID,t):We(e.a.a,lf.PROVIDER_ID)}function Fr(){Sn.call(this),this.F=new Dn(this),this.mb=this,this.Ba=null}function Ur(e,t){var n,r=e.Ba;if(r)for(n=[];r;r=r.Ba)n.push(r);if(e=e.mb,r=t.type||t,a(t))t=new In(t,e);else if(t instanceof In)t.target=t.target||e;else{var i=t;t=new In(r,e),q(t,i)}if(i=!0,n)for(var o=n.length-1;!t.h&&0<=o;o--){var s=t.g=n[o];i=Br(s,r,!0,t)&&i}if(t.h||(s=t.g=e,i=Br(s,r,!0,t)&&i,t.h||(i=Br(s,r,!1,t)&&i)),n)for(o=0;!t.h&&o<n.length;o++)s=t.g=n[o],i=Br(s,r,!1,t)&&i;return i}function Br(e,t,n,r){if(t=e.F.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.qa&&a.capture==n){var s=a.listener,u=a.Fa||a.src;a.Ca&&xn(e.F,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.ib}function qr(e,t){if(!e)throw Error("Event target element must be provided!");if(e=jr(e),hf[e]&&hf[e].length)for(var n=0;n<hf[e].length;n++)Ur(hf[e][n],t)}function Vr(e){var t=jr(e.N());hf[t]&&hf[t].length&&(D(hf[t],function(t){return t==e}),hf[t].length||delete hf[t])}function jr(e){return"undefined"==typeof e.a&&(e.a=ff,ff++),e.a}function Wr(e){if(!e)throw Error("Event target element must be provided!");this.a=e,Fr.call(this)}function Kr(e){var t=ti;this.i=[],this.O=t,this.K=e||null,this.j=this.a=!1,this.h=void 0,this.F=this.s=this.w=!1,this.v=0,this.g=null,this.C=0}function Qr(e,t,n){e.a=!0,e.h=n,e.j=!t,Yr(e)}function Gr(e){if(e.a){if(!e.F)throw new Xr(e);e.F=!1}}function zr(e,t,n){e.i.push([t,n,void 0]),e.a&&Yr(e)}function Hr(e){return ul(e.i,function(e){return d(e[1])})}function Yr(e){if(e.v&&e.a&&Hr(e)){var t=e.v,n=df[t];n&&(Xc.clearTimeout(n.a),delete df[t]),e.v=0}e.g&&(e.g.C--,delete e.g),t=e.h;for(var i=n=!1;e.i.length&&!e.w;){var o=e.i.shift(),a=o[0],s=o[1];if(o=o[2],a=e.j?s:a)try{var u=a.call(o||e.K,t);r(u)&&(e.j=e.j&&(u==t||u instanceof Error),e.h=t=u),(Ht(t)||"function"==typeof Xc.Promise&&t instanceof Xc.Promise)&&(i=!0,e.w=!0)}catch(r){t=r,e.j=!0,Hr(e)||(n=!0)}}e.h=t,i&&(u=y(e.I,e,!0),i=y(e.I,e,!1),t instanceof Kr?(zr(t,u,i),t.s=!0):t.then(u,i)),n&&(t=new $r(t),df[t.a]=t,e.v=t.a)}function Xr(){E.call(this)}function Jr(){E.call(this)}function $r(e){this.a=Xc.setTimeout(y(this.h,this),0),this.g=e}function Zr(e){var t={},n=t.document||document,r=X(e).toString(),i=document.createElement("SCRIPT"),o={jb:i,kb:void 0},a=new Kr(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){ni(i,!0);var e=new ri(mf,"Timeout reached for loading script "+r);Gr(a),Qr(a,!1,e)},u),o.kb=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ni(i,t.hc||!1,s),Gr(a),Qr(a,!0,null))},i.onerror=function(){ni(i,!0,s);var e=new ri(pf,"Error while loading script "+r);Gr(a),Qr(a,!1,e)},o=t.attributes||{},q(o,{type:"text/javascript",charset:"UTF-8"}),pe(i,o),se(i,e),ei(n).appendChild(i),a}function ei(e){var t=(e||document).getElementsByTagName("HEAD");return t&&0!=t.length?t[0]:e.documentElement}function ti(){if(this&&this.jb){var e=this.jb;e&&"SCRIPT"==e.tagName&&ni(e,!0,this.kb)}}function ni(e,t,n){null!=n&&Xc.clearTimeout(n),e.onload=s,e.onerror=s,e.onreadystatechange=s,t&&window.setTimeout(function(){ge(e)},0)}function ri(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),E.call(this,n),this.code=e}function ii(e){this.a=e||Xc.googleyolo,this.g=null,this.h=!1}function oi(e,t,n){if(e.a&&t){var r=function(){e.h=!0;var r=Promise.resolve(null);return n||(r=e.a.retrieve(t).catch(function(e){if("userCanceled"===e.type||"illegalConcurrentRequest"===e.type)throw e;return null})),r.then(function(n){return n?n:e.a.hint(t)}).catch(function(r){if("userCanceled"===r.type)e.g=Promise.resolve();else if("illegalConcurrentRequest"===r.type)return e.cancel(),
oi(e,t,n);return null})};return e.g?e.g.then(r):r()}if(t)return r=hn(ai.Sa().load().then(function(){return e.a=Xc.googleyolo,oi(e,t,n)}),function(){return null}),Promise.resolve(r);if("undefined"!=typeof Promise)return Promise.resolve(null);throw Error("One-Tap sign in not supported in the current browser!")}function ai(){this.a=null}function si(e,t){this.a=e,this.g=t||function(e){throw e}}function ui(e,t,n,r){this.a=e,this.h=t||null,this.j=n||null,this.g=r||null}function ci(e){return e.email?new ui(e.email,e.displayName,e.photoUrl,e.providerId):null}function li(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function hi(e){e=(e.a.cookie||"").split(";");for(var t,n,r=[],i=[],o=0;o<e.length;o++)n=cl(e[o]),t=n.indexOf("="),-1==t?(r.push(""),i.push(n)):(r.push(n.substring(0,t)),i.push(n.substring(t+1)));return{keys:r,values:i}}function fi(){}function di(e,t,n,r){this.h="undefined"!=typeof e&&null!==e?e:-1,this.g=t||null,this.a=n||null,this.j=!!r}function pi(e,t){this.g=e,this.a=t||null}function mi(e){if(e&&e.email){var t=e.credential&&o.auth.AuthCredential.fromJSON(e.credential);return new pi(e.email,t)}return null}function gi(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);255<i&&(t[n++]=255&i,i>>=8),t[n++]=i}return t}function yi(e){return sl(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")}function vi(e){for(this.v=e,this.g=this.v.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.i=[[],[],[],[]],this.a=Array(vf*(this.j+1)),e=0;e<this.g;e++)this.a[e]=[this.v[4*e],this.v[4*e+1],this.v[4*e+2],this.v[4*e+3]];var t=Array(4);for(e=this.g;e<vf*(this.j+1);e++){if(t[0]=this.a[e-1][0],t[1]=this.a[e-1][1],t[2]=this.a[e-1][2],t[3]=this.a[e-1][3],0==e%this.g){var n=t,r=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=r,Ci(t),t[0]^=_f[e/this.g][0],t[1]^=_f[e/this.g][1],t[2]^=_f[e/this.g][2],t[3]^=_f[e/this.g][3]}else 6<this.g&&4==e%this.g&&Ci(t);this.a[e]=Array(4),this.a[e][0]=this.a[e-this.g][0]^t[0],this.a[e][1]=this.a[e-this.g][1]^t[1],this.a[e][2]=this.a[e-this.g][2]^t[2],this.a[e][3]=this.a[e-this.g][3]^t[3]}}function bi(e,t){for(var n,r=0;r<vf;r++)for(var i=0;4>i;i++)n=4*i+r,n=t[n],e.h[r][i]=n}function wi(e){for(var t=[],n=0;n<vf;n++)for(var r=0;4>r;r++)t[4*r+n]=e.h[n][r];return t}function _i(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]^=e.a[4*t+r][n]}function Ei(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]=t[e.h[n][r]]}function Si(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.i[t][n]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.i[t][(n+t)%vf]}function Ti(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.i[t][(n+t)%vf]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.i[t][n]}function Ci(e){e[0]=bf[e[0]],e[1]=bf[e[1]],e[2]=bf[e[2]],e[3]=bf[e[3]]}function Ii(e,t){e=new vi(Ni(e)),t=gi(t);for(var n,r=O(t,0,16),i="";r.length;){n=16-r.length;for(var o=0;o<n;o++)r.push(0);for(n=e,bi(n,r),_i(n,0),r=1;r<n.j;++r){Ei(n,bf),Si(n),o=n.h;for(var a=n.i[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=Ef[a[0]]^Sf[a[1]]^a[2]^a[3],o[1][s]=a[0]^Ef[a[1]]^Sf[a[2]]^a[3],o[2][s]=a[0]^a[1]^Ef[a[2]]^Sf[a[3]],o[3][s]=Sf[a[0]]^a[1]^a[2]^Ef[a[3]];_i(n,r)}Ei(n,bf),Si(n),_i(n,n.j),i+=yi(wi(n)),r=O(t,0,16)}return i}function ki(e,t){e=new vi(Ni(e));for(var n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substring(r,r+2),16));var i=O(n,0,16);for(t="";i.length;){for(r=e,bi(r,i),_i(r,r.j),i=1;i<r.j;++i){Ti(r),Ei(r,wf),_i(r,r.j-i);for(var o=r.h,a=r.i[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=kf[a[0]]^Cf[a[1]]^If[a[2]]^Tf[a[3]],o[1][s]=Tf[a[0]]^kf[a[1]]^Cf[a[2]]^If[a[3]],o[2][s]=If[a[0]]^Tf[a[1]]^kf[a[2]]^Cf[a[3]],o[3][s]=Cf[a[0]]^If[a[1]]^Tf[a[2]]^kf[a[3]]}if(Ti(r),Ei(r,wf),_i(r,0),r=wi(r),8192>=r.length)r=String.fromCharCode.apply(null,r);else{for(i="",o=0;o<r.length;o+=8192)i+=String.fromCharCode.apply(null,M(r,o,o+8192));r=i}t+=r,i=O(n,0,16)}return t.replace(/(\x00)+$/,"")}function Ni(e){e=gi(e.substring(0,32));for(var t=32-e.length,n=0;n<t;n++)e.push(0);return e}function Ai(e){var t=[];return xi(new Di,e,t),t.join("")}function Di(){}function xi(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(h(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),xi(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{"),i="";for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o=t[r],"function"!=typeof o&&(n.push(i),Ri(r,n),n.push(":"),xi(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Ri(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}function Ri(e,t){t.push('"',e.replace(Af,function(e){var t=Nf[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Nf[e]=t),t}),'"')}function Pi(e){this.a=e}function Oi(){}function Mi(e){this.a=e}function Li(e){if(!e.a)return!1;try{return e.a.setItem("__sak","1"),e.a.removeItem("__sak"),!0}catch(e){return!1}}function Fi(){var e=null;try{e=window.localStorage||null}catch(e){}this.a=e}function Ui(){var e=null;try{e=window.sessionStorage||null}catch(e){}this.a=e}function Bi(e,t){this.g=e,this.a=t+"::"}function qi(e,t){return e.storage.get(t?e.name+":"+t:e.name)}function Vi(e,t){e.storage.a.pa(t?e.name+":"+t:e.name)}function ji(e,t,n){e.storage.set(n?e.name+":"+n:e.name,t)}function Wi(e){return qi(Uf,e)||null}function Ki(e,t){ji(Uf,e,t)}function Qi(e,t){ji(Bf,e,t)}function Gi(e){return e=qi(qf,e)||[],e=sl(e,function(e){return ci(e)}),al(e,l)}function zi(e,t){var n=Gi(t),r=I(n,function(t){return t.a==e.a&&(t.g||null)==(e.g||null)});-1<r&&A(n,r),n.unshift(e),ji(qf,sl(n,function(e){return e.na()}),t)}function Hi(e){return e=qi(Lf,e)||null,mi(e)}function Yi(e){Vi(Lf,e)}function Xi(e,t){ji(Lf,e.na(),t)}function Ji(e){ji(Ff,"pending",e)}function $i(e,t){t=qi(Vf,t);var n=null;if(t)try{var r=ki(e,t),i=JSON.parse(r);n=i&&i.email||null}catch(e){}return n}function Zi(e,t){t=qi(jf,t);var n=null;if(t)try{var r=ki(e,t);n=JSON.parse(r)}catch(e){}return mi(n||null)}function eo(e,t,n){ji(jf,Ii(e,JSON.stringify(t.na())),n)}function to(e){return!(!e||-32e3!=e.code||"Service unavailable"!=e.message)}function no(e,t,n,r){Wf||(e={callbacks:{empty:e,select:function(e,r){e&&e.account&&t?t(ci(e.account)):n&&n(!to(r))},store:e,update:e},language:"en",providers:void 0,ui:r},"undefined"!=typeof accountchooser&&accountchooser.Api&&accountchooser.Api.init?Wf=accountchooser.Api.init(e):(Wf=new io(e),oo()))}function ro(e,t,n){function r(){var e=Fe(window.location.href,n).toString();Wf.select(sl(t||[],function(e){return e.na()}),{clientCallbackUrl:e})}t&&t.length?r():Wf.checkEmpty(function(t,n){t||n?e(!to(n)):r()})}function io(e){this.a=e,this.a.callbacks=this.a.callbacks||{}}function oo(){var e=Wf;d(e.a.callbacks.empty)&&e.a.callbacks.empty()}function ao(e,t,n,r){Yf[e].apply(null,Array.prototype.slice.call(arguments,1))}function so(e,t){for(e=e.split(t||"."),this.a=[],t=0;t<e.length;t++)this.a.push(parseInt(e[t],10))}function uo(e,t){t instanceof so||(t=new so(String(t)));for(var n=Math.max(e.a.length,t.a.length),r=0;r<n;r++){var i=e.a[r],o=t.a[r];if(void 0!==i&&void 0!==o&&i!==o)return i-o;if(void 0===i)return-1;if(void 0===o)return 1}return 0}function co(e,t){return 0<=uo(e,t)}function lo(){var e=window.navigator&&window.navigator.userAgent;if(e){var t;if(t=e.match($f)){var n=new so(t[3]||t[1]);return!(0<=e.indexOf("Opera Mini"))&&(0<=e.indexOf("Opera Mobi")?0<=e.indexOf("Android")&&co(n,"10.1"):co(n,"8.0"))}if(t=e.match(Jf))return co(new so(t[1]),"2.0");if(t=e.match(Zf))return co(new so(t[1]),"6.0");if(t=e.match(ed))return n=new so(t[6]),e=t[3]&&new so(t[3]),t=t[5]&&new so(t[5],"_"),(!(!e||!co(e,"6.0"))||!(!t||!co(t,"10.5.6")))&&co(n,"3.0");if(t=e.match(nd))return co(new so(t[1]),"3.0");if(t=e.match(rd))return co(new so(t[1],"_"),"4.0");if(t=e.match(id))return co(new so(t[1]),"4.7");if(t=e.match(od))return n=new so(t[1]),e=new so(t[2]),co(n,"7.0")&&co(e,"7.0");if(t=e.match(Xf))return n=new so(t[1]),e=new so(t[2]),co(n,"7.0")&&co(e,"6.0");if(e.match(td))return!1}return!0}function ho(e){return e.classList?e.classList:(e=e.className,a(e)&&e.match(/\S+/g)||[])}function fo(e,t){return e.classList?e.classList.contains(t):k(ho(e),t)}function po(e,t){e.classList?e.classList.add(t):fo(e,t)||(e.className+=0<e.className.length?" "+t:t)}function mo(e,t){e.classList?e.classList.remove(t):fo(e,t)&&(e.className=al(ho(e),function(e){return e!=t}).join(" "))}function go(e){var t=e.type;switch(a(t)&&t.toLowerCase()){case"checkbox":case"radio":return e.checked?e.value:null;case"select-one":return t=e.selectedIndex,0<=t?e.options[t].value:null;case"select-multiple":t=[];for(var n,r=0;n=e.options[r];r++)n.selected&&t.push(n.value);return t.length?t:null;default:return null!=e.value?e.value:null}}function yo(e,t){var n=e.type;switch(a(n)&&n.toLowerCase()){case"checkbox":case"radio":e.checked=t;break;case"select-one":if(e.selectedIndex=-1,a(t))for(var r=0;n=e.options[r];r++)if(n.value==t){n.selected=!0;break}break;case"select-multiple":for(a(t)&&(t=[t]),r=0;n=e.options[r];r++)if(n.selected=!1,t)for(var i,o=0;i=t[o];o++)n.value==i&&(n.selected=!0);break;default:e.value=null!=t?t:""}}function vo(e){if(e.altKey&&!e.ctrlKey||e.metaKey||112<=e.keyCode&&123>=e.keyCode)return!1;if(wo(e.keyCode))return!0;switch(e.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!Cl;default:return 166>e.keyCode||183<e.keyCode}}function bo(e,t,n,r,i,o){if(Il&&!G("525"))return!0;if(Nl&&i)return wo(e);if(i&&!r)return!1;if(!Cl){"number"==typeof t&&(t=_o(t));var a=17==t||18==t||Nl&&91==t;if((!n||Nl)&&a||Nl&&16==t&&(r||o))return!1}if((Il||Sl)&&r&&n)switch(e){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(El&&r&&t==e)return!1;switch(e){case 13:return!Cl||!o&&!i&&!(n&&r);case 27:return!(Il||Sl||Cl)}return(!Cl||!(r||i||o))&&wo(e)}function wo(e){if(48<=e&&57>=e||96<=e&&106>=e||65<=e&&90>=e||(Il||Sl)&&0==e)return!0;switch(e){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return Cl;default:return!1}}function _o(e){if(Cl)e=Eo(e);else if(Nl&&Il)switch(e){case 93:e=91}return e}function Eo(e){switch(e){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return e}}function So(e){Fr.call(this),this.a=e,Pn(e,"keydown",this.g,!1,this),Pn(e,"click",this.h,!1,this)}function To(e,t){var n=new Io(t);if(Ur(e,n)){n=new Co(t);try{Ur(e,n)}finally{t.stopPropagation()}}}function Co(e){kn.call(this,e.a),this.type="action"}function Io(e){kn.call(this,e.a),this.type="beforeaction"}function ko(e){Fr.call(this),this.a=e,e=El?"focusout":"blur",this.g=Pn(this.a,El?"focusin":"focus",this,!El),this.h=Pn(this.a,e,this,!El)}function No(e,t){Fr.call(this),this.g=e||1,this.a=t||Xc,this.h=y(this.Rb,this),this.j=tl()}function Ao(e){e.Ea=!1,e.Y&&(e.a.clearTimeout(e.Y),e.Y=null)}function Do(e,t){if(d(e))t&&(e=y(e,t));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(0)?-1:Xc.setTimeout(e,0)}function xo(e){Sn.call(this),this.g=e,this.a={}}function Ro(e,t,n,r){h(n)||(n&&(ad[0]=n.toString()),n=ad);for(var i=0;i<n.length;i++){var o=Pn(t,n[i],r||e.handleEvent,!1,e.g||e);if(!o)break;e.a[o.key]=o}}function Po(e){U(e.a,function(e,t){this.a.hasOwnProperty(t)&&Un(e)},e),e.a={}}function Oo(e){Fr.call(this),this.a=null,this.g=e,e=El||Sl||Il&&!G("531")&&"TEXTAREA"==e.tagName,this.h=new xo(this),Ro(this.h,this.g,e?["keydown","paste","cut","drop","input"]:"input",this)}function Mo(e){null!=e.a&&(Xc.clearTimeout(e.a),e.a=null)}function Lo(e){return e=new kn(e.a),e.type="input",e}function Fo(e,t){Fr.call(this),e&&(this.Ia&&Uo(this),this.oa=e,this.Ha=Pn(this.oa,"keypress",this,t),this.Ta=Pn(this.oa,"keydown",this.xb,t,this),this.Ia=Pn(this.oa,"keyup",this.Ab,t,this))}function Uo(e){e.Ha&&(Un(e.Ha),Un(e.Ta),Un(e.Ia),e.Ha=null,e.Ta=null,e.Ia=null),e.oa=null,e.S=-1,e.W=-1}function Bo(e,t,n,r){kn.call(this,r),this.type="key",this.keyCode=e,this.j=t,this.repeat=n}function qo(e,t,n,r){this.top=e,this.right=t,this.bottom=n,this.left=r}function Vo(e,t){var n=ye(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))?e[t]||e.getPropertyValue(t)||"":""}function jo(e){try{var t=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}return El&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t}function Wo(e,t){t=t||me(document);var n=t||me(document),i=Ko(e),o=Ko(n);if(!El||9<=Number(Rl)){s=Vo(n,"borderLeftWidth");var a=Vo(n,"borderRightWidth");u=Vo(n,"borderTopWidth"),c=Vo(n,"borderBottomWidth"),a=new qo(parseFloat(u),parseFloat(a),parseFloat(c),parseFloat(s))}else{var s=Qo(n,"borderLeft");a=Qo(n,"borderRight");var u=Qo(n,"borderTop"),c=Qo(n,"borderBottom");a=new qo(u,a,c,s)}n==me(document)?(s=i.a-n.scrollLeft,i=i.g-n.scrollTop,!El||10<=Number(Rl)||(s+=a.left,i+=a.top)):(s=i.a-o.a-a.left,i=i.g-o.g-a.top),o=e.offsetWidth,a=e.offsetHeight,u=Il&&!o&&!a,r(o)&&!u||!e.getBoundingClientRect?e=new ce(o,a):(e=jo(e),e=new ce(e.right-e.left,e.bottom-e.top)),o=n.clientHeight-e.height,a=n.scrollLeft,u=n.scrollTop,a+=Math.min(s,Math.max(s-(n.clientWidth-e.width),0)),u+=Math.min(i,Math.max(i-o,0)),n=new ue(a,u),t.scrollLeft=n.a,t.scrollTop=n.g}function Ko(e){var t=ye(e),n=new ue(0,0),r=t?ye(t):document;return r=!El||9<=Number(Rl)||"CSS1Compat"==le(r).a.compatMode?r.documentElement:r.body,e==r?n:(e=jo(e),r=le(t).a,t=me(r),r=r.parentWindow||r.defaultView,t=El&&G("10")&&r.pageYOffset!=t.scrollTop?new ue(t.scrollLeft,t.scrollTop):new ue(r.pageXOffset||t.scrollLeft,r.pageYOffset||t.scrollTop),n.a=e.left+t.a,n.g=e.top+t.g,n)}function Qo(e,t){if("none"==(e.currentStyle?e.currentStyle[t+"Style"]:null))return 0;var n=e.currentStyle?e.currentStyle[t+"Width"]:null;if(n in hd)e=hd[n];else if(/^\d+px?$/.test(n))e=parseInt(n,10);else{t=e.style.left;var r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n,n=e.style.pixelLeft,e.style.left=t,e.runtimeStyle.left=r,e=+n}return e}function Go(){}function zo(e){Fr.call(this),this.w=e||le(),this.Ya=null,this.la=!1,this.j=null,this.I=void 0,this.xa=this.za=this.Z=null}function Ho(e,t){return e.j?fe(t,e.j||e.w.a):null}function Yo(e){return e.I||(e.I=new xo(e)),e.I}function Xo(e,t){e.za&&ol(e.za,t,void 0)}function Jo(e,t){var n=be(e,"firebaseui-textfield");t?(mo(e,"firebaseui-input-invalid"),po(e,"firebaseui-input"),n&&mo(n,"firebaseui-textfield-invalid")):(mo(e,"firebaseui-input"),po(e,"firebaseui-input-invalid"),n&&po(n,"firebaseui-textfield-invalid"))}function $o(e,t,n){t=new Oo(t),Tn(e,v(Cn,t)),Ro(Yo(e),t,"input",n)}function Zo(e,t,n){t=new Fo(t),Tn(e,v(Cn,t)),Ro(Yo(e),t,"key",function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e))})}function ea(e,t,n){t=new ko(t),Tn(e,v(Cn,t)),Ro(Yo(e),t,"focusin",n)}function ta(e,t,n){t=new ko(t),Tn(e,v(Cn,t)),Ro(Yo(e),t,"focusout",n)}function na(e,t,n){t=new So(t),Tn(e,v(Cn,t)),Ro(Yo(e),t,"action",function(e){e.stopPropagation(),e.preventDefault(),n(e)})}function ra(e){po(e,"firebaseui-hidden")}function ia(e,t){t&&ve(e,t),mo(e,"firebaseui-hidden")}function oa(e){return!fo(e,"firebaseui-hidden")&&"none"!=e.style.display}function aa(e){e=e||{};var t=e.email,n=e.disabled,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="email">';return r=e.gc?r+"Enter new email address":r+"Email",r+='</label><input type="email" name="email" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+ot(null!=t?t:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',ah(r)}function sa(e){e=e||{},e=e.label;var t='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return t=e?t+Ze(e):t+"Next",ah(t+"</button>")}function ua(){var e=""+sa({label:it("Sign In")});return ah(e)}function ca(){var e=""+sa({label:it("Save")});return ah(e)}function la(){var e=""+sa({label:it("Continue")});return ah(e)}function ha(e){e=e||{},e=e.label;var t='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="newPassword">';return t=e?t+Ze(e):t+"Choose password",ah(t+'</label><input type="password" name="newPassword" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function fa(){var e={},t='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="password">';return t=e.current?t+"Current password":t+"Password",ah(t+'</label><input type="password" name="password" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function da(){return ah('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function pa(e){e=e||{},e=e.label;var t='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return t=e?t+Ze(e):t+"Cancel",ah(t+"</button>")}function ma(e){var t="";return e.H&&e.G&&(t+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),ah(t)}function ga(e){var t="";return e.H&&e.G&&(t+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),ah(t)}function ya(e){return e='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+Ze(e.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',ah(e)}function va(e){var t=e.content;return e=e.qb,ah('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(e?" "+ot(e):"")+'">'+Ze(t)+"</dialog>")}function ba(e){var t=e.message;return ah(va({content:uh('<div class="firebaseui-dialog-icon-wrapper"><div class="'+ot(e.Ga)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+Ze(t)+"</div>")}))}function wa(e){var t='<div class="firebaseui-list-box-actions">';e=e.items;for(var n=e.length,r=0;r<n;r++){var i=e[r];t+='<button type="button" data-listboxid="'+ot(i.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(i.Ga?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+ot(i.Ga)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+Ze(i.label)+"</div></button>"}return t=""+va({qb:it("firebaseui-list-box-dialog"),content:uh(t+"</div>")}),ah(t)}function _a(e){return e=e||{},ah(e.Tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function Ea(e){e=e||{},e=e.ma;var t="";if(e.hb)t+=e.hb;else switch(e.providerId){case"google.com":t+="Google";break;case"github.com":t+="GitHub";break;case"facebook.com":t+="Facebook";break;case"twitter.com":t+="Twitter";break;case"anonymous":t+="Guest";break;default:t+="Password"}return nt(t)}function Sa(e){Ca(e,"upgradeElement")}function Ta(e){Ca(e,"downgradeElements")}function Ca(e,t){e&&window.componentHandler&&window.componentHandler[t]&&ol(fd,function(n){fo(e,n)&&window.componentHandler[t](e),ol(he(n,e),function(e){window.componentHandler[t](e)})})}function Ia(e,t,n){if(ka.call(this),document.body.appendChild(e),e.showModal||window.dialogPolyfill.registerDialog(e),e.showModal(),Sa(e),t&&na(this,e,function(t){var n=e.getBoundingClientRect();(t.clientX<n.left||n.left+n.width<t.clientX||t.clientY<n.top||n.top+n.height<t.clientY)&&ka.call(this)}),!n){var r=this.N().parentElement||this.N().parentNode;if(r){var i=this;this.ba=function(){if(e.open){var t=e.getBoundingClientRect().height,n=r.getBoundingClientRect().height,o=r.getBoundingClientRect().top-document.body.getBoundingClientRect().top,a=r.getBoundingClientRect().left-document.body.getBoundingClientRect().left,s=e.getBoundingClientRect().width,u=r.getBoundingClientRect().width;e.style.top=(o+(n-t)/2).toString()+"px",t=a+(u-s)/2,e.style.left=t.toString()+"px",e.style.right=(document.body.getBoundingClientRect().width-t-s).toString()+"px"}else window.removeEventListener("resize",i.ba)},this.ba(),window.addEventListener("resize",this.ba,!1)}}}function ka(){var e=Na.call(this);e&&(Ta(e),e.open&&e.close(),ge(e),this.ba&&window.removeEventListener("resize",this.ba))}function Na(){return fe("firebaseui-id-dialog")}function Aa(){ge(Da.call(this))}function Da(){return Ho(this,"firebaseui-id-info-bar")}function xa(){return Ho(this,"firebaseui-id-dismiss-info-bar")}function Ra(e,t,n){In.call(this,e,t);for(var r in n)this[r]=n[r]}function Pa(e,t,n,r,i){zo.call(this,n),this.$a=e,this.Za=t,this.Aa=!1,this.Ma=r||null,this.v=this.ea=null,this.$=B(dd),q(this.$,i||{})}function Oa(e){e.Aa=!0;var t=fo(e.N(),"firebaseui-use-spinner");e.ea=window.setTimeout(function(){e.N()&&null===e.v&&(e.v=Ye(_a,{Tb:t},null,e.w),e.N().appendChild(e.v),Sa(e.v))},500)}function Ma(e){return e.N().parentElement||e.N().parentNode}function La(e,t,n){Zo(e,t,function(){n.focus()})}function Fa(e,t,n){Zo(e,t,function(){n()})}function Ua(e,t,n){e=e||{},t=e.Qa;var r=e.ga;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+aa(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?pa(null):"")+sa(null)+'</div></div><div class="firebaseui-card-footer">'+(r?ga(n):ma(n))+"</div></form></div>",ah(e)}function Ba(e,t,n){return e=e||{},t=e.ga,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+aa(e)+fa()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+da()+'</div><div class="firebaseui-form-actions">'+ua()+'</div></div><div class="firebaseui-card-footer">'+(t?ga(n):ma(n))+"</div></form></div>",ah(e)}function qa(e,t,n){e=e||{};var r=e.Ib;t=e.Oa;var i=e.ga,o='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+aa(e);return r?(e=e||{},e=e.name,e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="name">First &amp; last name</label><input type="text" name="name" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+ot(null!=e?e:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',e=ah(e)):e="",n=o+e+ha(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?pa(null):"")+ca()+'</div></div><div class="firebaseui-card-footer">'+(i?ga(n):ma(n))+"</div></form></div>",ah(n)}function Va(e,t,n){return e=e||{},t=e.Oa,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+aa(e)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?pa(null):"")+sa({label:it("Send")})+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(e)}function ja(e,t,n){t=e.T;var r="";return e="Follow the instructions sent to <strong>"+(Ze(e.email)+"</strong> to recover your password"),r+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+'</p></div><div class="firebaseui-card-actions">',t&&(r+='<div class="firebaseui-form-actions">'+sa({label:it("Done")})+"</div>"),r+='</div><div class="firebaseui-card-footer">'+ma(n)+"</div></div>",ah(r)}function Wa(e,t,n){return ah('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+_a(null,null,n)+"</div></div>")}function Ka(){return ah('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function Qa(e,t,n){t="",e="A sign-in email with additional instructions was sent to <strong>"+(Ze(e.email)+"</strong>. Check your email to complete sign-in.");var r=ah('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+e+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+r+'</div><div class="firebaseui-form-actions">'+pa({label:it("Back")})+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(t)}function Ga(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+ah('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+pa({label:it("Back")})+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(e)}function za(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+aa(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa(null)+sa(null)+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(e)}function Ha(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa({label:it("Dismiss")})+"</div></div></div>";return ah(e)}function Ya(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa({label:it("Dismiss")})+"</div></div></div>";return ah(e)}function Xa(e,t,n){return t="",e="Youve already used <strong>"+(Ze(e.email)+"</strong> to sign in. Enter your password for that account."),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+e+"</p>"+fa()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+da()+'</div><div class="firebaseui-form-actions">'+ua()+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(t)}function Ja(e,t,n){var r=e.email;return t="",e=""+Ea(e),e=it(e),r="Youve already used <strong>"+(Ze(r)+("</strong>. You can connect your <strong>"+(Ze(e)+("</strong> account with <strong>"+(Ze(r)+"</strong> by signing in with email link below."))))),e="For this flow to successfully connect your "+(Ze(e)+" account with this email, you have to open the link on the same device or browser."),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+r+'<p class="firebaseui-text firebaseui-text-justify">'+e+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ua()+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",
ah(t)}function $a(e,t,n){t="";var r=""+Ea(e);return r=it(r),e="You originally intended to connect <strong>"+(Ze(r)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),r="If you still want to connect your <strong>"+(Ze(r)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+e+'</p><p class="firebaseui-text firebaseui-text-justify">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+la()+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(t)}function Za(e,t,n){var r=e.email;return t="",e=""+Ea(e),e=it(e),r="Youve already used <strong>"+(Ze(r)+("</strong>. Sign in with "+(Ze(e)+" to continue."))),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+sa({label:it("Sign in with "+e)})+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(t)}function es(e,t,n){return t="",e="To continue sign in with <strong>"+(Ze(e.email)+"</strong> on this device, you have to recover the password."),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa(null)+sa({label:it("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(t)}function ts(e){var t="",n='<p class="firebaseui-text">for <strong>'+(Ze(e.email)+"</strong></p>");return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+n+ha(rt(e))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ca()+"</div></div></form></div>",ah(t)}function ns(e){return e=e||{},e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(e.T?'<div class="firebaseui-form-actions">'+la()+"</div>":"")+"</div></div>",ah(e)}function rs(e){return e=e||{},e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(e.T?'<div class="firebaseui-form-actions">'+sa(null)+"</div>":"")+"</div></div>",ah(e)}function is(e){var t=e.T,n="";return e="Your sign-in email address has been changed back to <strong>"+(Ze(e.email)+"</strong>."),n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+'</p><p class="firebaseui-text">If you didnt ask to change your sign-in email, its possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+sa(null)+"</div>":"")+"</div></form></div>",ah(n)}function os(e){return e=e||{},e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still cant reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(e.T?'<div class="firebaseui-form-actions">'+sa(null)+"</div>":"")+"</div></div>",ah(e)}function as(e){return e=e||{},e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(e.T?'<div class="firebaseui-form-actions">'+la()+"</div>":"")+"</div></div>",ah(e)}function ss(e){return e=e||{},e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(e.T?'<div class="firebaseui-form-actions">'+sa(null)+"</div>":"")+"</div></div>",ah(e)}function us(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+Ze(e.errorMessage)+"</p></div></div>",ah(e)}function cs(e,t,n){var r=e.Fb;return t="",e="Continue with "+(Ze(e.Ub)+"?"),r="You originally wanted to sign in with "+Ze(r),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+e+'</h2><p class="firebaseui-text">'+r+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa(null)+sa({label:it("Continue")})+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form></div>",ah(t)}function ls(e,t,n){var r='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';e=e.Hb,t=e.length;for(var i=0;i<t;i++){var o={ma:e[i]},a=n;o=o||{};var s=o.ma,u=o;u=u||{};var l="";switch(u.ma.providerId){case"google.com":l+="firebaseui-idp-google";break;case"github.com":l+="firebaseui-idp-github";break;case"facebook.com":l+="firebaseui-idp-facebook";break;case"twitter.com":l+="firebaseui-idp-twitter";break;case"phone":l+="firebaseui-idp-phone";break;case"anonymous":l+="firebaseui-idp-anonymous";break;case"password":l+="firebaseui-idp-password";break;default:l+="firebaseui-idp-generic"}u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+ot(nt(l))+' firebaseui-id-idp-button" data-provider-id="'+ot(s.providerId)+'" style="background-color:',l=s.ob,null!=l&&l.da===nh?l=l.content:null==l?l="":l instanceof re?l instanceof re&&l.constructor===re&&l.g===ql?l=l.a:(T("expected object of type SafeStyle, got '"+l+"' of type "+c(l)),l="type_error:SafeStyle"):(l=String(l),dh.test(l)||(T("Bad value `%s` for |filterCssValue",[l]),l="zSoyz")),u=u+ot(l)+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="',l=(l=o)||{},l=l.ma;var h="";if(l.fb)h+=at(l.fb);else switch(l.providerId){case"google.com":h+=at(a.yb);break;case"github.com":h+=at(a.wb);break;case"facebook.com":h+=at(a.tb);break;case"twitter.com":h+=at(a.Sb);break;case"phone":h+=at(a.Gb);break;case"anonymous":h+=at(a.nb);break;default:h+=at(a.Eb)}a=sh(h),a=u+ot(at(a))+'"></span>',"password"==s.providerId?a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with email</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Email</span>':"phone"==s.providerId?a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Sign in with phone</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Phone</span>':"anonymous"==s.providerId?a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">Continue as guest</span><span class="firebaseui-idp-text firebaseui-idp-text-short">Guest</span>':(s="Sign in with "+Ze(Ea(o)),a+='<span class="firebaseui-idp-text firebaseui-idp-text-long">'+s+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+Ze(Ea(o))+"</span>"),o=ah(a+"</button>"),r+='<li class="firebaseui-list-item">'+o+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+ga(n)+"</div></div>",ah(r)}function hs(e,t,n){e=e||{};var r=e.sb,i=e.Qa;t=e.ga,e=e||{},e=e.va,e='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="phoneNumber">Phone number</label><input type="tel" name="phoneNumber" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+ot(null!=e?e:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ah(e);var o;return o=r?ah('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"",o=e+o+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(i?pa(null):"")+sa({label:it("Verify")})+'</div></div><div class="firebaseui-card-footer">',t?(t='<p class="firebaseui-tos firebaseui-phone-tos">',t=n.H&&n.G?t+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':t+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=ah(t+"</p>")):n=ah('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+ma(n),ah(o+n+"</div></form></div>")}function fs(e,t,n){e=e||{},t=e.phoneNumber;var r="";return e='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(Ze(t)+"</a>"),Ze(t),t=r,r=ah('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="phoneConfirmationCode">6-digit code</label><input type="number" name="phoneConfirmationCode" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+"</p>"+r+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pa(null)+sa({label:it("Continue")})+'</div></div><div class="firebaseui-card-footer">'+ma(n)+"</div></form>",e=ah('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),ah(t+(n+e+"</div>"))}function ds(){return Ho(this,"firebaseui-id-submit")}function ps(){return Ho(this,"firebaseui-id-secondary-link")}function ms(e,t){na(this,ds.call(this),function(t){e(t)});var n=ps.call(this);n&&t&&na(this,n,function(e){t(e)})}function gs(){return Ho(this,"firebaseui-id-password")}function ys(){return Ho(this,"firebaseui-id-password-error")}function vs(){var e=gs.call(this),t=ys.call(this);$o(this,e,function(){oa(t)&&(Jo(e,!0),ra(t))})}function bs(){var e=gs.call(this),t=ys.call(this);return go(e)?(Jo(e,!0),ra(t),t=!0):(Jo(e,!1),ia(t,nt("Enter your password").toString()),t=!1),t?go(e):null}function ws(e,t,n,r,i,o){Pa.call(this,Xa,{email:e},o,"passwordLinking",{H:r,G:i}),this.a=t,this.L=n}function _s(){return Ho(this,"firebaseui-id-email")}function Es(){return Ho(this,"firebaseui-id-email-error")}function Ss(e){var t=_s.call(this),n=Es.call(this);$o(this,t,function(){oa(n)&&(Jo(t,!0),ra(n))}),e&&Zo(this,t,function(){e()})}function Ts(){return cl(go(_s.call(this))||"")}function Cs(){var e=_s.call(this),t=Es.call(this),n=go(e)||"";return n?pd.test(n)?(Jo(e,!0),ra(t),t=!0):(Jo(e,!1),ia(t,nt("That email address isn't correct").toString()),t=!1):(Jo(e,!1),ia(t,nt("Enter your email address to continue").toString()),t=!1),t?cl(go(e)):null}function Is(e,t,n,r,i,o,a){Pa.call(this,Ba,{email:n,ga:!!o},a,"passwordSignIn",{H:r,G:i}),this.a=e,this.L=t}function ks(e,t,n,r,i,o){Pa.call(this,e,t,r,i||"notice",o),this.a=n||null}function Ns(e,t,n,r,i){ks.call(this,ja,{email:e,T:!!t},t,i,"passwordRecoveryEmailSent",{H:n,G:r})}function As(e,t){ks.call(this,as,{T:!!e},e,t,"emailVerificationSuccess")}function Ds(e,t){ks.call(this,ss,{T:!!e},e,t,"emailVerificationFailure")}function xs(e,t){ks.call(this,ns,{T:!!e},e,t,"passwordResetSuccess")}function Rs(e,t){ks.call(this,rs,{T:!!e},e,t,"passwordResetFailure")}function Ps(e,t){ks.call(this,os,{T:!!e},e,t,"emailChangeRevokeFailure")}function Os(e,t){ks.call(this,us,{errorMessage:e},void 0,t,"unrecoverableError")}function Ms(e,t){md=!!t,gd||("undefined"==typeof accountchooser&&lo()?(t=J(H(new z(Ll,"//www.gstatic.com/accountchooser/client.js"))),gd=hn(cn(Zr(t)),function(){})):gd=cn()),gd.then(e,e)}function Ls(e,t){e=Lc(e),(e=Dr(e).accountChooserInvoked||null)?e(t):t()}function Fs(e,t,n){e=Lc(e),(e=Dr(e).accountChooserResult||null)?e(t,n):n()}function Us(e,t,n,r,i){r?(ao("callback",e,t),md&&n()):Ls(e,function(){Ji(kc(e)),ro(function(r){Vi(Ff,kc(e)),Fs(e,r?"empty":"unavailable",function(){ao("signIn",e,t),(r||md)&&n()})},Gi(kc(e)),i)})}function Bs(e,t,n,r){function i(e){e=Qs(e),Zs(t,n,void 0,e),r()}Fs(t,"accountSelected",function(){Qi(!1,kc(t));var o=Js(t);Rc(t,Cc(t).fetchSignInMethodsForEmail(e.a).then(function(i){tu(t,n,i,e.a,e.h||void 0,void 0,o),r()},i))})}function qs(e,t,n,r){Fs(t,e?"addAccount":"unavailable",function(){ao("signIn",t,n),(e||md)&&r()})}function Vs(e,t,n,r){function i(){var t=e();t&&(t=Ir(Lc(t)))&&t()}no(function(){var o=e();o&&Us(o,t,i,n,r)},function(n){var r=e();r&&Bs(n,r,t,i)},function(n){var r=e();r&&qs(n,r,t,i)},e()&&er(Lc(e())))}function js(e,t,n,r){function i(n){if(!n.name||"cancel"!=n.name){e:{var r=n.message;try{var i=((JSON.parse(r).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(i&&i.length){var o=!0;break e}}catch(e){}o=!1}if(o)n=Ma(t),t.m(),Zs(e,n,void 0,nt("Your sign-in session has expired. Please try again.").toString());else{if(o=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;o=Qs(n)}t.g(o)}}}if(Oc(e),r)return Ws(e,n),cn();if(!n.credential)throw Error("No credential found!");if(r=Cc(e).currentUser||n.user,!r)throw Error("User not logged in.");r=new ui(r.email,r.displayName,r.photoURL,"password"==n.credential.providerId?null:n.credential.providerId),null!=qi(Bf,kc(e))&&!qi(Bf,kc(e))||zi(r,kc(e)),Vi(Bf,kc(e));try{var o=Kc(e,n)}catch(e){return Gt(e.code||e.message,e),t.g(e.code||e.message),cn()}return n=o.then(function(t){Ws(e,t)},i).then(void 0,i),Rc(e,o),cn(n)}function Ws(e,t){if(!t.user)throw Error("No user found");var n=Nr(Lc(e));if(kr(Lc(e))&&n&&zt("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=Nr(Lc(e));var r=Wi(kc(e))||void 0;Vi(Uf,kc(e));var i=!1;zn()?(n&&!n(t,r)||(i=!0,window.opener.location.assign(Z(te(Ks(e,r))))),n||window.close()):n&&!n(t,r)||(i=!0,Gn(Ks(e,r))),i||e.reset()}else{n=t.user,t=t.credential,r=kr(Lc(e)),i=Wi(kc(e))||void 0,Vi(Uf,kc(e));var o=!1;zn()?(r&&!r(n,t,i)||(o=!0,window.opener.location.assign(Z(te(Ks(e,i))))),r||window.close()):r&&!r(n,t,i)||(o=!0,Gn(Ks(e,i))),o||e.reset()}}function Ks(e,t){if(e=t||Lc(e).a.get("signInSuccessUrl"),!e)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return e}function Qs(e){var t="";switch(e.code){case"auth/email-already-in-use":t+="The email address is already used by another account";break;case"auth/requires-recent-login":t+=ft();break;case"auth/too-many-requests":t+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":t+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":t+="That email address doesn't match an existing account";break;case"auth/user-token-expired":t+=ft();break;case"auth/weak-password":t+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":t+="The email and password you entered don't match";break;case"auth/network-request-failed":t+="A network error has occurred";break;case"auth/invalid-phone-number":t+=ct();break;case"auth/invalid-verification-code":t+=nt("Wrong code. Try again.");break;case"auth/code-expired":t+="This code is no longer valid";break;case"auth/expired-action-code":t+="This code has expired.";break;case"auth/invalid-action-code":t+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(t=nt(t).toString())return t;try{return JSON.parse(e.message),Gt("Internal error: "+e.message,void 0),lt().toString()}catch(t){return e.message}}function Gs(e,t,n){var r=_h[t]&&o.auth[_h[t]]?new o.auth[_h[t]]:0==t.indexOf("saml.")?new o.auth.SAMLAuthProvider(t):new o.auth.OAuthProvider(t);if(!r)throw Error("Invalid Firebase Auth provider!");var i=fr(Lc(e),t);if(r.addScope)for(var a=0;a<i.length;a++)r.addScope(i[a]);return i=dr(Lc(e),t)||{},n&&(e=t==o.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":t==o.auth.GithubAuthProvider.PROVIDER_ID?"login":(e=sr(Lc(e),t))&&e.Db,e&&(i[e]=n)),r.setCustomParameters&&r.setCustomParameters(i),r}function zs(e,t,n,r){function i(){Ji(kc(e)),Rc(e,t.M(y(e.Qb,e),[u],function(){if("file:"===(window.location&&window.location.protocol))return Rc(e,Ec(e).then(function(n){t.m(),Vi(Ff,kc(e)),ao("callback",e,s,cn(n))},o))},a))}function o(n){if(Vi(Ff,kc(e)),!n.name||"cancel"!=n.name)switch(n.code){case"auth/popup-blocked":i();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":t.g(Qs(n));break;default:t.m(),ao("callback",e,s,ln(n))}}function a(n){Vi(Ff,kc(e)),n.name&&"cancel"==n.name||(Gt("signInWithRedirect: "+n.code,void 0),n=Qs(n),"blank"==t.Ma&&Tr(Lc(e))?(t.m(),ao("providerSignIn",e,s,n)):t.g(n))}var s=Ma(t),u=Gs(e,n,r);"redirect"==Cr(Lc(e))?i():Rc(e,Wc(e,u).then(function(n){t.m(),ao("callback",e,s,cn(n))},o))}function Hs(e,t){Rc(e,t.M(y(e.Mb,e),[],function(n){return t.m(),js(e,t,n,!0)},function(e){e.name&&"cancel"==e.name||(Gt("ContinueAsGuest: "+e.code,void 0),e=Qs(e),t.g(e))}))}function Ys(e,t,n){function r(n){var r=!1;return n=t.M(y(e.Nb,e),[n],function(n){var i=Ma(t);t.m(),ao("callback",e,i,cn(n)),r=!0},function(n){if(!(n.name&&"cancel"==n.name||n&&"auth/credential-already-in-use"==n.code))if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var r=Ma(t);t.m(),ao("callback",e,r,ln(n))}else n=Qs(n),t.g(n)}),Rc(e,n),n.then(function(){return r},function(){return!1})}var i=lr(Lc(e),n&&n.authMethod||null);return n&&n.idToken&&i===o.auth.GoogleAuthProvider.PROVIDER_ID?(fr(Lc(e),o.auth.GoogleAuthProvider.PROVIDER_ID).length?(zs(e,t,i,n.id),n=cn(!0)):n=r(o.auth.GoogleAuthProvider.credential(n.idToken)),n):(n&&t.g(nt("The selected credential for the authentication provider is not supported!").toString()),cn(!1))}function Xs(e,t){var n=t.J(),r=t.A();if(n)if(r){var i=o.auth.EmailAuthProvider.credential(n,r);Rc(e,t.M(y(e.Ob,e),[n,r],function(n){return js(e,t,{user:n.user,credential:i,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/email-already-in-use":break;case"auth/email-exists":Jo(t.s(),!1),ia(t.U(),Qs(e));break;case"auth/too-many-requests":case"auth/wrong-password":Jo(t.i(),!1),ia(t.D(),Qs(e));break;default:Gt("verifyPassword: "+e.message,void 0),t.g(Qs(e))}}))}else t.i().focus();else t.s().focus()}function Js(e){return e=ar(Lc(e)),1==e.length&&e[0]==o.auth.EmailAuthProvider.PROVIDER_ID}function $s(e){return e=ar(Lc(e)),1==e.length&&e[0]==o.auth.PhoneAuthProvider.PROVIDER_ID}function Zs(e,t,n,r){Js(e)?r?ao("signIn",e,t,n,r):ru(e,t,n):e&&$s(e)&&!r?ao("phoneSignInStart",e,t):e&&Tr(Lc(e))&&!r?ao("federatedRedirect",e,t):ao("providerSignIn",e,t,r)}function eu(e,t,n,r){var i=Ma(t);Rc(e,t.M(y(Cc(e).fetchSignInMethodsForEmail,Cc(e)),[n],function(o){Qi(xr(Lc(e))==rf,kc(e)),t.m(),tu(e,i,o,n,void 0,r)},function(e){e=Qs(e),t.g(e)}))}function tu(e,t,n,r,i,a,s){n.length||_r(Lc(e))?!n.length&&_r(Lc(e))?ao("sendEmailLinkForSignIn",e,t,r,function(){ao("signIn",e,t)}):k(n,o.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ao("passwordSignIn",e,t,r,s):1==n.length&&n[0]===o.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?ao("sendEmailLinkForSignIn",e,t,r,function(){ao("signIn",e,t)}):(n=xt(n,ar(Lc(e))))?(Xi(new pi(r),kc(e)),ao("federatedSignIn",e,t,r,n,a)):ao("unsupportedProvider",e,t,r):ao("passwordSignUp",e,t,r,i,void 0,s)}function nu(e,t,n,r,i,o){var a=Ma(t);Rc(e,t.M(y(e.vb,e),[n,o],function(){t.m(),ao("emailLinkSignInSent",e,a,n,r,o)},i))}function ru(e,t,n){xr(Lc(e))==rf?Ms(function(){Wf?Ls(e,function(){Ji(kc(e)),ro(function(r){Vi(Ff,kc(e)),Fs(e,r?"empty":"unavailable",function(){ao("signIn",e,t,n)})},Gi(kc(e)),tr(Lc(e)))}):(Fc(e),Vs(Tc,t,!1,tr(Lc(e))))},!1):(md=!1,Ls(e,function(){Fs(e,"unavailable",function(){ao("signIn",e,t,n)})}))}function iu(e){var t=Xn();e=yr(Lc(e)),t=xe(t,e)||"";for(var n in sf)if(sf[n].toLowerCase()==t.toLowerCase())return sf[n];return"callback"}function ou(e){var t=Xn();return e=yt(Lc(e).a,"queryParameterForSignInSuccessUrl"),(t=xe(t,e))?Z(te(t)):null}function au(){return xe(Xn(),"oobCode")}function su(){var e=xe(Xn(),"continueUrl");return e?function(){Gn(e)}:null}function uu(e,t){var n=Yn(t);switch(iu(e)){case"callback":(t=ou(e))&&Ki(t,kc(e)),e.gb()?ao("callback",e,n):Zs(e,n);break;case"resetPassword":ao("passwordReset",e,n,au(),su());break;case"recoverEmail":ao("emailChangeRevocation",e,n,au());break;case"verifyEmail":ao("emailVerification",e,n,au(),su());break;case"signIn":ao("emailLinkSignInCallback",e,n,Xn()),jc();break;case"select":if((t=ou(e))&&Ki(t,kc(e)),Wf){Zs(e,n);break}return void Ms(function(){Fc(e),Vs(Tc,n,!0)},!0);default:throw Error("Unhandled widget operation.")}(t=Ir(Lc(e)))&&t()}function cu(e,t){Pa.call(this,Ya,void 0,t,"anonymousUserMismatch"),this.a=e}function lu(e){Pa.call(this,Wa,void 0,e,"callback")}function hu(e,t,n){if(n.user){var r={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},i=Hi(kc(e)),o=i&&i.g;if(o&&!gu(n.user,o))mu(e,t,r);else{var a=i&&i.a;a?Rc(e,n.user.linkWithCredential(a).then(function(n){r={user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},fu(e,t,r)},function(n){du(e,t,n)})):fu(e,t,r)}}else n=Ma(t),t.m(),Yi(kc(e)),Zs(e,n)}function fu(e,t,n){Yi(kc(e)),js(e,t,n)}function du(e,t,n){var r=Ma(t);Yi(kc(e)),n=Qs(n),t.m(),Zs(e,r,void 0,n)}function pu(e,t,n,r){var i=Ma(t);Rc(e,Cc(e).fetchSignInMethodsForEmail(n).then(function(a){t.m(),a.length?k(a,o.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ao("passwordLinking",e,i,n):1==a.length&&a[0]===o.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?ao("emailLinkSignInLinking",e,i,n):(a=xt(a,ar(Lc(e))))?ao("federatedLinking",e,i,n,a,r):(Yi(kc(e)),ao("unsupportedProvider",e,i,n)):(Yi(kc(e)),ao("passwordRecovery",e,i,n,!1,ht().toString()))},function(n){du(e,t,n)}))}function mu(e,t,n){var r=Ma(t);Rc(e,Qc(e).then(function(){t.m(),ao("emailMismatch",e,r,n)},function(e){e.name&&"cancel"==e.name||(e=Qs(e.code),t.g(e))}))}function gu(e,t){if(t==e.email)return!0;if(e.providerData)for(var n=0;n<e.providerData.length;n++)if(t==e.providerData[n].email)return!0;return!1}function yu(e,t){Pa.call(this,Ha,void 0,t,"differentDeviceError"),this.a=e}function vu(e,t,n,r){Pa.call(this,is,{email:e,T:!!n},r,"emailChangeRevoke"),this.i=t,this.a=n||null}function bu(){return Ho(this,"firebaseui-id-new-password")}function wu(){return Ho(this,"firebaseui-id-password-toggle")}function _u(){this.La=!this.La;var e=wu.call(this),t=bu.call(this);this.La?(t.type="text",po(e,"firebaseui-input-toggle-off"),mo(e,"firebaseui-input-toggle-on")):(t.type="password",po(e,"firebaseui-input-toggle-on"),mo(e,"firebaseui-input-toggle-off")),t.focus()}function Eu(){return Ho(this,"firebaseui-id-new-password-error")}function Su(){this.La=!1;var e=bu.call(this);e.type="password";var t=Eu.call(this);$o(this,e,function(){oa(t)&&(Jo(e,!0),ra(t))});var n=wu.call(this);po(n,"firebaseui-input-toggle-on"),mo(n,"firebaseui-input-toggle-off"),ea(this,e,function(){po(n,"firebaseui-input-toggle-focus"),mo(n,"firebaseui-input-toggle-blur")}),ta(this,e,function(){po(n,"firebaseui-input-toggle-blur"),mo(n,"firebaseui-input-toggle-focus")}),na(this,n,y(_u,this))}function Tu(){var e=bu.call(this),t=Eu.call(this);return go(e)?(Jo(e,!0),ra(t),t=!0):(Jo(e,!1),ia(t,nt("Enter your password").toString()),t=!1),t?go(e):null}function Cu(e,t,n){Pa.call(this,ts,{email:e},n,"passwordReset"),this.a=t}function Iu(e,t,n,r,i){var o=n.s();o&&Rc(e,n.M(y(Cc(e).confirmPasswordReset,Cc(e)),[r,o],function(){n.m();var r=new xs(i);r.render(t),Sc(e,r)},function(r){ku(e,t,n,r)}))}function ku(e,t,n,r){"auth/weak-password"==(r&&r.code)?(e=Qs(r),Jo(n.i(),!1),ia(n.A(),e),n.i().focus()):(n&&n.m(),n=new Rs,n.render(t),Sc(e,n))}function Nu(e,t,n){var r=new vu(n,function(){Rc(e,r.M(y(Cc(e).sendPasswordResetEmail,Cc(e)),[n],function(){r.m(),r=new Ns(n,void 0,vr(Lc(e)),br(Lc(e))),r.render(t),Sc(e,r)},function(){r.g(nt("Unable to send password reset code to specified email").toString())}))});r.render(t),Sc(e,r)}function Au(e,t){try{var n="number"==typeof e.selectionStart}catch(e){n=!1}n?(e.selectionStart=t,e.selectionEnd=t):El&&!G("9")&&("textarea"==e.type&&(t=e.value.substring(0,t).replace(/(\r\n|\r|\n)/g,"\n").length),e=e.createTextRange(),e.collapse(!0),e.move("character",t),e.select())}function Du(e,t,n,r,i,o){Pa.call(this,za,{email:n},o,"emailLinkSignInConfirmation",{H:r,G:i}),this.i=e,this.s=t}function xu(e,t,n,r,i){Pa.call(this,$a,{ma:e},i,"emailLinkSignInLinkingDifferentDevice",{H:n,G:r}),this.a=t}function Ru(e){Pa.call(this,Ka,void 0,e,"blank")}function Pu(e,t,n,r,i){var o=new Ru,a=new Rr(n),s=a.a.a.get(lf.Va)||"",u=a.a.a.get(lf.Na)||"",c="1"===a.a.a.get(lf.Ka),l=Mr(a),h=a.a.a.get(lf.PROVIDER_ID)||null,f=!qi(Vf,kc(e)),d=r||$i(u,kc(e)),p=(r=Zi(u,kc(e)))&&r.a;h&&p&&p.providerId!==h&&(p=null),o.render(t),Sc(e,o),Rc(e,o.M(function(){var t=cn(null);t=l&&f||f&&c?ln(Error("anonymous-user-not-found")):Bc(e,n).then(function(e){if(h&&!p)throw Error("pending-credential-not-found");return e});var r=null;return t.then(function(t){return r=t,i?null:Cc(e).checkActionCode(s)}).then(function(){return r})},[],function(r){d?Lu(e,o,d,n,p,r):c?(o.m(),ao("differentDeviceError",e,t)):(o.m(),ao("emailLinkConfirmation",e,t,n,Ou))},function(r){var i=void 0;if(!r||!r.name||"cancel"!=r.name)switch(o.m(),r&&r.message){case"anonymous-user-not-found":ao("differentDeviceError",e,t);break;case"anonymous-user-mismatch":ao("anonymousUserMismatch",e,t);break;case"pending-credential-not-found":ao("emailLinkNewDeviceLinking",e,t,n,Mu);break;default:r&&(i=Qs(r)),Zs(e,t,void 0,i)}}))}function Ou(e,t,n,r){Pu(e,t,r,n,!0)}function Mu(e,t,n){Pu(e,t,n)}function Lu(e,t,n,r,i,o){var a=Ma(t);t.X("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",nt("Signing in...").toString());var s=null;i=(o?qc(e,o,n,r,i):Vc(e,n,r,i)).then(function(n){Vi(jf,kc(e)),Vi(Vf,kc(e)),t.h(),t.X("firebaseui-icon-done",nt("Signed in!").toString()),s=setTimeout(function(){t.h(),js(e,t,n,!0)},1e3),Rc(e,function(){t&&(t.h(),t.m()),clearTimeout(s)})},function(i){if(t.h(),t.m(),!i.name||"cancel"!=i.name){var o=Qs(i);"auth/email-already-in-use"==i.code||"auth/credential-already-in-use"==i.code?(Vi(jf,kc(e)),Vi(Vf,kc(e))):"auth/invalid-email"==i.code?(o=nt("The email provided does not match the current sign-in session.").toString(),ao("emailLinkConfirmation",e,a,r,Ou,null,o)):Zs(e,a,n,o)}}),Rc(e,i)}function Fu(e,t,n,r,i,o){Pa.call(this,Ja,{email:e,ma:t},o,"emailLinkSignInLinking",{H:r,G:i}),this.a=n}function Uu(e,t,n,r){var i=Ma(t);nu(e,t,n,function(){Zs(e,i,n)},function(r){if(!r.name||"cancel"!=r.name){var o=Qs(r);r&&"auth/network-request-failed"==r.code?t.g(o):(t.m(),Zs(e,i,n,o))}},r)}function Bu(e,t,n,r,i,o){Pa.call(this,Qa,{email:e},o,"emailLinkSignInSent",{H:r,G:i}),this.s=t,this.a=n}function qu(e,t,n,r,i,o,a){Pa.call(this,cs,{Ub:e,Fb:t},a,"emailMismatch",{H:i,G:o}),this.s=n,this.i=r}function Vu(e,t,n,r,i){Pa.call(this,Ga,void 0,i,"emailNotReceived",{H:n,G:r}),this.i=e,this.a=t}function ju(e,t,n,r,i,o){Pa.call(this,Za,{email:e,ma:t},o,"federatedLinking",{H:r,G:i}),this.a=n}function Wu(e,t,n,r){var i=t.A();i?Rc(e,t.M(y(e.Kb,e),[n,i],function(n){return n=n.user.linkWithCredential(r).then(function(n){return js(e,t,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo
})}),Rc(e,n),n},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/wrong-password":Jo(t.i(),!1),ia(t.D(),Qs(e));break;case"auth/too-many-requests":t.g(Qs(e));break;default:Gt("signInWithEmailAndPassword: "+e.message,void 0),t.g(Qs(e))}})):t.i().focus()}function Ku(e,t,n,r,i,o){Pa.call(this,Va,{email:n,Oa:!!t},o,"passwordRecovery",{H:r,G:i}),this.a=e,this.s=t}function Qu(e,t){var n=t.A();if(n){var r=Ma(t);Rc(e,t.M(y(Cc(e).sendPasswordResetEmail,Cc(e)),[n],function(){t.m();var i=new Ns(n,function(){i.m(),Zs(e,r)},vr(Lc(e)),br(Lc(e)));i.render(r),Sc(e,i)},function(e){Jo(t.i(),!1),ia(t.D(),Qs(e))}))}else t.i().focus()}function Gu(){return Ho(this,"firebaseui-id-name")}function zu(){return Ho(this,"firebaseui-id-name-error")}function Hu(e,t,n,r,i,o,a,s,u){Pa.call(this,qa,{email:r,Ib:e,name:i,Oa:!!n,ga:!!s},u,"passwordSignUp",{H:o,G:a}),this.a=t,this.J=n,this.D=e}function Yu(e,t){var n=wr(Lc(e)),r=t.P(),i=null;n&&(i=t.L());var a=t.R();if(r){if(n){if(!i)return void t.A().focus();i=j(i)}if(a){var s=o.auth.EmailAuthProvider.credential(r,a);Rc(e,t.M(y(e.Lb,e),[r,a],function(r){var o={user:r.user,credential:s,operationType:r.operationType,additionalUserInfo:r.additionalUserInfo};return n?(r=r.user.updateProfile({displayName:i}).then(function(){return js(e,t,o)}),Rc(e,r),r):js(e,t,o)},function(n){if(!n.name||"cancel"!=n.name){var i=Qs(n);switch(n.code){case"auth/email-already-in-use":return Xu(e,t,r,n);case"auth/too-many-requests":i=nt("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Jo(t.s(),!1),ia(t.ca(),i);break;default:n="setAccountInfo: "+Ai(n),Gt(n,void 0),t.g(i)}}}))}else t.s().focus()}else t.i().focus()}function Xu(e,t,n,r){function i(){var e=Qs(r);Jo(t.i(),!1),ia(t.U(),e),t.i().focus()}var o=Cc(e).fetchSignInMethodsForEmail(n).then(function(r){r.length?i():(r=Ma(t),t.m(),ao("passwordRecovery",e,r,n,!1,ht().toString()))},function(){i()});return Rc(e,o),o}function Ju(){return Ho(this,"firebaseui-id-phone-confirmation-code")}function $u(){return Ho(this,"firebaseui-id-phone-confirmation-code-error")}function Zu(){return Ho(this,"firebaseui-id-resend-countdown")}function ec(e,t,n,r,i,o,a,s,u){Pa.call(this,fs,{phoneNumber:i},u,"phoneSignInFinish",{H:a,G:s}),this.Ra=o,this.i=new No(1e3),this.D=o,this.P=e,this.a=t,this.J=n,this.L=r}function tc(e,t,n,r){function i(e){t.s().focus(),Jo(t.s(),!1),ia(t.aa(),e)}var o=t.U();o?(t.X("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",nt("Verifying...").toString()),Rc(e,t.M(y(r.confirm,r),[o],function(n){t.h(),t.X("firebaseui-icon-done",nt("Verified!").toString());var r=setTimeout(function(){t.h(),t.m();var r={user:Ic(e).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};js(e,t,r,!0)},1e3);Rc(e,function(){t&&t.h(),clearTimeout(r)})},function(r){if(r.name&&"cancel"==r.name)t.h();else{var o=Qs(r);switch(r.code){case"auth/credential-already-in-use":t.h();break;case"auth/code-expired":r=Ma(t),t.h(),t.m(),ao("phoneSignInStart",e,r,n,o);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":t.h(),i(o);break;default:t.h(),t.g(o)}}}))):i(nt("Wrong code. Try again.").toString())}function nc(e,t){return/-[a-z]/.test(t)?null:yd&&e.dataset?!F("Android")||V()||F("Firefox")||F("FxiOS")||F("Opera")||F("Silk")||t in e.dataset?(e=e.dataset[t],void 0===e?null:e):null:e.getAttribute("data-"+String(t).replace(/([A-Z])/g,"-$1").toLowerCase())}function rc(e,t,n){var r=this;e=Ye(wa,{items:e},null,this.w),Ia.call(this,e,!0,!0),n&&(n=ic(e,n))&&(n.focus(),Wo(n,e)),na(this,e,function(e){(e=(e=be(e.target,"firebaseui-id-list-box-dialog-button"))&&nc(e,"listboxid"))&&(ka.call(r),t(e))})}function ic(e,t){e=(e||document).getElementsByTagName("BUTTON");for(var n=0;n<e.length;n++)if(nc(e[n],"listboxid")===t)return e[n];return null}function oc(){return Ho(this,"firebaseui-id-phone-number")}function ac(){return Ho(this,"firebaseui-id-country-selector")}function sc(){return Ho(this,"firebaseui-id-phone-number-error")}function uc(e,t){var n=e.a,r=cc("1-US-0",n),i=null;if(i=t&&cc(t,n)?t:r?"1-US-0":0<n.length?n[0].c:null,!i)throw Error("No available default country");dc.call(this,i,e)}function cc(e,t){return e=Tt(e),!(!e||!k(t,e))}function lc(e){return sl(e,function(e){return{id:e.c,Ga:"firebaseui-flag "+hc(e),label:e.name+" +"+e.b}})}function hc(e){return"firebaseui-flag-"+e.f}function fc(e){var t=this;rc.call(this,lc(e.a),function(n){dc.call(t,n,e,!0),t.K().focus()},this.wa)}function dc(e,t,n){var r=Tt(e);r&&(n&&(n=cl(go(oc.call(this))||""),t=St(t,n),t.length&&t[0].b!=r.b&&(n="+"+r.b+n.substr(t[0].b.length+1),yo(oc.call(this),n))),t=Tt(this.wa),this.wa=e,e=Ho(this,"firebaseui-id-country-selector-flag"),t&&mo(e,hc(t)),po(e,hc(r)),ve(Ho(this,"firebaseui-id-country-selector-code"),"+"+r.b))}function pc(e,t,n,r,i,o,a,s,u,c){Pa.call(this,hs,{sb:t,va:u||null,Qa:!!n,ga:!!o},c,"phoneSignInStart",{H:r,G:i}),this.J=s||null,this.L=t,this.a=e,this.A=n||null,this.aa=a||null}function mc(e,t,n,r){try{var i=t.R(zf)}catch(e){return}i?Qf?(t.X("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",nt("Verifying...").toString()),Rc(e,t.M(y(e.Pb,e),[Dt(i),n],function(n){var r=Ma(t);t.X("firebaseui-icon-done",nt("Code sent!").toString());var o=setTimeout(function(){t.h(),t.m(),ao("phoneSignInFinish",e,r,i,15,n)},1e3);Rc(e,function(){t&&t.h(),clearTimeout(o)})},function(e){if(t.h(),!e.name||"cancel"!=e.name){grecaptcha.reset(Hf),Qf=null;var n=e&&e.message||"";if(e.code)switch(e.code){case"auth/too-many-requests":n=nt("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return t.K().focus(),void ia(t.D(),ct().toString());default:n=Qs(e)}t.g(n)}}))):Gf?ia(t.s(),nt("Solve the reCAPTCHA").toString()):!Gf&&r&&t.i().click():(t.K().focus(),ia(t.D(),ct().toString()))}function gc(e,t,n,r,i){Pa.call(this,ls,{Hb:t},i,"providerSignIn",{H:n,G:r}),this.a=e}function yc(e,t,n,r,i,o,a){Pa.call(this,Ua,{email:n,Qa:!!t,ga:!!o},a,"signIn",{H:r,G:i}),this.a=e,this.s=t}function vc(e,t,n,r,i,o){Pa.call(this,es,{email:e},o,"unsupportedProvider",{H:r,G:i}),this.a=t,this.i=n}function bc(e,t){this.$=!1;var n=_c(t);if(vd[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');vd[n]=this,this.g=e,this.A=null,this.s=!1,wc(this.g),this.v=o.initializeApp({apiKey:e.app.options.apiKey,authDomain:e.app.options.authDomain},e.app.name+"-firebaseui-temp").auth(),wc(this.v),this.v.setPersistence&&this.v.setPersistence(o.auth.Auth.Persistence.SESSION),this.ea=t,this.X=new Zn,this.a=this.K=this.i=this.F=null,this.j=[],this.Z=!1,this.O=ii.Sa(),this.h=this.C=null,this.ba=this.w=!1}function wc(e){e&&e.INTERNAL&&e.INTERNAL.logFramework&&e.INTERNAL.logFramework("FirebaseUI-web")}function _c(e){return e||"[DEFAULT]"}function Ec(e){return Fc(e),e.i||(e.i=Dc(e,function(t){return cn(t&&!Hi(kc(e))?Ic(e).getRedirectResult().then(function(e){return e},function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Gc(e,t)}):Cc(e).getRedirectResult().then(function(t){return rr(Lc(e))&&!t.user&&e.h&&!e.h.isAnonymous?Ic(e).getRedirectResult():t}))})),e.i}function Sc(e,t){Fc(e),e.a=t}function Tc(){return bd}function Cc(e){return Fc(e),e.v}function Ic(e){return Fc(e),e.g}function kc(e){return Fc(e),e.ea}function Nc(e){return e=new Rr(e),"signIn"===(e.a.a.get(lf.lb)||null)&&!!e.a.a.get(lf.Va)}function Ac(e,t){var n=Yn(t);if(n.setAttribute("lang","en".replace(/_/g,"-")),bd){var r=bd;Fc(r),Hi(kc(r))&&zt("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),bd.reset()}bd=e,e.K=n,Mc(e,n),Li(new Fi)&&Li(new Ui)?uu(e,t):(t=Yn(t),n=new Os(nt("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),n.render(t),Sc(e,n)),Vi(Ff,kc(e))}function Dc(e,t){if(e.w)return t(xc(e));if(Rc(e,function(){e.w=!1}),rr(Lc(e))){var n=new an(function(n){Rc(e,e.g.onAuthStateChanged(function(r){e.h=r,e.w||(e.w=!0,n(t(xc(e))))}))});return Rc(e,n),n}return e.w=!0,t(null)}function xc(e){return Fc(e),rr(Lc(e))&&e.h&&e.h.isAnonymous?e.h:null}function Rc(e,t){if(Fc(e),t){e.j.push(t);var n=function(){x(e.j,function(e){return e==t})};"function"!=typeof t&&t.then(n,n)}}function Pc(e){Fc(e);var t;return(t=e.Z)||(e=Lc(e),e=dr(e,o.auth.GoogleAuthProvider.PROVIDER_ID),t=!(!e||"select_account"!==e.prompt)),t}function Oc(e){"undefined"!=typeof e.g.languageCode&&e.s&&(e.s=!1,e.g.languageCode=e.A)}function Mc(e,t){e.I=null,e.F=new Wr(t),e.F.register(),Pn(e.F,"pageEnter",function(t){if(t=t&&t.pageId,e.I!=t){var n=Lc(e);(n=Dr(n).uiChanged||null)&&n(e.I,t),e.I=t}})}function Lc(e){return Fc(e),e.X}function Fc(e){if(e.$)throw Error("AuthUI instance is deleted!")}function Uc(e){Fc(e);try{oi(e.O,cr(Lc(e)),Pc(e)).then(function(t){return!!e.a&&Ys(e,e.a,t)})}catch(e){}}function Bc(e,t){var n=Mr(new Rr(t));return n?(t=new an(function(t,r){var i=Ic(e).onAuthStateChanged(function(e){i(),e&&e.isAnonymous&&e.uid===n?t(e):r(e&&e.isAnonymous&&e.uid!==n?Error("anonymous-user-mismatch"):Error("anonymous-user-not-found"))});Rc(e,i)}),Rc(e,t),t):cn(null)}function qc(e,t,n,r,i){Fc(e);var a=i||null,s=o.auth.EmailAuthProvider.credentialWithLink(n,r);return n=a?Cc(e).signInWithEmailLink(n,r).then(function(e){return e.user.linkWithCredential(a)}).then(function(){return Qc(e)}).then(function(){return Gc(e,{code:"auth/email-already-in-use"},a)}):Cc(e).fetchSignInMethodsForEmail(n).then(function(n){return n.length?Gc(e,{code:"auth/email-already-in-use"},s):t.linkWithCredential(s)}),Rc(e,n),n}function Vc(e,t,n,r){Fc(e);var i,o=r||null;return t=Cc(e).signInWithEmailLink(t,n).then(function(e){if(i={user:e.user,credential:null,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo},o)return e.user.linkWithCredential(o).then(function(e){i={user:e.user,credential:o,operationType:i.operationType,additionalUserInfo:e.additionalUserInfo}})}).then(function(){Qc(e)}).then(function(){return Ic(e).updateCurrentUser(i.user)}).then(function(){return i.user=Ic(e).currentUser,i}),Rc(e,t),t}function jc(){var e=Xn();if(Nc(e)){e=new Rr(e);for(var t in lf)lf.hasOwnProperty(t)&&We(e.a.a,lf[t]);t={state:"signIn",mode:"emailLink",operation:"clear"};var n=Xc.document.title;Xc.history&&Xc.history.replaceState&&Xc.history.replaceState(t,n,e.toString())}}function Wc(e,t){return Fc(e),Dc(e,function(n){return n&&!Hi(kc(e))?n.linkWithPopup(t).then(function(e){return e},function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Gc(e,t)}):Cc(e).signInWithPopup(t)})}function Kc(e,t){return Fc(e),Dc(e,function(n){if(e.h&&!e.h.isAnonymous&&rr(Lc(e))&&!Cc(e).currentUser)return Qc(e).then(function(){return"password"==t.credential.providerId&&(t.credential=null),t});if(n)return Qc(e).then(function(){return n.linkWithCredential(t.credential)}).then(function(e){return t.user=e.user,t.credential=e.credential,t.operationType=e.operationType,t.additionalUserInfo=e.additionalUserInfo,t},function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Gc(e,n,t.credential)});if(!t.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Qc(e).then(function(){return Ic(e).updateCurrentUser(t.user)}).then(function(){return t.user=Ic(e).currentUser,t.operationType="signIn",t.credential&&t.credential.providerId&&"password"==t.credential.providerId&&(t.credential=null),t})})}function Qc(e){return Fc(e),Cc(e).signOut()}function Gc(e,t,n){if(Fc(e),t&&t.code&&("auth/email-already-in-use"==t.code||"auth/credential-already-in-use"==t.code)){var r=Ar(Lc(e));return cn().then(function(){return r(new dt("anonymous-upgrade-merge-conflict",null,n||t.credential))}).then(function(){throw e.a&&(e.a.m(),e.a=null),t})}return ln(t)}var zc,Hc="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},Yc="undefined"!=typeof window&&window===this?this:"undefined"!=typeof i&&null!=i?i:this;e("Promise",function(e){function t(e){this.g=0,this.h=void 0,this.a=[];var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.a=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;r.prototype.g=function(e){if(null==this.a){this.a=[];var t=this;this.h(function(){t.i()})}this.a.push(e)};var o=Yc.setTimeout;r.prototype.h=function(e){o(e,0)},r.prototype.i=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.a=null},r.prototype.j=function(e){this.h(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.I),reject:e(this.i)}},t.prototype.I=function(e){if(e===this)this.i(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.K(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.v(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(e){return void this.i(e)}"function"==typeof t?this.O(t,e):this.v(e)},t.prototype.i=function(e){this.w(2,e)},t.prototype.v=function(e){this.w(1,e)},t.prototype.w=function(e,t){if(0!=this.g)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.g);this.g=e,this.h=t,this.C()},t.prototype.C=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.g(this.a[e]);this.a=null}};var a=new r;return t.prototype.K=function(e){var t=this.j();e.Da(t.resolve,t.reject)},t.prototype.O=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t(function(e,t){i=e,o=t});return this.Da(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Da=function(e,t){function n(){switch(r.g){case 1:e(r.h);break;case 2:t(r.h);break;default:throw Error("Unexpected state: "+r.g)}}var r=this;null==this.a?a.g(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,r){for(var o=n(e),a=o.next();!a.done;a=o.next())i(a.value).Da(t,r)})},t.all=function(e){var r=n(e),o=r.next();return o.done?i([]):new t(function(e,t){function n(t){return function(n){a[t]=n,s--,0==s&&e(a)}}var a=[],s=0;do a.push(void 0),s++,i(o.value).Da(n(a.length-1),t),o=r.next();while(!o.done)})},t});var Xc=this,Jc=/^[\w+\/_-]+[=]{0,2}$/,$c=null,Zc="closure_uid_"+(1e9*Math.random()>>>0),el=0,tl=Date.now||function(){return+new Date};_(E,Error),E.prototype.name="CustomError";var nl;_(S,E),S.prototype.name="AssertionError";var rl,il=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ol=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=a(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},al=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o=a(e)?e.split(""):e,s=0;s<n;s++)if(s in o){var u=o[s];t.call(void 0,u,s,e)&&(r[i++]=u)}return r},sl=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=a(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},ul=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=a(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1},cl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ll=/&/g,hl=/</g,fl=/>/g,dl=/"/g,pl=/'/g,ml=/\x00/g,gl=/[\x00&<>"']/;e:{var yl=Xc.navigator;if(yl){var vl=yl.userAgent;if(vl){rl=vl;break e}}rl=""}var bl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");W[" "]=s;var wl,_l=F("Opera"),El=F("Trident")||F("MSIE"),Sl=F("Edge"),Tl=Sl||El,Cl=F("Gecko")&&!(-1!=rl.toLowerCase().indexOf("webkit")&&!F("Edge"))&&!(F("Trident")||F("MSIE"))&&!F("Edge"),Il=-1!=rl.toLowerCase().indexOf("webkit")&&!F("Edge"),kl=Il&&F("Mobile"),Nl=F("Macintosh");e:{var Al="",Dl=function(){var e=rl;return Cl?/rv:([^\);]+)(\)|;)/.exec(e):Sl?/Edge\/([\d\.]+)/.exec(e):El?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Il?/WebKit\/(\S+)/.exec(e):_l?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Dl&&(Al=Dl?Dl[1]:""),El){var xl=Q();if(null!=xl&&xl>parseFloat(Al)){wl=String(xl);break e}}wl=Al}var Rl,Pl={},Ol=Xc.document;Rl=Ol&&El?Q()||("CSS1Compat"==Ol.compatMode?parseInt(wl,10):5):void 0,z.prototype.ka=!0,z.prototype.ia=function(){return this.a},z.prototype.toString=function(){return"Const{"+this.a+"}"};var Ml={},Ll={};Y.prototype.ka=!0,Y.prototype.ia=function(){return this.a.toString()},Y.prototype.g=function(){return 1},Y.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Fl={};$.prototype.ka=!0,$.prototype.ia=function(){return this.a.toString()},$.prototype.g=function(){return 1},$.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ul=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,Bl={};ne("about:blank"),re.prototype.ka=!0;var ql={};re.prototype.ia=function(){return this.a},re.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},ie.prototype.g=function(){return this.h},ie.prototype.ka=!0,ie.prototype.ia=function(){return this.a.toString()},ie.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vl={};ae("<!DOCTYPE html>",0);var jl=ae("",0);ae("<br>",0);var Wl=function(e){var t,n=!1;return function(){return n||(t=e(),n=!0),t}}(function(){if("undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!!e.firstChild&&(t=e.firstChild.firstChild,e.innerHTML=oe(jl),!t.parentElement)});ue.prototype.toString=function(){return"("+this.a+", "+this.g+")"},ue.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},ue.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},ue.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},zc=ce.prototype,zc.toString=function(){return"("+this.width+" x "+this.height+")"},zc.aspectRatio=function(){return this.width/this.height},zc.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},zc.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},zc.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var Kl={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};_e.prototype.N=function(){return a(void 0)?this.a.getElementById(void 0):void 0};var Ql="StopIteration"in Xc?Xc.StopIteration:{message:"StopIteration",stack:""};Ee.prototype.next=function(){throw Ql},Ee.prototype.fa=function(){return this},zc=Ie.prototype,zc.ja=function(){ke(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.g[this.a[t]]);return e},zc.ha=function(){return ke(this),this.a.concat()},zc.clear=function(){this.g={},this.j=this.h=this.a.length=0},zc.get=function(e,t){return Ne(this.g,e)?this.g[e]:t},zc.set=function(e,t){Ne(this.g,e)||(this.h++,this.a.push(e),this.j++),this.g[e]=t},zc.forEach=function(e,t){for(var n=this.ha(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}},zc.fa=function(e){ke(this);var t=0,n=this.j,r=this,i=new Ee;return i.next=function(){if(n!=r.j)throw Error("The map has changed since the iterator was created");if(t>=r.a.length)throw Ql;var i=r.a[t++];return e?i:r.g[i]},i};var Gl=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,zl=/#|$/,Hl=/[?&]($|#)/;Re.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Be(t,Yl,!0),":");var n=this.h;return(n||"file"==t)&&(e.push("//"),(t=this.w)&&e.push(Be(t,Yl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.C,null!=n&&e.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&e.push("/"),e.push(Be(n,"/"==n.charAt(0)?Jl:Xl,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Be(n,Zl)),e.join("")},Re.prototype.resolve=function(e){var t=new Re(this),n=!!e.j;n?Pe(t,e.j):n=!!e.w,n?t.w=e.w:n=!!e.h,n?t.h=e.h:n=null!=e.C;var r=e.g;if(n)Oe(t,e.C);else if(n=!!e.g){if("/"!=r.charAt(0))if(this.h&&!this.g)r="/"+r;else{var i=t.g.lastIndexOf("/");-1!=i&&(r=t.g.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.g=r:n=""!==e.a.toString(),n?Me(t,Qe(e.a)):n=!!e.i,n&&(t.i=e.i),t};var Yl=/[#\/\?@]/g,Xl=/[#\?:]/g,Jl=/[#\?]/g,$l=/[#\?@]/g,Zl=/#/g;zc=Ve.prototype,zc.add=function(e,t){je(this),this.h=null,e=Ge(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.g+=1,this},zc.clear=function(){this.a=this.h=null,this.g=0},zc.forEach=function(e,t){je(this),this.a.forEach(function(n,r){ol(n,function(n){e.call(t,n,r,this)},this)},this)},zc.ha=function(){je(this);for(var e=this.a.ja(),t=this.a.ha(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},zc.ja=function(e){je(this);var t=[];if(a(e))Ke(this,e)&&(t=R(t,this.a.get(Ge(this,e))));else{e=this.a.ja();for(var n=0;n<e.length;n++)t=R(t,e[n])}return t},zc.set=function(e,t){return je(this),this.h=null,e=Ge(this,e),Ke(this,e)&&(this.g-=this.a.get(e).length),this.a.set(e,[t]),this.g+=1,this},zc.get=function(e,t){return e?(e=this.ja(e),0<e.length?String(e[0]):t):t},zc.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var e=[],t=this.a.ha(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.ja(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.h=e.join("&")};var eh={qc:!0},th={sc:!0},nh={pc:!0},rh={rc:!0};He.prototype.ta=null,He.prototype.toString=function(){return this.content};var ih=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,oh={};_($e,He),$e.prototype.da=eh,_(et,He),et.prototype.da=th,et.prototype.ta=1,_(tt,He),tt.prototype.da=rh;var ah=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return e=new t(String(e)),void 0!==n&&(e.ta=n),e}}($e),sh=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e){return new t(String(e))}}(et),uh=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return(e=String(e))?(e=new t(e),void 0!==n&&(e.ta=n),e):""}}($e),ch={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;","":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"},lh={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85","":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","":"%EF%BC%81","":"%EF%BC%83","":"%EF%BC%84","":"%EF%BC%86","":"%EF%BC%87","":"%EF%BC%88","":"%EF%BC%89","":"%EF%BC%8A","":"%EF%BC%8B","":"%EF%BC%8C","":"%EF%BC%8F","":"%EF%BC%9A","":"%EF%BC%9B","":"%EF%BC%9D","":"%EF%BC%9F","":"%EF%BC%A0","":"%EF%BC%BB","":"%EF%BC%BD"},hh=/[\x00\x22\x27\x3c\x3e]/g,fh=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,dh=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,ph=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,mh=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,gh=/</g;_(dt,Error),dt.prototype.na=function(){return{code:this.code,message:this.message}},dt.prototype.toJSON=function(){return this.na()};var yh="firebaseui/";pt.prototype.get=function(e){if(!(e.toLowerCase()in this.V))throw Error("Configuration "+e+" is not defined.");return this.V[e.toLowerCase()]},zc=vt.prototype,zc.set=function(e,t){bt(this,e,t,!1)},zc.add=function(e,t){bt(this,e,t,!0)},zc.get=function(e){e:{for(var t=this,n=0;n<e.length;n++)if(t=t.a[e.charAt(n)],!t){e=void 0;break e}e=t}return e?e.g:void 0},zc.ja=function(){var e=[];return wt(this,e),e},zc.ha=function(){var e=[];return _t(this,"",e),e},zc.clear=function(){this.a={},this.g=void 0};var vh=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Cte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",
b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Runion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthlemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"So Tom and Prncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];kt(vh);var bh=new Et(vh),wh=["emailLink","password","phone"],_h={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"},Eh=Object.freeze||function(e){return e};Rt.prototype.a=null;var Sh=0;Rt.prototype.reset=function(e,t,n,r,i){"number"==typeof i||Sh++,this.h=r||tl(),this.j=e,this.i=t,this.g=n,delete this.a},Ot.prototype.toString=function(){return this.name};var Th=new Ot("SEVERE",1e3),Ch=new Ot("WARNING",900),Ih=new Ot("CONFIG",700);Pt.prototype.log=function(e,t,n){if(e.value>=Mt(this).value)for(d(t)&&(t=t()),e=new Rt(e,String(t),this.i),n&&(e.a=n),n=this;n;){var r=n,i=e;if(r.a)for(var o=0;t=r.a[o];o++)t(i);n=n.g}};var kh={},Nh=null,Ah=null;Ut.prototype.set=function(e){this.a=e},Ut.prototype.reset=function(){this.set(tl())},Ut.prototype.get=function(){return this.a},Bt.prototype.a=!0,Bt.prototype.g=!0,Bt.prototype.h=!1,_(jt,Bt),Kt.prototype.h=function(e){function t(e){if(e){if(e.value>=Th.value)return"error";if(e.value>=Ch.value)return"warn";if(e.value>=Ih.value)return"log"}return"debug"}if(!this.j[e.g]){var n=Wt(this.a,e),r=xh;if(r){var i=t(e.j);Qt(r,i,n,e.a)}}};var Dh,xh=Xc.console;Dh=Ft("firebaseui");var Rh=new Kt;if(1!=Rh.g){var Ph;Lt(),Ph=Nh;var Oh=Rh.i;Ph.a||(Ph.a=[]),Ph.a.push(Oh),Rh.g=!0}Yt.prototype.get=function(){if(0<this.g){this.g--;var e=this.a;this.a=e.next,e.next=null}else e=this.h();return e};var Mh=new Yt(function(){return new Zt},function(e){e.reset()});Jt.prototype.add=function(e,t){var n=Mh.get();n.set(e,t),this.g?this.g.next=n:this.a=n,this.g=n},Zt.prototype.set=function(e,t){this.a=e,this.g=t,this.next=null},Zt.prototype.reset=function(){this.next=this.g=this.a=null};var Lh,Fh,Uh=!1,Bh=new Jt,qh=0,Vh=2,jh=3;sn.prototype.reset=function(){this.context=this.g=this.h=this.a=null,this.j=!1};var Wh=new Yt(function(){return new sn},function(e){e.reset()});an.prototype.then=function(e,t,n){return pn(this,d(e)?e:null,d(t)?t:null,n)},an.prototype.$goog_Thenable=!0,an.prototype.cancel=function(e){this.a==qh&&nn(function(){var t=new En(e);fn(this,t)},this)},an.prototype.F=function(e){this.a=qh,mn(this,Vh,e)},an.prototype.I=function(e){this.a=qh,mn(this,jh,e)},an.prototype.C=function(){for(var e;e=vn(this);)bn(this,e,this.a,this.w);this.v=!1};var Kh=en;_(En,E),En.prototype.name="cancel";var Qh=!El||9<=Number(Rl),Gh=El&&!G("9"),zh=function(){if(!Xc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Xc.addEventListener("test",s,t),Xc.removeEventListener("test",s,t)}catch(e){}return e}(),Hh=0,Yh={};Sn.prototype.O=!1,Sn.prototype.m=function(){if(!this.O&&(this.O=!0,this.l(),0!=Hh)){var e=this[Zc]||(this[Zc]=++el);if(0!=Hh&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Yh[e]}},Sn.prototype.l=function(){if(this.C)for(;this.C.length;)this.C.shift()()},In.prototype.stopPropagation=function(){this.h=!0},In.prototype.preventDefault=function(){this.ib=!1},_(kn,In);var Xh=Eh({2:"touch",3:"pen",4:"mouse"});kn.prototype.stopPropagation=function(){kn.o.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},kn.prototype.preventDefault=function(){kn.o.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Gh)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var Jh="closure_listenable_"+(1e6*Math.random()|0),$h=0;Dn.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.g++);var a=Rn(e,t,r,i);return-1<a?(t=e[a],n||(t.Ca=!1)):(t=new Nn(t,this.src,o,!!r,i),t.Ca=n,e.push(t)),t};var Zh="closure_lm_"+(1e6*Math.random()|0),ef={},tf=0,nf="__closure_events_fn_"+(1e9*Math.random()>>>0),rf="accountchooser.com",of={Vb:rf,Yb:"googleyolo",NONE:"none"},af={Zb:"popup",ac:"redirect"},sf={Xb:"callback",$b:"recoverEmail",bc:"resetPassword",cc:"select",dc:"signIn",ec:"verifyEmail"},uf=["anonymous"],cf=["sitekey","tabindex","callback","expired-callback"],lf={Ja:"ui_auid",Wb:"apiKey",Ka:"ui_sd",lb:"mode",Va:"oobCode",PROVIDER_ID:"ui_pid",Na:"ui_sid"};Rr.prototype.toString=function(){return this.a.toString()},_(Fr,Sn),Fr.prototype[Jh]=!0,Fr.prototype.Ua=function(e){this.Ba=e},Fr.prototype.removeEventListener=function(e,t,n,r){Fn(this,e,t,n,r)},Fr.prototype.l=function(){if(Fr.o.l.call(this),this.F){var e,t=this.F,n=0;for(e in t.a){for(var r=t.a[e],i=0;i<r.length;i++)++n,An(r[i]);delete t.a[e],t.g--}}this.Ba=null};var hf={},ff=0;_(Wr,Fr),Wr.prototype.N=function(){return this.a},Wr.prototype.register=function(){var e=jr(this.N());hf[e]?k(hf[e],this)||hf[e].push(this):hf[e]=[this]},Kr.prototype.cancel=function(e){if(this.a)this.h instanceof Kr&&this.h.cancel();else{if(this.g){var t=this.g;delete this.g,e?t.cancel(e):(t.C--,0>=t.C&&t.cancel())}this.O?this.O.call(this.K,this):this.F=!0,this.a||(e=new Jr(this),Gr(this),Qr(this,!1,e))}},Kr.prototype.I=function(e,t){this.w=!1,Qr(this,e,t)},Kr.prototype.then=function(e,t,n){var r,i,o=new an(function(e,t){r=e,i=t});return zr(this,r,function(e){e instanceof Jr?o.cancel():i(e)}),o.then(e,t,n)},Kr.prototype.$goog_Thenable=!0,_(Xr,E),Xr.prototype.message="Deferred has already fired",Xr.prototype.name="AlreadyCalledError",_(Jr,E),Jr.prototype.message="Deferred was canceled",Jr.prototype.name="CanceledError",$r.prototype.h=function(){throw delete df[this.a],this.g};var df={},pf=0,mf=1;_(ri,E),u(ii);var gf=new z(Ll,"https://smartlock.google.com/client");ii.prototype.cancel=function(){this.a&&this.h&&(this.g=this.a.cancelLastOperation().catch(function(){}))},u(ai),ai.prototype.load=function(){var e=this;if(this.a)return this.a;var t=J(H(gf));return Xc.googleyolo?cn():this.a=Jn().then(function(){if(!Xc.googleyolo)return new an(function(n,r){var i=setTimeout(function(){e.a=null,r(Error("Network error!"))},1e4);Xc.onGoogleYoloLoad=function(){clearTimeout(i),n()},hn(cn(Zr(t)),function(t){clearTimeout(i),e.a=null,r(t)})})})},si.prototype.confirm=function(e){return hn(cn(this.a.confirm(e)),this.g)},ui.prototype.na=function(){return{email:this.a,displayName:this.h,photoUrl:this.j,providerId:this.g}},zc=li.prototype,zc.set=function(e,t,n,i,o,a){if(/[;=\s]/.test(e))throw Error('Invalid cookie name "'+e+'"');if(/[;\r\n]/.test(t))throw Error('Invalid cookie value "'+t+'"');r(n)||(n=-1),o=o?";domain="+o:"",i=i?";path="+i:"",a=a?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(tl()+1e3*n).toUTCString(),this.a.cookie=e+"="+t+o+i+n+a},zc.get=function(e,t){for(var n,r=e+"=",i=(this.a.cookie||"").split(";"),o=0;o<i.length;o++){if(n=cl(i[o]),0==n.lastIndexOf(r,0))return n.substr(r.length);if(n==e)return""}return t},zc.ha=function(){return hi(this).keys},zc.ja=function(){return hi(this).values},zc.clear=function(){for(var e=hi(this).keys,t=e.length-1;0<=t;t--){var n=e[t];this.get(n),this.set(n,"",0,void 0,void 0)}};var yf=new li;_(di,fi),di.prototype.set=function(e,t){yf.set(e,t,this.h,this.g,this.a,this.j)},di.prototype.get=function(e){return yf.get(e)||null},di.prototype.pa=function(e){var t=this.g,n=this.a;yf.get(e),yf.set(e,"",0,t,n)},pi.prototype.na=function(){return{email:this.g,credential:this.a&&this.a.toJSON()}},vi.prototype.w=16;var vf=vi.prototype.w/4,bf=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],wf=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],_f=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Ef=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Sf=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],Tf=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Cf=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],If=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],kf=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141],Nf={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Af=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;Pi.prototype.set=function(e,t){r(t)?this.a.set(e,Ai(t)):this.a.pa(e)},Pi.prototype.get=function(e){try{var t=this.a.get(e)}catch(e){return}if(null!==t)try{return JSON.parse(t)}catch(e){throw"Storage: Invalid value was encountered"}},_(Oi,fi),Oi.prototype.clear=function(){var e=Ce(this.fa(!0)),t=this;ol(e,function(e){t.pa(e)})},_(Mi,Oi),zc=Mi.prototype,zc.set=function(e,t){try{this.a.setItem(e,t)}catch(e){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},zc.get=function(e){if(e=this.a.getItem(e),!a(e)&&null!==e)throw"Storage mechanism: Invalid value was encountered";return e},zc.pa=function(e){this.a.removeItem(e)},zc.fa=function(e){var t=0,n=this.a,r=new Ee;return r.next=function(){if(t>=n.length)throw Ql;var r=n.key(t++);if(e)return r;if(r=n.getItem(r),!a(r))throw"Storage mechanism: Invalid value was encountered";return r},r},zc.clear=function(){this.a.clear()},zc.key=function(e){return this.a.key(e)},_(Fi,Mi),_(Ui,Mi),_(Bi,Oi),Bi.prototype.set=function(e,t){this.g.set(this.a+e,t)},Bi.prototype.get=function(e){return this.g.get(this.a+e)},Bi.prototype.pa=function(e){this.g.pa(this.a+e)},Bi.prototype.fa=function(e){var t=this.g.fa(!0),n=this,r=new Ee;return r.next=function(){for(var r=t.next();r.substr(0,n.a.length)!=n.a;)r=t.next();return e?r.substr(n.a.length):n.g.get(r)},r};var Df,xf=new Fi;Df=Li(xf)?new Bi(xf,"firebaseui"):null;var Rf,Pf=new Pi(Df),Of=new Ui;Rf=Li(Of)?new Bi(Of,"firebaseui"):null;var Mf=new Pi(Rf),Lf={name:"pendingEmailCredential",storage:Mf},Ff={name:"pendingRedirect",storage:Mf},Uf={name:"redirectUrl",storage:Mf},Bf={name:"rememberAccount",storage:Mf},qf={name:"rememberedAccounts",storage:Pf},Vf={name:"emailForSignIn",storage:new Pi(new di(3600,"/"))},jf={name:"pendingEncryptedCredential",storage:new Pi(new di(3600,"/"))},Wf=null,Kf={code:-32e3,message:"Service unavailable",data:"Service is unavailable."};zc=io.prototype,zc.store=function(){d(this.a.callbacks.store)&&this.a.callbacks.store(void 0,Kf)},zc.select=function(){d(this.a.callbacks.select)&&this.a.callbacks.select(void 0,Kf)},zc.update=function(){d(this.a.callbacks.update)&&this.a.callbacks.update(void 0,Kf)},zc.checkDisabled=function(e){e(!0)},zc.checkEmpty=function(e){e(void 0,Kf)},zc.checkAccountExist=function(e,t){t(void 0,Kf)},zc.checkShouldUpdate=function(e,t){t(void 0,Kf)};var Qf,Gf,zf,Hf,Yf={},Xf=/MSIE ([\d.]+).*Windows NT ([\d.]+)/,Jf=/Firefox\/([\d.]+)/,$f=/Opera[ \/]([\d.]+)(.*Version\/([\d.]+))?/,Zf=/Chrome\/([\d.]+)/,ed=/((Windows NT ([\d.]+))|(Mac OS X ([\d_]+))).*Version\/([\d.]+).*Safari/,td=/Mac OS X;.*(?!(Version)).*Safari/,nd=/Android ([\d.]+).*Safari/,rd=/OS ([\d_]+) like Mac OS X.*Mobile.*Safari/,id=/Konqueror\/([\d.]+)/,od=/MSIE ([\d.]+).*Windows Phone OS ([\d.]+)/;_(So,Fr),So.prototype.g=function(e){(13==e.keyCode||Il&&3==e.keyCode)&&To(this,e)},So.prototype.h=function(e){To(this,e)},So.prototype.l=function(){So.o.l.call(this),Fn(this.a,"keydown",this.g,!1,this),Fn(this.a,"click",this.h,!1,this),delete this.a},_(Co,kn),_(Io,kn),_(ko,Fr),ko.prototype.handleEvent=function(e){var t=new kn(e.a);t.type="focusin"==e.type||"focus"==e.type?"focusin":"focusout",Ur(this,t)},ko.prototype.l=function(){ko.o.l.call(this),Un(this.g),Un(this.h),delete this.a},_(No,Fr),zc=No.prototype,zc.Ea=!1,zc.Y=null,zc.Rb=function(){if(this.Ea){var e=tl()-this.j;0<e&&e<.8*this.g?this.Y=this.a.setTimeout(this.h,this.g-e):(this.Y&&(this.a.clearTimeout(this.Y),this.Y=null),Ur(this,"tick"),this.Ea&&(Ao(this),this.start()))}},zc.start=function(){this.Ea=!0,this.Y||(this.Y=this.a.setTimeout(this.h,this.g),this.j=tl())},zc.l=function(){No.o.l.call(this),Ao(this),delete this.a},_(xo,Sn);var ad=[];xo.prototype.l=function(){xo.o.l.call(this),Po(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_(Oo,Fr),Oo.prototype.handleEvent=function(e){if("input"==e.type)El&&G(10)&&0==e.keyCode&&0==e.j||(Mo(this),Ur(this,Lo(e)));else if("keydown"!=e.type||vo(e)){var t="keydown"==e.type?this.g.value:null;El&&229==e.keyCode&&(t=null);var n=Lo(e);Mo(this),this.a=Do(function(){this.a=null,this.g.value!=t&&Ur(this,n)},this)}},Oo.prototype.l=function(){Oo.o.l.call(this),this.h.m(),Mo(this),delete this.g},_(Fo,Fr),zc=Fo.prototype,zc.oa=null,zc.Ha=null,zc.Ta=null,zc.Ia=null,zc.S=-1,zc.W=-1,zc.Pa=!1;var sd={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ud={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},cd=!Il||G("525"),ld=Nl&&Cl;zc=Fo.prototype,zc.xb=function(e){(Il||Sl)&&(17==this.S&&!e.ctrlKey||18==this.S&&!e.altKey||Nl&&91==this.S&&!e.metaKey)&&(this.W=this.S=-1),-1==this.S&&(e.ctrlKey&&17!=e.keyCode?this.S=17:e.altKey&&18!=e.keyCode?this.S=18:e.metaKey&&91!=e.keyCode&&(this.S=91)),cd&&!bo(e.keyCode,this.S,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.W=_o(e.keyCode),ld&&(this.Pa=e.altKey))},zc.Ab=function(e){this.W=this.S=-1,this.Pa=e.altKey},zc.handleEvent=function(e){var t=e.a,n=t.altKey;if(El&&"keypress"==e.type)var r=this.W,i=13!=r&&27!=r?t.keyCode:0;else(Il||Sl)&&"keypress"==e.type?(r=this.W,i=0<=t.charCode&&63232>t.charCode&&wo(r)?t.charCode:0):_l&&!Il?(r=this.W,i=wo(r)?t.keyCode:0):("keypress"==e.type?(ld&&(n=this.Pa),t.keyCode==t.charCode?32>t.keyCode?(r=t.keyCode,i=0):(r=this.W,i=t.charCode):(r=t.keyCode||this.W,i=t.charCode||0)):(r=t.keyCode||this.W,i=t.charCode||0),Nl&&63==i&&224==r&&(r=191));var o=r=_o(r);r?63232<=r&&r in sd?o=sd[r]:25==r&&e.shiftKey&&(o=9):t.keyIdentifier&&t.keyIdentifier in ud&&(o=ud[t.keyIdentifier]),Cl&&cd&&"keypress"==e.type&&!bo(o,this.S,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=o==this.S,this.S=o,t=new Bo(o,i,e,t),t.altKey=n,Ur(this,t))},zc.N=function(){return this.oa},zc.l=function(){Fo.o.l.call(this),Uo(this)},_(Bo,kn),qo.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},qo.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},qo.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},qo.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var hd={thin:2,medium:4,thick:6};u(Go),Go.prototype.a=0,_(zo,Fr),zc=zo.prototype,zc.Cb=Go.Sa(),zc.N=function(){return this.j},zc.Ua=function(e){if(this.Z&&this.Z!=e)throw Error("Method not supported");zo.o.Ua.call(this,e)},zc.eb=function(){this.j=this.w.a.createElement("DIV")},zc.render=function(e){if(this.la)throw Error("Component already rendered");this.j||this.eb(),e?e.insertBefore(this.j,null):this.w.a.body.appendChild(this.j),this.Z&&!this.Z.la||this.u()},zc.u=function(){this.la=!0,Xo(this,function(e){!e.la&&e.N()&&e.u()})},zc.ua=function(){Xo(this,function(e){e.la&&e.ua()}),this.I&&Po(this.I),this.la=!1},zc.l=function(){this.la&&this.ua(),this.I&&(this.I.m(),delete this.I),Xo(this,function(e){e.m()}),this.j&&ge(this.j),this.Z=this.j=this.xa=this.za=null,zo.o.l.call(this)},zc.removeChild=function(e,t){if(e){var n=a(e)?e:e.Ya||(e.Ya=":"+(e.Cb.a++).toString(36));if(this.xa&&n?(e=this.xa,e=(null!==e&&n in e?e[n]:void 0)||null):e=null,n&&e){var r=this.xa;if(n in r&&delete r[n],N(this.za,e),t&&(e.ua(),e.j&&ge(e.j)),t=e,null==t)throw Error("Unable to set parent component");t.Z=null,zo.o.Ua.call(t,null)}}if(!e)throw Error("Child is not in parent component");return e},ya.B="firebaseui.auth.soy2.element.infoBar",ba.B="firebaseui.auth.soy2.element.progressDialog",wa.B="firebaseui.auth.soy2.element.listBoxDialog",_a.B="firebaseui.auth.soy2.element.busyIndicator";var fd=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"],dd={yb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",wb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg",tb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg",Sb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",Eb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",Gb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",nb:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png"};_(Ra,In),_(Pa,zo),zc=Pa.prototype,zc.eb=function(){var e=Ye(this.$a,this.Za,this.$,this.w);Sa(e),this.j=e},zc.u=function(){if(Pa.o.u.call(this),qr(Ma(this),new Ra("pageEnter",Ma(this),{pageId:this.Ma})),this.Xa()&&this.$.H){var e=this.$.H;na(this,this.Xa(),function(){e()})}if(this.Wa()&&this.$.G){var t=this.$.G;na(this,this.Wa(),function(){t()})}},zc.ua=function(){qr(Ma(this),new Ra("pageExit",Ma(this),{pageId:this.Ma})),Pa.o.ua.call(this)},zc.l=function(){window.clearTimeout(this.ea),this.Za=this.$a=this.ea=null,this.Aa=!1,this.v=null,Ta(this.N()),Pa.o.l.call(this)},zc.M=function(e,t,n,r){function i(){return o.O?null:(o.Aa=!1,window.clearTimeout(o.ea),o.ea=null,void(o.v&&(Ta(o.v),ge(o.v),o.v=null)))}var o=this;return o.Aa?null:(Oa(o),e.apply(null,t).then(n,r).then(i,i))},b(Pa.prototype,{g:function(e){Aa.call(this);var t=Ye(ya,{message:e},null,this.w);this.N().appendChild(t),na(this,xa.call(this),function(){ge(t)})},ic:Aa,lc:Da,kc:xa,X:function(e,t){e=Ye(ba,{Ga:e,message:t},null,this.w),Ia.call(this,e)},h:ka,pb:Na,nc:function(){return Ho(this,"firebaseui-tos")},Xa:function(){return Ho(this,"firebaseui-tos-link")},Wa:function(){return Ho(this,"firebaseui-pp-link")},oc:function(){return Ho(this,"firebaseui-tos-list")}}),Ua.B="firebaseui.auth.soy2.page.signIn",Ba.B="firebaseui.auth.soy2.page.passwordSignIn",qa.B="firebaseui.auth.soy2.page.passwordSignUp",Va.B="firebaseui.auth.soy2.page.passwordRecovery",ja.B="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",Wa.B="firebaseui.auth.soy2.page.callback",Ka.B="firebaseui.auth.soy2.page.blank",Qa.B="firebaseui.auth.soy2.page.emailLinkSignInSent",Ga.B="firebaseui.auth.soy2.page.emailNotReceived",za.B="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Ha.B="firebaseui.auth.soy2.page.differentDeviceError",Ya.B="firebaseui.auth.soy2.page.anonymousUserMismatch",Xa.B="firebaseui.auth.soy2.page.passwordLinking",Ja.B="firebaseui.auth.soy2.page.emailLinkSignInLinking",$a.B="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",Za.B="firebaseui.auth.soy2.page.federatedLinking",es.B="firebaseui.auth.soy2.page.unsupportedProvider",ts.B="firebaseui.auth.soy2.page.passwordReset",ns.B="firebaseui.auth.soy2.page.passwordResetSuccess",rs.B="firebaseui.auth.soy2.page.passwordResetFailure",is.B="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",os.B="firebaseui.auth.soy2.page.emailChangeRevokeFailure",as.B="firebaseui.auth.soy2.page.emailVerificationSuccess",ss.B="firebaseui.auth.soy2.page.emailVerificationFailure",us.B="firebaseui.auth.soy2.page.unrecoverableError",cs.B="firebaseui.auth.soy2.page.emailMismatch",ls.B="firebaseui.auth.soy2.page.providerSignIn",hs.B="firebaseui.auth.soy2.page.phoneSignInStart",fs.B="firebaseui.auth.soy2.page.phoneSignInFinish",_(ws,Pa),ws.prototype.u=function(){this.R(),this.P(this.a,this.L),
Fa(this,this.i(),this.a),this.i().focus(),ws.o.u.call(this)},ws.prototype.l=function(){this.a=null,ws.o.l.call(this)},ws.prototype.J=function(){return go(Ho(this,"firebaseui-id-email"))},b(ws.prototype,{i:gs,D:ys,R:vs,A:bs,aa:ds,ca:ps,P:ms});var pd=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;_(Is,Pa),Is.prototype.u=function(){this.R(),this.aa(),this.ca(this.a,this.L),La(this,this.s(),this.i()),Fa(this,this.i(),this.a),go(this.s())?this.i().focus():this.s().focus(),Is.o.u.call(this)},Is.prototype.l=function(){this.L=this.a=null,Is.o.l.call(this)},b(Is.prototype,{s:_s,U:Es,R:Ss,P:Ts,J:Cs,i:gs,D:ys,aa:vs,A:bs,sa:ds,ra:ps,ca:ms}),_(ks,Pa),ks.prototype.u=function(){this.a&&(this.s(this.a),this.i().focus()),ks.o.u.call(this)},ks.prototype.l=function(){this.a=null,ks.o.l.call(this)},b(ks.prototype,{i:ds,A:ps,s:ms}),_(Ns,ks),_(As,ks),_(Ds,ks),_(xs,ks),_(Rs,ks),_(Ps,ks),_(Os,ks);var md=!1,gd=null;_(cu,Pa),cu.prototype.u=function(){var e=this;na(this,this.i(),function(){e.a()}),this.i().focus(),cu.o.u.call(this)},cu.prototype.l=function(){this.a=null,cu.o.l.call(this)},b(cu.prototype,{i:ps}),Yf.anonymousUserMismatch=function(e,t){var n=new cu(function(){n.m(),Zs(e,t)});n.render(t),Sc(e,n)},_(lu,Pa),lu.prototype.M=function(e,t,n,r){return e.apply(null,t).then(n,r)},Yf.callback=function(e,t,n){var r=new lu;r.render(t),Sc(e,r),t=n||Ec(e),Rc(e,t.then(function(t){hu(e,r,t)},function(t){if(t&&("auth/account-exists-with-different-credential"==t.code||"auth/email-already-in-use"==t.code)&&t.email&&t.credential)Xi(new pi(t.email,t.credential),kc(e)),pu(e,r,t.email);else if(t&&"auth/user-cancelled"==t.code){var n=Hi(kc(e)),i=Qs(t);n&&n.a?pu(e,r,n.g,i):n?eu(e,r,n.g,i):du(e,r,t)}else t&&"auth/credential-already-in-use"==t.code||(t&&"auth/operation-not-supported-in-this-environment"==t.code&&Js(e)?hu(e,r,{user:null,credential:null}):du(e,r,t))}))},_(yu,Pa),yu.prototype.u=function(){var e=this;na(this,this.i(),function(){e.a()}),this.i().focus(),yu.o.u.call(this)},yu.prototype.l=function(){this.a=null,yu.o.l.call(this)},b(yu.prototype,{i:ps}),Yf.differentDeviceError=function(e,t){var n=new yu(function(){n.m(),Zs(e,t)});n.render(t),Sc(e,n)},_(vu,Pa),vu.prototype.u=function(){var e=this;na(this,Ho(this,"firebaseui-id-reset-password-link"),function(){e.i()}),this.a&&(this.A(this.a),this.s().focus()),vu.o.u.call(this)},vu.prototype.l=function(){this.i=this.a=null,vu.o.l.call(this)},b(vu.prototype,{s:ds,D:ps,A:ms}),_(Cu,Pa),Cu.prototype.u=function(){this.J(),this.D(this.a),Fa(this,this.i(),this.a),this.i().focus(),Cu.o.u.call(this)},Cu.prototype.l=function(){this.a=null,Cu.o.l.call(this)},b(Cu.prototype,{i:bu,A:Eu,L:wu,J:Su,s:Tu,R:ds,P:ps,D:ms}),Yf.passwordReset=function(e,t,n,r){Rc(e,Cc(e).verifyPasswordResetCode(n).then(function(i){var o=new Cu(i,function(){Iu(e,t,o,n,r)});o.render(t),Sc(e,o)},function(){ku(e,t)}))},Yf.emailChangeRevocation=function(e,t,n){var r=null;Rc(e,Cc(e).checkActionCode(n).then(function(t){return r=t.data.email,Cc(e).applyActionCode(n)}).then(function(){Nu(e,t,r)},function(){var n=new Ps;n.render(t),Sc(e,n)}))},Yf.emailVerification=function(e,t,n,r){Rc(e,Cc(e).applyActionCode(n).then(function(){var n=new As(r);n.render(t),Sc(e,n)},function(){var n=new Ds;n.render(t),Sc(e,n)}))},_(Du,Pa),Du.prototype.u=function(){this.D(this.i),this.J(this.i,this.s),this.a().focus(),Au(this.a(),(this.a().value||"").length),Du.o.u.call(this)},Du.prototype.l=function(){this.s=this.i=null,Du.o.l.call(this)},b(Du.prototype,{a:_s,P:Es,D:Ss,L:Ts,A:Cs,U:ds,R:ps,J:ms}),Yf.emailLinkConfirmation=function(e,t,n,r,i,o){var a=new Du(function(){var i=a.A();i?(a.m(),r(e,t,i,n)):a.a().focus()},function(){a.m(),Zs(e,t,i||void 0)},i||void 0,vr(Lc(e)),br(Lc(e)));a.render(t),Sc(e,a),o&&a.g(o)},_(xu,Pa),xu.prototype.u=function(){this.s(this.a),this.i().focus(),xu.o.u.call(this)},xu.prototype.l=function(){this.a=null,xu.o.l.call(this)},b(xu.prototype,{i:ds,s:ms}),Yf.emailLinkNewDeviceLinking=function(e,t,n,r){var i=new Rr(n);if(n=i.a.a.get(lf.PROVIDER_ID)||null,Lr(i,null),n){var o=new xu(sr(Lc(e),n),function(){o.m(),r(e,t,i.toString())},vr(Lc(e)),br(Lc(e)));o.render(t),Sc(e,o)}else Zs(e,t)},_(Ru,Pa),Yf.emailLinkSignInCallback=Pu,_(Fu,Pa),Fu.prototype.u=function(){this.s(this.a),this.i().focus(),Fu.o.u.call(this)},Fu.prototype.l=function(){this.a=null,Fu.o.l.call(this)},b(Fu.prototype,{i:ds,s:ms}),Yf.emailLinkSignInLinking=function(e,t,n){var r=Hi(kc(e));if(Yi(kc(e)),r){var i=r.a.providerId,o=new Fu(n,sr(Lc(e),i),function(){Uu(e,o,n,r)},vr(Lc(e)),br(Lc(e)));o.render(t),Sc(e,o)}else Zs(e,t)},_(Bu,Pa),Bu.prototype.u=function(){var e=this;na(this,this.i(),function(){e.a()}),na(this,Ho(this,"firebaseui-id-trouble-getting-email-link"),function(){e.s()}),this.i().focus(),Bu.o.u.call(this)},Bu.prototype.l=function(){this.a=this.s=null,Bu.o.l.call(this)},b(Bu.prototype,{i:ps}),Yf.emailLinkSignInSent=function(e,t,n,r,i){var o=new Bu(n,function(){o.m(),ao("emailNotReceived",e,t,n,r,i)},function(){o.m(),r()},vr(Lc(e)),br(Lc(e)));o.render(t),Sc(e,o)},_(qu,Pa),qu.prototype.u=function(){this.D(this.s,this.i),this.A().focus(),qu.o.u.call(this)},qu.prototype.l=function(){this.i=this.a=null,qu.o.l.call(this)},b(qu.prototype,{A:ds,J:ps,D:ms}),Yf.emailMismatch=function(e,t,n){var r=Hi(kc(e));if(r){var i=new qu(n.user.email,r.g,function(){var t=i;Yi(kc(e)),js(e,t,n)},function(){var t=n.credential.providerId,o=Ma(i);i.m(),r.a?ao("federatedLinking",e,o,r.g,t):ao("federatedSignIn",e,o,r.g,t)},vr(Lc(e)),br(Lc(e)));i.render(t),Sc(e,i)}else Zs(e,t)},_(Vu,Pa),Vu.prototype.u=function(){var e=this;na(this,this.s(),function(){e.a()}),na(this,this.ya(),function(){e.i()}),this.s().focus(),Vu.o.u.call(this)},Vu.prototype.ya=function(){return Ho(this,"firebaseui-id-resend-email-link")},Vu.prototype.l=function(){this.a=this.i=null,Vu.o.l.call(this)},b(Vu.prototype,{s:ps}),Yf.emailNotReceived=function(e,t,n,r,i){var o=new Vu(function(){nu(e,o,n,r,function(e){e=Qs(e),o.g(e)},i)},function(){o.m(),Zs(e,t,n)},vr(Lc(e)),br(Lc(e)));o.render(t),Sc(e,o)},_(ju,Pa),ju.prototype.u=function(){this.s(this.a),this.i().focus(),ju.o.u.call(this)},ju.prototype.l=function(){this.a=null,ju.o.l.call(this)},b(ju.prototype,{i:ds,s:ms}),Yf.federatedLinking=function(e,t,n,r,i){var o=Hi(kc(e));if(o&&o.a){var a=new ju(n,sr(Lc(e),r),function(){zs(e,a,r,n)},vr(Lc(e)),br(Lc(e)));a.render(t),Sc(e,a),i&&a.g(i)}else Zs(e,t)},Yf.federatedRedirect=function(e,t){var n=new Ru;n.render(t),Sc(e,n),t=ar(Lc(e))[0],zs(e,n,t)},Yf.federatedSignIn=function(e,t,n,r,i){var o=new ju(n,sr(Lc(e),r),function(){zs(e,o,r,n)},vr(Lc(e)),br(Lc(e)));o.render(t),Sc(e,o),i&&o.g(i)},Yf.passwordLinking=function(e,t,n){var r=Hi(kc(e));Yi(kc(e));var i=r&&r.a;if(i){var o=new ws(n,function(){Wu(e,o,n,i)},function(){o.m(),ao("passwordRecovery",e,t,n)},vr(Lc(e)),br(Lc(e)));o.render(t),Sc(e,o)}else Zs(e,t)},_(Ku,Pa),Ku.prototype.u=function(){this.J(),this.L(this.a,this.s),go(this.i())||this.i().focus(),Fa(this,this.i(),this.a),Ku.o.u.call(this)},Ku.prototype.l=function(){this.s=this.a=null,Ku.o.l.call(this)},b(Ku.prototype,{i:_s,D:Es,J:Ss,P:Ts,A:Cs,U:ds,R:ps,L:ms}),Yf.passwordRecovery=function(e,t,n,r,i){var o=new Ku(function(){Qu(e,o)},r?void 0:function(){o.m(),Zs(e,t)},n,vr(Lc(e)),br(Lc(e)));o.render(t),Sc(e,o),i&&o.g(i)},Yf.passwordSignIn=function(e,t,n,r){var i=new Is(function(){Xs(e,i)},function(){var n=i.P();i.m(),ao("passwordRecovery",e,t,n)},n,vr(Lc(e)),br(Lc(e)),r);i.render(t),Sc(e,i)},_(Hu,Pa),Hu.prototype.u=function(){this.aa(),this.D&&this.Ra(),this.sa(),this.ra(this.a,this.J),this.D?(La(this,this.i(),this.A()),La(this,this.A(),this.s())):La(this,this.i(),this.s()),this.a&&Fa(this,this.s(),this.a),go(this.i())?this.D&&!go(this.A())?this.A().focus():this.s().focus():this.i().focus(),Hu.o.u.call(this)},Hu.prototype.l=function(){this.J=this.a=null,Hu.o.l.call(this)},b(Hu.prototype,{i:_s,U:Es,aa:Ss,bb:Ts,P:Cs,A:Gu,mc:zu,Ra:function(){var e=Gu.call(this),t=zu.call(this);$o(this,e,function(){oa(t)&&(Jo(e,!0),ra(t))})},L:function(){var e=Gu.call(this),t=zu.call(this),n=go(e);return n=!/^[\s\xa0]*$/.test(null==n?"":String(n)),Jo(e,n),n?(ra(t),t=!0):(ia(t,nt("Enter your account name").toString()),t=!1),t?cl(go(e)):null},s:bu,ca:Eu,zb:wu,sa:Su,R:Tu,jc:ds,Bb:ps,ra:ms}),Yf.passwordSignUp=function(e,t,n,r,i,o){function a(){s.m(),Zs(e,t)}var s=new Hu(wr(Lc(e)),function(){Yu(e,s)},i?void 0:a,n,r,vr(Lc(e)),br(Lc(e)),o);s.render(t),Sc(e,s)},_(ec,Pa),ec.prototype.u=function(){var e=this;this.R(this.Ra),Pn(this.i,"tick",this.A,!1,this),this.i.start(),na(this,Ho(this,"firebaseui-id-change-phone-number-link"),function(){e.P()}),na(this,this.ya(),function(){e.L()}),this.sa(this.a),this.ca(this.a,this.J),this.s().focus(),ec.o.u.call(this)},ec.prototype.l=function(){this.L=this.J=this.a=this.P=null,Ao(this.i),Fn(this.i,"tick",this.A),this.i=null,ec.o.l.call(this)},ec.prototype.A=function(){--this.D,0<this.D?this.R(this.D):(Ao(this.i),Fn(this.i,"tick",this.A),this.ra(),this.bb())},b(ec.prototype,{s:Ju,aa:$u,sa:function(e){var t=Ju.call(this),n=$u.call(this);$o(this,t,function(){oa(n)&&(Jo(t,!0),ra(n))}),e&&Zo(this,t,function(){e()})},U:function(){var e=cl(go(Ju.call(this))||"");return/^\d{6}$/.test(e)?e:null},rb:Zu,R:function(e){ve(Zu.call(this),nt("Resend code in "+((9<e?"0:":"0:0")+e)).toString())},ra:function(){ra(this.rb())},ya:function(){return Ho(this,"firebaseui-id-resend-link")},bb:function(){ia(this.ya())},Bb:ds,zb:ps,ca:ms}),Yf.phoneSignInFinish=function(e,t,n,r,i,o){var a=new ec(function(){a.m(),ao("phoneSignInStart",e,t,n)},function(){tc(e,a,n,i)},function(){a.m(),Zs(e,t)},function(){a.m(),ao("phoneSignInStart",e,t,n)},Dt(n),r,vr(Lc(e)),br(Lc(e)));a.render(t),Sc(e,a),o&&a.g(o)};var yd=!(El||F("Safari")&&!(V()||F("Coast")||F("Opera")||F("Edge")||F("Firefox")||F("FxiOS")||F("Silk")||F("Android")));_(pc,Pa),pc.prototype.u=function(){this.ca(this.aa,this.J),this.P(this.a,this.A||void 0),this.L||La(this,this.K(),this.i()),Fa(this,this.i(),this.a),this.K().focus(),Au(this.K(),(this.K().value||"").length),pc.o.u.call(this)},pc.prototype.l=function(){this.A=this.a=null,pc.o.l.call(this)},b(pc.prototype,{pb:Na,K:oc,D:sc,ca:function(e,t,n){var r=this,i=oc.call(this),o=ac.call(this),a=sc.call(this),s=e||bh,u=s.a;if(0==u.length)throw Error("No available countries provided.");uc.call(r,s,t),na(this,o,function(){fc.call(r,s)}),$o(this,i,function(){oa(a)&&(Jo(i,!0),ra(a));var e=cl(go(i)||""),t=Tt(this.wa),n=St(s,e);e=cc("1-US-0",u),n.length&&n[0].b!=t.b&&(t=n[0],dc.call(r,"1"==t.b&&e?"1-US-0":t.c,s))}),n&&Zo(this,i,function(){n()})},R:function(e){var t=cl(go(oc.call(this))||"");e=e||bh;var n=e.a,r=St(bh,t);if(r.length&&!k(n,r[0]))throw yo(oc.call(this)),oc.call(this).focus(),ia(sc.call(this),nt("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=Tt(this.wa),r.length&&r[0].b!=n.b&&dc.call(this,r[0].c,e),r.length&&(t=t.substr(r[0].b.length+1)),t?new Nt(this.wa,t):null},sa:ac,U:function(){return Ho(this,"firebaseui-recaptcha-container")},s:function(){return Ho(this,"firebaseui-id-recaptcha-error")},i:ds,ra:ps,P:ms}),Yf.phoneSignInStart=function(e,t,n,r){var i=hr(Lc(e))||{};Qf=null,Gf=!(i&&"invisible"===i.size);var a=$s(e),s=mr(Lc(e)),u=a?pr(Lc(e)):null;s=n&&n.a||s&&s.c||null,n=n&&n.va||u,(u=gr(Lc(e)))&&kt(u),zf=u?new Et(gr(Lc(e))):bh;var c=new pc(function(t){mc(e,c,l,!(!t||!t.keyCode))},Gf,a?null:function(){l.clear(),c.m(),Zs(e,t)},vr(Lc(e)),br(Lc(e)),a,zf,s,n);c.render(t),Sc(e,c),r&&c.g(r),i.callback=function(t){c.s()&&ra(c.s()),Qf=t,Gf||mc(e,c,l)},i["expired-callback"]=function(){Qf=null};var l=new o.auth.RecaptchaVerifier(Gf?c.U():c.i(),i,Ic(e).app);Rc(e,c.M(y(l.render,l),[],function(e){Hf=e},function(n){n.name&&"cancel"==n.name||(n=Qs(n),c.m(),Zs(e,t,void 0,n))}))},_(gc,Pa),gc.prototype.u=function(){this.i(this.a),gc.o.u.call(this)},gc.prototype.l=function(){this.a=null,gc.o.l.call(this)},b(gc.prototype,{i:function(e){function t(t){e(t)}for(var n=this.j?he("firebaseui-id-idp-button",this.j||this.w.a):[],r=0;r<n.length;r++){var i=n[r],o=nc(i,"providerId");na(this,i,v(t,o))}}}),Yf.providerSignIn=function(e,t,n){var r=new gc(function(n){n==o.auth.EmailAuthProvider.PROVIDER_ID?(r.m(),ru(e,t)):n==o.auth.PhoneAuthProvider.PROVIDER_ID?(r.m(),ao("phoneSignInStart",e,t)):"anonymous"==n?Hs(e,r):zs(e,r,n),Fc(e),e.O.cancel()},ur(Lc(e)),vr(Lc(e)),br(Lc(e)));r.render(t),Sc(e,r),n&&r.g(n),Uc(e)},Yf.sendEmailLinkForSignIn=function(e,t,n,r){var i=new lu;i.render(t),Sc(e,i),nu(e,i,n,r,function(r){i.m(),r=Qs(r),ao("signIn",e,t,n,r)})},_(yc,Pa),yc.prototype.u=function(){this.D(this.a),this.J(this.a,this.s||void 0),this.i().focus(),Au(this.i(),(this.i().value||"").length),yc.o.u.call(this)},yc.prototype.l=function(){this.s=this.a=null,yc.o.l.call(this)},b(yc.prototype,{i:_s,P:Es,D:Ss,L:Ts,A:Cs,U:ds,R:ps,J:ms}),Yf.signIn=function(e,t,n,r){var i=Js(e),o=i&&xr(Lc(e))!=rf,a=new yc(function(){var t=a,n=t.A()||"";n&&eu(e,t,n)},o?null:function(){a.m(),Zs(e,t,n)},n,vr(Lc(e)),br(Lc(e)),i);a.render(t),Sc(e,a),r&&a.g(r)},_(vc,Pa),vc.prototype.u=function(){this.A(this.a,this.i),this.s().focus(),vc.o.u.call(this)},vc.prototype.l=function(){this.i=this.a=null,vc.o.l.call(this)},b(vc.prototype,{s:ds,D:ps,A:ms}),Yf.unsupportedProvider=function(e,t,n){var r=new vc(n,function(){r.m(),ao("passwordRecovery",e,t,n)},function(){r.m(),Zs(e,t,n)},vr(Lc(e)),br(Lc(e)));r.render(t),Sc(e,r)};var vd={},bd=null;zc=bc.prototype,zc.gb=function(){return Fc(this),"pending"===qi(Ff,kc(this))||Nc(Xn())},zc.start=function(e,t){Fc(this);var n=this;"undefined"!=typeof this.g.languageCode&&(this.A=this.g.languageCode);var r="en".replace(/_/g,"-");this.g.languageCode=r,this.v.languageCode=r,this.s=!0,this.cb(t);var i=Xc.document;this.C?this.C.then(function(){"complete"==i.readyState?Ac(n,e):Ln(window,"load",function(){Ac(n,e)})}):"complete"==i.readyState?Ac(n,e):Ln(window,"load",function(){Ac(n,e)})},zc.disableAutoSignIn=function(){Fc(this),this.Z=!0},zc.reset=function(){Fc(this);var e=this;this.K&&this.K.removeAttribute("lang"),this.F&&Vr(this.F),Oc(this),jc(),Vi(Ff,kc(this)),Fc(this),this.O.cancel(),this.i=cn({user:null,credential:null}),bd==this&&(bd=null),this.K=null;for(var t=0;t<this.j.length;t++)"function"==typeof this.j[t]?this.j[t]():this.j[t].cancel&&this.j[t].cancel();this.j=[],Yi(kc(this)),this.a&&(this.a.m(),this.a=null),this.I=null,this.v&&(this.C=Qc(this).then(function(){e.C=null},function(){e.C=null}))},zc.cb=function(e){Fc(this);var t,n=this.X;for(t in e)try{gt(n.a,t,e[t])}catch(e){Gt('Invalid config: "'+t+'"',void 0)}kl&&gt(n.a,"popupMode",!1),gr(n),!this.ba&&kr(Lc(this))&&(zt("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.ba=!0)},zc.Jb=function(){Fc(this);var e=Lc(this),t=yt(e.a,"widgetUrl"),n=nr(e,t);Lc(this).a.get("popupMode")?(e=(window.screen.availHeight-600)/2,t=(window.screen.availWidth-500)/2,n=n||"about:blank",e={width:500,height:600,top:0<e?e:0,left:0<t?t:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},e.target=e.target||n.target||"google_popup",e.width=e.width||690,e.height=e.height||500,(e=Qn(n,e))&&e.focus()):Gn(n)},zc.ub=function(){var e=this;return Fc(this),this.v.app.delete().then(function(){var t=_c(kc(e));delete vd[t],e.reset(),e.$=!0})},zc.vb=function(e,t){Fc(this);var n=this,r=$n();if(!_r(Lc(this)))throw Error("Email link sign-in should be enabled to trigger email sending.");var i=Sr(Lc(this)),o=new Rr(i.url);return Pr(o,r),t&&t.a&&(eo(r,t,kc(this)),Lr(o,t.a.providerId)),Or(o,Er(Lc(this))),Dc(this,function(t){return t&&((t=t.uid)?o.a.a.set(lf.Ja,t):We(o.a.a,lf.Ja)),i.url=o.toString(),Cc(n).sendSignInLinkToEmail(e,i)}).then(function(){var t=kc(n),i={};i.email=e,ji(Vf,Ii(r,JSON.stringify(i)),t)},function(e){throw Vi(jf,kc(n)),Vi(Vf,kc(n)),e})},zc.Ob=function(e,t){Fc(this);var n=this;return Cc(this).signInWithEmailAndPassword(e,t).then(function(r){return Dc(n,function(i){return i?Qc(n).then(function(){return Gc(n,{code:"auth/email-already-in-use"},o.auth.EmailAuthProvider.credential(e,t))}):r})})},zc.Lb=function(e,t){Fc(this);var n=this;return Dc(this,function(r){if(r){var i=o.auth.EmailAuthProvider.credential(e,t);return r.linkWithCredential(i)}return Cc(n).createUserWithEmailAndPassword(e,t)})},zc.Nb=function(e){Fc(this);var t=this;return Dc(this,function(n){return n?n.linkWithCredential(e).then(function(e){return e},function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Gc(t,n,e)}):Cc(t).signInWithCredential(e)})},zc.Qb=function(e){Fc(this);var t=this,n=this.i;return this.i=null,Dc(this,function(n){return n&&!Hi(kc(t))?n.linkWithRedirect(e):Cc(t).signInWithRedirect(e)}).then(function(){},function(e){throw t.i=n,e})},zc.Pb=function(e,t){Fc(this);var n=this;return Dc(this,function(r){return r?r.linkWithPhoneNumber(e,t).then(function(e){return new si(e,function(e){if("auth/credential-already-in-use"==e.code)return Gc(n,e);throw e})}):Ic(n).signInWithPhoneNumber(e,t).then(function(e){return new si(e)})})},zc.Mb=function(){return Fc(this),Ic(this).signInAnonymously()},zc.Kb=function(e,t){return Fc(this),Cc(this).signInWithEmailAndPassword(e,t)},w("firebaseui.auth.AuthUI",bc),w("firebaseui.auth.AuthUI.getInstance",function(e){return e=_c(e),vd[e]?vd[e]:null}),w("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",bc.prototype.disableAutoSignIn),w("firebaseui.auth.AuthUI.prototype.start",bc.prototype.start),w("firebaseui.auth.AuthUI.prototype.setConfig",bc.prototype.cb),w("firebaseui.auth.AuthUI.prototype.signIn",bc.prototype.Jb),w("firebaseui.auth.AuthUI.prototype.reset",bc.prototype.reset),w("firebaseui.auth.AuthUI.prototype.delete",bc.prototype.ub),w("firebaseui.auth.AuthUI.prototype.isPendingRedirect",bc.prototype.gb),w("firebaseui.auth.AuthUIError",dt),w("firebaseui.auth.AuthUIError.prototype.toJSON",dt.prototype.toJSON),w("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",rf),w("firebaseui.auth.CredentialHelper.GOOGLE_YOLO","googleyolo"),w("firebaseui.auth.CredentialHelper.NONE","none"),w("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous")}.apply("undefined"!=typeof i?i:"undefined"!=typeof self?self:window),"undefined"!=typeof window&&(window.dialogPolyfill=n(36))}(),e.exports=firebaseui}).call(t,n(18)(e),function(){return this}())},function(e,t){(function(t){"use strict";var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){return"/"===e.charAt(0)?e:"/"+e}function a(e){return"/"===e.charAt(0)?e.substr(1):e}function s(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)}function u(e,t){return s(e,t)?e.substr(t.length):e}function c(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function l(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function h(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function f(e,t,n,r){var o;"string"==typeof e?(o=l(e)).state=t:(void 0===(o=i({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=N(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function d(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&A(e.state,t.state)}function p(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){function n(){r&&e.apply(void 0,arguments)}var r=!0;return t.push(n),function(){r=!1,t=t.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}function m(e,t){t(window.confirm(e))}function g(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}function y(){return-1===window.navigator.userAgent.indexOf("Trident")}function v(){return-1===window.navigator.userAgent.indexOf("Firefox")}function b(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")}function w(){try{return window.history.state||{}}catch(e){return{}}}function _(e){function t(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return L&&(o=u(o,L)),f(o,r,n)}function n(){return Math.random().toString(36).substr(2,M)}function r(e){i(W,e),W.length=E.length,F.notifyListeners(W.location,W.action)}function a(e){b(e)||l(t(e.state))}function s(){l(t(w()))}function l(e){U?(U=!1,r()):F.confirmTransitionTo(e,"POP",A,function(t){t?r({action:"POP",location:e}):function(e){var t=W.location,n=q.indexOf(t.key);-1===n&&(n=0);var r=q.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(U=!0,v(i))}(e)})}function d(e){return L+h(e)}function v(e){E.go(e)}function _(e){1===(V+=e)&&1===e?(window.addEventListener(R,a),T&&window.addEventListener(P,s)):0===V&&(window.removeEventListener(R,a),T&&window.removeEventListener(P,s))}void 0===e&&(e={}),x||D(!1);var E=window.history,S=g(),T=!y(),C=e,I=C.forceRefresh,k=void 0!==I&&I,N=C.getUserConfirmation,A=void 0===N?m:N,O=C.keyLength,M=void 0===O?6:O,L=e.basename?c(o(e.basename)):"",F=p(),U=!1,B=t(w()),q=[B.key],V=0,j=!1,W={length:E.length,action:"POP",location:B,createHref:d,push:function(e,t){var i=f(e,t,n(),W.location);F.confirmTransitionTo(i,"PUSH",A,function(e){if(e){var t=d(i),n=i.key,o=i.state;if(S)if(E.pushState({key:n,state:o},null,t),k)window.location.href=t;else{var a=q.indexOf(W.location.key),s=q.slice(0,-1===a?0:a+1);s.push(i.key),q=s,r({action:"PUSH",location:i})}else window.location.href=t}})},replace:function(e,t){var i="REPLACE",o=f(e,t,n(),W.location);F.confirmTransitionTo(o,i,A,function(e){if(e){var t=d(o),n=o.key,a=o.state;if(S)if(E.replaceState({key:n,state:a},null,t),k)window.location.replace(t);else{var s=q.indexOf(W.location.key);-1!==s&&(q[s]=o.key),r({action:i,location:o})}else window.location.replace(t)}})},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},block:function(e){void 0===e&&(e=!1);var t=F.setPrompt(e);return j||(_(1),j=!0),function(){return j&&(j=!1,_(-1)),t()}},listen:function(e){var t=F.appendListener(e);return _(1),function(){_(-1),t()}}};return W}function E(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function S(e){window.location.hash=e}function T(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+e)}function C(e){function t(){var e=N(E());return C&&(e=u(e,C)),f(e)}function n(e){i(j,e),j.length=l.length,A.notifyListeners(j.location,j.action)}function r(){var e=E(),r=k(e);if(e!==r)T(r);else{var i=t(),o=j.location;if(!R&&d(o,i))return;if(P===h(i))return;P=null,function(e){R?(R=!1,n()):A.confirmTransitionTo(e,"POP",b,function(t){t?n({action:"POP",location:e}):function(e){var t=j.location,n=B.lastIndexOf(h(t));-1===n&&(n=0);var r=B.lastIndexOf(h(e));-1===r&&(r=0);var i=n-r;i&&(R=!0,a(i))}(e)})}(i)}}function a(e){l.go(e)}function s(e){1===(q+=e)&&1===e?window.addEventListener(O,r):0===q&&window.removeEventListener(O,r)}void 0===e&&(e={}),x||D(!1);var l=window.history,g=(v(),e),y=g.getUserConfirmation,b=void 0===y?m:y,w=g.hashType,_=void 0===w?"slash":w,C=e.basename?c(o(e.basename)):"",I=M[_],k=I.encodePath,N=I.decodePath,A=p(),R=!1,P=null,L=E(),F=k(L);L!==F&&T(F);var U=t(),B=[h(U)],q=0,V=!1,j={length:l.length,action:"POP",location:U,createHref:function(e){return"#"+k(C+h(e))},push:function(e,t){var r=f(e,void 0,void 0,j.location);A.confirmTransitionTo(r,"PUSH",b,function(e){if(e){var t=h(r),i=k(C+t);if(E()!==i){P=t,S(i);var o=B.lastIndexOf(h(j.location)),a=B.slice(0,-1===o?0:o+1);a.push(t),B=a,n({action:"PUSH",location:r})}else n()}})},replace:function(e,t){var r="REPLACE",i=f(e,void 0,void 0,j.location);A.confirmTransitionTo(i,r,b,function(e){if(e){var t=h(i),o=k(C+t);E()!==o&&(P=t,T(o));var a=B.indexOf(h(j.location));-1!==a&&(B[a]=t),n({action:r,location:i})}})},go:a,goBack:function(){a(-1)},goForward:function(){a(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return V||(s(1),V=!0),function(){return V&&(V=!1,s(-1)),t()}},listen:function(e){var t=A.appendListener(e);return s(1),function(){s(-1),t()}}};return j}function I(e,t,n){return Math.min(Math.max(e,t),n)}function k(e){function t(e){i(w,e),w.length=w.entries.length,g.notifyListeners(w.location,w.action)}function n(){return Math.random().toString(36).substr(2,m)}function r(e){var n=I(w.index+e,0,w.entries.length-1),r=w.entries[n];g.confirmTransitionTo(r,"POP",a,function(e){e?t({action:"POP",location:r,index:n}):t()})}void 0===e&&(e={});var o=e,a=o.getUserConfirmation,s=o.initialEntries,u=void 0===s?["/"]:s,c=o.initialIndex,l=void 0===c?0:c,d=o.keyLength,m=void 0===d?6:d,g=p(),y=I(l,0,u.length-1),v=u.map(function(e){return f(e,void 0,"string"==typeof e?n():e.key||n())}),b=h,w={length:v.length,action:"POP",location:v[y],index:y,entries:v,createHref:b,push:function(e,r){var i=f(e,r,n(),w.location);g.confirmTransitionTo(i,"PUSH",a,function(e){if(e){var n=w.index+1,r=w.entries.slice(0);r.length>n?r.splice(n,r.length-n,i):r.push(i),t({action:"PUSH",location:i,index:n,entries:r})}})},replace:function(e,r){var i="REPLACE",o=f(e,r,n(),w.location);g.confirmTransitionTo(o,i,a,function(e){e&&(w.entries[w.index]=o,t({action:i,location:o}))})},go:r,goBack:function(){r(-1)},goForward:function(){r(1)},canGo:function(e){var t=w.index+e;return 0<=t&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),g.setPrompt(e)},listen:function(e){return g.appendListener(e)}};return w}Object.defineProperty(t,"__esModule",{value:!0});var N=r(n(64)),A=r(n(67));n(7);var D=r(n(10)),x=!("undefined"==typeof window||!window.document||!window.document.createElement),R="popstate",P="hashchange",O="hashchange",M={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+a(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:a,decodePath:o},slash:{encodePath:o,decodePath:o}};t.createBrowserHistory=_,t.createHashHistory=C,t.createMemoryHistory=k,t.createLocation=f,t.locationsAreEqual=d,t.parsePath=l,t.createPath=h},function(e,t,n){"use strict";function r(e){return o.isMemo(e)?c:l[e.$$typeof]||a}function i(e,t,n){if("string"!=typeof t){if(g){var o=m(t);o&&o!==g&&i(e,o,n)}var a=f(t);d&&(a=a.concat(d(t)));for(var u=r(e),c=r(t),l=0;l<a.length;++l){var y=a[l];if(!(s[y]||n&&n[y]||c&&c[y]||u&&u[y])){var v=p(t,y);try{h(e,y,v)}catch(e){}}}return e}return e}var o=n(15),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};l[o.ForwardRef]=u;var h=Object.defineProperty,f=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,g=Object.prototype;e.exports=i},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,o=new Promise(function(o,a){i=e[t].apply(e,r),n(i).then(o,a)});return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function o(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function a(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function m(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then(function(e){return new p(e)})}function g(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){return e?(r.push(e.value),void 0!==t&&r.length==t?void i(r):void e.continue()):void i(r)})})})}),e.openDb=m,e.deleteDb=g,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t;
}function o(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,r){e=n,t.forEach(function(t){return t(e,r)})}}}function a(e){return Array.isArray(e)?e[0]:e}function s(e,t){var n,r,s="__create-react-context-"+f()+"__",c=function(e){function n(){var t;return t=e.apply(this,arguments)||this,t.emitter=o(t.props.value),t}l(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return e={},e[s]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,o=e.value;i(r,o)?n=0:(n="function"==typeof t?t(r,o):d,n|=0,0!==n&&this.emitter.set(e.value,n))}},r.render=function(){return this.props.children},n}(u.Component);c.childContextTypes=(n={},n[s]=h.object.isRequired,n);var p=function(t){function n(){var e;return e=t.apply(this,arguments)||this,e.state={value:e.getValue()},e.onUpdate=function(t,n){var r=0|e.observedBits;0!==(r&n)&&e.setState({value:e.getValue()})},e}l(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?d:t},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?d:e},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():e},r.render=function(){return a(this.props.children)(this.state.value)},n}(u.Component);return p.contextTypes=(r={},r[s]=h.object,r),{Provider:c,Consumer:p}}var u=n(2),c=r(u),l=r(n(19)),h=r(n(9)),f=r(n(43)),d=(r(n(7)),1073741823),p=c.createContext||s;e.exports=p},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?p=d.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=p.length;t;){for(d=p,p=[];++g<t;)d&&d[g].run();g=-1,t=p.length}d=null,m=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,h,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var d,p=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._81=1,t._65=e,t}var i=n(14);e.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),c=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(e===!0)return o;if(e===!1)return a;if(0===e)return c;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(a,s._65):(2===s._81&&n(s._65),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"==typeof u){var c=new i(u.bind(s));return void c.then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(){c=!1,s._10=null,s._97=null}function i(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||u))&&(h[t].displayId=l++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},c&&r(),c=!0;var i=0,l=0,h={};s._10=function(e){2===e._81&&h[e._72]&&(h[e._72].logged?n(e._72):clearTimeout(h[e._72].timeout),delete h[e._72])},s._97=function(e,n){0===e._45&&(e._72=i++,h[e._72]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._72),a(n,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):");var n=(t&&(t.stack||t))+"";n.split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(14),u=[ReferenceError,TypeError,RangeError],c=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";function r(){}function i(){}var o=n(52);i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";function r(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}function i(){if(si)for(var e in ui){var t=ui[e],n=si.indexOf(e);if(!(-1<n))throw r(Error(96),e);if(!ci[n]){if(!t.extractEvents)throw r(Error(97),e);ci[n]=t,n=t.eventTypes;for(var i in n){var a=void 0,s=n[i],u=t,c=i;if(li.hasOwnProperty(c))throw r(Error(99),c);li[c]=s;var l=s.phasedRegistrationNames;if(l){for(a in l)l.hasOwnProperty(a)&&o(l[a],u,c);a=!0}else s.registrationName?(o(s.registrationName,u,c),a=!0):a=!1;if(!a)throw r(Error(98),i,e)}}}}function o(e,t,n){if(hi[e])throw r(Error(100),e);hi[e]=t,fi[e]=t.eventTypes[n].dependencies}function a(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}function s(e,t,n,r,i,o,s,u,c){di=!1,pi=null,a.apply(yi,arguments)}function u(e,t,n,i,o,a,u,c,l){if(s.apply(this,arguments),di){if(!di)throw r(Error(198));var h=pi;di=!1,pi=null,mi||(mi=!0,gi=h)}}function c(e,t,n){var r=e.type||"unknown-event";e.currentTarget=wi(n),u(r,t,void 0,e),e.currentTarget=null}function l(e,t){if(null==t)throw r(Error(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function h(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function f(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)c(e,t[r],n[r]);else t&&c(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function d(e){if(null!==e&&(_i=l(_i,e)),e=_i,_i=null,e){if(h(e,f),_i)throw r(Error(95));if(mi)throw e=gi,mi=!1,gi=null,e}}function p(e,t){var n=e.stateNode;if(!n)return null;var i=vi(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(e=e.type,i=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw r(Error(231),t,typeof n);return n}function m(e){if(e[Ti])return e[Ti];for(;!e[Ti];){if(!e.parentNode)return null;e=e.parentNode}return e=e[Ti],5===e.tag||6===e.tag?e:null}function g(e){return e=e[Ti],!e||5!==e.tag&&6!==e.tag?null:e}function y(e){if(5===e.tag||6===e.tag)return e.stateNode;throw r(Error(33))}function v(e){return e[Ci]||null}function b(e){do e=e.return;while(e&&5!==e.tag);return e?e:null}function w(e,t,n){(t=p(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=l(n._dispatchListeners,t),n._dispatchInstances=l(n._dispatchInstances,e))}function _(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=b(t);for(t=n.length;0<t--;)w(n[t],"captured",e);for(t=0;t<n.length;t++)w(n[t],"bubbled",e)}}function E(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=p(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=l(n._dispatchListeners,t),n._dispatchInstances=l(n._dispatchInstances,e))}function S(e){e&&e.dispatchConfig.registrationName&&E(e._targetInst,null,e)}function T(e){h(e,_)}function C(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function I(e){if(Ni[e])return Ni[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ai)return Ni[e]=n[t];return e}function k(){if(Fi)return Fi;var e,t,n=Li,r=n.length,i="value"in Mi?Mi.value:Mi.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Fi=i.slice(e,1<t?1-t:void 0)}function N(){return!0}function A(){return!1}function D(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?N:A,this.isPropagationStopped=A,this}function x(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function R(e){if(!(e instanceof this))throw r(Error(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function P(e){e.eventPool=[],e.getPooled=x,e.release=R}function O(e,t){switch(e){case"keyup":return-1!==qi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function M(e){return e=e.detail,"object"==typeof e&&"data"in e?e.data:null}function L(e,t){switch(e){case"compositionend":return M(t);case"keypress":return 32!==t.which?null:(zi=!0,Qi);case"textInput":return e=t.data,e===Qi&&zi?null:e;default:return null}}function F(e,t){if(Hi)return"compositionend"===e||!Vi&&O(e,t)?(e=k(),Fi=Li=Mi=null,Hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ki&&"ko"!==t.locale?null:t.data;default:return null}}function U(e){if(e=bi(e)){if("function"!=typeof Xi)throw r(Error(280));var t=vi(e.stateNode);Xi(e.stateNode,e.type,t)}}function B(e){Ji?$i?$i.push(e):$i=[e]:Ji=e}function q(){if(Ji){var e=Ji,t=$i;if($i=Ji=null,U(e),t)for(e=0;e<t.length;e++)U(t[e])}}function V(e,t){return e(t)}function j(e,t,n,r){return e(t,n,r)}function W(){}function K(){null===Ji&&null===$i||(W(),q())}function Q(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!to[e.type]:"textarea"===t}function G(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function z(e){if(!Ii)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"==typeof t[e]),t}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!=typeof n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function X(e){e._valueTracker||(e._valueTracker=Y(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),e=r,e!==n&&(t.setValue(e),!0)}function $(e){return null===e||"object"!=typeof e?null:(e=bo&&e[bo]||e["@@iterator"],"function"==typeof e?e:null)}function Z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case so:return"Fragment";case ao:return"Portal";case co:return"Profiler";case uo:return"StrictMode";case mo:return"Suspense";case go:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ho:return"Context.Consumer";case lo:return"Context.Provider";case po:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case yo:return Z(e.type);case vo:if(e=1===e._status?e._result:null)return Z(e)}return null}function ee(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=Z(e.type);n=null,r&&(n=Z(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(ro,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function te(e){return!!_o.call(So,e)||!_o.call(Eo,e)&&(wo.test(e)?So[e]=!0:(Eo[e]=!0,!1))}function ne(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),"data-"!==e&&"aria-"!==e));default:return!1}}function re(e,t,n,r){if(null===t||"undefined"==typeof t||ne(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ie(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}function oe(e){return e[1].toUpperCase()}function ae(e,t,n,r){var i=To.hasOwnProperty(t)?To[t]:null,o=null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]));o||(re(t,n,i,r)&&(n=null),r||null===i?te(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function se(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ue(e,t){var n=t.checked;return oi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ce(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=se(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function le(e,t){t=t.checked,null!=t&&ae(e,"checked",t,!1)}function he(e,t){le(e,t);var n=se(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?de(e,t.type,n):t.hasOwnProperty("defaultValue")&&de(e,t.type,se(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function fe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function de(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function pe(e,t,n){return e=D.getPooled(Io.change,e,t,n),e.type="change",B(n),T(e),e}function me(e){d(e)}function ge(e){var t=y(e);if(J(t))return e}function ye(e,t){if("change"===e)return t}function ve(){ko&&(ko.detachEvent("onpropertychange",be),No=ko=null)}function be(e){if("value"===e.propertyName&&ge(No))if(e=pe(No,e,G(e)),eo)d(e);else{eo=!0;try{V(me,e)}finally{eo=!1,K()}}}function we(e,t,n){"focus"===e?(ve(),ko=t,No=n,ko.attachEvent("onpropertychange",be)):"blur"===e&&ve()}function _e(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ge(No)}function Ee(e,t){if("click"===e)return ge(t)}function Se(e,t){if("input"===e||"change"===e)return ge(t)}function Te(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ro[e])&&!!t[e]}function Ce(){return Te}function Ie(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}function ke(e,t){if(Ie(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Vo.call(t,n[r])||!Ie(e[n[r]],t[n[r]]))return!1;return!0}function Ne(e,t){return{responder:e,props:t}}function Ae(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function De(e){if(2!==Ae(e))throw r(Error(188))}function xe(e){var t=e.alternate;if(!t){if(t=Ae(e),3===t)throw r(Error(188));return 1===t?null:e}for(var n=e,i=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(i=o.return,null!==i){n=i;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return De(o),e;if(a===i)return De(o),t;a=a.sibling}throw r(Error(188))}if(n.return!==i.return)n=o,i=a;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}if(!s)throw r(Error(189))}}if(n.alternate!==i)throw r(Error(190))}if(3!==n.tag)throw r(Error(188));return n.stateNode.current===n?e:t}function Re(e){if(e=xe(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Pe(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,0===e&&13===t&&(e=13)):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Oe(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(r=3!==r.tag?null:r.stateNode.containerInfo,!r)break;e.ancestors.push(n),n=m(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=G(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<ci.length;s++){var u=ci[s];u&&(u=u.extractEvents(r,t,o,i))&&(a=l(a,u))}d(a)}}function Me(e,t){Le(t,e,!1)}function Le(e,t,n){switch(ca(t)){case 0:var r=Fe.bind(null,t,1);break;case 1:r=Ue.bind(null,t,1);break;default:r=Be.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Fe(e,t,n){eo||W();var r=Be,i=eo;eo=!0;try{j(r,e,t,n)}finally{(eo=i)||K()}}function Ue(e,t,n){Be(e,t,n)}function Be(e,t,n){if(ha){if(t=G(n),t=m(t),null===t||"number"!=typeof t.tag||2===Ae(t)||(t=null),la.length){var r=la.pop();r.topLevelType=e,r.nativeEvent=n,r.targetInst=t,e=r}else e={topLevelType:e,nativeEvent:n,targetInst:t,ancestors:[]};try{if(n=e,eo)Oe(n,void 0);else{eo=!0;try{Zi(Oe,n,void 0)}finally{eo=!1,K()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>la.length&&la.push(e)}}}function qe(e){var t=fa.get(e);return void 0===t&&(t=new Set,fa.set(e,t)),t}function Ve(e){if(e=e||("undefined"!=typeof document?document:void 0),"undefined"==typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}function je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function We(e,t){var n=je(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=je(n)}}function Ke(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ke(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qe(){for(var e=window,t=Ve();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;e=t.contentWindow,t=Ve(e.document)}return t}function Ge(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ze(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return va||null==ma||ma!==Ve(n)?null:(n=ma,"selectionStart"in n&&Ge(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ya&&ke(ya,n)?null:(ya=n,e=D.getPooled(pa.select,ga,e,t),e.type="select",e.target=ma,T(e),e))}function He(e){var t="";return ii.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function Ye(e,t){return e=oi({children:void 0},t),(t=He(t.children))&&(e.children=t),e}function Xe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+se(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Je(e,t){if(null!=t.dangerouslySetInnerHTML)throw r(Error(91));return oi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $e(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,t=t.children,null!=t){if(null!=n)throw r(Error(92));if(Array.isArray(t)){if(!(1>=t.length))throw r(Error(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:se(n)}}function Ze(e,t){var n=se(t.value),r=se(t.defaultValue);null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function et(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function tt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?tt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function rt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function it(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Sa.hasOwnProperty(e)&&Sa[e]?(""+t).trim():t+"px"}function ot(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=it(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function at(e,t){if(t){if(Ca[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw r(Error(137),e,"");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw r(Error(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw r(Error(61))}if(null!=t.style&&"object"!=typeof t.style)throw r(Error(62),"")}}function st(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ut(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=qe(e);t=fi[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.has(i)){switch(i){case"scroll":Le(e,"scroll",!0);break;case"focus":case"blur":Le(e,"focus",!0),Le(e,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":z(i)&&Le(e,i,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Oi.indexOf(i)&&Me(i,e)}n.add(i)}}}function ct(){}function lt(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ht(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function ft(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function dt(e){0>xa||(e.current=Da[xa],Da[xa]=null,xa--)}function pt(e,t){xa++,Da[xa]=e.current,e.current=t}function mt(e,t){var n=e.type.contextTypes;if(!n)return Ra;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gt(e){return e=e.childContextTypes,null!==e&&void 0!==e}function yt(e){dt(Oa,e),dt(Pa,e)}function vt(e){dt(Oa,e),dt(Pa,e)}function bt(e,t,n){if(Pa.current!==Ra)throw r(Error(168));pt(Pa,t,e),pt(Oa,n,e)}function wt(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw r(Error(108),Z(t)||"Unknown",o);return oi({},n,i)}function _t(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Ra,Ma=Pa.current,pt(Pa,t,e),pt(Oa,Oa.current,e),!0}function Et(e,t,n){var i=e.stateNode;if(!i)throw r(Error(169));n?(t=wt(e,t,Ma),i.__reactInternalMemoizedMergedChildContext=t,dt(Oa,e),dt(Pa,e),pt(Pa,t,e)):dt(Oa,e),pt(Oa,n,e)}function St(){switch(ja()){case Wa:return 99;case Ka:return 98;case Qa:return 97;case Ga:return 96;case za:return 95;default:throw r(Error(332))}}function Tt(e){switch(e){case 99:return Wa;case 98:return Ka;case 97:return Qa;case 96:return Ga;case 95:return za;default:throw r(Error(332))}}function Ct(e,t){return e=Tt(e),La(e,t)}function It(e,t,n){return e=Tt(e),Fa(e,t,n)}function kt(e){return null===Xa?(Xa=[e],Ja=Fa(Wa,At)):Xa.push(e),Ha}function Nt(){null!==Ja&&Ua(Ja),At()}function At(){if(!$a&&null!==Xa){$a=!0;var e=0;try{var t=Xa;Ct(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(null!==n)}}),Xa=null}catch(t){throw null!==Xa&&(Xa=Xa.slice(e+1)),Fa(Wa,Nt),t}finally{$a=!1}}}function Dt(e,t){return 1073741823===t?99:1===t?95:(e=10*(1073741821-t)-10*(1073741821-e),0>=e?99:250>=e?98:5250>=e?97:95)}function xt(e,t){if(e&&e.defaultProps){t=oi({},t),e=e.defaultProps;for(var n in e)void 0===t[n]&&(t[n]=e[n])}return t}function Rt(e){var t=e._result;switch(e._status){case 1:return t;case 2:throw t;case 0:throw t;default:switch(e._status=0,t=e._ctor,t=t(),t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}function Pt(){is=rs=ns=null}function Ot(e,t){var n=e.type._context;pt(ts,n._currentValue,e),n._currentValue=t}function Mt(e){var t=ts.current;dt(ts,e),e.type._context._currentValue=t}function Lt(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function Ft(e,t){ns=e,is=rs=null,e=e.dependencies,null!==e&&null!==e.firstContext&&(e.expirationTime>=t&&(Ys=!0),e.firstContext=null)}function Ut(e,t){if(is!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(is=e,t=1073741823),t={context:e,observedBits:t,next:null},null===rs){if(null===ns)throw r(Error(308));rs=t,ns.dependencies={expirationTime:0,firstContext:t,responders:null}}else rs=rs.next=t;return e._currentValue}function Bt(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function qt(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Vt(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function jt(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Wt(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Bt(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Bt(e.memoizedState),i=n.updateQueue=Bt(n.memoizedState)):r=e.updateQueue=qt(i):null===i&&(i=n.updateQueue=qt(r));null===i||r===i?jt(r,t):null===r.lastUpdate||null===i.lastUpdate?(jt(r,t),jt(i,t)):(jt(r,t),i.lastUpdate=t)}function Kt(e,t){var n=e.updateQueue;n=null===n?e.updateQueue=Bt(e.memoizedState):Qt(e,n),null===n.lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Qt(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=qt(t)),t}function Gt(e,t,n,r,i,o){switch(n.tag){case 1:return e=n.payload,"function"==typeof e?e.call(o,r,i):e;case 3:e.effectTag=e.effectTag&-2049|64;case 0:if(e=n.payload,i="function"==typeof e?e.call(o,r,i):e,null===i||void 0===i)break;return oi({},r,i);case 2:os=!0}return r}function zt(e,t,n,r,i){os=!1,t=Qt(e,t);for(var o=t.baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(_r(l,u.suspenseConfig),c=Gt(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=Gt(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),
u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,e.expirationTime=s,e.memoizedState=c}function Ht(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Yt(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Yt(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Yt(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var i=t;if("function"!=typeof n)throw r(Error(191),n);n.call(i)}e=e.nextEffect}}function Xt(e,t,n,r){t=e.memoizedState,n=n(r,t),n=null===n||void 0===n?t:oi({},t,n),e.memoizedState=n,r=e.updateQueue,null!==r&&0===e.expirationTime&&(r.baseState=n)}function Jt(e,t,n,r,i,o,a){return e=e.stateNode,"function"==typeof e.shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ke(n,r)||!ke(i,o))}function $t(e,t,n){var r=!1,i=Ra,o=t.contextType;return"object"==typeof o&&null!==o?o=Ut(o):(i=gt(t)?Ma:Pa.current,r=t.contextTypes,o=(r=null!==r&&void 0!==r)?mt(e,i):Ra),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=us,e.stateNode=t,t._reactInternalFiber=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Zt(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&us.enqueueReplaceState(t,t.state,null)}function en(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ss;var o=t.contextType;"object"==typeof o&&null!==o?i.context=Ut(o):(o=gt(t)?Ma:Pa.current,i.context=mt(e,o)),o=e.updateQueue,null!==o&&(zt(e,o,n,i,r),i.state=e.memoizedState),o=t.getDerivedStateFromProps,"function"==typeof o&&(Xt(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&us.enqueueReplaceState(i,i.state,null),o=e.updateQueue,null!==o&&(zt(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}function tn(e,t,n){if(e=n.ref,null!==e&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var i=void 0;if(n){if(1!==n.tag)throw r(Error(309));i=n.stateNode}if(!i)throw r(Error(147),e);var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ss&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw r(Error(284));if(!n._owner)throw r(Error(290),e)}return e}function nn(e,t){if("textarea"!==e.type)throw r(Error(31),"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function rn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=Fr(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?(r=t.alternate,null!==r?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n)):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=qr(n,e.mode,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?(r=o(t,n.props,r),r.ref=tn(e,t,n),r.return=e,r):(r=Ur(n.type,n.key,n.props,null,e.mode,r),r.ref=tn(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Vr(n,e.mode,r),t.return=e,t):(t=o(t,n.children||[],r),t.return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?(t=Br(n,e.mode,r,i),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return t=qr(""+t,e.mode,n),t.return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case oo:return n=Ur(t.type,t.key,t.props,null,e.mode,n),n.ref=tn(e,null,t),n.return=e,n;case ao:return t=Vr(t,e.mode,n),t.return=e,t}if(cs(t)||$(t))return t=Br(t,e.mode,n,null),t.return=e,t;nn(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case oo:return n.key===i?n.type===so?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case ao:return n.key===i?l(e,t,n,r):null}if(cs(n)||$(n))return null!==i?null:h(e,t,n,r,null);nn(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return e=e.get(n)||null,u(t,e,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case oo:return e=e.get(null===r.key?n:r.key)||null,r.type===so?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case ao:return e=e.get(null===r.key?n:r.key)||null,l(t,e,r,i)}if(cs(r)||$(r))return e=e.get(n)||null,h(t,e,r,i,null);nn(t,r)}return null}function m(r,o,s,u){for(var c=null,l=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=d(r,h,s[m],u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(r,h),o=a(y,o,m),null===l?c=y:l.sibling=y,l=y,h=g}if(m===s.length)return n(r,h),c;if(null===h){for(;m<s.length;m++)h=f(r,s[m],u),null!==h&&(o=a(h,o,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=i(r,h);m<s.length;m++)g=p(h,r,m,s[m],u),null!==g&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach(function(e){return t(r,e)}),c}function g(o,s,u,c){var l=$(u);if("function"!=typeof l)throw r(Error(150));if(u=l.call(u),null==u)throw r(Error(151));for(var h=l=null,m=s,g=s=0,y=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=d(o,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,g),null===h?l=b:h.sibling=b,h=b,m=y}if(v.done)return n(o,m),l;if(null===m){for(;!v.done;g++,v=u.next())v=f(o,v.value,c),null!==v&&(s=a(v,s,g),null===h?l=v:h.sibling=v,h=v);return l}for(m=i(o,m);!v.done;g++,v=u.next())v=p(m,o,g,v.value,c),null!==v&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(o,e)}),l}return function(e,i,a,u){var c="object"==typeof a&&null!==a&&a.type===so&&null===a.key;c&&(a=a.props.children);var l="object"==typeof a&&null!==a;if(l)switch(a.$$typeof){case oo:e:{for(l=a.key,c=i;null!==c;){if(c.key===l){if(7===c.tag?a.type===so:c.elementType===a.type){n(e,c.sibling),i=o(c,a.type===so?a.props.children:a.props,u),i.ref=tn(e,c,a),i.return=e,e=i;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===so?(i=Br(a.props.children,e.mode,u,a.key),i.return=e,e=i):(u=Ur(a.type,a.key,a.props,null,e.mode,u),u.ref=tn(e,i,a),u.return=e,e=u)}return s(e);case ao:e:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),i=o(i,a.children||[],u),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=Vr(a,e.mode,u),i.return=e,e=i}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),i=o(i,a,u),i.return=e,e=i):(n(e,i),i=qr(a,e.mode,u),i.return=e,e=i),s(e);if(cs(a))return m(e,i,a,u);if($(a))return g(e,i,a,u);if(l&&nn(e,a),"undefined"==typeof a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,r(Error(152),e.displayName||e.name||"Component")}return n(e,i)}}function on(e){if(e===fs)throw r(Error(174));return e}function an(e,t){pt(ms,t,e),pt(ps,e,e),pt(ds,fs,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nt(null,"");break;default:n=8===n?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=nt(t,n)}dt(ds,e),pt(ds,t,e)}function sn(e){dt(ds,e),dt(ps,e),dt(ms,e)}function un(e){on(ms.current);var t=on(ds.current),n=nt(t,e.type);t!==n&&(pt(ps,e,e),pt(ds,n,e))}function cn(e){ps.current===e&&(dt(ds,e),dt(ps,e))}function ln(e){for(var t=e;null!==t;){if(13===t.tag){if(null!==t.memoizedState)return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hn(){throw r(Error(321))}function fn(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ie(e[n],t[n]))return!1;return!0}function dn(e,t,n,i,o,a){if(As=a,Ds=t,Rs=null!==e?e.memoizedState:null,Ns.current=null===Rs?Ws:Ks,t=n(i,o),Bs){do Bs=!1,Vs+=1,Rs=null!==e?e.memoizedState:null,Ms=Ps,Fs=Os=xs=null,Ns.current=Ks,t=n(i,o);while(Bs);qs=null,Vs=0}if(Ns.current=js,e=Ds,e.memoizedState=Ps,e.expirationTime=Ls,e.updateQueue=Fs,e.effectTag|=Us,e=null!==xs&&null!==xs.next,As=0,Ms=Os=Ps=Rs=xs=Ds=null,Ls=0,Fs=null,Us=0,e)throw r(Error(300));return t}function pn(){Ns.current=js,As=0,Ms=Os=Ps=Rs=xs=Ds=null,Ls=0,Fs=null,Us=0,Bs=!1,qs=null,Vs=0}function mn(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Os?Ps=Os=e:Os=Os.next=e,Os}function gn(){if(null!==Ms)Os=Ms,Ms=Os.next,xs=Rs,Rs=null!==xs?xs.next:null;else{if(null===Rs)throw r(Error(310));xs=Rs;var e={memoizedState:xs.memoizedState,baseState:xs.baseState,queue:xs.queue,baseUpdate:xs.baseUpdate,next:null};Os=null===Os?Ps=e:Os.next=e,Rs=xs.next}return Os}function yn(e,t){return"function"==typeof t?t(e):t}function vn(e){var t=gn(),n=t.queue;if(null===n)throw r(Error(311));if(n.lastRenderedReducer=e,0<Vs){var i=n.dispatch;if(null!==qs){var o=qs.get(n);if(void 0!==o){qs.delete(n);var a=t.memoizedState;do a=e(a,o.action),o=o.next;while(null!==o);return Ie(a,t.memoizedState)||(Ys=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,i]}}return[t.memoizedState,i]}i=n.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==i&&(i.next=null),i=s.next):i=null!==i?i.next:null,null!==i){var u=o=null,c=i,l=!1;do{var h=c.expirationTime;h<As?(l||(l=!0,u=s,o=a),h>Ls&&(Ls=h)):(_r(h,c.suspenseConfig),a=c.eagerReducer===e?c.eagerState:e(a,c.action)),s=c,c=c.next}while(null!==c&&c!==i);l||(u=s,o=a),Ie(a,t.memoizedState)||(Ys=!0),t.memoizedState=a,t.baseUpdate=u,t.baseState=o,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function bn(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Fs?(Fs={lastEffect:null},Fs.lastEffect=e.next=e):(t=Fs.lastEffect,null===t?Fs.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Fs.lastEffect=e)),e}function wn(e,t,n,r){var i=mn();Us|=e,i.memoizedState=bn(t,n,void 0,void 0===r?null:r)}function _n(e,t,n,r){var i=gn();r=void 0===r?null:r;var o=void 0;if(null!==xs){var a=xs.memoizedState;if(o=a.destroy,null!==r&&fn(r,a.deps))return void bn(ws,n,o,r)}Us|=e,i.memoizedState=bn(t,n,o,r)}function En(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Sn(){}function Tn(e,t,n){if(!(25>Vs))throw r(Error(301));var i=e.alternate;if(e===Ds||null!==i&&i===Ds)if(Bs=!0,e={expirationTime:As,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===qs&&(qs=new Map),n=qs.get(t),void 0===n)qs.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var o=sr(),a=as.suspense;o=ur(o,e,a),a={expirationTime:o,suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)a.next=a;else{var u=s.next;null!==u&&(a.next=u),s.next=a}if(t.last=a,0===e.expirationTime&&(null===i||0===i.expirationTime)&&(i=t.lastRenderedReducer,null!==i))try{var c=t.lastRenderedState,l=i(c,n);if(a.eagerReducer=i,a.eagerState=l,Ie(l,c))return}catch(e){}finally{}cr(e,o)}}function Cn(e,t){var n=Or(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function In(e,t){switch(e.tag){case 5:var n=e.type;return t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,null!==t&&(e.stateNode=t,!0);case 6:return t=""===e.pendingProps||3!==t.nodeType?null:t,null!==t&&(e.stateNode=t,!0);case 13:return!1;default:return!1}}function kn(e){if(zs){var t=Gs;if(t){var n=t;if(!In(e,t)){if(t=ft(n.nextSibling),!t||!In(e,t))return e.effectTag|=2,zs=!1,void(Qs=e);Cn(Qs,n)}Qs=e,Gs=ft(t.firstChild)}else e.effectTag|=2,zs=!1,Qs=e}}function Nn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;Qs=e}function An(e){if(e!==Qs)return!1;if(!zs)return Nn(e),zs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ht(t,e.memoizedProps))for(t=Gs;t;)Cn(e,t),t=ft(t.nextSibling);return Nn(e),Gs=Qs?ft(e.stateNode.nextSibling):null,!0}function Dn(){Gs=Qs=null,zs=!1}function xn(e,t,n,r){t.child=null===e?hs(t,null,n,r):ls(t,e.child,n,r)}function Rn(e,t,n,r,i){n=n.render;var o=t.ref;return Ft(t,i),r=dn(e,t,n,r,o,i),null===e||Ys?(t.effectTag|=1,xn(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Wn(e,t,i))}function Pn(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Mr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?(e=Ur(n.type,null,r,null,t.mode,o),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,On(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,n=n.compare,n=null!==n?n:ke,n(i,r)&&e.ref===t.ref)?Wn(e,t,o):(t.effectTag|=1,e=Fr(a,r,o),e.ref=t.ref,e.return=t,t.child=e)}function On(e,t,n,r,i,o){return null!==e&&ke(e.memoizedProps,r)&&e.ref===t.ref&&(Ys=!1,i<o)?Wn(e,t,o):Ln(e,t,n,r,o)}function Mn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ln(e,t,n,r,i){var o=gt(n)?Ma:Pa.current;return o=mt(t,o),Ft(t,i),n=dn(e,t,n,r,o,i),null===e||Ys?(t.effectTag|=1,xn(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Wn(e,t,i))}function Fn(e,t,n,r,i){if(gt(n)){var o=!0;_t(t)}else o=!1;if(Ft(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),$t(t,n,r,i),en(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ut(c):(c=gt(n)?Ma:Pa.current,c=mt(t,c));var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Zt(t,a,r,c),os=!1;var f=t.memoizedState;u=a.state=f;var d=t.updateQueue;null!==d&&(zt(t,d,r,a,i),u=t.memoizedState),s!==r||f!==u||Oa.current||os?("function"==typeof l&&(Xt(t,n,l,r),u=t.memoizedState),(s=os||Jt(t,n,s,r,f,u,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:xt(t.type,s),u=a.context,c=n.contextType,"object"==typeof c&&null!==c?c=Ut(c):(c=gt(n)?Ma:Pa.current,c=mt(t,c)),l=n.getDerivedStateFromProps,(h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Zt(t,a,r,c),os=!1,u=t.memoizedState,f=a.state=u,d=t.updateQueue,null!==d&&(zt(t,d,r,a,i),f=t.memoizedState),s!==r||u!==f||Oa.current||os?("function"==typeof l&&(Xt(t,n,l,r),f=t.memoizedState),(l=os||Jt(t,n,s,r,u,f,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Un(e,t,n,r,o,i)}function Un(e,t,n,r,i,o){Mn(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&Et(t,n,!1),Wn(e,t,o);r=t.stateNode,Hs.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=ls(t,e.child,null,o),t.child=ls(t,null,s,o)):xn(e,t,s,o),t.memoizedState=r.state,i&&Et(t,n,!0),t.child}function Bn(e){var t=e.stateNode;t.pendingContext?bt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bt(e,t.context,!1),an(e,t.containerInfo)}function qn(e,t,n){var r,i=t.mode,o=t.pendingProps,a=bs.current,s=null,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(a&vs)&&(null===e||null!==e.memoizedState)),r?(s=Xs,u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=ys),a&=gs,pt(bs,a,t),null===e)if(u){if(o=o.fallback,e=Br(null,i,0,null),e.return=t,0===(2&t.mode))for(u=null!==t.memoizedState?t.child.child:t.child,e.child=u;null!==u;)u.return=e,u=u.sibling;n=Br(o,i,n,null),n.return=t,e.sibling=n,i=e}else i=n=hs(t,null,o.children,n);else{if(null!==e.memoizedState)if(a=e.child,i=a.sibling,u){if(o=o.fallback,n=Fr(a,a.pendingProps,0),n.return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child,u!==a.child))for(n.child=u;null!==u;)u.return=n,u=u.sibling;o=Fr(i,o,i.expirationTime),o.return=t,n.sibling=o,i=n,n.childExpirationTime=0,n=o}else i=n=ls(t,a.child,o.children,n);else if(a=e.child,u){if(u=o.fallback,o=Br(null,i,0,null),o.return=t,o.child=a,null!==a&&(a.return=o),0===(2&t.mode))for(a=null!==t.memoizedState?t.child.child:t.child,o.child=a;null!==a;)a.return=o,a=a.sibling;n=Br(u,i,n,null),n.return=t,o.sibling=n,n.effectTag|=2,i=o,o.childExpirationTime=0}else n=i=ls(t,a,o.children,n);t.stateNode=e.stateNode}return t.memoizedState=s,t.child=i,n}function Vn(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i)}function jn(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xn(e,t,r.children,n),r=bs.current,0!==(r&vs))r=r&gs|vs,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag){if(null!==e.memoizedState){e.expirationTime<n&&(e.expirationTime=n);var a=e.alternate;null!==a&&a.expirationTime<n&&(a.expirationTime=n),Lt(e.return,n)}}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=gs}if(pt(bs,r,t),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)r=n.alternate,null!==r&&null===ln(r)&&(i=n),n=n.sibling;n=i,null===n?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vn(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(r=i.alternate,null!==r&&null===ln(r)){t.child=i;break}r=i.sibling,i.sibling=n,n=i,i=r}Vn(t,!0,n,null,o);break;case"together":Vn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw r(Error(153));if(null!==t.child){for(e=t.child,n=Fr(e,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Fr(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function Kn(e){e.effectTag|=4}function Qn(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gn(e){switch(e.tag){case 1:gt(e.type)&&yt(e);var t=e.effectTag;return 2048&t?(e.effectTag=t&-2049|64,e):null;case 3:if(sn(e),vt(e),t=e.effectTag,0!==(64&t))throw r(Error(285));return e.effectTag=t&-2049|64,e;case 5:return cn(e),null;case 13:return dt(bs,e),t=e.effectTag,2048&t?(e.effectTag=t&-2049|64,e):null;case 18:return null;case 19:return dt(bs,e),null;case 4:return sn(e),null;case 10:return Mt(e),null;default:return null}}function zn(e,t){return{value:e,source:t,stack:ee(t)}}function Hn(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ee(n)),null!==n&&Z(n.type),t=t.value,null!==e&&1===e.tag&&Z(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function Yn(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ar(e,t)}}function Xn(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ar(e,t)}else t.current=null}function Jn(e,t,n){if(n=n.updateQueue,n=null!==n?n.lastEffect:null,null!==n){var r=n=n.next;do{if((r.tag&e)!==ws){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==ws&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function $n(e,t){switch("function"==typeof Vu&&Vu(e),e.tag){case 0:case 11:case 14:case 15:var n=e.updateQueue;if(null!==n&&(n=n.lastEffect,null!==n)){var r=n.next;Ct(97<t?97:t,function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(e){Ar(i,e)}}t=t.next}while(t!==r)})}break;case 1:Xn(e),t=e.stateNode,"function"==typeof t.componentWillUnmount&&Yn(e,t);break;case 5:Xn(e);break;case 4:nr(e,t)}}function Zn(e,t){for(var n=e;;)if($n(n,t),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function er(e){return 5===e.tag||3===e.tag||4===e.tag}function tr(e){e:{for(var t=e.return;null!==t;){if(er(t)){var n=t;break e}t=t.return}throw r(Error(160))}switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:t=t.containerInfo,i=!0;break;case 4:t=t.containerInfo,i=!0;break;default:throw r(Error(161))}16&n.effectTag&&(rt(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||er(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){var a=5===o.tag||6===o.tag;if(a||20===o.tag){var s=a?o.stateNode:o.stateNode.instance;if(n)if(i){a=t;var u=s;s=n,8===a.nodeType?a.parentNode.insertBefore(u,s):a.insertBefore(u,s)}else t.insertBefore(s,n);else i?(u=t,8===u.nodeType?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,null!==u&&void 0!==u||null!==a.onclick||(a.onclick=ct)):t.appendChild(s)}else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function nr(e,t){for(var n=e,i=!1,o=void 0,a=void 0;;){if(!i){i=n.return;e:for(;;){if(null===i)throw r(Error(160));switch(o=i.stateNode,i.tag){case 5:a=!1;break e;case 3:o=o.containerInfo,a=!0;break e;case 4:o=o.containerInfo,a=!0;break e}i=i.return}i=!0}if(5===n.tag||6===n.tag)if(Zn(n,t),a){var s=o,u=n.stateNode;8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)}else o.removeChild(n.stateNode);else if(20===n.tag)u=n.stateNode.instance,Zn(n,t),a?(s=o,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):o.removeChild(u);else if(4===n.tag){if(null!==n.child){o=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if($n(n,t),null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return,4===n.tag&&(i=!1)}n.sibling.return=n.return,n=n.sibling}}function rr(e,t){switch(t.tag){case 0:case 11:case 14:case 15:Jn(Es,Ss,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,o=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Ci]=i,"input"===e&&"radio"===i.type&&null!=i.name&&le(n,i),st(e,o),t=st(e,i),o=0;o<a.length;o+=2){var s=a[o],u=a[o+1];"style"===s?ot(n,u):"dangerouslySetInnerHTML"===s?Ea(n,u):"children"===s?rt(n,u):ae(n,s,u,t)}switch(e){case"input":he(n,i);break;case"textarea":Ze(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,e=i.value,null!=e?Xe(n,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?Xe(n,!!i.multiple,i.defaultValue,!0):Xe(n,!!i.multiple,i.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw r(Error(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:break;case 12:break;case 13:if(n=t,null===t.memoizedState?i=!1:(i=!0,n=t.child,Tu=es()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,i?(a=a.style,"function"==typeof a.setProperty?a.setProperty("display","none","important"):a.display="none"):(a=e.stateNode,o=e.memoizedProps.style,o=void 0!==o&&null!==o&&o.hasOwnProperty("display")?o.display:null,a.style.display=it("display",o));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){a=e.child.sibling,a.return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}ir(t);break;case 19:ir(t);break;case 17:break;case 20:break;default:throw r(Error(163))}}function ir(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tu),t.forEach(function(t){var r=xr.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function or(e,t,n){n=Vt(n,null),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ku||(ku=!0,Nu=r),Hn(e,t)},n}function ar(e,t,n){n=Vt(n,null),n.tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Hn(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Au?Au=new Set([this]):Au.add(this),Hn(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function sr(){return(mu&(uu|cu))!==au?1073741821-(es()/10|0):0!==Fu?Fu:Fu=1073741821-(es()/10|0)}function ur(e,t,n){if(t=t.mode,0===(2&t))return 1073741823;var i=St();if(0===(4&t))return 99===i?1073741823:1073741822;if((mu&uu)!==au)return vu;if(null!==n)e=1073741821-25*(((1073741821-e+(0|n.timeoutMs||5e3)/10)/25|0)+1);else switch(i){case 99:e=1073741823;break;case 98:e=1073741821-10*(((1073741821-e+15)/10|0)+1);break;case 97:case 96:e=1073741821-25*(((1073741821-e+500)/25|0)+1);break;case 95:e=1;break;default:throw r(Error(326))}return null!==gu&&e===vu&&--e,e}function cr(e,t){if(50<Mu)throw Mu=0,Lu=null,r(Error(185));if(e=lr(e,t),null!==e){e.pingTime=0;var n=St();if(1073741823===t)if((mu&su)!==au&&(mu&(uu|cu))===au)for(var i=wr(e,1073741823,!0);null!==i;)i=i(!0);else hr(e,99,1073741823),mu===au&&Nt();else hr(e,n,t);(4&mu)===au||98!==n&&99!==n||(null===Ou?Ou=new Map([[e,t]]):(n=Ou.get(e),(void 0===n||n>t)&&Ou.set(e,t)))}}function lr(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(t>i.firstPendingTime&&(i.firstPendingTime=t),e=i.lastPendingTime,0===e||t<e)&&(i.lastPendingTime=t),i}function hr(e,t,n){if(e.callbackExpirationTime<n){var r=e.callbackNode;null!==r&&r!==Ha&&Ua(r),e.callbackExpirationTime=n,1073741823===n?e.callbackNode=kt(fr.bind(null,e,wr.bind(null,e,n))):(r=null,1!==n&&(r={timeout:10*(1073741821-n)-es()}),e.callbackNode=It(t,fr.bind(null,e,wr.bind(null,e,n)),r))}}function fr(e,t,n){var r=e.callbackNode,i=null;try{return i=t(n),null!==i?fr.bind(null,e,i):null}finally{null===i&&r===e.callbackNode&&(e.callbackNode=null,e.callbackExpirationTime=0)}}function dr(){(mu&(1|uu|cu))===au&&(mr(),Ir())}function pr(e,t){var n=e.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=t)&&(It(97,function(){return n._onComplete(),null}),!0)}function mr(){if(null!==Ou){var e=Ou;Ou=null,e.forEach(function(e,t){kt(wr.bind(null,t,e))}),Nt()}}function gr(e,t){var n=mu;mu|=1;try{return e(t)}finally{mu=n,mu===au&&Nt()}}function yr(e,t,n,r){var i=mu;mu|=4;try{return Ct(98,e.bind(null,t,n,r))}finally{mu=i,mu===au&&Nt()}}function vr(e,t){var n=mu;mu&=-2,mu|=su;try{return e(t)}finally{mu=n,mu===au&&Nt()}}function br(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Aa(n)),null!==yu)for(n=yu.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!==i&&void 0!==i&&yt(r);break;case 3:sn(r),vt(r);break;case 5:cn(r);break;case 4:sn(r);break;case 13:dt(bs,r);break;case 19:dt(bs,r);break;case 10:Mt(r)}n=n.return}gu=e,yu=Fr(e.current,null,t),vu=t,bu=lu,_u=wu=1073741823,Eu=null,Su=!1}function wr(e,t,n){if((mu&(uu|cu))!==au)throw r(Error(327));if(e.firstPendingTime<t)return null;if(n&&e.finishedExpirationTime===t)return Tr.bind(null,e);if(Ir(),e!==gu||t!==vu)br(e,t);else if(bu===du)if(Su)br(e,t);else{var i=e.lastPendingTime;if(i<t)return wr.bind(null,e,i)}if(null!==yu){i=mu,mu|=uu;var o=iu.current;if(null===o&&(o=js),iu.current=js,n){if(1073741823!==t){var a=sr();if(a<t)return mu=i,Pt(),iu.current=o,wr.bind(null,e,a)}}else Fu=0;for(;;)try{if(n)for(;null!==yu;)yu=Er(yu);else for(;null!==yu&&!Ba();)yu=Er(yu);break}catch(n){if(Pt(),pn(),a=yu,null===a||null===a.return)throw br(e,t),mu=i,n;e:{var s=e,u=a.return,c=a,l=n,h=vu;if(c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var f=l,d=0!==(bs.current&ys);l=u;do{var p;if((p=13===l.tag)&&(null!==l.memoizedState?p=!1:(p=l.memoizedProps,p=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!d))),p){if(u=l.updateQueue,null===u?(u=new Set,u.add(f),l.updateQueue=u):u.add(f),0===(2&l.mode)){l.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:(h=Vt(1073741823,null),h.tag=2,Wt(c,h))),c.expirationTime=1073741823;break e}c=s,s=h,d=c.pingCache,null===d?(d=c.pingCache=new nu,u=new Set,d.set(f,u)):(u=d.get(f),void 0===u&&(u=new Set,d.set(f,u))),u.has(s)||(u.add(s),c=Dr.bind(null,c,f,s),f.then(c,c)),l.effectTag|=2048,l.expirationTime=h;break e}l=l.return}while(null!==l);l=Error((Z(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ee(c));
}bu!==pu&&(bu=hu),l=zn(l,c),c=u;do{switch(c.tag){case 3:c.effectTag|=2048,c.expirationTime=h,h=or(c,l,h),Kt(c,h);break e;case 1:if(f=l,s=c.type,u=c.stateNode,0===(64&c.effectTag)&&("function"==typeof s.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===Au||!Au.has(u)))){c.effectTag|=2048,c.expirationTime=h,h=ar(c,f,h),Kt(c,h);break e}}c=c.return}while(null!==c)}yu=Sr(a)}if(mu=i,Pt(),iu.current=o,null!==yu)return wr.bind(null,e,t)}if(e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,pr(e,t))return null;switch(gu=null,bu){case lu:throw r(Error(328));case hu:return i=e.lastPendingTime,i<t?wr.bind(null,e,i):n?Tr.bind(null,e):(br(e,t),kt(wr.bind(null,e,t)),null);case fu:return 1073741823===wu&&!n&&(n=Tu+Cu-es(),10<n)?Su?(br(e,t),wr.bind(null,e,t)):(i=e.lastPendingTime,i<t?wr.bind(null,e,i):(e.timeoutHandle=Na(Tr.bind(null,e),n),null)):Tr.bind(null,e);case du:if(!n){if(Su)return br(e,t),wr.bind(null,e,t);if(n=e.lastPendingTime,n<t)return wr.bind(null,e,n);if(1073741823!==_u?n=10*(1073741821-_u)-es():1073741823===wu?n=0:(n=10*(1073741821-wu)-5e3,i=es(),t=10*(1073741821-t)-i,n=i-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ru(n/1960))-n,t<n&&(n=t)),10<n)return e.timeoutHandle=Na(Tr.bind(null,e),n),null}return Tr.bind(null,e);case pu:return!n&&1073741823!==wu&&null!==Eu&&(i=wu,o=Eu,t=0|o.busyMinDurationMs,0>=t?t=0:(n=0|o.busyDelayMs,i=es()-(10*(1073741821-i)-(0|o.timeoutMs||5e3)),t=i<=n?0:n+t-i),10<t)?(e.timeoutHandle=Na(Tr.bind(null,e),t),null):Tr.bind(null,e);default:throw r(Error(329))}}function _r(e,t){e<wu&&1<e&&(wu=e),null!==t&&e<_u&&1<e&&(_u=e,Eu=t)}function Er(e){var t=Bu(e.alternate,e,vu);return e.memoizedProps=e.pendingProps,null===t&&(t=Sr(e)),ou.current=null,t}function Sr(e){yu=e;do{var t=yu.alternate;if(e=yu.return,0===(1024&yu.effectTag)){e:{var n=t;t=yu;var i=vu,o=t.pendingProps;switch(t.tag){case 2:break;case 16:break;case 15:case 0:break;case 1:gt(t.type)&&yt(t);break;case 3:sn(t),vt(t),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==n&&null!==n.child||(An(t),t.effectTag&=-3),$s(t);break;case 5:cn(t),i=on(ms.current);var a=t.type;if(null!==n&&null!=t.stateNode)Zs(n,t,a,o,i),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var s=on(ds.current);if(An(t)){n=t,o=void 0,a=n.stateNode;var u=n.type,c=n.memoizedProps;switch(a[Ti]=n,a[Ci]=c,u){case"iframe":case"object":case"embed":Me("load",a);break;case"video":case"audio":for(var l=0;l<Oi.length;l++)Me(Oi[l],a);break;case"source":Me("error",a);break;case"img":case"image":case"link":Me("error",a),Me("load",a);break;case"form":Me("reset",a),Me("submit",a);break;case"details":Me("toggle",a);break;case"input":ce(a,c),Me("invalid",a),ut(i,"onChange");break;case"select":a._wrapperState={wasMultiple:!!c.multiple},Me("invalid",a),ut(i,"onChange");break;case"textarea":$e(a,c),Me("invalid",a),ut(i,"onChange")}at(u,c),l=null;for(o in c)c.hasOwnProperty(o)&&(s=c[o],"children"===o?"string"==typeof s?a.textContent!==s&&(l=["children",s]):"number"==typeof s&&a.textContent!==""+s&&(l=["children",""+s]):hi.hasOwnProperty(o)&&null!=s&&ut(i,o));switch(u){case"input":X(a),fe(a,c,!0);break;case"textarea":X(a),et(a,c);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(a.onclick=ct)}i=l,n.updateQueue=i,null!==i&&Kn(t)}else{c=a,n=o,u=t,l=9===i.nodeType?i:i.ownerDocument,s===wa.html&&(s=tt(c)),s===wa.html?"script"===c?(c=l.createElement("div"),c.innerHTML="<script></script>",l=c.removeChild(c.firstChild)):"string"==typeof n.is?l=l.createElement(c,{is:n.is}):(l=l.createElement(c),"select"===c&&(c=l,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):l=l.createElementNS(s,c),c=l,c[Ti]=u,c[Ci]=n,n=c,Js(n,t,!1,!1),u=n;var h=i,f=st(a,o);switch(a){case"iframe":case"object":case"embed":Me("load",u),i=o;break;case"video":case"audio":for(i=0;i<Oi.length;i++)Me(Oi[i],u);i=o;break;case"source":Me("error",u),i=o;break;case"img":case"image":case"link":Me("error",u),Me("load",u),i=o;break;case"form":Me("reset",u),Me("submit",u),i=o;break;case"details":Me("toggle",u),i=o;break;case"input":ce(u,o),i=ue(u,o),Me("invalid",u),ut(h,"onChange");break;case"option":i=Ye(u,o);break;case"select":u._wrapperState={wasMultiple:!!o.multiple},i=oi({},o,{value:void 0}),Me("invalid",u),ut(h,"onChange");break;case"textarea":$e(u,o),i=Je(u,o),Me("invalid",u),ut(h,"onChange");break;default:i=o}at(a,i),c=void 0,l=a,s=u;var d=i;for(c in d)if(d.hasOwnProperty(c)){var p=d[c];"style"===c?ot(s,p):"dangerouslySetInnerHTML"===c?(p=p?p.__html:void 0,null!=p&&Ea(s,p)):"children"===c?"string"==typeof p?("textarea"!==l||""!==p)&&rt(s,p):"number"==typeof p&&rt(s,""+p):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(hi.hasOwnProperty(c)?null!=p&&ut(h,c):null!=p&&ae(s,c,p,f))}switch(a){case"input":X(u),fe(u,o,!1);break;case"textarea":X(u),et(u,o);break;case"option":null!=o.value&&u.setAttribute("value",""+se(o.value));break;case"select":i=u,u=o,i.multiple=!!u.multiple,c=u.value,null!=c?Xe(i,!!u.multiple,c,!1):null!=u.defaultValue&&Xe(i,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof i.onClick&&(u.onclick=ct)}lt(a,o)&&Kn(t),t.stateNode=n}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw r(Error(166));break;case 6:if(n&&null!=t.stateNode)eu(n,t,n.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw r(Error(166));n=on(ms.current),on(ds.current),An(t)?(i=t.stateNode,n=t.memoizedProps,i[Ti]=t,i.nodeValue!==n&&Kn(t)):(i=t,n=(9===n.nodeType?n:n.ownerDocument).createTextNode(o),n[Ti]=t,i.stateNode=n)}break;case 11:break;case 13:if(dt(bs,t),o=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=i;break e}i=null!==o,o=!1,null===n?An(t):(a=n.memoizedState,o=null!==a,i||null===a||(a=n.child.sibling,null!==a&&(u=t.firstEffect,null!==u?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8))),i&&!o&&0!==(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(bs.current&ys)?bu===lu&&(bu=fu):bu!==lu&&bu!==fu||(bu=du)),(i||o)&&(t.effectTag|=4);break;case 7:break;case 8:break;case 12:break;case 4:sn(t),$s(t);break;case 10:Mt(t);break;case 9:break;case 14:break;case 17:gt(t.type)&&yt(t);break;case 18:break;case 19:if(dt(bs,t),o=t.memoizedState,null===o)break;if(a=0!==(64&t.effectTag),u=o.rendering,null===u){if(a)Qn(o,!1);else if(bu!==lu||null!==n&&0!==(64&n.effectTag))for(n=t.child;null!==n;){if(u=ln(n),null!==u){for(t.effectTag|=64,Qn(o,!1),n=u.updateQueue,null!==n&&(t.updateQueue=n,t.effectTag|=4),t.firstEffect=t.lastEffect=null,n=t.child;null!==n;)o=n,a=i,o.effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,u=o.alternate,null===u?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=u.childExpirationTime,o.expirationTime=u.expirationTime,o.child=u.child,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,a=u.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),n=n.sibling;pt(bs,bs.current&gs|vs,t),t=t.child;break e}n=n.sibling}}else{if(!a)if(n=ln(u),null!==n){if(t.effectTag|=64,a=!0,Qn(o,!0),null===o.tail&&"hidden"===o.tailMode){i=n.updateQueue,null!==i&&(t.updateQueue=i,t.effectTag|=4),t=t.lastEffect=o.lastEffect,null!==t&&(t.nextEffect=null);break}}else es()>o.tailExpiration&&1<i&&(t.effectTag|=64,a=!0,Qn(o,!1),t.expirationTime=t.childExpirationTime=i-1);o.isBackwards?(u.sibling=t.child,t.child=u):(i=o.last,null!==i?i.sibling=u:t.child=u,o.last=u)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=es()+500),i=o.tail,o.rendering=i,o.tail=i.sibling,o.lastEffect=t.lastEffect,i.sibling=null,n=bs.current,n=a?n&gs|vs:n&gs,pt(bs,n,t),t=i;break e}break;case 20:break;default:throw r(Error(156))}t=null}if(i=yu,1===vu||1!==i.childExpirationTime){for(n=0,o=i.child;null!==o;)a=o.expirationTime,u=o.childExpirationTime,a>n&&(n=a),u>n&&(n=u),o=o.sibling;i.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(1024&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=yu.firstEffect),null!==yu.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=yu.firstEffect),e.lastEffect=yu.lastEffect),1<yu.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=yu:e.firstEffect=yu,e.lastEffect=yu))}else{if(t=Gn(yu,vu),null!==t)return t.effectTag&=1023,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=1024)}if(t=yu.sibling,null!==t)return t;yu=e}while(null!==yu);return bu===lu&&(bu=pu),null}function Tr(e){var t=St();return Ct(99,Cr.bind(null,e,t)),null!==xu&&It(97,function(){return Ir(),null}),null}function Cr(e,t){if(Ir(),(mu&(uu|cu))!==au)throw r(Error(327));var n=e.finishedWork,i=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw r(Error(177));e.callbackNode=null,e.callbackExpirationTime=0;var o=n.expirationTime,a=n.childExpirationTime;if(o=a>o?a:o,e.firstPendingTime=o,o<e.lastPendingTime&&(e.lastPendingTime=o),e===gu&&(yu=gu=null,vu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,o=n.firstEffect):o=n:o=n.firstEffect,null!==o){a=mu,mu|=cu,ou.current=null,Ia=ha;var s=Qe();if(Ge(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(e){u=null;break e}var f=0,d=-1,p=-1,m=0,g=0,y=s,v=null;t:for(;;){for(var b;y!==u||0!==l&&3!==y.nodeType||(d=f+l),y!==h||0!==c&&3!==y.nodeType||(p=f+c),3===y.nodeType&&(f+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===s)break t;if(v===u&&++m===l&&(d=f),v===h&&++g===c&&(p=f),null!==(b=y.nextSibling))break;y=v,v=y.parentNode}y=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;ka={focusedElem:s,selectionRange:u},ha=!1,Iu=o;do try{for(;null!==Iu;){if(0!==(256&Iu.effectTag)){var w=Iu.alternate;switch(s=Iu,s.tag){case 0:case 11:case 15:Jn(_s,ws,s);break;case 1:if(256&s.effectTag&&null!==w){var _=w.memoizedProps,E=w.memoizedState,S=s.stateNode,T=S.getSnapshotBeforeUpdate(s.elementType===s.type?_:xt(s.type,_),E);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:case 5:case 6:case 4:case 17:break;default:throw r(Error(163))}}Iu=Iu.nextEffect}}catch(e){if(null===Iu)throw r(Error(330));Ar(Iu,e),Iu=Iu.nextEffect}while(null!==Iu);Iu=o;do try{for(w=t;null!==Iu;){var C=Iu.effectTag;if(16&C&&rt(Iu.stateNode,""),128&C){var I=Iu.alternate;if(null!==I){var k=I.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(14&C){case 2:tr(Iu),Iu.effectTag&=-3;break;case 6:tr(Iu),Iu.effectTag&=-3,rr(Iu.alternate,Iu);break;case 4:rr(Iu.alternate,Iu);break;case 8:_=Iu,nr(_,w),_.return=null,_.child=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null;var N=_.alternate;null!==N&&(N.return=null,N.child=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null)}Iu=Iu.nextEffect}}catch(e){if(null===Iu)throw r(Error(330));Ar(Iu,e),Iu=Iu.nextEffect}while(null!==Iu);if(k=ka,I=Qe(),C=k.focusedElem,w=k.selectionRange,I!==C&&C&&C.ownerDocument&&Ke(C.ownerDocument.documentElement,C)){null!==w&&Ge(C)&&(I=w.start,k=w.end,void 0===k&&(k=I),"selectionStart"in C?(C.selectionStart=I,C.selectionEnd=Math.min(k,C.value.length)):(k=(I=C.ownerDocument||document)&&I.defaultView||window,k.getSelection&&(k=k.getSelection(),_=C.textContent.length,N=Math.min(w.start,_),w=void 0===w.end?N:Math.min(w.end,_),!k.extend&&N>w&&(_=w,w=N,N=_),_=We(C,N),E=We(C,w),_&&E&&(1!==k.rangeCount||k.anchorNode!==_.node||k.anchorOffset!==_.offset||k.focusNode!==E.node||k.focusOffset!==E.offset)&&(I=I.createRange(),I.setStart(_.node,_.offset),k.removeAllRanges(),N>w?(k.addRange(I),k.extend(E.node,E.offset)):(I.setEnd(E.node,E.offset),k.addRange(I)))))),I=[];for(k=C;k=k.parentNode;)1===k.nodeType&&I.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof C.focus&&C.focus(),C=0;C<I.length;C++)k=I[C],k.element.scrollLeft=k.left,k.element.scrollTop=k.top}ka=null,ha=!!Ia,Ia=null,e.current=n,Iu=o;do try{for(C=i;null!==Iu;){var A=Iu.effectTag;if(36&A){var D=Iu.alternate;switch(I=Iu,k=C,I.tag){case 0:case 11:case 15:Jn(Ts,Cs,I);break;case 1:var x=I.stateNode;if(4&I.effectTag)if(null===D)x.componentDidMount();else{var R=I.elementType===I.type?D.memoizedProps:xt(I.type,D.memoizedProps);x.componentDidUpdate(R,D.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var P=I.updateQueue;null!==P&&Ht(I,P,x,k);break;case 3:var O=I.updateQueue;if(null!==O){if(N=null,null!==I.child)switch(I.child.tag){case 5:N=I.child.stateNode;break;case 1:N=I.child.stateNode}Ht(I,O,N,k)}break;case 5:var M=I.stateNode;null===D&&4&I.effectTag&&(k=M,lt(I.type,I.memoizedProps)&&k.focus());break;case 6:break;case 4:break;case 12:break;case 13:case 19:case 17:case 20:break;default:throw r(Error(163))}}if(128&A){var L=Iu.ref;if(null!==L){var F=Iu.stateNode;switch(Iu.tag){case 5:var U=F;break;default:U=F}"function"==typeof L?L(U):L.current=U}}512&A&&(Du=!0),Iu=Iu.nextEffect}}catch(e){if(null===Iu)throw r(Error(330));Ar(Iu,e),Iu=Iu.nextEffect}while(null!==Iu);Iu=null,Ya(),mu=a}else e.current=n;if(Du)Du=!1,xu=e,Pu=i,Ru=t;else for(Iu=o;null!==Iu;)t=Iu.nextEffect,Iu.nextEffect=null,Iu=t;if(t=e.firstPendingTime,0!==t?(A=sr(),A=Dt(A,t),hr(e,A,t)):Au=null,"function"==typeof qu&&qu(n.stateNode,i),1073741823===t?e===Lu?Mu++:(Mu=0,Lu=e):Mu=0,ku)throw ku=!1,e=Nu,Nu=null,e;return(mu&su)!==au?null:(Nt(),null)}function Ir(){if(null===xu)return!1;var e=xu,t=Pu,n=Ru;return xu=null,Pu=0,Ru=90,Ct(97<n?97:n,kr.bind(null,e,t))}function kr(e){if((mu&(uu|cu))!==au)throw r(Error(331));var t=mu;for(mu|=cu,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:Jn(ks,ws,n),Jn(ws,Is,n)}}catch(t){if(null===e)throw r(Error(330));Ar(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return mu=t,Nt(),!0}function Nr(e,t,n){t=zn(n,t),t=or(e,t,1073741823),Wt(e,t),e=lr(e,1073741823),null!==e&&hr(e,99,1073741823)}function Ar(e,t){if(3===e.tag)Nr(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Nr(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Au||!Au.has(r))){e=zn(t,e),e=ar(n,e,1073741823),Wt(n,e),n=lr(n,1073741823),null!==n&&hr(n,99,1073741823);break}}n=n.return}}function Dr(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),gu===e&&vu===n?bu===du||bu===fu&&1073741823===wu&&es()-Tu<Cu?br(e,vu):Su=!0:e.lastPendingTime<n||(t=e.pingTime,0!==t&&t<n||(e.pingTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),t=sr(),t=Dt(t,n),hr(e,t,n)))}function xr(e,t){var n=e.stateNode;null!==n&&n.delete(t),n=sr(),t=ur(n,e,null),n=Dt(n,t),e=lr(e,t),null!==e&&hr(e,n,t)}function Rr(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);qu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(e){}},Vu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}return!0}function Pr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Or(e,t,n,r){return new Pr(e,t,n,r)}function Mr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lr(e){if("function"==typeof e)return Mr(e)?1:0;if(void 0!==e&&null!==e){if(e=e.$$typeof,e===po)return 11;if(e===yo)return 14}return 2}function Fr(e,t){var n=e.alternate;return null===n?(n=Or(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ur(e,t,n,i,o,a){var s=2;if(i=e,"function"==typeof e)Mr(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case so:return Br(n.children,o,a,t);case fo:s=8,o|=7;break;case uo:s=8,o|=1;break;case co:return e=Or(12,n,t,8|o),e.elementType=co,e.type=co,e.expirationTime=a,e;case mo:return e=Or(13,n,t,o),e.type=mo,e.elementType=mo,e.expirationTime=a,e;case go:return e=Or(19,n,t,o),e.elementType=go,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case lo:s=10;break e;case ho:s=9;break e;case po:s=11;break e;case yo:s=14;break e;case vo:s=16,i=null;break e}throw r(Error(130),null==e?e:typeof e,"")}return t=Or(s,n,t,o),t.elementType=e,t.type=i,t.expirationTime=a,t}function Br(e,t,n,r){return e=Or(7,e,r,t),e.expirationTime=n,e}function qr(e,t,n){return e=Or(6,e,null,t),e.expirationTime=n,e}function Vr(e,t,n){return t=Or(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jr(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function Wr(e,t,n){return e=new jr(e,t,n),t=Or(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e}function Kr(e,t,n,i,o,a){var s=t.current;e:if(n){n=n._reactInternalFiber;t:{if(2!==Ae(n)||1!==n.tag)throw r(Error(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(gt(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw r(Error(171))}if(1===n.tag){var c=n.type;if(gt(c)){n=wt(n,c,u);break e}}n=u}else n=Ra;return null===t.context?t.context=n:t.pendingContext=n,t=a,o=Vt(i,o),o.payload={element:e},t=void 0===t?null:t,null!==t&&(o.callback=t),Wt(s,o),cr(s,i),i}function Qr(e,t,n,r){var i=t.current,o=sr(),a=as.suspense;return i=ur(o,i,a),Kr(e,t,n,i,a,r)}function Gr(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zr(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ao,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Hr(e){var t=1073741821-25*(((1073741821-sr()+500)/25|0)+1);t<=Uu&&--t,this._expirationTime=Uu=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Yr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Xr(e,t,n){this._internalRoot=Wr(e,t,n)}function Jr(e,t){this._internalRoot=Wr(e,2,t)}function $r(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zr(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Xr(e,0,t)}function ei(e,t,n,r,i){var o=n._reactRootContainer,a=void 0;if(o){if(a=o._internalRoot,"function"==typeof i){var s=i;i=function(){var e=Gr(a);s.call(e)}}Qr(t,a,e,i)}else{if(o=n._reactRootContainer=Zr(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Gr(a);u.call(e)}}vr(function(){Qr(t,a,e,i)})}return Gr(a)}function ti(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$r(t))throw r(Error(200));return zr(e,t,null,n)}function ni(e,t){if(!$r(e))throw r(Error(299),"unstable_createRoot");return new Jr(e,null!=t&&!0===t.hydrate)}function ri(e,t){if(!$r(e))throw r(Error(299),"unstable_createRoot");return new Xr(e,1,null!=t&&!0===t.hydrate)}var ii=n(2),oi=n(8),ai=n(66);if(!ii)throw r(Error(227));var si=null,ui={},ci=[],li={},hi={},fi={},di=!1,pi=null,mi=!1,gi=null,yi={onError:function(e){di=!0,pi=e}},vi=null,bi=null,wi=null,_i=null,Ei={injectEventPluginOrder:function(e){if(si)throw r(Error(101));si=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var o=e[t];if(!ui.hasOwnProperty(t)||ui[t]!==o){if(ui[t])throw r(Error(102),t);ui[t]=o,n=!0}}n&&i()}},Si=Math.random().toString(36).slice(2),Ti="__reactInternalInstance$"+Si,Ci="__reactEventHandlers$"+Si,Ii=!("undefined"==typeof window||"undefined"==typeof window.document||"undefined"==typeof window.document.createElement),ki={animationend:C("Animation","AnimationEnd"),animationiteration:C("Animation","AnimationIteration"),animationstart:C("Animation","AnimationStart"),transitionend:C("Transition","TransitionEnd")},Ni={},Ai={};Ii&&(Ai=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Di=I("animationend"),xi=I("animationiteration"),Ri=I("animationstart"),Pi=I("transitionend"),Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mi=null,Li=null,Fi=null;oi(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=N)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=N)},persist:function(){this.isPersistent=N},isPersistent:A,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=A,this._dispatchInstances=this._dispatchListeners=null}}),D.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},D.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return oi(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=oi({},r.Interface,e),n.extend=r.extend,P(n),n},P(D);var Ui=D.extend({data:null}),Bi=D.extend({data:null}),qi=[9,13,27,32],Vi=Ii&&"CompositionEvent"in window,ji=null;Ii&&"documentMode"in document&&(ji=document.documentMode);var Wi=Ii&&"TextEvent"in window&&!ji,Ki=Ii&&(!Vi||ji&&8<ji&&11>=ji),Qi=String.fromCharCode(32),Gi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},zi=!1,Hi=!1,Yi={eventTypes:Gi,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(Vi)e:{switch(e){case"compositionstart":i=Gi.compositionStart;break e;case"compositionend":i=Gi.compositionEnd;break e;case"compositionupdate":i=Gi.compositionUpdate;break e}i=void 0}else Hi?O(e,n)&&(i=Gi.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Gi.compositionStart);return i?(Ki&&"ko"!==n.locale&&(Hi||i!==Gi.compositionStart?i===Gi.compositionEnd&&Hi&&(o=k()):(Mi=r,Li="value"in Mi?Mi.value:Mi.textContent,Hi=!0)),i=Ui.getPooled(i,t,n,r),o?i.data=o:(o=M(n),null!==o&&(i.data=o)),T(i),o=i):o=null,(e=Wi?L(e,n):F(e,n))?(t=Bi.getPooled(Gi.beforeInput,t,n,r),t.data=e,T(t)):t=null,null===o?t:null===t?o:[o,t]}},Xi=null,Ji=null,$i=null,Zi=V,eo=!1,to={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},no=ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;no.hasOwnProperty("ReactCurrentDispatcher")||(no.ReactCurrentDispatcher={current:null}),no.hasOwnProperty("ReactCurrentBatchConfig")||(no.ReactCurrentBatchConfig={suspense:null});var ro=/^(.*)[\\\/]/,io="function"==typeof Symbol&&Symbol.for,oo=io?Symbol.for("react.element"):60103,ao=io?Symbol.for("react.portal"):60106,so=io?Symbol.for("react.fragment"):60107,uo=io?Symbol.for("react.strict_mode"):60108,co=io?Symbol.for("react.profiler"):60114,lo=io?Symbol.for("react.provider"):60109,ho=io?Symbol.for("react.context"):60110,fo=io?Symbol.for("react.concurrent_mode"):60111,po=io?Symbol.for("react.forward_ref"):60112,mo=io?Symbol.for("react.suspense"):60113,go=io?Symbol.for("react.suspense_list"):60120,yo=io?Symbol.for("react.memo"):60115,vo=io?Symbol.for("react.lazy"):60116;io&&Symbol.for("react.fundamental"),io&&Symbol.for("react.responder");var bo="function"==typeof Symbol&&Symbol.iterator,wo=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_o=Object.prototype.hasOwnProperty,Eo={},So={},To={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){To[e]=new ie(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];To[t]=new ie(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){To[e]=new ie(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){To[e]=new ie(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){To[e]=new ie(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){To[e]=new ie(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){To[e]=new ie(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){To[e]=new ie(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){To[e]=new ie(e,5,!1,e.toLowerCase(),null,!1)});var Co=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Co,oe);To[t]=new ie(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Co,oe);To[t]=new ie(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Co,oe);To[t]=new ie(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){To[e]=new ie(e,1,!1,e.toLowerCase(),null,!1)}),To.xlinkHref=new ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){To[e]=new ie(e,1,!1,e.toLowerCase(),null,!0)});var Io={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},ko=null,No=null,Ao=!1;Ii&&(Ao=z("input")&&(!document.documentMode||9<document.documentMode));var Do={eventTypes:Io,_isInputEventSupported:Ao,extractEvents:function(e,t,n,r){var i=t?y(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();return"select"===s||"input"===s&&"file"===i.type?o=ye:Q(i)?Ao?o=Se:(o=_e,a=we):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Ee),o&&(o=o(e,t))?pe(o,n,r):(a&&a(e,i,t),void("blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&de(i,"number",i.value)))}},xo=D.extend({view:null,detail:null}),Ro={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Po=0,Oo=0,Mo=!1,Lo=!1,Fo=xo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ce,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Po;return Po=e.screenX,Mo?"mousemove"===e.type?e.screenX-t:0:(Mo=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Oo;return Oo=e.screenY,Lo?"mousemove"===e.type?e.screenY-t:0:(Lo=!0,0)}}),Uo=Fo.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Bo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},qo={eventTypes:Bo,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?m(t):null):o=null,o===t)return null;var a=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=Fo,s=Bo.mouseLeave,u=Bo.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Uo,s=Bo.pointerLeave,u=Bo.pointerEnter,c="pointer");var l=null==o?i:y(o);
if(i=null==t?i:y(t),e=a.getPooled(s,o,n,r),e.type=c+"leave",e.target=l,e.relatedTarget=i,n=a.getPooled(u,t,n,r),n.type=c+"enter",n.target=i,n.relatedTarget=l,r=t,o&&r)e:{for(t=o,i=r,c=0,a=t;a;a=b(a))c++;for(a=0,u=i;u;u=b(u))a++;for(;0<c-a;)t=b(t),c--;for(;0<a-c;)i=b(i),a--;for(;c--;){if(t===i||t===i.alternate)break e;t=b(t),i=b(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(c=o.alternate,null===c||c!==i);)t.push(o),o=b(o);for(o=[];r&&r!==i&&(c=r.alternate,null===c||c!==i);)o.push(r),r=b(r);for(r=0;r<t.length;r++)E(t[r],"bubbled",e);for(r=o.length;0<r--;)E(o[r],"captured",n);return[e,n]}},Vo=Object.prototype.hasOwnProperty;new Map,new Map,new Set,new Map;for(var jo=D.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Wo=(D.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Ko=xo.extend({relatedTarget:null}),Qo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Go={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zo=xo.extend({key:function(e){if(e.key){var t=Qo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Pe(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Go[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ce,charCode:function(e){return"keypress"===e.type?Pe(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Pe(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ho=Fo.extend({dataTransfer:null}),Yo=xo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ce}),Xo=D.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Jo=(Fo.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null})),$o=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Di,"animationEnd",2],[xi,"animationIteration",2],[Ri,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Pi,"transitionEnd",2],["waiting","waiting",2]],Zo={},ea={},ta=0;ta<$o.length;ta++){var na=$o[ta],ra=na[0],ia=na[1],oa=na[2],aa="on"+(ia[0].toUpperCase()+ia.slice(1)),sa={phasedRegistrationNames:{bubbled:aa,captured:aa+"Capture"},dependencies:[ra],eventPriority:oa};Zo[ia]=sa,ea[ra]=sa}var ua={eventTypes:Zo,getEventPriority:function(e){return e=ea[e],void 0!==e?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=ea[e];if(!i)return null;switch(e){case"keypress":if(0===Pe(n))return null;case"keydown":case"keyup":e=zo;break;case"blur":case"focus":e=Ko;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Yo;break;case Di:case xi:case Ri:e=jo;break;case Pi:e=Xo;break;case"scroll":e=xo;break;case"wheel":e=Jo;break;case"copy":case"cut":case"paste":e=Wo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Uo;break;default:e=D}return t=e.getPooled(i,t,n,r),T(t),t}},ca=ua.getEventPriority,la=[],ha=!0,fa=new("function"==typeof WeakMap?WeakMap:Map),da=Ii&&"documentMode"in document&&11>=document.documentMode,pa={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ma=null,ga=null,ya=null,va=!1,ba={eventTypes:pa,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=qe(o),i=fi.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?y(t):window,e){case"focus":(Q(o)||"true"===o.contentEditable)&&(ma=o,ga=t,ya=null);break;case"blur":ya=ga=ma=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":return va=!1,ze(n,r);case"selectionchange":if(da)break;case"keydown":case"keyup":return ze(n,r)}return null}};Ei.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),vi=v,bi=g,wi=y,Ei.injectEventPluginsByName({SimpleEventPlugin:ua,EnterLeaveEventPlugin:qo,ChangeEventPlugin:Do,SelectEventPlugin:ba,BeforeInputEventPlugin:Yi});var wa={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},_a=void 0,Ea=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!==wa.svg||"innerHTML"in e)e.innerHTML=t;else{for(_a=_a||document.createElement("div"),_a.innerHTML="<svg>"+t+"</svg>",t=_a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),Sa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ta=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(e){Ta.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sa[t]=Sa[e]})});var Ca=oi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Ia=null,ka=null,Na="function"==typeof setTimeout?setTimeout:void 0,Aa="function"==typeof clearTimeout?clearTimeout:void 0;new Set;var Da=[],xa=-1,Ra={},Pa={current:Ra},Oa={current:!1},Ma=Ra,La=ai.unstable_runWithPriority,Fa=ai.unstable_scheduleCallback,Ua=ai.unstable_cancelCallback,Ba=ai.unstable_shouldYield,qa=ai.unstable_requestPaint,Va=ai.unstable_now,ja=ai.unstable_getCurrentPriorityLevel,Wa=ai.unstable_ImmediatePriority,Ka=ai.unstable_UserBlockingPriority,Qa=ai.unstable_NormalPriority,Ga=ai.unstable_LowPriority,za=ai.unstable_IdlePriority,Ha={},Ya=void 0!==qa?qa:function(){},Xa=null,Ja=null,$a=!1,Za=Va(),es=1e4>Za?Va:function(){return Va()-Za},ts={current:null},ns=null,rs=null,is=null,os=!1,as=no.ReactCurrentBatchConfig,ss=(new ii.Component).refs,us={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Ae(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=sr(),i=as.suspense;r=ur(r,e,i),i=Vt(r,i),i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Wt(e,i),cr(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=sr(),i=as.suspense;r=ur(r,e,i),i=Vt(r,i),i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Wt(e,i),cr(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=sr(),r=as.suspense;n=ur(n,e,r),r=Vt(n,r),r.tag=2,void 0!==t&&null!==t&&(r.callback=t),Wt(e,r),cr(e,n)}},cs=Array.isArray,ls=rn(!0),hs=rn(!1),fs={},ds={current:fs},ps={current:fs},ms={current:fs},gs=1,ys=1,vs=2,bs={current:0},ws=0,_s=2,Es=4,Ss=8,Ts=16,Cs=32,Is=64,ks=128,Ns=no.ReactCurrentDispatcher,As=0,Ds=null,xs=null,Rs=null,Ps=null,Os=null,Ms=null,Ls=0,Fs=null,Us=0,Bs=!1,qs=null,Vs=0,js={readContext:Ut,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useResponder:hn},Ws={readContext:Ut,useCallback:function(e,t){return mn().memoizedState=[e,void 0===t?null:t],e},useContext:Ut,useEffect:function(e,t){return wn(516,ks|Is,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wn(4,Es|Cs,En.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wn(4,Es|Cs,e,t)},useMemo:function(e,t){var n=mn();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Tn.bind(null,Ds,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:function(e){var t=mn();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={last:null,dispatch:null,lastRenderedReducer:yn,lastRenderedState:e},e=e.dispatch=Tn.bind(null,Ds,e),[t.memoizedState,e]},useDebugValue:Sn,useResponder:Ne},Ks={readContext:Ut,useCallback:function(e,t){var n=gn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fn(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Ut,useEffect:function(e,t){return _n(516,ks|Is,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_n(4,Es|Cs,En.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _n(4,Es|Cs,e,t)},useMemo:function(e,t){var n=gn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fn(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:vn,useRef:function(){return gn().memoizedState},useState:function(e){return vn(yn,e)},useDebugValue:Sn,useResponder:Ne},Qs=null,Gs=null,zs=!1,Hs=no.ReactCurrentOwner,Ys=!1,Xs={},Js=void 0,$s=void 0,Zs=void 0,eu=void 0;Js=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(20===n.tag)e.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$s=function(){},Zs=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a=t.stateNode;switch(on(ds.current),e=null,n){case"input":o=ue(a,o),r=ue(a,r),e=[];break;case"option":o=Ye(a,o),r=Ye(a,r),e=[];break;case"select":o=oi({},o,{value:void 0}),r=oi({},r,{value:void 0}),e=[];break;case"textarea":o=Je(a,o),r=Je(a,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(a.onclick=ct)}at(n,r),a=n=void 0;var s=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(a in u)u.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(hi.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(e||(e=[]),e.push(n,s)),s=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(hi.hasOwnProperty(n)?(null!=c&&ut(i,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}s&&(e=e||[]).push("style",s),i=e,(t.updateQueue=i)&&Kn(t)}},eu=function(e,t,n,r){n!==r&&Kn(t)};var tu="function"==typeof WeakSet?WeakSet:Set,nu="function"==typeof WeakMap?WeakMap:Map,ru=Math.ceil,iu=no.ReactCurrentDispatcher,ou=no.ReactCurrentOwner,au=0,su=8,uu=16,cu=32,lu=0,hu=1,fu=2,du=3,pu=4,mu=au,gu=null,yu=null,vu=0,bu=lu,wu=1073741823,_u=1073741823,Eu=null,Su=!1,Tu=0,Cu=500,Iu=null,ku=!1,Nu=null,Au=null,Du=!1,xu=null,Ru=90,Pu=0,Ou=null,Mu=0,Lu=null,Fu=0,Uu=0,Bu=void 0;Bu=function(e,t,n){var i=t.expirationTime;if(null!==e){var o=t.pendingProps;if(e.memoizedProps!==o||Oa.current)Ys=!0;else if(i<n){switch(Ys=!1,t.tag){case 3:Bn(t),Dn();break;case 5:if(un(t),4&t.mode&&1!==n&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:gt(t.type)&&_t(t);break;case 4:an(t,t.stateNode.containerInfo);break;case 10:Ot(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return i=t.child.childExpirationTime,0!==i&&i>=n?qn(e,t,n):(pt(bs,bs.current&gs,t),t=Wn(e,t,n),null!==t?t.sibling:null);pt(bs,bs.current&gs,t);break;case 19:if(i=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(i)return jn(e,t,n);t.effectTag|=64}if(o=t.memoizedState,null!==o&&(o.rendering=null,o.tail=null),pt(bs,bs.current,t),!i)return null}return Wn(e,t,n)}}else Ys=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=mt(t,Pa.current),Ft(t,n),o=dn(null,t,i,e,o,n),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,pn(),gt(i)){var a=!0;_t(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var s=i.getDerivedStateFromProps;"function"==typeof s&&Xt(t,i,s,e),o.updater=us,t.stateNode=o,o._reactInternalFiber=t,en(t,i,e,n),t=Un(null,t,i,!0,a,n)}else t.tag=0,xn(null,t,o,n),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=Rt(o),t.type=o,a=t.tag=Lr(o),e=xt(o,e),a){case 0:t=Ln(null,t,o,e,n);break;case 1:t=Fn(null,t,o,e,n);break;case 11:t=Rn(null,t,o,e,n);break;case 14:t=Pn(null,t,o,xt(o.type,e),i,n);break;default:throw r(Error(306),o,"")}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:xt(i,o),Ln(e,t,i,o,n);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:xt(i,o),Fn(e,t,i,o,n);case 3:if(Bn(t),i=t.updateQueue,null===i)throw r(Error(282));return o=t.memoizedState,o=null!==o?o.element:null,zt(t,i,t.pendingProps,null,n),i=t.memoizedState.element,i===o?(Dn(),t=Wn(e,t,n)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(Gs=ft(t.stateNode.containerInfo.firstChild),Qs=t,o=zs=!0),o?(t.effectTag|=2,t.child=hs(t,null,i,n)):(xn(e,t,i,n),Dn()),t=t.child),t;case 5:return un(t),null===e&&kn(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,ht(i,o)?s=null:null!==a&&ht(i,a)&&(t.effectTag|=16),Mn(e,t),4&t.mode&&1!==n&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(xn(e,t,s,n),t=t.child),t;case 6:return null===e&&kn(t),null;case 13:return qn(e,t,n);case 4:return an(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ls(t,null,i,n):xn(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:xt(i,o),Rn(e,t,i,o,n);case 7:return xn(e,t,t.pendingProps,n),t.child;case 8:return xn(e,t,t.pendingProps.children,n),t.child;case 12:return xn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Ot(t,a),null!==s){var u=s.value;if(a=Ie(u,a)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(u,a):1073741823),0===a){if(s.children===o.children&&!Oa.current){t=Wn(e,t,n);break e}}else for(u=t.child,null!==u&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===i&&0!==(l.observedBits&a)){1===u.tag&&(l=Vt(n,null),l.tag=2,Wt(u,l)),u.expirationTime<n&&(u.expirationTime=n),l=u.alternate,null!==l&&l.expirationTime<n&&(l.expirationTime=n),Lt(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(u=s.sibling,null!==u){u.return=s.return,s=u;break}s=s.return}u=s}}xn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps,i=a.children,Ft(t,n),o=Ut(o,a.unstable_observedBits),i=i(o),t.effectTag|=1,xn(e,t,i,n),t.child;case 14:return o=t.type,a=xt(o,t.pendingProps),a=xt(o.type,a),Pn(e,t,o,a,i,n);case 15:return On(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:xt(i,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,gt(i)?(e=!0,_t(t)):e=!1,Ft(t,n),$t(t,i,o,n),en(t,i,o,n),Un(null,t,i,!0,e,n);case 19:return jn(e,t,n)}throw r(Error(156))};var qu=null,Vu=null;Xi=function(e,t,n){switch(t){case"input":if(he(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=v(i);if(!o)throw r(Error(90));J(i),he(i,o)}}}break;case"textarea":Ze(e,n);break;case"select":t=n.value,null!=t&&Xe(e,!!n.multiple,t,!1)}},Hr.prototype.render=function(e){if(!this._defer)throw r(Error(250));this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,i=new Yr;return Kr(e,t,null,n,null,i._onCommit),i},Hr.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Hr.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(!this._defer||null===t)throw r(Error(251));if(this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var i=null,o=t;o!==this;)i=o,o=o._next;if(null===i)throw r(Error(251));i._next=o._next,this._next=t,e.firstBatch=this}if(this._defer=!1,t=n,(mu&(uu|cu))!==au)throw r(Error(253));kt(wr.bind(null,e,t)),Nt(),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Hr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Yr.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Yr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)throw r(Error(191),n);n()}}},Jr.prototype.render=Xr.prototype.render=function(e,t){var n=this._internalRoot,r=new Yr;return t=void 0===t?null:t,null!==t&&r.then(t),Qr(e,n,null,r._onCommit),r},Jr.prototype.unmount=Xr.prototype.unmount=function(e){var t=this._internalRoot,n=new Yr;return e=void 0===e?null:e,null!==e&&n.then(e),Qr(null,t,null,n._onCommit),n},Jr.prototype.createBatch=function(){var e=new Hr(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},V=gr,j=yr,W=dr,Zi=function(e,t){var n=mu;mu|=2;try{return e(t)}finally{mu=n,mu===au&&Nt()}};var ju={createPortal:ti,findDOMNode:function(e){if(null==e)e=null;else if(1!==e.nodeType){var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw r(Error(188));throw r(Error(268),Object.keys(e))}e=Re(t),e=null===e?null:e.stateNode}return e},hydrate:function(e,t,n){if(!$r(t))throw r(Error(200));return ei(null,e,t,!0,n)},render:function(e,t,n){if(!$r(t))throw r(Error(200));return ei(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){if(!$r(n))throw r(Error(200));if(null==e||void 0===e._reactInternalFiber)throw r(Error(38));return ei(e,t,n,!1,i)},unmountComponentAtNode:function(e){if(!$r(e))throw r(Error(40));return!!e._reactRootContainer&&(vr(function(){ei(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return ti.apply(void 0,arguments)},unstable_batchedUpdates:gr,unstable_interactiveUpdates:function(e,t,n,r){return dr(),yr(e,t,n,r)},unstable_discreteUpdates:yr,unstable_flushDiscreteUpdates:dr,flushSync:function(e,t){if((mu&(uu|cu))!==au)throw r(Error(187));var n=mu;mu|=1;try{return Ct(99,e.bind(null,t))}finally{mu=n,Nt()}},unstable_createRoot:ni,unstable_createSyncRoot:ri,unstable_flushControlled:function(e){var t=mu;mu|=1;try{Ct(99,e)}finally{mu=t,mu===au&&Nt()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[g,y,v,Ei.injectEventPluginsByName,li,T,function(e){h(e,S)},B,q,Be,d,Ir,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;return Rr(oi({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:no.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Re(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:m,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"});var Wu={default:ju},Ku=Wu&&ju||Wu;e.exports=Ku.default||Ku},function(e,t,n){"use strict";function r(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(53)},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=Promise.resolve(),o=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.uiConfig=n.uiConfig,r.firebaseAuth=n.firebaseAuth,r.className=n.className,r.uiCallback=n.uiCallback,r.unregisterAuthObserver=function(){},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;n(2);var t=n(7);return i.then(function(){e.firebaseUiWidget=t.auth.AuthUI.getInstance()||new t.auth.AuthUI(e.firebaseAuth),"popup"===e.uiConfig.signInFlow&&e.firebaseUiWidget.reset(),e.userSignedIn=!1,e.unregisterAuthObserver=e.firebaseAuth.onAuthStateChanged(function(t){!t&&e.userSignedIn&&e.firebaseUiWidget.reset(),e.userSignedIn=!!t}),e.uiCallback&&e.uiCallback(e.firebaseUiWidget),e.firebaseUiWidget.start("#firebaseui_container",e.uiConfig)})},t.prototype.componentWillUnmount=function(){var e=this;return i=i.then(function(){return e.unregisterAuthObserver(),e.firebaseUiWidget.delete()})},t.prototype.render=function(){return r.default.createElement("div",{className:this.className,id:"firebaseui_container"})},t}(r.default.Component);t.default=o},function(e,t){e.exports=n(2)},function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i),r.locals&&(e.exports=r.locals)},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Roboto:400,500,700);",""]),t.push([e.i,'.mdl-button{background:0 0;border:none;border-radius:2px;color:#000;position:relative;height:36px;margin:0;min-width:64px;padding:0 16px;display:inline-block;font-family:Roboto,Helvetica,Arial,sans-serif;font-size:14px;font-weight:500;text-transform:uppercase;line-height:1;letter-spacing:0;overflow:hidden;will-change:box-shadow;transition:box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),color .2s cubic-bezier(.4,0,.2,1);outline:0;cursor:pointer;text-decoration:none;text-align:center;line-height:36px;vertical-align:middle}.mdl-button::-moz-focus-inner{border:0}.mdl-button:hover{background-color:hsla(0,0%,62%,.2)}.mdl-button:focus:not(:active){background-color:rgba(0,0,0,.12)}.mdl-button:active{background-color:hsla(0,0%,62%,.4)}.mdl-button.mdl-button--colored{color:#3f51b5}.mdl-button.mdl-button--colored:focus:not(:active){background-color:rgba(0,0,0,.12)}input.mdl-button[type=submit]{-webkit-appearance:none}.mdl-button--raised{background:hsla(0,0%,62%,.2);box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.mdl-button--raised:active{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background-color:hsla(0,0%,62%,.4)}.mdl-button--raised:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:hsla(0,0%,62%,.4)}.mdl-button--raised.mdl-button--colored{background:#3f51b5;color:#fff}.mdl-button--raised.mdl-button--colored:active,.mdl-button--raised.mdl-button--colored:focus:not(:active),.mdl-button--raised.mdl-button--colored:hover{background-color:#3f51b5}.mdl-button--raised.mdl-button--colored .mdl-ripple{background:#fff}.mdl-button--fab{border-radius:50%;font-size:24px;height:56px;margin:auto;min-width:56px;width:56px;padding:0;overflow:hidden;background:hsla(0,0%,62%,.2);box-shadow:0 1px 1.5px 0 rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.24);position:relative;line-height:normal}.mdl-button--fab .material-icons{position:absolute;top:50%;left:50%;transform:translate(-12px,-12px);line-height:24px;width:24px}.mdl-button--fab.mdl-button--mini-fab{height:40px;min-width:40px;width:40px}.mdl-button--fab .mdl-button__ripple-container{border-radius:50%;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.mdl-button--fab:active{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background-color:hsla(0,0%,62%,.4)}.mdl-button--fab:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:hsla(0,0%,62%,.4)}.mdl-button--fab.mdl-button--colored{background:#ff4081;color:#fff}.mdl-button--fab.mdl-button--colored:active,.mdl-button--fab.mdl-button--colored:focus:not(:active),.mdl-button--fab.mdl-button--colored:hover{background-color:#ff4081}.mdl-button--fab.mdl-button--colored .mdl-ripple{background:#fff}.mdl-button--icon{border-radius:50%;font-size:24px;height:32px;margin-left:0;margin-right:0;min-width:32px;width:32px;padding:0;overflow:hidden;color:inherit;line-height:normal}.mdl-button--icon .material-icons{position:absolute;top:50%;left:50%;transform:translate(-12px,-12px);line-height:24px;width:24px}.mdl-button--icon.mdl-button--mini-icon{height:24px;min-width:24px;width:24px}.mdl-button--icon.mdl-button--mini-icon .material-icons{top:0;left:0}.mdl-button--icon .mdl-button__ripple-container{border-radius:50%;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.mdl-button__ripple-container{display:block;height:100%;left:0;position:absolute;top:0;width:100%;z-index:0;overflow:hidden}.mdl-button.mdl-button--disabled .mdl-button__ripple-container .mdl-ripple,.mdl-button[disabled] .mdl-button__ripple-container .mdl-ripple{background-color:transparent}.mdl-button--primary.mdl-button--primary{color:#3f51b5}.mdl-button--primary.mdl-button--primary .mdl-ripple{background:#fff}.mdl-button--primary.mdl-button--primary.mdl-button--fab,.mdl-button--primary.mdl-button--primary.mdl-button--raised{color:#fff;background-color:#3f51b5}.mdl-button--accent.mdl-button--accent{color:#ff4081}.mdl-button--accent.mdl-button--accent .mdl-ripple{background:#fff}.mdl-button--accent.mdl-button--accent.mdl-button--fab,.mdl-button--accent.mdl-button--accent.mdl-button--raised{color:#fff;background-color:#ff4081}.mdl-button.mdl-button--disabled.mdl-button--disabled,.mdl-button[disabled][disabled]{color:rgba(0,0,0,.26);cursor:default;background-color:transparent}.mdl-button--fab.mdl-button--disabled.mdl-button--disabled,.mdl-button--fab[disabled][disabled]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26)}.mdl-button--raised.mdl-button--disabled.mdl-button--disabled,.mdl-button--raised[disabled][disabled]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26);box-shadow:none}.mdl-button--colored.mdl-button--disabled.mdl-button--disabled,.mdl-button--colored[disabled][disabled]{color:rgba(0,0,0,.26)}.mdl-button .material-icons{vertical-align:middle}.mdl-card{display:flex;flex-direction:column;font-size:16px;font-weight:400;min-height:200px;overflow:hidden;width:330px;z-index:1;position:relative;background:#fff;border-radius:2px;box-sizing:border-box}.mdl-card__media{background-color:#ff4081;background-repeat:repeat;background-position:50% 50%;background-size:cover;background-origin:padding-box;background-attachment:scroll;box-sizing:border-box}.mdl-card__title{align-items:center;color:#000;display:block;display:flex;justify-content:stretch;line-height:normal;padding:16px;perspective-origin:165px 56px;transform-origin:165px 56px;box-sizing:border-box}.mdl-card__title.mdl-card--border{border-bottom:1px solid rgba(0,0,0,.1)}.mdl-card__title-text{align-self:flex-end;color:inherit;display:block;display:flex;font-size:24px;font-weight:300;line-height:normal;overflow:hidden;transform-origin:149px 48px;margin:0}.mdl-card__subtitle-text{font-size:14px;color:rgba(0,0,0,.54);margin:0}.mdl-card__supporting-text{color:rgba(0,0,0,.54);font-size:1rem;line-height:18px;overflow:hidden;padding:16px;width:90%}.mdl-card__supporting-text.mdl-card--border{border-bottom:1px solid rgba(0,0,0,.1)}.mdl-card__actions{font-size:16px;line-height:normal;width:100%;background-color:transparent;padding:8px;box-sizing:border-box}.mdl-card__actions.mdl-card--border{border-top:1px solid rgba(0,0,0,.1)}.mdl-card--expand{flex-grow:1}.mdl-card__menu{position:absolute;right:16px;top:16px}.mdl-dialog{border:none;box-shadow:0 9px 46px 8px rgba(0,0,0,.14),0 11px 15px -7px rgba(0,0,0,.12),0 24px 38px 3px rgba(0,0,0,.2);width:280px}.mdl-dialog__title{padding:24px 24px 0;margin:0;font-size:2.5rem}.mdl-dialog__actions{padding:8px 8px 8px 24px;display:flex;flex-direction:row-reverse;flex-wrap:wrap}.mdl-dialog__actions>*{margin-right:8px;height:36px}.mdl-dialog__actions>:first-child{margin-right:0}.mdl-dialog__actions--full-width{padding:0 0 8px}.mdl-dialog__actions--full-width>*{height:48px;flex:0 0 100%;padding-right:16px;margin-right:0;text-align:right}.mdl-dialog__content{padding:20px 24px 24px;color:rgba(0,0,0,.54)}.mdl-progress{display:block;position:relative;height:4px;width:500px;max-width:100%}.mdl-progress>.bar{display:block;position:absolute;top:0;bottom:0;width:0;transition:width .2s cubic-bezier(.4,0,.2,1)}.mdl-progress>.progressbar{background-color:#3f51b5;z-index:1;left:0}.mdl-progress>.bufferbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7)),linear-gradient(90deg,#3f51b5,#3f51b5);z-index:0;left:0}.mdl-progress>.auxbar{right:0}@supports (-webkit-appearance:none){.mdl-progress:not(.mdl-progress--indeterminate):not(.mdl-progress--indeterminate)>.auxbar,.mdl-progress:not(.mdl-progress__indeterminate):not(.mdl-progress__indeterminate)>.auxbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7)),linear-gradient(90deg,#3f51b5,#3f51b5);mask:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+Cjxzdmcgd2lkdGg9IjEyIiBoZWlnaHQ9IjQiIHZpZXdQb3J0PSIwIDAgMTIgNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxlbGxpcHNlIGN4PSIyIiBjeT0iMiIgcng9IjIiIHJ5PSIyIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBmcm9tPSIyIiB0bz0iLTEwIiBkdXI9IjAuNnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiAvPgogIDwvZWxsaXBzZT4KICA8ZWxsaXBzZSBjeD0iMTQiIGN5PSIyIiByeD0iMiIgcnk9IjIiIGNsYXNzPSJsb2FkZXIiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGZyb209IjE0IiB0bz0iMiIgZHVyPSIwLjZzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4KICA8L2VsbGlwc2U+Cjwvc3ZnPgo=)}}.mdl-progress:not(.mdl-progress--indeterminate)>.auxbar,.mdl-progress:not(.mdl-progress__indeterminate)>.auxbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.9),hsla(0,0%,100%,.9)),linear-gradient(90deg,#3f51b5,#3f51b5)}.mdl-progress.mdl-progress--indeterminate>.bar1,.mdl-progress.mdl-progress__indeterminate>.bar1{background-color:#3f51b5;animation-name:indeterminate1;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}.mdl-progress.mdl-progress--indeterminate>.bar3,.mdl-progress.mdl-progress__indeterminate>.bar3{background-image:none;background-color:#3f51b5;animation-name:indeterminate2;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes indeterminate1{0%{left:0;width:0}50%{left:25%;width:75%}75%{left:100%;width:0}}@keyframes indeterminate2{0%{left:0;width:0}50%{left:0;width:0}75%{left:0;width:25%}to{left:100%;width:0}}.mdl-shadow--2dp{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.mdl-shadow--3dp{box-shadow:0 3px 4px 0 rgba(0,0,0,.14),0 3px 3px -2px rgba(0,0,0,.2),0 1px 8px 0 rgba(0,0,0,.12)}.mdl-shadow--4dp{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2)}.mdl-shadow--6dp{box-shadow:0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12),0 3px 5px -1px rgba(0,0,0,.2)}.mdl-shadow--8dp{box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2)}.mdl-shadow--16dp{box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.2)}.mdl-shadow--24dp{box-shadow:0 9px 46px 8px rgba(0,0,0,.14),0 11px 15px -7px rgba(0,0,0,.12),0 24px 38px 3px rgba(0,0,0,.2)}.mdl-spinner{display:inline-block;position:relative;width:28px;height:28px}.mdl-spinner:not(.is-upgraded).is-active:after{content:"Loading..."}.mdl-spinner.is-upgraded.is-active{animation:mdl-spinner__container-rotate 1.568s linear infinite}@keyframes mdl-spinner__container-rotate{to{transform:rotate(1turn)}}.mdl-spinner__layer{position:absolute;width:100%;height:100%;opacity:0}.mdl-spinner__layer-1{border-color:#42a5f5}.mdl-spinner--single-color .mdl-spinner__layer-1{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-1{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-1-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-2{border-color:#f44336}.mdl-spinner--single-color .mdl-spinner__layer-2{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-2{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-2-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-3{border-color:#fdd835}.mdl-spinner--single-color .mdl-spinner__layer-3{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-3{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-3-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-4{border-color:#4caf50}.mdl-spinner--single-color .mdl-spinner__layer-4{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-4{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-4-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}@keyframes mdl-spinner__fill-unfill-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}to{transform:rotate(3turn)}}@keyframes mdl-spinner__layer-1-fade-in-out{0%{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdl-spinner__layer-2-fade-in-out{0%{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}}@keyframes mdl-spinner__layer-3-fade-in-out{0%{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}}@keyframes mdl-spinner__layer-4-fade-in-out{0%{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}.mdl-spinner__gap-patch{position:absolute;box-sizing:border-box;top:0;left:45%;width:10%;height:100%;overflow:hidden;border-color:inherit}.mdl-spinner__gap-patch .mdl-spinner__circle{width:1000%;left:-450%}.mdl-spinner__circle-clipper{display:inline-block;position:relative;width:50%;height:100%;overflow:hidden;border-color:inherit}.mdl-spinner__circle-clipper.mdl-spinner__left{float:left}.mdl-spinner__circle-clipper.mdl-spinner__right{float:right}.mdl-spinner__circle-clipper .mdl-spinner__circle{width:200%}.mdl-spinner__circle{box-sizing:border-box;height:100%;border-width:3px;border-style:solid;border-color:inherit;border-bottom-color:transparent!important;border-radius:50%;animation:none;position:absolute;top:0;right:0;bottom:0;left:0}.mdl-spinner__left .mdl-spinner__circle{border-right-color:transparent!important;transform:rotate(129deg)}.mdl-spinner.is-active .mdl-spinner__left .mdl-spinner__circle{animation:mdl-spinner__left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__right .mdl-spinner__circle{left:-100%;border-left-color:transparent!important;transform:rotate(-129deg)}.mdl-spinner.is-active .mdl-spinner__right .mdl-spinner__circle{animation:mdl-spinner__right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}@keyframes mdl-spinner__left-spin{0%{transform:rotate(130deg)}50%{transform:rotate(-5deg)}to{transform:rotate(130deg)}}@keyframes mdl-spinner__right-spin{0%{transform:rotate(-130deg)}50%{transform:rotate(5deg)}to{transform:rotate(-130deg)}}.mdl-textfield{position:relative;font-size:16px;display:inline-block;box-sizing:border-box;width:300px;max-width:100%;margin:0;padding:20px 0}.mdl-textfield .mdl-button{position:absolute;bottom:20px}.mdl-textfield--align-right{text-align:right}.mdl-textfield--full-width{width:100%}.mdl-textfield--expandable{min-width:32px;width:auto;min-height:32px}.mdl-textfield--expandable .mdl-button--icon{top:16px}.mdl-textfield__input{border:none;border-bottom:1px solid rgba(0,0,0,.12);display:block;font-size:16px;font-family:Helvetica,Arial,sans-serif;margin:0;padding:4px 0;width:100%;background:0 0;text-align:left;color:inherit}.mdl-textfield__input[type=number]{-moz-appearance:textfield}.mdl-textfield__input[type=number]::-webkit-inner-spin-button,.mdl-textfield__input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.mdl-textfield.is-focused .mdl-textfield__input{outline:0}.mdl-textfield.is-invalid .mdl-textfield__input{border-color:#d50000;box-shadow:none}.mdl-textfield.is-disabled .mdl-textfield__input,fieldset[disabled] .mdl-textfield .mdl-textfield__input{background-color:transparent;border-bottom:1px dotted rgba(0,0,0,.12);color:rgba(0,0,0,.26)}.mdl-textfield textarea.mdl-textfield__input{display:block}.mdl-textfield__label{bottom:0;color:rgba(0,0,0,.26);font-size:16px;left:0;right:0;pointer-events:none;position:absolute;display:block;top:24px;width:100%;overflow:hidden;white-space:nowrap;text-align:left}.mdl-textfield.has-placeholder .mdl-textfield__label,.mdl-textfield.is-dirty .mdl-textfield__label{visibility:hidden}.mdl-textfield--floating-label .mdl-textfield__label{transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__label{transition:none}.mdl-textfield.is-disabled.is-disabled .mdl-textfield__label,fieldset[disabled] .mdl-textfield .mdl-textfield__label{color:rgba(0,0,0,.26)}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__label,.mdl-textfield--floating-label.is-dirty .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__label{color:#3f51b5;font-size:12px;top:4px;visibility:visible}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__expandable-holder .mdl-textfield__label,.mdl-textfield--floating-label.is-dirty .mdl-textfield__expandable-holder .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__expandable-holder .mdl-textfield__label{top:-16px}.mdl-textfield--floating-label.is-invalid .mdl-textfield__label{color:#d50000;font-size:12px}.mdl-textfield__label:after{background-color:#3f51b5;bottom:20px;content:"";height:2px;left:45%;position:absolute;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);visibility:hidden;width:10px}.mdl-textfield.is-focused .mdl-textfield__label:after{left:0;visibility:visible;width:100%}.mdl-textfield.is-invalid .mdl-textfield__label:after{background-color:#d50000}.mdl-textfield__error{color:#d50000;position:absolute;font-size:12px;margin-top:3px;visibility:hidden;display:block}.mdl-textfield.is-invalid .mdl-textfield__error{visibility:visible}.mdl-textfield__expandable-holder{position:relative;margin-left:32px;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);display:inline-block;max-width:.1px}.mdl-textfield.is-dirty .mdl-textfield__expandable-holder,.mdl-textfield.is-focused .mdl-textfield__expandable-holder{max-width:600px}.mdl-textfield__expandable-holder .mdl-textfield__label:after{bottom:0}dialog{position:absolute;left:0;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border:solid;padding:1em;background:#fff;color:#000;display:block}dialog:not([open]){display:none}dialog+.backdrop{background:rgba(0,0,0,.1)}._dialog_overlay,dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0}dialog.fixed{position:fixed;top:50%;transform:translateY(-50%)}.firebaseui-container{background-color:#fff;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;color:rgba(0,0,0,.87);direction:ltr;font:16px Roboto,arial,sans-serif;margin:0 auto;max-width:360px;overflow:visible;position:relative;text-align:left;width:100%}.firebaseui-container.mdl-card{overflow:visible}.firebaseui-card-header{padding:24px 24px 0}.firebaseui-card-content,.firebaseui-card-footer{padding:0 24px}.firebaseui-card-actions{box-sizing:border-box;display:table;font-size:14px;padding:8px 24px 24px;text-align:left;width:100%}.firebaseui-form-links{display:table-cell;vertical-align:middle;width:100%}.firebaseui-form-actions{display:table-cell;text-align:right;white-space:nowrap;width:100%}.firebaseui-subtitle,.firebaseui-title{color:rgba(0,0,0,.87);direction:ltr;font-size:20px;font-weight:500;line-height:24px;margin:0;padding:0;text-align:left}.firebaseui-title{padding-bottom:16px}.firebaseui-subtitle{margin:16px 0}.firebaseui-text{color:rgba(0,0,0,.87);direction:ltr;font-size:16px;line-height:24px;text-align:left}.firebaseui-id-page-password-recovery-email-sent p.firebaseui-text{margin:16px 0}.firebaseui-text-emphasis{font-weight:700}.firebaseui-error{color:#dd2c00;direction:ltr;font-size:12px;line-height:16px;margin:0;text-align:left}.firebaseui-text-input-error{margin:-16px 0 16px}.firebaseui-error-wrapper{min-height:16px}.firebaseui-list-item{direction:ltr;margin:0;padding:0;text-align:left}.firebaseui-hidden{display:none}.firebaseui-relative-wrapper{position:relative}.firebaseui-label{color:rgba(0,0,0,.54);direction:ltr;font-size:16px;text-align:left}.mdl-textfield--floating-label.is-dirty .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__label{color:#757575}.firebaseui-input,.firebaseui-input-invalid{border-radius:0;color:rgba(0,0,0,.87);direction:ltr;font-size:16px;width:100%}input.firebaseui-input,input.firebaseui-input-invalid{direction:ltr;text-align:left}.firebaseui-input-invalid{border-color:#dd2c00}.firebaseui-textfield{width:100%}.firebaseui-textfield.mdl-textfield .firebaseui-input{border-color:rgba(0,0,0,.12)}.firebaseui-textfield.mdl-textfield .firebaseui-label:after{background-color:#3f51b5}.firebaseui-textfield-invalid.mdl-textfield .firebaseui-input{border-color:#dd2c00}.firebaseui-textfield-invalid.mdl-textfield .firebaseui-label:after{background-color:#dd2c00}.firebaseui-button{display:inline-block;height:36px;margin-left:8px;min-width:88px}.firebaseui-link{color:#4285f4;font-variant:normal;font-weight:400;text-decoration:none}.firebaseui-link:hover{text-decoration:underline}.firebaseui-indent{margin-left:1em}.firebaseui-tos{color:#757575;direction:ltr;font-size:12px;line-height:16px;margin-bottom:24px;margin-top:0;text-align:left}.firebaseui-provider-sign-in-footer>.firebaseui-tos{text-align:center}.firebaseui-tos-list{list-style:none;text-align:right}.firebaseui-inline-list-item{display:inline-block;margin-left:5px;margin-right:5px}.firebaseui-page-provider-sign-in{background:inherit}.firebaseui-idp-list{list-style:none;margin:1em 0;padding:0}.firebaseui-idp-button{direction:ltr;font-weight:500;height:auto;line-height:normal;max-width:220px;min-height:40px;padding:8px 16px;text-align:left;width:100%}.firebaseui-idp-list>.firebaseui-list-item{margin-bottom:15px;text-align:center}.firebaseui-idp-icon-wrapper{display:table-cell;vertical-align:middle}.firebaseui-idp-icon{height:18px;width:18px}.firebaseui-idp-favicon,.firebaseui-idp-icon{border:none;display:inline-block;vertical-align:middle}.firebaseui-idp-favicon{height:14px;margin-right:5px;width:14px}.firebaseui-idp-text{color:#fff;display:table-cell;font-size:14px;padding-left:16px;text-transform:none;vertical-align:middle}.firebaseui-idp-text.firebaseui-idp-text-long{display:table-cell}.firebaseui-idp-text.firebaseui-idp-text-short{display:none}@media (max-width:268px){.firebaseui-idp-text.firebaseui-idp-text-long{display:none}.firebaseui-idp-text.firebaseui-idp-text-short{display:table-cell}}@media (max-width:320px){.firebaseui-recaptcha-container>div>div{transform:scale(.9);-webkit-transform:scale(.9);transform-origin:0 0;-webkit-transform-origin:0 0}}.firebaseui-idp-password,.firebaseui-idp-password:hover,.mdl-button.firebaseui-idp-password:active,.mdl-button.firebaseui-idp-password:focus{background-color:#db4437}.firebaseui-idp-phone,.firebaseui-idp-phone:hover,.mdl-button.firebaseui-idp-phone:active,.mdl-button.firebaseui-idp-phone:focus{background-color:#02bd7e}.firebaseui-idp-google,.firebaseui-idp-google:hover,.mdl-button.firebaseui-idp-google:active,.mdl-button.firebaseui-idp-google:focus{background-color:#fff}.firebaseui-idp-google>.firebaseui-idp-text{color:#757575}.firebaseui-idp-github,.firebaseui-idp-github:hover,.mdl-button.firebaseui-idp-github:active,.mdl-button.firebaseui-idp-github:focus{background-color:#333}.firebaseui-idp-facebook,.firebaseui-idp-facebook:hover,.mdl-button.firebaseui-idp-facebook:active,.mdl-button.firebaseui-idp-facebook:focus{background-color:#3b5998}.firebaseui-idp-twitter,.firebaseui-idp-twitter:hover,.mdl-button.firebaseui-idp-twitter:active,.mdl-button.firebaseui-idp-twitter:focus{background-color:#55acee}.firebaseui-idp-anonymous,.firebaseui-idp-anonymous:hover,.mdl-button.firebaseui-idp-anonymous:active,.mdl-button.firebaseui-idp-anonymous:focus{background-color:#f4b400}.firebaseui-info-bar{background-color:#f9edbe;border:1px solid #f0c36d;box-shadow:0 2px 4px rgba(0,0,0,.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);left:10%;padding:8px 16px;position:absolute;right:10%;text-align:center;top:0}.firebaseui-info-bar-message{font-size:12px;margin:0}.firebaseui-dialog{box-sizing:border-box;color:rgba(0,0,0,.87);font:16px Roboto,arial,sans-serif;height:auto;padding:24px;text-align:left}.firebaseui-dialog-icon-wrapper{display:table-cell;vertical-align:middle}.firebaseui-dialog-icon{float:left;height:40px;margin-right:24px;width:40px}.firebaseui-progress-dialog-message{display:table-cell;font-size:16px;font-weight:400;min-height:40px;vertical-align:middle}.firebaseui-progress-dialog-loading-icon{height:28px;margin:6px 30px 6px 6px;width:28px}.firebaseui-icon-done{background-image:url(https://www.gstatic.com/images/icons/material/system/2x/done_googgreen_36dp.png);background-position:50%;background-repeat:no-repeat;background-size:36px 36px}.firebaseui-phone-number{display:flex}.firebaseui-country-selector{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/arrow_drop_down_grey600_18dp.png);background-position:100%;background-repeat:no-repeat;background-size:18px auto;border-radius:0;border-bottom:1px solid rgba(0,0,0,.12);color:rgba(0,0,0,.87);flex-shrink:0;font-size:16px;font-weight:400;height:auto;line-height:normal;margin:20px 24px 20px 0;padding:4px 20px 4px 0;width:90px}.firebaseui-country-selector-flag{display:inline-block;margin-right:1ex}.firebaseui-flag{background-image:url(https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/flags_sprite_2x.png);background-size:100% auto;filter:drop-shadow(1px 1px 1px rgba(0,0,0,.54));height:14px;width:24px}.firebaseui-list-box-dialog{max-height:90%;overflow:auto;padding:8px 0 0}.firebaseui-list-box-actions{padding-bottom:8px}.firebaseui-list-box-icon-wrapper{padding-right:24px}.firebaseui-list-box-icon-wrapper,.firebaseui-list-box-label-wrapper{display:table-cell;vertical-align:top}.firebaseui-list-box-dialog-button{color:rgba(0,0,0,.87);direction:ltr;font-size:16px;font-weight:400;height:auto;line-height:normal;min-height:48px;padding:14px 24px;text-align:left;text-transform:none;width:100%}.firebaseui-phone-number-error{margin-left:114px}.mdl-progress.firebaseui-busy-indicator{height:2px;left:0;position:absolute;top:55px;width:100%}.mdl-spinner.firebaseui-busy-indicator{height:56px;left:0;margin:auto;position:absolute;right:0;top:30%;width:56px}.firebaseui-callback-indicator-container .firebaseui-busy-indicator{top:0}.firebaseui-callback-indicator-container{height:120px}.firebaseui-new-password-component{display:inline-block;position:relative;width:100%}.firebaseui-input-floating-button{background-position:50%;background-repeat:no-repeat;display:block;height:24px;position:absolute;right:0;top:20px;width:24px}.firebaseui-input-toggle-on{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/visibility_black_24dp.png)}.firebaseui-input-toggle-off{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/visibility_off_black_24dp.png)}.firebaseui-input-toggle-focus{opacity:.87}.firebaseui-input-toggle-blur{opacity:.38}.firebaseui-recaptcha-wrapper{display:table;margin:0 auto;padding-bottom:8px}.firebaseui-recaptcha-container{display:table-cell}.firebaseui-recaptcha-error-wrapper{caption-side:bottom;display:table-caption}.firebaseui-change-phone-number-link{display:block}.firebaseui-resend-container{direction:ltr;margin:20px 0;text-align:center}.firebaseui-id-resend-countdown{color:rgba(0,0,0,.38)}.firebaseui-id-page-phone-sign-in-start .firebaseui-form-actions div{float:left}@media (max-width:480px){.firebaseui-container{box-shadow:none;max-width:none;width:100%}.firebaseui-card-header{border-bottom:1px solid #e0e0e0;margin-bottom:16px;padding:16px 24px 0}.firebaseui-title{padding-bottom:16px}.firebaseui-card-actions{padding-right:24px}.firebaseui-busy-indicator{top:0}}.mdl-textfield__label{font-weight:400;margin-bottom:0}.firebaseui-id-page-blank{background:inherit;height:64px}.firebaseui-email-sent{background-image:url(https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/success_status.png);background-position:50%;background-repeat:no-repeat;background-size:64px 64px;height:64px;margin-top:16px;text-align:center}.firebaseui-text-justify{text-align:justify}.firebaseui-flag-KY{background-position:0 0}.firebaseui-flag-AC{background-position:0 -14px}.firebaseui-flag-AE{background-position:0 -28px}.firebaseui-flag-AF{background-position:0 -42px}.firebaseui-flag-AG{background-position:0 -56px}.firebaseui-flag-AI{background-position:0 -70px}.firebaseui-flag-AL{background-position:0 -84px}.firebaseui-flag-AM{background-position:0 -98px}.firebaseui-flag-AO{background-position:0 -112px}.firebaseui-flag-AQ{background-position:0 -126px}.firebaseui-flag-AR{background-position:0 -140px}.firebaseui-flag-AS{background-position:0 -154px}.firebaseui-flag-AT{background-position:0 -168px}.firebaseui-flag-AU{background-position:0 -182px}.firebaseui-flag-AW{background-position:0 -196px}.firebaseui-flag-AX{background-position:0 -210px}.firebaseui-flag-AZ{background-position:0 -224px}.firebaseui-flag-BA{background-position:0 -238px}.firebaseui-flag-BB{background-position:0 -252px}.firebaseui-flag-BD{background-position:0 -266px}.firebaseui-flag-BE{background-position:0 -280px}.firebaseui-flag-BF{background-position:0 -294px}.firebaseui-flag-BG{background-position:0 -308px}.firebaseui-flag-BH{background-position:0 -322px}.firebaseui-flag-BI{background-position:0 -336px}.firebaseui-flag-BJ{background-position:0 -350px}.firebaseui-flag-BL{background-position:0 -364px}.firebaseui-flag-BM{background-position:0 -378px}.firebaseui-flag-BN{background-position:0 -392px}.firebaseui-flag-BO{background-position:0 -406px}.firebaseui-flag-BQ{background-position:0 -420px}.firebaseui-flag-BR{background-position:0 -434px}.firebaseui-flag-BS{background-position:0 -448px}.firebaseui-flag-BT{background-position:0 -462px}.firebaseui-flag-BV{background-position:0 -476px}.firebaseui-flag-BW{background-position:0 -490px}.firebaseui-flag-BY{background-position:0 -504px}.firebaseui-flag-BZ{background-position:0 -518px}.firebaseui-flag-CA{background-position:0 -532px}.firebaseui-flag-CC{background-position:0 -546px}.firebaseui-flag-CD{background-position:0 -560px}.firebaseui-flag-CF{background-position:0 -574px}.firebaseui-flag-CG{background-position:0 -588px}.firebaseui-flag-CH{background-position:0 -602px}.firebaseui-flag-CI{background-position:0 -616px}.firebaseui-flag-CK{background-position:0 -630px}.firebaseui-flag-CL{background-position:0 -644px}.firebaseui-flag-CM{background-position:0 -658px}.firebaseui-flag-CN{background-position:0 -672px}.firebaseui-flag-CO{background-position:0 -686px}.firebaseui-flag-CP{background-position:0 -700px}.firebaseui-flag-CR{background-position:0 -714px}.firebaseui-flag-CU{background-position:0 -728px}.firebaseui-flag-CV{background-position:0 -742px}.firebaseui-flag-CW{background-position:0 -756px}.firebaseui-flag-CX{background-position:0 -770px}.firebaseui-flag-CY{background-position:0 -784px}.firebaseui-flag-CZ{background-position:0 -798px}.firebaseui-flag-DE{background-position:0 -812px}.firebaseui-flag-DG{background-position:0 -826px}.firebaseui-flag-DJ{background-position:0 -840px}.firebaseui-flag-DK{background-position:0 -854px}.firebaseui-flag-DM{background-position:0 -868px}.firebaseui-flag-DO{background-position:0 -882px}.firebaseui-flag-DZ{background-position:0 -896px}.firebaseui-flag-EA{background-position:0 -910px}.firebaseui-flag-EC{background-position:0 -924px}.firebaseui-flag-EE{background-position:0 -938px}.firebaseui-flag-EG{background-position:0 -952px}.firebaseui-flag-EH{background-position:0 -966px}.firebaseui-flag-ER{background-position:0 -980px}.firebaseui-flag-ES{background-position:0 -994px}.firebaseui-flag-ET{background-position:0 -1008px}.firebaseui-flag-EU{background-position:0 -1022px}.firebaseui-flag-FI{background-position:0 -1036px}.firebaseui-flag-FJ{background-position:0 -1050px}.firebaseui-flag-FK{background-position:0 -1064px}.firebaseui-flag-FM{background-position:0 -1078px}.firebaseui-flag-FO{background-position:0 -1092px}.firebaseui-flag-FR{background-position:0 -1106px}.firebaseui-flag-GA{background-position:0 -1120px}.firebaseui-flag-GB{background-position:0 -1134px}.firebaseui-flag-GD{background-position:0 -1148px}.firebaseui-flag-GE{background-position:0 -1162px}.firebaseui-flag-GF{background-position:0 -1176px}.firebaseui-flag-GG{background-position:0 -1190px}.firebaseui-flag-GH{background-position:0 -1204px}.firebaseui-flag-GI{background-position:0 -1218px}.firebaseui-flag-GL{background-position:0 -1232px}.firebaseui-flag-GM{background-position:0 -1246px}.firebaseui-flag-GN{background-position:0 -1260px}.firebaseui-flag-GP{background-position:0 -1274px}.firebaseui-flag-GQ{background-position:0 -1288px}.firebaseui-flag-GR{background-position:0 -1302px}.firebaseui-flag-GS{background-position:0 -1316px}.firebaseui-flag-GT{background-position:0 -1330px}.firebaseui-flag-GU{background-position:0 -1344px}.firebaseui-flag-GW{background-position:0 -1358px}.firebaseui-flag-GY{background-position:0 -1372px}.firebaseui-flag-HK{background-position:0 -1386px}.firebaseui-flag-HM{background-position:0 -1400px}.firebaseui-flag-HN{background-position:0 -1414px}.firebaseui-flag-HR{background-position:0 -1428px}.firebaseui-flag-HT{background-position:0 -1442px}.firebaseui-flag-HU{background-position:0 -1456px}.firebaseui-flag-IC{background-position:0 -1470px}.firebaseui-flag-ID{background-position:0 -1484px}.firebaseui-flag-IE{background-position:0 -1498px}.firebaseui-flag-IL{background-position:0 -1512px}.firebaseui-flag-IM{background-position:0 -1526px}.firebaseui-flag-IN{background-position:0 -1540px}.firebaseui-flag-IO{background-position:0 -1554px}.firebaseui-flag-IQ{background-position:0 -1568px}.firebaseui-flag-IR{background-position:0 -1582px}.firebaseui-flag-IS{background-position:0 -1596px}.firebaseui-flag-IT{background-position:0 -1610px}.firebaseui-flag-JE{background-position:0 -1624px}.firebaseui-flag-JM{background-position:0 -1638px}.firebaseui-flag-JO{background-position:0 -1652px}.firebaseui-flag-JP{background-position:0 -1666px}.firebaseui-flag-KE{background-position:0 -1680px}.firebaseui-flag-KG{background-position:0 -1694px}.firebaseui-flag-KH{background-position:0 -1708px}.firebaseui-flag-KI{background-position:0 -1722px}.firebaseui-flag-KM{background-position:0 -1736px}.firebaseui-flag-KN{background-position:0 -1750px}.firebaseui-flag-KP{background-position:0 -1764px}.firebaseui-flag-KR{background-position:0 -1778px}.firebaseui-flag-KW{background-position:0 -1792px}.firebaseui-flag-AD{background-position:0 -1806px}.firebaseui-flag-KZ{background-position:0 -1820px}.firebaseui-flag-LA{background-position:0 -1834px}.firebaseui-flag-LB{background-position:0 -1848px}.firebaseui-flag-LC{background-position:0 -1862px}.firebaseui-flag-LI{background-position:0 -1876px}.firebaseui-flag-LK{background-position:0 -1890px}.firebaseui-flag-LR{background-position:0 -1904px}.firebaseui-flag-LS{background-position:0 -1918px}.firebaseui-flag-LT{background-position:0 -1932px}.firebaseui-flag-LU{background-position:0 -1946px}.firebaseui-flag-LV{background-position:0 -1960px}.firebaseui-flag-LY{background-position:0 -1974px}.firebaseui-flag-MA{background-position:0 -1988px}.firebaseui-flag-MC{background-position:0 -2002px}.firebaseui-flag-MD{background-position:0 -2016px}.firebaseui-flag-ME{background-position:0 -2030px}.firebaseui-flag-MF{background-position:0 -2044px}.firebaseui-flag-MG{background-position:0 -2058px}.firebaseui-flag-MH{background-position:0 -2072px}.firebaseui-flag-MK{background-position:0 -2086px}.firebaseui-flag-ML{background-position:0 -2100px}.firebaseui-flag-MM{background-position:0 -2114px}.firebaseui-flag-MN{background-position:0 -2128px}.firebaseui-flag-MO{background-position:0 -2142px}.firebaseui-flag-MP{background-position:0 -2156px}.firebaseui-flag-MQ{background-position:0 -2170px}.firebaseui-flag-MR{background-position:0 -2184px}.firebaseui-flag-MS{background-position:0 -2198px}.firebaseui-flag-MT{background-position:0 -2212px}.firebaseui-flag-MU{background-position:0 -2226px}.firebaseui-flag-MV{background-position:0 -2240px}.firebaseui-flag-MW{background-position:0 -2254px}.firebaseui-flag-MX{background-position:0 -2268px}.firebaseui-flag-MY{background-position:0 -2282px}.firebaseui-flag-MZ{background-position:0 -2296px}.firebaseui-flag-NA{background-position:0 -2310px}.firebaseui-flag-NC{background-position:0 -2324px}.firebaseui-flag-NE{background-position:0 -2338px}.firebaseui-flag-NF{background-position:0 -2352px}.firebaseui-flag-NG{background-position:0 -2366px}.firebaseui-flag-NI{background-position:0 -2380px}.firebaseui-flag-NL{background-position:0 -2394px}.firebaseui-flag-NO{background-position:0 -2408px}.firebaseui-flag-NP{background-position:0 -2422px}.firebaseui-flag-NR{background-position:0 -2436px}.firebaseui-flag-NU{background-position:0 -2450px}.firebaseui-flag-NZ{background-position:0 -2464px}.firebaseui-flag-OM{background-position:0 -2478px}.firebaseui-flag-PA{background-position:0 -2492px}.firebaseui-flag-PE{background-position:0 -2506px}.firebaseui-flag-PF{background-position:0 -2520px}.firebaseui-flag-PG{background-position:0 -2534px}.firebaseui-flag-PH{background-position:0 -2548px}.firebaseui-flag-PK{background-position:0 -2562px}.firebaseui-flag-PL{background-position:0 -2576px}.firebaseui-flag-PM{background-position:0 -2590px}.firebaseui-flag-PN{background-position:0 -2604px}.firebaseui-flag-PR{background-position:0 -2618px}.firebaseui-flag-PS{background-position:0 -2632px}.firebaseui-flag-PT{background-position:0 -2646px}.firebaseui-flag-PW{background-position:0 -2660px}.firebaseui-flag-PY{background-position:0 -2674px}.firebaseui-flag-QA{background-position:0 -2688px}.firebaseui-flag-RE{background-position:0 -2702px}.firebaseui-flag-RO{background-position:0 -2716px}.firebaseui-flag-RS{background-position:0 -2730px}.firebaseui-flag-RU{background-position:0 -2744px}.firebaseui-flag-RW{background-position:0 -2758px}.firebaseui-flag-SA{background-position:0 -2772px}.firebaseui-flag-SB{background-position:0 -2786px}.firebaseui-flag-SC{background-position:0 -2800px}.firebaseui-flag-SD{background-position:0 -2814px}.firebaseui-flag-SE{background-position:0 -2828px}.firebaseui-flag-SG{background-position:0 -2842px}.firebaseui-flag-SH{background-position:0 -2856px}.firebaseui-flag-SI{background-position:0 -2870px}.firebaseui-flag-SJ{background-position:0 -2884px}.firebaseui-flag-SK{background-position:0 -2898px}.firebaseui-flag-SL{background-position:0 -2912px}.firebaseui-flag-SM{background-position:0 -2926px}.firebaseui-flag-SN{background-position:0 -2940px}.firebaseui-flag-SO{background-position:0 -2954px}.firebaseui-flag-SR{background-position:0 -2968px}.firebaseui-flag-SS{background-position:0 -2982px}.firebaseui-flag-ST{background-position:0 -2996px}.firebaseui-flag-SV{background-position:0 -3010px}.firebaseui-flag-SX{background-position:0 -3024px}.firebaseui-flag-SY{background-position:0 -3038px}.firebaseui-flag-SZ{background-position:0 -3052px}.firebaseui-flag-TA{background-position:0 -3066px}.firebaseui-flag-TC{background-position:0 -3080px}.firebaseui-flag-TD{background-position:0 -3094px}.firebaseui-flag-TF{background-position:0 -3108px}.firebaseui-flag-TG{background-position:0 -3122px}.firebaseui-flag-TH{background-position:0 -3136px}.firebaseui-flag-TJ{background-position:0 -3150px}.firebaseui-flag-TK{background-position:0 -3164px}.firebaseui-flag-TL{background-position:0 -3178px}.firebaseui-flag-TM{background-position:0 -3192px}.firebaseui-flag-TN{background-position:0 -3206px}.firebaseui-flag-TO{background-position:0 -3220px}.firebaseui-flag-TR{background-position:0 -3234px}.firebaseui-flag-TT{background-position:0 -3248px}.firebaseui-flag-TV{background-position:0 -3262px}.firebaseui-flag-TW{background-position:0 -3276px}.firebaseui-flag-TZ{background-position:0 -3290px}.firebaseui-flag-UA{background-position:0 -3304px}.firebaseui-flag-UG{background-position:0 -3318px}.firebaseui-flag-UM{background-position:0 -3332px}.firebaseui-flag-UN{background-position:0 -3346px}.firebaseui-flag-US{background-position:0 -3360px}.firebaseui-flag-UY{background-position:0 -3374px}.firebaseui-flag-UZ{background-position:0 -3388px}.firebaseui-flag-VA{background-position:0 -3402px}.firebaseui-flag-VC{background-position:0 -3416px}.firebaseui-flag-VE{background-position:0 -3430px}.firebaseui-flag-VG{background-position:0 -3444px}.firebaseui-flag-VI{background-position:0 -3458px}.firebaseui-flag-VN{background-position:0 -3472px}.firebaseui-flag-VU{background-position:0 -3486px}.firebaseui-flag-WF{background-position:0 -3500px}.firebaseui-flag-WS{background-position:0 -3514px}.firebaseui-flag-XK{background-position:0 -3528px}.firebaseui-flag-YE{background-position:0 -3542px}.firebaseui-flag-YT{background-position:0 -3556px}.firebaseui-flag-ZA{background-position:0 -3570px}.firebaseui-flag-ZM{background-position:0 -3584px}.firebaseui-flag-ZW{background-position:0 -3598px}',""]);
},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=h[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(c(r.parts[o],t))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(c(r.parts[o],t));h[r.id]={id:r.id,refs:1,parts:a}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function o(e,t){var n=d(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=d(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function s(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),u(t,e.attrs),o(e,t),t}function u(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,i,c;if(t.transform&&e.css){if(!(c=t.transform(e.css)))return function(){};e.css=c}if(t.singleton){var h=m++;n=p||(p=s(t)),r=l.bind(null,n,h,!1),i=l.bind(null,n,h,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",u(t,e.attrs),o(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=y(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function l(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}var h={},f=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),d=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),p=null,m=0,g=[],y=n(6);e.exports=function(e,t){(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=f()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a];(u=h[s.id]).refs--,o.push(u)}for(e&&r(i(e,t),t),a=0;a<o.length;a++){var u;if(0===(u=o[a]).refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t){e.exports=n(42)}])},function(e,t){"use strict";function n(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case d:case s:case c:case u:case m:return e;default:switch(e=e&&e.$$typeof){case h:case p:case l:return e;default:return t}}case v:case y:case a:return t}}}function r(e){return n(e)===d}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,m=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,y=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,b=i?Symbol.for("react.fundamental"):60117,w=i?Symbol.for("react.responder"):60118;t.typeOf=n,t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=h,t.ContextProvider=l,t.Element=o,t.ForwardRef=p,t.Fragment=s,t.Lazy=v,t.Memo=y,t.Portal=a,t.Profiler=c,t.StrictMode=u,t.Suspense=m,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===c||e===u||e===m||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===l||e.$$typeof===h||e.$$typeof===p||e.$$typeof===b||e.$$typeof===w)},t.isAsyncMode=function(e){return r(e)||n(e)===f},t.isConcurrentMode=r,t.isContextConsumer=function(e){return n(e)===h},t.isContextProvider=function(e){return n(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return n(e)===p},t.isFragment=function(e){return n(e)===s},t.isLazy=function(e){return n(e)===v},t.isMemo=function(e){return n(e)===y},t.isPortal=function(e){return n(e)===a},t.isProfiler=function(e){return n(e)===c},t.isStrictMode=function(e){return n(e)===u},t.isSuspense=function(e){return n(e)===m}},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}function s(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}function c(e){var t=e["aria-current"],n=void 0===t?"page":t,r=e.activeClassName,o=void 0===r?"active":r,s=e.activeStyle,c=e.className,f=e.exact,p=e.isActive,m=e.location,y=e.strict,v=e.style,b=e.to,w=a(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to"]),_="object"==typeof b?b.pathname:b,E=_&&_.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return l.createElement(h.__RouterContext.Consumer,null,function(e){e||d(!1);var t=m?m.pathname:e.location.pathname,r=E?h.matchPath(t,{path:E,exact:f,strict:y}):null,a=!!(p?p(r,e.location):r),_=a?u(c,o):c,S=a?i({},v,s):v;return l.createElement(g,i({"aria-current":a&&n||null,className:_,style:S,to:b},w))})}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n(2)),h=n(59),f=n(13);n(9),n(7);var d=r(n(10)),p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=f.createBrowserHistory(t.props),t}return o(t,e),t.prototype.render=function(){return l.createElement(h.Router,{history:this.history,children:this.props.children})},t}(l.Component),m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=f.createHashHistory(t.props),t}return o(t,e),t.prototype.render=function(){return l.createElement(h.Router,{history:this.history,children:this.props.children})},t}(l.Component),g=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.handleClick=function(e,t){try{this.props.onClick&&this.props.onClick(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||this.props.target&&"_self"!==this.props.target||s(e)||(e.preventDefault(),(this.props.replace?t.replace:t.push)(this.props.to))},n.render=function(){var e=this,t=this.props,n=t.innerRef,r=(t.replace,t.to),o=a(t,["innerRef","replace","to"]);return l.createElement(h.__RouterContext.Consumer,null,function(t){t||d(!1);var a="string"==typeof r?f.createLocation(r,null,null,t.location):r,s=a?t.history.createHref(a):"";return l.createElement("a",i({},o,{onClick:function(n){return e.handleClick(n,t.history)},href:s,ref:n}))})},t}(l.Component);Object.keys(h).forEach(function(e){t[e]=h[e]}),t.BrowserRouter=p,t.HashRouter=m,t.Link=g,t.NavLink=c},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function a(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}function s(e){var t=e.message,n=e.when,r=void 0===n||n;return E.createElement(N.Consumer,null,function(e){if(e||T(!1),!r||e.staticContext)return null;var n=e.history.block;return E.createElement(x,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})})}function u(e){if(R[e])return R[e];var t=C.compile(e);return O<P&&(R[e]=t,O++),t}function c(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:u(e)(t,{pretty:!0})}function l(e){var t=e.computedMatch,n=e.to,r=e.push,o=void 0!==r&&r;return E.createElement(N.Consumer,null,function(e){e||T(!1);var r=e.history,a=e.staticContext,s=o?r.push:r.replace,u=S.createLocation(t?"string"==typeof n?c(n,t.params):i({},n,{pathname:c(n.pathname,t.params)}):n);return a?(s(u),null):E.createElement(x,{onMount:function(){s(u)},onUpdate:function(e,t){var n=S.createLocation(t.to);S.locationsAreEqual(n,i({},u,{key:n.key}))||s(u)},to:n})})}function h(e,t){var n=""+t.end+t.strict+t.sensitive,r=M[n]||(M[n]={});if(r[e])return r[e];var i=[],o={regexp:C(e,i,t),keys:i};return F<L&&(r[e]=o,F++),o}function f(e,t){void 0===t&&(t={}),"string"==typeof t&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce(function(t,n){if(!n)return null;if(t)return t;var r=h(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],f=u.slice(1),d=e===l;return o&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:a.reduce(function(e,t,n){return e[t.name]=f[n],e},{})}},null)}function d(e){return 0===E.Children.count(e)}function p(e){return"/"===e.charAt(0)?e:"/"+e}function m(e,t){return e?i({},t,{pathname:p(e)+t.pathname}):t}function g(e,t){if(!e)return t;var n=p(e);return 0!==t.pathname.indexOf(n)?t:i({},t,{pathname:t.pathname.substr(n.length)})}function y(e){return"string"==typeof e?e:S.createPath(e)}function v(e){return function(){T(!1)}}function b(){}function w(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=a(t,["wrappedComponentRef"]);return E.createElement(N.Consumer,null,function(t){return t||T(!1),E.createElement(e,i({},r,t,{ref:n}))})};return n.displayName=t,n.WrappedComponent=e,I(n,e)}Object.defineProperty(t,"__esModule",{value:!0});var _=r(n(47)),E=r(n(2));n(9),n(7);var S=n(13),T=r(n(10)),C=r(n(61));n(15);var I=r(n(45)),k=function(e){var t=_();return t.displayName=e,t},N=k("Router"),A=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e})),n}o(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return E.createElement(N.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(E.Component),D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=S.createMemoryHistory(t.props),t}return o(t,e),t.prototype.render=function(){return E.createElement(A,{history:this.history,children:this.props.children})},t}(E.Component),x=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(E.Component),R={},P=1e4,O=0,M={},L=1e4,F=0,U=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this;return E.createElement(N.Consumer,null,function(t){t||T(!1);var n=e.props.location||t.location,r=i({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?f(n.pathname,e.props):t.match}),o=e.props,a=o.children,s=o.component,u=o.render;return Array.isArray(a)&&0===a.length&&(a=null),"function"==typeof a&&void 0===(a=a(r))&&(a=null),E.createElement(N.Provider,{value:r},a&&!d(a)?a:r.match?s?E.createElement(s,r):u?u(r):null:null)})},t}(E.Component),B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return b},t.handleBlock=function(){return b},t}o(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,a=void 0===o?{}:o;a.action=t,a.location=m(i,S.createLocation(e)),a.url=y(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,s=e.location,u=void 0===s?"/":s,c=a(e,["basename","context","location"]),l={createHref:function(e){return p(n+y(e))},action:"POP",location:g(n,S.createLocation(u)),push:this.handlePush,replace:this.handleReplace,go:v("go"),goBack:v("goBack"),goForward:v("goForward"),listen:this.handleListen,block:this.handleBlock};return E.createElement(A,i({},c,{history:l,staticContext:o}))},t}(E.Component),q=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this;return E.createElement(N.Consumer,null,function(t){t||T(!1);var n,r,o=e.props.location||t.location;return E.Children.forEach(e.props.children,function(e){if(null==r&&E.isValidElement(e)){var a=(n=e).props.path||e.props.from;r=a?f(o.pathname,i({},e.props,{path:a})):t.match}}),r?E.cloneElement(n,{location:o,computedMatch:r}):null})},t}(E.Component);t.MemoryRouter=D,t.Prompt=s,t.Redirect=l,t.Route=U,t.Router=A,t.StaticRouter=B,t.Switch=q,t.generatePath=c,t.matchPath=f,t.withRouter=w,t.__RouterContext=N},function(e,t,n){"use strict";e.exports=n(58)},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){function r(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=v.exec(e));){var l=n[0],h=n[1],f=n.index;if(a+=e.slice(o,f),o=f+l.length,h)a+=h[1];else{var d=e[o],p=n[2],m=n[3],g=n[4],y=n[5],b=n[6],w=n[7];a&&(r.push(a),a="");var _=null!=p&&null!=d&&d!==p,E="+"===b||"*"===b,S="?"===b||"*"===b,T=n[2]||s,C=g||y;r.push({name:m||i++,prefix:p||"",delimiter:T,optional:S,repeat:E,partial:_,asterisk:!!w,pattern:C?c(C):w?".*":"[^"+u(T)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function i(e,t){return s(r(e,t))}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",s=n||{},u=r||{},c=u.pretty?o:encodeURIComponent,l=0;l<e.length;l++){var h=e[l];if("string"!=typeof h){var f,d=s[h.name];if(null==d){if(h.optional){h.partial&&(i+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(y(d)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(f=c(d[p]),!t[l].test(f))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(f)+"`");i+=(0===p?h.prefix:h.delimiter)+f}}else{if(f=h.asterisk?a(d):c(d),!t[l].test(f))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+f+'"');i+=h.prefix+f}}else i+=h}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e.sensitive?"":"i"}function f(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}function d(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(g(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",h(n));return l(o,t)}function p(e,t,n){return m(r(e,n),t,n)}function m(e,t,n){y(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=n.end!==!1,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=u(s);else{var c=u(s.prefix),f="(?:"+s.pattern+")";t.push(s),s.repeat&&(f+="(?:"+c+f+")*"),f=s.optional?s.partial?c+"("+f+")?":"(?:"+c+"("+f+"))?":c+"("+f+")",o+=f}}var d=u(n.delimiter||"/"),p=o.slice(-d.length)===d;return r||(o=(p?o.slice(0,-d.length):o)+"(?:"+d+"(?=$))?"),o+=i?"$":r&&p?"":"(?="+d+"|$)",l(new RegExp("^"+o,h(n)),t)}function g(e,t,n){return y(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?f(e,t):y(e)?d(e,t,n):p(e,t,n)}var y=n(60);e.exports=g,e.exports.parse=r,e.exports.compile=i,e.exports.tokensToFunction=s,e.exports.tokensToRegExp=m;var v=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t,n){"use strict";"undefined"==typeof Promise&&(n(50).enable(),window.Promise=n(49)),n(68),Object.assign=n(8)},function(e,t,n){"use strict";function r(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}function i(e,t,n){this.props=e,this.context=t,this.refs=L,this.updater=n||M}function o(){}function a(e,t,n){this.props=e,this.context=t,this.refs=L,this.updater=n||M}function s(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)V.call(t,r)&&!j.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:E,type:e,key:o,ref:a,props:i,_owner:q.current}}function u(e,t){return{$$typeof:E,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c(e){return"object"==typeof e&&null!==e&&e.$$typeof===E}function l(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function h(e,t,n,r){if(K.length){var i=K.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function f(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>K.length&&K.push(e)}function d(e,t,n,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case E:case S:a=!0}}if(a)return n(i,e,""===t?"."+m(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var u=t+m(o,s);a+=d(o,u,n,i)}else if(null===e||"object"!=typeof e?u=null:(u=O&&e[O]||e["@@iterator"],u="function"==typeof u?u:null),"function"==typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=t+m(o,s++),a+=d(o,u,n,i);else if("object"===o)throw n=""+e,r(Error(31),"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return a}function p(e,t,n){return null==e?0:d(e,"",t,n)}function m(e,t){return"object"==typeof e&&null!==e&&null!=e.key?l(e.key):t.toString(36)}function g(e,t){e.func.call(e.context,t,e.count++)}function y(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?v(e,r,n,function(e){return e}):null!=e&&(c(e)&&(e=u(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(W,"$&/")+"/")+n)),r.push(e))}function v(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(W,"$&/")+"/"),t=h(t,o,r,i),p(e,y,t),f(t)}function b(){var e=U.current;if(null===e)throw r(Error(321));return e}var w=n(8),_="function"==typeof Symbol&&Symbol.for,E=_?Symbol.for("react.element"):60103,S=_?Symbol.for("react.portal"):60106,T=_?Symbol.for("react.fragment"):60107,C=_?Symbol.for("react.strict_mode"):60108,I=_?Symbol.for("react.profiler"):60114,k=_?Symbol.for("react.provider"):60109,N=_?Symbol.for("react.context"):60110,A=_?Symbol.for("react.forward_ref"):60112,D=_?Symbol.for("react.suspense"):60113,x=_?Symbol.for("react.suspense_list"):60120,R=_?Symbol.for("react.memo"):60115,P=_?Symbol.for("react.lazy"):60116;_&&Symbol.for("react.fundamental"),_&&Symbol.for("react.responder");var O="function"==typeof Symbol&&Symbol.iterator,M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L={};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw r(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=i.prototype;var F=a.prototype=new o;F.constructor=a,w(F,i.prototype),F.isPureReactComponent=!0;var U={current:null},B={suspense:null},q={current:null},V=Object.prototype.hasOwnProperty,j={key:!0,ref:!0,__self:!0,__source:!0},W=/\/+/g,K=[],Q={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return v(e,r,null,t,n),r},forEach:function(e,t,n){return null==e?e:(t=h(null,null,t,n),p(e,g,t),void f(t))},count:function(e){return p(e,function(){return null},null)},toArray:function(e){var t=[];return v(e,t,null,function(e){return e}),t},only:function(e){if(!c(e))throw r(Error(143));return e}},createRef:function(){return{current:null}},Component:i,PureComponent:a,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:N,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:k,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:A,render:e}},lazy:function(e){return{$$typeof:P,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:R,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return b().useCallback(e,t)},useContext:function(e,t){return b().useContext(e,t)},useEffect:function(e,t){return b().useEffect(e,t)},useImperativeHandle:function(e,t,n){return b().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return b().useLayoutEffect(e,t)},useMemo:function(e,t){return b().useMemo(e,t)},useReducer:function(e,t,n){return b().useReducer(e,t,n)},useRef:function(e){return b().useRef(e)},useState:function(e){return b().useState(e)},Fragment:T,Profiler:I,StrictMode:C,Suspense:D,unstable_SuspenseList:x,createElement:s,cloneElement:function(e,t,n){if(null===e||void 0===e)throw r(Error(267),e);var i=void 0,o=w({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=q.current),void 0!==t.key&&(a=""+t.key);var c=void 0;e.type&&e.type.defaultProps&&(c=e.type.defaultProps);for(i in t)V.call(t,i)&&!j.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(i=arguments.length-2,1===i)o.children=n;else if(1<i){c=Array(i);for(var l=0;l<i;l++)c[l]=arguments[l+2];o.children=c}return{$$typeof:E,type:e.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(e){var t=s.bind(null,e);return t.type=e,t},isValidElement:c,version:"16.9.0",unstable_withSuspenseConfig:function(e,t){var n=B.suspense;B.suspense=void 0===t?null:t;try{e()}finally{B.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:U,ReactCurrentBatchConfig:B,ReactCurrentOwner:q,IsSomeRendererActing:{current:!1},assign:w}},G={default:Q},z=G&&Q||G;e.exports=z.default||z},function(e,t){"use strict";function n(e){return"/"===e.charAt(0)}function r(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&n(e),s=t&&n(t),u=a||s;if(e&&n(e)?o=i:i.length&&(o.pop(),o=o.concat(i)),!o.length)return"/";var c=void 0;if(o.length){var l=o[o.length-1];c="."===l||".."===l||""===l}else c=!1;for(var h=0,f=o.length;f>=0;f--){var d=o[f];"."===d?r(o,f):".."===d?(r(o,f),h++):h&&(r(o,f),h--)}if(!u)for(;h--;h)o.unshift("..");!u||""===o[0]||o[0]&&n(o[0])||o.unshift("");var p=o.join("/");return c&&"/"!==p.substr(-1)&&(p+="/"),p}t.__esModule=!0,t.default=i,e.exports=t.default},function(e,t){"use strict";function n(e,t){var n=e.next;if(n===e)M=null;else{e===M&&(M=n);var r=e.previous;r.next=n,n.previous=r}e.next=e.previous=null,n=e.callback,r=U;var i=F;U=e.priorityLevel,F=e;try{var o=e.expirationTime<=t;switch(U){case 1:var a=n(o);break;case 2:a=n(o);break;case 3:a=n(o);break;case 4:a=n(o);break;case 5:a=n(o)}}catch(e){throw e}finally{U=r,F=i}if("function"==typeof a)if(t=e.expirationTime,e.callback=a,null===M)M=e.next=e.previous=e;else{a=null,o=M;do{if(t<=o.expirationTime){a=o;break}o=o.next}while(o!==M);null===a?a=M:a===M&&(M=e),t=a.previous,t.next=a.previous=e,e.next=a,e.previous=t}}function r(e){if(null!==L&&L.startTime<=e)do{var t=L,n=t.next;if(t===n)L=null;else{L=n;var r=t.previous;r.next=n,n.previous=r}t.next=t.previous=null,s(t,t.expirationTime)}while(null!==L&&L.startTime<=e)}function i(e){V=!1,r(e),q||(null!==M?(q=!0,u(o)):null!==L&&c(i,L.startTime-e))}function o(e,o){q=!1,V&&(V=!1,l()),r(o),B=!0;try{if(e){if(null!==M)do n(M,o),o=t.unstable_now(),r(o);while(null!==M&&!h())}else for(;null!==M&&M.expirationTime<=o;)n(M,o),o=t.unstable_now(),r(o);return null!==M||(null!==L&&c(i,L.startTime-o),!1)}finally{B=!1}}function a(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function s(e,t){if(null===M)M=e.next=e.previous=e;else{var n=null,r=M;do{if(t<r.expirationTime){n=r;break}r=r.next}while(r!==M);null===n?n=M:n===M&&(M=e),t=n.previous,t.next=n.previous=e,e.next=n,e.previous=t}}Object.defineProperty(t,"__esModule",{value:!0});var u=void 0,c=void 0,l=void 0,h=void 0,f=void 0;if(t.unstable_now=void 0,t.unstable_forceFrameRate=void 0,"undefined"==typeof window||"function"!=typeof MessageChannel){var d=null,p=null,m=function(){if(null!==d)try{var e=t.unstable_now();d(!0,e),d=null}catch(e){throw setTimeout(m,0),e}};t.unstable_now=function(){return Date.now()},u=function(e){null!==d?setTimeout(u,0,e):(d=e,setTimeout(m,0))},c=function(e,t){p=setTimeout(e,t)},l=function(){clearTimeout(p)},h=function(){return!1},f=t.unstable_forceFrameRate=function(){}}else{var g=window.performance,y=window.Date,v=window.setTimeout,b=window.clearTimeout,w=window.requestAnimationFrame,_=window.cancelAnimationFrame;"undefined"!=typeof console&&("function"!=typeof w&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),t.unstable_now="object"==typeof g&&"function"==typeof g.now?function(){return g.now()}:function(){return y.now()};var E=!1,S=null,T=-1,C=-1,I=33.33,k=-1,N=-1,A=0,D=!1;h=function(){return t.unstable_now()>=A},f=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<e?(I=Math.floor(1e3/e),D=!0):(I=33.33,D=!1)};var x=function(){if(null!==S){var e=t.unstable_now(),n=0<A-e;try{S(n,e)||(S=null)}catch(e){throw P.postMessage(null),e}}},R=new MessageChannel,P=R.port2;R.port1.onmessage=x;var O=function(e){if(null===S)N=k=-1,E=!1;else{E=!0,w(function(e){b(T),O(e)});var n=function(){A=t.unstable_now()+I/2,x(),T=v(n,3*I)};if(T=v(n,3*I),-1!==k&&.1<e-k){var r=e-k;!D&&-1!==N&&r<I&&N<I&&(I=r<N?N:r,8.33>I&&(I=8.33)),N=r}k=e,A=e+I,P.postMessage(null)}};u=function(e){S=e,E||(E=!0,w(function(e){O(e)}))},c=function(e,n){C=v(function(){e(t.unstable_now())},n)},l=function(){b(C),C=-1}}var M=null,L=null,F=null,U=3,B=!1,q=!1,V=!1,j=f;t.unstable_ImmediatePriority=1,
t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=U;U=e;try{return t()}finally{U=n}},t.unstable_next=function(e){switch(U){case 1:case 2:case 3:var t=3;break;default:t=U}var n=U;U=t;try{return e()}finally{U=n}},t.unstable_scheduleCallback=function(e,n,r){var h=t.unstable_now();if("object"==typeof r&&null!==r){var f=r.delay;f="number"==typeof f&&0<f?h+f:h,r="number"==typeof r.timeout?r.timeout:a(e)}else r=a(e),f=h;if(r=f+r,e={callback:n,priorityLevel:e,startTime:f,expirationTime:r,next:null,previous:null},f>h){if(r=f,null===L)L=e.next=e.previous=e;else{n=null;var d=L;do{if(r<d.startTime){n=d;break}d=d.next}while(d!==L);null===n?n=L:n===L&&(L=e),r=n.previous,r.next=n.previous=e,e.next=n,e.previous=r}null===M&&L===e&&(V?l():V=!0,c(i,f-h))}else s(e,r),q||B||(q=!0,u(o));return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(e===t)e===M?M=null:e===L&&(L=null);else{e===M?M=t:e===L&&(L=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var t=U;return function(){var n=U;U=t;try{return e.apply(this,arguments)}finally{U=n}}},t.unstable_getCurrentPriorityLevel=function(){return U},t.unstable_shouldYield=function(){var e=t.unstable_now();return r(e),null!==F&&null!==M&&M.startTime<=e&&M.expirationTime<F.expirationTime||h()},t.unstable_requestPaint=j,t.unstable_continueExecution=function(){q||B||(q=!0,u(o))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return M}},function(e,t,n){"use strict";e.exports=n(65)},function(e,t){"use strict";function n(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,r){return n(e,t[r])});var i="undefined"==typeof e?"undefined":r(e),o="undefined"==typeof t?"undefined":r(t);if(i!==o)return!1;if("object"===i){var a=e.valueOf(),s=t.valueOf();if(a!==e||s!==t)return n(a,s);var u=Object.keys(e),c=Object.keys(t);return u.length===c.length&&u.every(function(r){return n(e[r],t[r])})}return!1}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n,e.exports=t.default},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&b(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];g.redirect=function(e,t){if(E.indexOf(t)===-1)throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=d,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var i=new d(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new g(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)}]));
//# sourceMappingURL=main.8bb3d277.js.map